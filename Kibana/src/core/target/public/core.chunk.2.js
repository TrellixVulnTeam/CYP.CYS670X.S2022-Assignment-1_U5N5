(window.core_bundle_jsonpfunction=window.core_bundle_jsonpfunction||[]).push([[2],Array(78).concat([function(e,t,n){"use strict";t.__esModule=!0,t.SESSION_TIMEOUT=t.OUTCOME_FAILURE=t.OUTCOME_SUCCESS=t.LAYOUT_SHIFT=t.FIRST_INPUT=t.TRUNCATED_TYPE=t.APM_SERVER=t.LOGGING_SERVICE=t.CONFIG_SERVICE=t.TRANSACTIONS=t.ERRORS=t.TRANSACTION_TYPE_ORDER=t.USER_INTERACTION=t.TEMPORARY_TYPE=t.KEYWORD_LIMIT=t.LARGEST_CONTENTFUL_PAINT=t.FIRST_CONTENTFUL_PAINT=t.RESOURCE=t.NAVIGATION=t.MEASURE=t.PAINT=t.LONG_TASK=t.HTTP_REQUEST_TYPE=t.LOCAL_CONFIG_KEY=t.AFTER_EVENT=t.BEFORE_EVENT=t.ERROR=t.EVENT_TARGET=t.HISTORY=t.FETCH=t.XMLHTTPREQUEST=t.CONFIG_CHANGE=t.TRANSACTION_END=t.TRANSACTION_START=t.USER_TIMING_THRESHOLD=t.TYPE_CUSTOM=t.NAME_UNKNOWN=t.ROUTE_CHANGE=t.PAGE_LOAD=t.MAX_SPAN_DURATION=t.REUSABILITY_THRESHOLD=t.RESOURCE_INITIATOR_TYPES=t.REMOVE_EVENT_LISTENER_STR=t.ADD_EVENT_LISTENER_STR=t.INVOKE=t.SCHEDULE=void 0;t.SCHEDULE="schedule";t.INVOKE="invoke";t.ADD_EVENT_LISTENER_STR="addEventListener";t.REMOVE_EVENT_LISTENER_STR="removeEventListener";t.RESOURCE_INITIATOR_TYPES=["link","css","script","img","xmlhttprequest","fetch","beacon","iframe"];t.REUSABILITY_THRESHOLD=5e3;t.MAX_SPAN_DURATION=3e5;var r="page-load";t.PAGE_LOAD=r;var i="route-change";t.ROUTE_CHANGE=i;var a="custom";t.TYPE_CUSTOM=a;var o="user-interaction";t.USER_INTERACTION=o;var s="http-request";t.HTTP_REQUEST_TYPE=s;var c="temporary";t.TEMPORARY_TYPE=c;t.NAME_UNKNOWN="Unknown";var u=[r,i,o,s,a,c];t.TRANSACTION_TYPE_ORDER=u;t.OUTCOME_SUCCESS="success";t.OUTCOME_FAILURE="failure";t.USER_TIMING_THRESHOLD=60;t.TRANSACTION_START="transaction:start";t.TRANSACTION_END="transaction:end";t.CONFIG_CHANGE="config:change";t.XMLHTTPREQUEST="xmlhttprequest";t.FETCH="fetch";t.HISTORY="history";t.EVENT_TARGET="eventtarget";t.ERROR="error";t.BEFORE_EVENT=":before";t.AFTER_EVENT=":after";t.LOCAL_CONFIG_KEY="elastic_apm_config";t.LONG_TASK="longtask";t.PAINT="paint";t.MEASURE="measure";t.NAVIGATION="navigation";t.RESOURCE="resource";t.FIRST_CONTENTFUL_PAINT="first-contentful-paint";t.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint";t.FIRST_INPUT="first-input";t.LAYOUT_SHIFT="layout-shift";t.ERRORS="errors";t.TRANSACTIONS="transactions";t.CONFIG_SERVICE="ConfigService";t.LOGGING_SERVICE="LoggingService";t.APM_SERVER="ApmServer";t.TRUNCATED_TYPE=".truncated";t.KEYWORD_LIMIT=1024;t.SESSION_TIMEOUT=18e5},function(e,t,n){"use strict";t.__esModule=!0,t.extend=function(e){return h(e,i.call(arguments,1),!1)},t.merge=function(e){return h(e,i.call(arguments,1),!0)},t.isUndefined=_,t.noop=function(){},t.baseExtend=h,t.bytesToHex=f,t.isCORSSupported=s,t.isObject=p,t.isFunction=v,t.isPlatformSupported=function(){return a&&"function"==typeof Set&&"function"==typeof JSON.stringify&&o&&"function"==typeof o.now&&s()},t.isDtHeaderValid=function(e){return/^[\da-f]{2}-[\da-f]{32}-[\da-f]{16}-[\da-f]{2}$/.test(e)&&"00000000000000000000000000000000"!==e.slice(3,35)&&"0000000000000000"!==e.slice(36,52)},t.parseDtHeaderValue=function(e){var t=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})$/.exec(e);if(t){var n="00"!==t[4];return{traceId:t[2],id:t[3],sampled:n}}},t.getServerTimingInfo=function(e){void 0===e&&(e=[]);for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.name,a=r.duration,o=r.description,s=i;o&&(s+=";desc="+o),a&&(s+=";dur="+a),t.push(s)}return t.join(", ")},t.getDtHeaderValue=function(e){if(e&&e.traceId&&e.id&&e.parentId){var t=e.sampled?"01":"00",n=e.sampled?e.id:e.parentId;return"00-"+e.traceId+"-"+n+"-"+t}},t.getTSHeaderValue=function(e){var t=e.sampleRate;if("number"!=typeof t||String(t).length>256)return;return"es=s:"+t},t.getCurrentScript=function(){if("undefined"!=typeof document){var e=document.currentScript;return e||g()}},t.getElasticScript=g,t.getTimeOrigin=function(){return o.timing.fetchStart},t.generateRandomId=function(e){return f(l()).substr(0,e)},t.getEarliestSpan=function(e){for(var t=e[0],n=1;n<e.length;n++){var r=e[n];t._start>r._start&&(t=r)}return t},t.getLatestNonXHRSpan=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n];-1===String(r.type).indexOf("external")&&(!t||t._end<r._end)&&(t=r)}return t},t.getDuration=function(e,t){if(_(t)||_(e))return null;return parseInt(t-e)},t.getTime=function(e){return"number"==typeof e&&e>=0?e:E()},t.now=E,t.rng=l,t.checkSameOrigin=function e(t,n){var r=!1;"string"==typeof n?r=t===n:n&&"function"==typeof n.test?r=n.test(t):Array.isArray(n)&&n.forEach((function(n){r||(r=e(t,n))}));return r},t.scheduleMacroTask=function(e){setTimeout(e,0)},t.scheduleMicroTask=function(e){r.Promise.resolve().then(e)},t.setLabel=function(e,t,n){if(!n||!e)return;var r=m(e),i=typeof t;null!=t&&"boolean"!==i&&"number"!==i&&(t=String(t));return n[r]=t,n},t.setRequestHeader=function(e,t,n){"function"==typeof e.setRequestHeader?e.setRequestHeader(t,n):e.headers&&"function"==typeof e.headers.append?e.headers.append(t,n):e[t]=n},t.stripQueryStringFromUrl=function(e){return e&&e.split("?")[0]},t.find=function(e,t,n){if(null==e)throw new TypeError("array is null or not defined");var r=Object(e),i=r.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");var a=0;for(;a<i;){var o=r[a];if(t.call(n,o,a,r))return o;a++}return},t.removeInvalidChars=m,t.isPerfTimelineSupported=function(){return"function"==typeof o.getEntriesByType},t.isPerfTypeSupported=function(e){return"undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.indexOf(e)>=0},t.isBrowser=t.PERF=void 0;var r=n(85),i=[].slice,a="undefined"!=typeof window;t.isBrowser=a;var o=a&&"undefined"!=typeof performance?performance:{};function s(){return"withCredentials"in new window.XMLHttpRequest}t.PERF=o;for(var c=[],u=0;u<256;++u)c[u]=(u+256).toString(16).substr(1);function f(e){for(var t=[],n=0;n<e.length;n++)t.push(c[e[n]]);return t.join("")}var d=new Uint8Array(16);function l(){return"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues(d):"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues?msCrypto.getRandomValues(d):d}function p(e){return null!==e&&"object"==typeof e}function v(e){return"function"==typeof e}function h(e,t,n){for(var r=0,i=t.length;r<i;++r){var a=t[r];if(p(a)||v(a))for(var o=Object.keys(a),s=0,c=o.length;s<c;s++){var u=o[s],f=a[u];n&&p(f)?(p(e[u])||(e[u]=Array.isArray(f)?[]:{}),h(e[u],[f],!1)):e[u]=f}}return e}function g(){if("undefined"!=typeof document)for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;t++){var r=e[t];if(r.src.indexOf("elastic")>0)return r}}function _(e){return void 0===e}function m(e){return e.replace(/[.*"]/g,"_")}function E(){return o.now()}},,,function(e,t,n){"use strict";t.__esModule=!0,t.state=t.__DEV__=void 0;t.__DEV__=!1;var r={bootstrapTime:null,lastHiddenStart:Number.MIN_SAFE_INTEGER};t.state=r},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(112),i=function(){function e(){}return e.prototype.context=function(){return this._context()},e.prototype.tracer=function(){return this._tracer()},e.prototype.setOperationName=function(e){return this._setOperationName(e),this},e.prototype.setBaggageItem=function(e,t){return this._setBaggageItem(e,t),this},e.prototype.getBaggageItem=function(e){return this._getBaggageItem(e)},e.prototype.setTag=function(e,t){var n;return this._addTags(((n={})[e]=t,n)),this},e.prototype.addTags=function(e){return this._addTags(e),this},e.prototype.log=function(e,t){return this._log(e,t),this},e.prototype.logEvent=function(e,t){return this._log({event:e,payload:t})},e.prototype.finish=function(e){this._finish(e)},e.prototype._context=function(){return r.spanContext},e.prototype._tracer=function(){return r.tracer},e.prototype._setOperationName=function(e){},e.prototype._setBaggageItem=function(e,t){},e.prototype._getBaggageItem=function(e){},e.prototype._addTags=function(e){},e.prototype._log=function(e,t){},e.prototype._finish=function(e){},e}();t.Span=i,t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.Promise=void 0;var r,i=(r=n(201))&&r.__esModule?r:{default:r};var a={};n(79).isBrowser?a=window:"undefined"!=typeof self&&(a=self);var o="Promise"in a?a.Promise:i.default;t.Promise=o},function(e,t,n){"use strict";t.__esModule=!0,t.apmSymbol=r,t.patchMethod=function(e,t,n){var i=e;for(;i&&!i.hasOwnProperty(t);)i=Object.getPrototypeOf(i);!i&&e[t]&&(i=e);var a,o=r(t);if(i&&!(a=i[o])){if(a=i[o]=i[t],function(e){if(!e)return!0;if(!1===e.writable)return!1;return!("function"==typeof e.get&&void 0===e.set)}(i&&Object.getOwnPropertyDescriptor(i,t))){var s=n(a,o,t);i[t]=function(){return s(this,arguments)},c=i[t],u=a,c[r("OriginalDelegate")]=u}}var c,u;return a},t.XHR_METHOD=t.XHR_URL=t.XHR_SYNC=t.XHR_IGNORE=t.globalState=void 0;function r(e){return"__apm_symbol__"+e}t.globalState={fetchInProgress:!1};var i=r("xhrIgnore");t.XHR_IGNORE=i;var a=r("xhrSync");t.XHR_SYNC=a;var o=r("xhrURL");t.XHR_URL=o;var s=r("xhrMethod");t.XHR_METHOD=s},,,,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.getPageContext=u,t.addSpanContext=function(e,t){if(!t)return;var n;switch(e.type){case"external":n=function(e){var t,n=e.url,i=e.method,a=e.target,o=e.response,s=new r.Url(n),u=c(s),f={http:{method:i,url:s.href},destination:u};a&&void 0!==a.status?t=a.status:o&&(t=o.status);return f.http.status_code=t,f}(t);break;case"resource":n=function(e){var t=e.entry,n=e.url,i=c(new r.Url(n));return{http:{url:n,response:s(t)},destination:i}}(t);break;case"hard-navigation":n=function(e){var t=e.url;return{destination:c(new r.Url(t))}}(t)}e.addContext(n)},t.addTransactionContext=function(e,t){var n=void 0===t?{}:t,r=(n.tags,function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,o)),c=u(),f={};if(e.type===i.PAGE_LOAD&&(0,a.isPerfTimelineSupported)()){var d=a.PERF.getEntriesByType(i.NAVIGATION);d&&d.length>0&&(f={response:s(d[0])})}e.addContext(c,f,r)};var r=n(95),i=n(78),a=n(79),o=["tags"];function s(e){var t=e.transferSize,n=e.encodedBodySize,r=e.decodedBodySize,i=e.serverTiming,o={transfer_size:t,encoded_body_size:n,decoded_body_size:r},s=(0,a.getServerTimingInfo)(i);return s&&(o.headers={"server-timing":s}),o}function c(e){var t=e.port,n=e.protocol,r=e.hostname,i=function(e,t){return""===e&&(e="http:"===t?"80":"https:"===t?"443":""),e}(t,n),a=91===r.charCodeAt(0)&&93===r.charCodeAt(r.length-1),o=r;return a&&(o=r.slice(1,-1)),{service:{resource:r+":"+i,name:"",type:""},address:o,port:Number(i)}}function u(){return{page:{referer:document.referrer,url:location.href}}}},function(e,t,n){"use strict";t.__esModule=!0,t.slugifyUrl=function(e,t){void 0===t&&(t=2);for(var n=new o(e),r=n.query,i=n.path.substring(1).split("/"),a=":id",s=/\W|_/g,c=/[0-9]/g,u=/[a-z]/g,f=/[A-Z]/g,d=[],l=!1,p=0;p<i.length;p++){var v=i[p];if(l||p>t-1){v&&d.push("*");break}if((v.match(s)||[]).length>=2)d.push(a),l=!0;else{var h=(v.match(c)||[]).length;if(h>3||v.length>3&&h/v.length>=.3)d.push(a),l=!0;else{var g=(v.match(f)||[]).length,_=(v.match(u)||[]).length/v.length,m=g/v.length;v.length>5&&(m>.3&&m<.6||_>.3&&_<.6)?(d.push(a),l=!0):v&&d.push(v)}}}return"/"+(d.length>=2?d.join("/"):d.join(""))+(r?"?{query}":"")},t.Url=void 0;var r=n(79);var i=[["#","hash"],["?","query"],["/","path"],["@","auth",1],[NaN,"host",void 0,1]],a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,o=function(){function e(e){var t,n=this.extractProtocol(e||""),r=n.protocol,a=n.address,o=n.slashes,s=!r&&!o,c=this.getLocation(),u=i.slice();a=a.replace("\\","/"),o||(u[2]=[NaN,"path"]);for(var f=0;f<u.length;f++){var d=u[f],l=d[0],p=d[1];if("string"==typeof l){if(~(t=a.indexOf(l))){var v=d[2];if(v){var h=a.lastIndexOf(l);t=Math.max(t,h),this[p]=a.slice(0,t),a=a.slice(t+v)}else this[p]=a.slice(t),a=a.slice(0,t)}}else this[p]=a,a="";this[p]=this[p]||s&&d[3]&&c[p]||"",d[3]&&(this[p]=this[p].toLowerCase())}if(s&&"/"!==this.path.charAt(0)&&(this.path="/"+this.path),this.relative=s,this.protocol=r||c.protocol,this.hostname=this.host,this.port="",/:\d+$/.test(this.host)){var g=this.host.split(":"),_=g.pop(),m=g.join(":");!function(e,t){switch(t){case"http:":return"80"===e;case"https:":return"443"===e}return!0}(_,this.protocol)?this.port=_:this.host=m,this.hostname=m}this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString()}var t=e.prototype;return t.toString=function(){var e=this.protocol;if(e+="//",this.auth){var t="[REDACTED]",n=this.auth.split(":");e+=(n[0]?t:"")+(n[1]?":"+t:"")+"@"}return e+=this.host,e+=this.path,e+=this.query,e+=this.hash},t.getLocation=function(){var e={};return r.isBrowser&&(e=window),e.location},t.extractProtocol=function(e){var t=a.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],address:t[3]}},e}();t.Url=o},function(e,t,n){"use strict";t.__esModule=!0,t.truncate=f,t.truncateModel=function e(t,n,r){void 0===t&&(t={});void 0===r&&(r=n);for(var i=Object.keys(t),a=[],o=function(o){var s=i[o],c=!0===t[s]?a:t[s];Array.isArray(c)?"*"===s?Object.keys(r).forEach((function(e){return l(r,e,c)})):l(r,s,c):e(c,n,r[s])},s=0;s<i.length;s++)o(s);return n},t.RESPONSE_MODEL=t.METADATA_MODEL=t.ERROR_MODEL=t.TRANSACTION_MODEL=t.SPAN_MODEL=void 0;var r=n(78),i={service:{name:[r.KEYWORD_LIMIT,!0],version:!0,agent:{version:[r.KEYWORD_LIMIT,!0]},environment:!0},labels:{"*":!0}};t.METADATA_MODEL=i;var a={"*":!0,headers:{"*":!0}};t.RESPONSE_MODEL=a;var o={user:{id:!0,email:!0,username:!0},tags:{"*":!0},http:{response:a},destination:{address:[r.KEYWORD_LIMIT],service:{"*":[r.KEYWORD_LIMIT,!0]}},response:a},s={name:[r.KEYWORD_LIMIT,!0],type:[r.KEYWORD_LIMIT,!0],id:[r.KEYWORD_LIMIT,!0],trace_id:[r.KEYWORD_LIMIT,!0],parent_id:[r.KEYWORD_LIMIT,!0],transaction_id:[r.KEYWORD_LIMIT,!0],subtype:!0,action:!0,context:o};t.SPAN_MODEL=s;var c={name:!0,parent_id:!0,type:[r.KEYWORD_LIMIT,!0],id:[r.KEYWORD_LIMIT,!0],trace_id:[r.KEYWORD_LIMIT,!0],span_count:{started:[r.KEYWORD_LIMIT,!0]},context:o};t.TRANSACTION_MODEL=c;var u={id:[r.KEYWORD_LIMIT,!0],trace_id:!0,transaction_id:!0,parent_id:!0,culprit:!0,exception:{type:!0},transaction:{type:!0},context:o};function f(e,t,n,i){return void 0===t&&(t=r.KEYWORD_LIMIT),void 0===n&&(n=!1),void 0===i&&(i="N/A"),n&&d(e)&&(e=i),"string"==typeof e?e.substring(0,t):e}function d(e){return null==e||""===e||void 0===e}function l(e,t,n){var r=f(e[t],n[0],n[1]);d(r)?delete e[t]:e[t]=r}t.ERROR_MODEL=u},function(e,t,n){"use strict";t.__esModule=!0,t.ServiceFactory=t.serviceCreators=void 0;var r,i=u(n(204)),a=u(n(209)),o=u(n(210)),s=n(78),c=n(82);function u(e){return e&&e.__esModule?e:{default:e}}var f=((r={})[s.CONFIG_SERVICE]=function(){return new a.default},r[s.LOGGING_SERVICE]=function(){return new o.default({prefix:"[Elastic APM] "})},r[s.APM_SERVER]=function(e){var t=e.getService([s.CONFIG_SERVICE,s.LOGGING_SERVICE]),n=t[0],r=t[1];return new i.default(n,r)},r);t.serviceCreators=f;var d=function(){function e(){this.instances={},this.initialized=!1}var t=e.prototype;return t.init=function(){if(!this.initialized){this.initialized=!0;var e=this.getService(s.CONFIG_SERVICE);e.init();var t=this.getService([s.LOGGING_SERVICE,s.APM_SERVER]),n=t[0],r=t[1];e.events.observe(s.CONFIG_CHANGE,(function(){var t=e.get("logLevel");n.setLevel(t)})),r.init()}},t.getService=function(e){var t=this;return"string"==typeof e?(this.instances[e]||("function"==typeof f[e]?this.instances[e]=f[e](this):c.__DEV__&&console.log("Cannot get service, No creator for: "+e)),this.instances[e]):Array.isArray(e)?e.map((function(e){return t.getService(e)})):void 0},e}();t.ServiceFactory=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(107))&&r.__esModule?r:{default:r},a=n(94);function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function r(t,n,r){var i;if((i=e.call(this,t,n,r)||this).parentId=i.options.parentId,i.subtype=void 0,i.action=void 0,-1!==i.type.indexOf(".")){var a=i.type.split(".",3);i.type=a[0],i.subtype=a[1],i.action=a[2]}return i.sync=i.options.sync,i}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r.prototype.end=function(t,n){e.prototype.end.call(this,t),(0,a.addSpanContext)(this,n)},r}(i.default);t.default=s},function(e,t,n){"use strict";t.__esModule=!0,t.patchAll=function(){d||(d=!0,(0,i.patchXMLHttpRequest)((function(e,t){f.send(u.XMLHTTPREQUEST,[e,t])})),(0,a.patchFetch)((function(e,t){f.send(u.FETCH,[e,t])})),(0,o.patchHistory)((function(e,t){f.send(u.HISTORY,[e,t])})),(0,s.patchEventTarget)((function(e,t){f.send(u.EVENT_TARGET,[e,t])})));return f},t.patchEventHandler=void 0;var r,i=n(213),a=n(214),o=n(215),s=n(216),c=(r=n(108))&&r.__esModule?r:{default:r},u=n(78);var f=new c.default;t.patchEventHandler=f;var d=!1},,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.createServiceFactory=function(){return(0,i.registerServices)(),(0,r.registerServices)(),new a.ServiceFactory};var r=n(196),i=n(211),a=n(97);t.ServiceFactory=a.ServiceFactory;var o=n(79);t.isPlatformSupported=o.isPlatformSupported,t.scheduleMicroTask=o.scheduleMicroTask,t.scheduleMacroTask=o.scheduleMacroTask,t.isBrowser=o.isBrowser;var s=n(99);t.patchAll=s.patchAll,t.patchEventHandler=s.patchEventHandler;var c=n(78);t.PAGE_LOAD=c.PAGE_LOAD,t.ERROR=c.ERROR,t.CONFIG_SERVICE=c.CONFIG_SERVICE,t.LOGGING_SERVICE=c.LOGGING_SERVICE,t.APM_SERVER=c.APM_SERVER;var u=n(220);t.getInstrumentationFlags=u.getInstrumentationFlags;var f,d=(f=n(221))&&f.__esModule?f:{default:f};t.afterFrame=d.default;var l=n(222);t.bootstrap=l.bootstrap;var p=n(223);t.createTracer=p.createTracer},function(e,t,n){"use strict";t.__esModule=!0,t.getPageLoadMarks=g,t.captureNavigation=function(e){if(!e.captureTimings)return;var t=e._end;if(e.type===a.PAGE_LOAD){if(e.marks&&e.marks.custom){var n=e.marks.custom;Object.keys(n).forEach((function(t){n[t]+=e._start}))}e._start=0;var r=o.PERF.timing;f(r,r.fetchStart,0,t).forEach((function(t){t.traceId=e.traceId,t.sampled=e.sampled,t.pageResponse&&e.options.pageLoadSpanId&&(t.id=e.options.pageLoadSpanId),e.spans.push(t)})),e.addMarks(g(r))}if((0,o.isPerfTimelineSupported)()){var i=e._start;p(o.PERF.getEntriesByType(a.RESOURCE),s.state.bootstrapTime,i,t).forEach((function(t){return e.spans.push(t)})),v(o.PERF.getEntriesByType(a.MEASURE),i,t).forEach((function(t){return e.spans.push(t)}))}},t.createNavigationTimingSpans=f,t.createResourceTimingSpans=p,t.createUserTimingSpans=v,t.COMPRESSED_NAV_TIMING_MARKS=t.NAVIGATION_TIMING_MARKS=void 0;var r,i=(r=n(98))&&r.__esModule?r:{default:r},a=n(78),o=n(79),s=n(82);var c=[["domainLookupStart","domainLookupEnd","Domain lookup"],["connectStart","connectEnd","Making a connection to the server"],["requestStart","responseEnd","Requesting and receiving the document"],["domLoading","domInteractive","Parsing the document, executing sync. scripts"],["domContentLoadedEventStart","domContentLoadedEventEnd",'Fire "DOMContentLoaded" event'],["loadEventStart","loadEventEnd",'Fire "load" event']];function u(e,t,n,r,i){return void 0===i&&(i=0),"number"==typeof e&&"number"==typeof t&&e>=i&&t>e&&e-i>=n&&t-i<=r&&t-e<a.MAX_SPAN_DURATION&&e-i<a.MAX_SPAN_DURATION&&t-i<a.MAX_SPAN_DURATION}function f(e,t,n,r){for(var a=[],o=0;o<c.length;o++){var s=e[c[o][0]],f=e[c[o][1]];if(u(s,f,n,r,t)){var d=new i.default(c[o][2],"hard-navigation.browser-timing"),l=null;"requestStart"===c[o][0]&&(d.pageResponse=!0,l={url:location.origin}),d._start=s-t,d.end(f-t,l),a.push(d)}}return a}function d(e){var t=e.name,n=e.initiatorType,r=e.startTime,a=e.responseEnd,s="resource";n&&(s+="."+n);var c=(0,o.stripQueryStringFromUrl)(t),u=new i.default(c,s);return u._start=r,u.end(a,{url:t,entry:e}),u}function l(e,t){return null!=t&&e>t}function p(e,t,n,r){for(var i=[],o=0;o<e.length;o++){var s=e[o],c=s.initiatorType,f=s.name,p=s.startTime,v=s.responseEnd;-1!==a.RESOURCE_INITIATOR_TYPES.indexOf(c)&&null!=f&&(("xmlhttprequest"===c||"fetch"===c)&&(/intake\/v\d+\/rum\/events/.test(f)||l(p,t))||u(p,v,n,r)&&i.push(d(e[o])))}return i}function v(e,t,n){for(var r=[],o=0;o<e.length;o++){var s=e[o],c=s.name,f=s.startTime,d=s.duration,l=f+d;if(!(d<=a.USER_TIMING_THRESHOLD)&&u(f,l,t,n)){var p=new i.default(c,"app");p._start=f,p.end(l),r.push(p)}}return r}var h=["fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"];t.NAVIGATION_TIMING_MARKS=h;function g(e){var t=function(e){var t=e.fetchStart,n=e.navigationStart,r=e.responseStart,i=e.responseEnd;if(t>=n&&r>=t&&i>=r){var a={};return h.forEach((function(n){var r=e[n];r&&r>=t&&(a[n]=parseInt(r-t))})),a}return null}(e);return null==t?null:{navigationTiming:t,agent:{timeToFirstByte:t.responseStart,domInteractive:t.domInteractive,domComplete:t.domComplete}}}t.COMPRESSED_NAV_TIMING_MARKS=["fs","ls","le","cs","ce","qs","rs","re","dl","di","ds","de","dc","es","ee"]},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(79),i=n(78),a=function(){function e(e,t,n){void 0===n&&(n={}),e||(e=i.NAME_UNKNOWN),t||(t=i.TYPE_CUSTOM),this.name=e,this.type=t,this.options=n,this.id=n.id||(0,r.generateRandomId)(16),this.traceId=n.traceId,this.sampled=n.sampled,this.sampleRate=n.sampleRate,this.timestamp=n.timestamp,this._start=(0,r.getTime)(n.startTime),this._end=void 0,this.ended=!1,this.outcome=void 0,this.onEnd=n.onEnd}var t=e.prototype;return t.ensureContext=function(){this.context||(this.context={})},t.addLabels=function(e){this.ensureContext();var t=this.context;t.tags||(t.tags={}),Object.keys(e).forEach((function(n){return(0,r.setLabel)(n,e[n],t.tags)}))},t.addContext=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0!==t.length&&(this.ensureContext(),r.merge.apply(void 0,[this.context].concat(t)))},t.end=function(e){this.ended||(this.ended=!0,this._end=(0,r.getTime)(e),this.callOnEnd())},t.callOnEnd=function(){"function"==typeof this.onEnd&&this.onEnd(this)},t.duration=function(){return(0,r.getDuration)(this._start,this._end)},e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(78),i=function(){function e(){this.observers={}}var t=e.prototype;return t.observe=function(e,t){var n=this;if("function"==typeof t)return this.observers[e]||(this.observers[e]=[]),this.observers[e].push(t),function(){var r=n.observers[e].indexOf(t);r>-1&&n.observers[e].splice(r,1)}},t.sendOnly=function(e,t){var n=this.observers[e];n&&n.forEach((function(e){try{e.apply(void 0,t)}catch(e){console.log(e,e.stack)}}))},t.send=function(e,t){this.sendOnly(e+r.BEFORE_EVENT,t),this.sendOnly(e,t),this.sendOnly(e+r.AFTER_EVENT,t)},e}();t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(98)),i=c(n(107)),a=n(79),o=n(78),s=n(218);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){var t,n;function i(t,n,r){var i;return(i=e.call(this,t,n,r)||this).traceId=(0,a.generateRandomId)(),i.marks=void 0,i.spans=[],i._activeSpans={},i._activeTasks=new Set,i.blocked=!1,i.captureTimings=!1,i.breakdownTimings=[],i.sampleRate=i.options.transactionSampleRate,i.sampled=Math.random()<=i.sampleRate,i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var c=i.prototype;return c.addMarks=function(e){this.marks=(0,a.merge)(this.marks||{},e)},c.mark=function(e){var t=(0,a.removeInvalidChars)(e),n=(0,a.now)()-this._start,r={};r[t]=n,this.addMarks({custom:r})},c.canReuse=function(){var e=this.options.reuseThreshold||o.REUSABILITY_THRESHOLD;return!!this.options.canReuse&&!this.ended&&(0,a.now)()-this._start<e},c.redefine=function(e,t,n){e&&(this.name=e),t&&(this.type=t),n&&(0,a.extend)(this.options,n)},c.startSpan=function(e,t,n){var i=this;if(!this.ended){var o=(0,a.extend)({},n);o.onEnd=function(e){i._onSpanEnd(e)},o.traceId=this.traceId,o.sampled=this.sampled,o.sampleRate=this.sampleRate,o.parentId||(o.parentId=this.id);var s=new r.default(e,t,o);return this._activeSpans[s.id]=s,o.blocking&&this.addTask(s.id),s}},c.isFinished=function(){return!this.blocked&&0===this._activeTasks.size},c.detectFinish=function(){this.isFinished()&&this.end()},c.end=function(e){if(!this.ended){for(var t in this.ended=!0,this._end=(0,a.getTime)(e),this._activeSpans){var n=this._activeSpans[t];n.type=n.type+o.TRUNCATED_TYPE,n.end(e)}this.callOnEnd()}},c.captureBreakdown=function(){this.breakdownTimings=(0,s.captureBreakdown)(this)},c.block=function(e){this.blocked=e,this.blocked||this.detectFinish()},c.addTask=function(e){return e||(e="task-"+(0,a.generateRandomId)(16)),this._activeTasks.add(e),e},c.removeTask=function(e){this._activeTasks.delete(e)&&this.detectFinish()},c.resetFields=function(){this.spans=[],this.sampleRate=0},c._onSpanEnd=function(e){this.spans.push(e),delete this._activeSpans[e.id],this.removeTask(e.id)},c.isManaged=function(){return!!this.options.managed},i}(i.default);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(225),i=n(112),a=n(84),o=function(){function e(){}return e.prototype.startSpan=function(e,t){if(void 0===t&&(t={}),t.childOf){var n=r.childOf(t.childOf);t.references?t.references.push(n):t.references=[n],delete t.childOf}return this._startSpan(e,t)},e.prototype.inject=function(e,t,n){return e instanceof a.default&&(e=e.context()),this._inject(e,t,n)},e.prototype.extract=function(e,t){return this._extract(e,t)},e.prototype._startSpan=function(e,t){return i.span},e.prototype._inject=function(e,t,n){},e.prototype._extract=function(e,t){return i.spanContext},e}();t.Tracer=o,t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FORMAT_BINARY="binary",t.FORMAT_TEXT_MAP="text_map",t.FORMAT_HTTP_HEADERS="http_headers",t.REFERENCE_CHILD_OF="child_of",t.REFERENCE_FOLLOWS_FROM="follows_from"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(84),i=n(227),a=n(110);t.tracer=null,t.spanContext=null,t.span=null,t.initialize=function(){t.tracer=new a.default,t.span=new r.default,t.spanContext=new i.default}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(84),a=n(79),o=(r=n(109))&&r.__esModule?r:{default:r};function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function r(t,n){var r;return(r=e.call(this)||this).__tracer=t,r.span=n,r.isTransaction=n instanceof o.default,r.spanContext={id:n.id,traceId:n.traceId,sampled:n.sampled},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var i=r.prototype;return i._context=function(){return this.spanContext},i._tracer=function(){return this.__tracer},i._setOperationName=function(e){this.span.name=e},i._addTags=function(e){var t=(0,a.extend)({},e);if(t.type&&(this.span.type=t.type,delete t.type),this.isTransaction){var n=t["user.id"],r=t["user.username"],i=t["user.email"];(n||r||i)&&(this.span.addContext({user:{id:n,username:r,email:i}}),delete t["user.id"],delete t["user.username"],delete t["user.email"])}this.span.addLabels(t)},i._log=function(e,t){"error"===e.event&&(e["error.object"]?this.__tracer.errorLogging.logError(e["error.object"]):e.message&&this.__tracer.errorLogging.logError(e.message))},i._finish=function(e){this.span.end(),e&&(this.span._end=e-(0,a.getTimeOrigin)())},r}(i.Span);t.default=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.registerServices=function(){o.serviceCreators.ErrorLogging=function(e){var t=e.getService([a.APM_SERVER,a.CONFIG_SERVICE,"TransactionService"]),n=t[0],r=t[1],o=t[2];return new i.default(n,r,o)}};var r,i=(r=n(197))&&r.__esModule?r:{default:r},a=n(78),o=n(97)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(198),i=n(79),a=n(94),o=n(96),s=["tags"];var c=["stack","message"];var u=function(){function e(e,t,n){this._apmServer=e,this._configService=t,this._transactionService=n}var t=e.prototype;return t.createErrorDataModel=function(e){var t=(0,r.createStackTraces)(e),n=(0,r.filterInvalidFrames)(t),u="(inline script)",f=n[n.length-1];f&&f.filename&&(u=f.filename);var d=e.message,l=e.error,p=d,v="",h={};if(l&&"object"==typeof l){p=p||l.message,v=l.name;var g=function(e){var t=!1,n={};if(Object.keys(e).forEach((function(r){if(!(c.indexOf(r)>=0)){var i=e[r];if(null!=i&&"function"!=typeof i){if("object"==typeof i){if("function"!=typeof i.toISOString)return;i=i.toISOString()}n[r]=i,t=!0}}})),t)return n}(l);g&&(h.custom=g)}v||p&&p.indexOf(":")>-1&&(v=p.split(":")[0]);var _=this._transactionService.getCurrentTransaction(),m=_?_.context:{},E=this._configService.get("context"),T=(E.tags,function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(E,s)),S=(0,a.getPageContext)(),y=(0,i.merge)({},S,m,T,h),R={id:(0,i.generateRandomId)(),culprit:u,exception:{message:p,stacktrace:n,type:v},context:y};return _&&(R=(0,i.extend)(R,{trace_id:_.traceId,parent_id:_.id,transaction_id:_.id,transaction:{type:_.type,sampled:_.sampled}})),(0,o.truncateModel)(o.ERROR_MODEL,R)},t.logErrorEvent=function(e){if(void 0!==e){var t=this.createErrorDataModel(e);void 0!==t.exception.message&&this._apmServer.addError(t)}},t.registerListeners=function(){var e=this;window.addEventListener("error",(function(t){return e.logErrorEvent(t)})),window.addEventListener("unhandledrejection",(function(t){return e.logPromiseEvent(t)}))},t.logPromiseEvent=function(e){var t,n="Unhandled promise rejection: ",r=e.reason;(null==r&&(r="<no reason specified>"),"string"==typeof r.message)?t={error:r,message:n+(r.name?r.name+": ":"")+r.message}:t={message:n+(r="object"==typeof r?"<object>":"function"==typeof r?"<function>":r)};this.logErrorEvent(t)},t.logError=function(e){var t={};return"string"==typeof e?t.message=e:t.error=e,this.logErrorEvent(t)},e}();t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.createStackTraces=function(e){var t=e.error,n=e.filename,r=e.lineno,a=e.colno,o=[];if(t)try{o=i.default.parse(t)}catch(e){}0===o.length&&(o=[{fileName:n,lineNumber:r,columnNumber:a}]);return(s=o,s.map((function(e){return e.functionName&&(e.functionName=(t=e.functionName,n=t.split("/"),t=(t=(t=n.length>1?["Object",n[n.length-1]].join("."):n[0]).replace(/.<$/gi,".<anonymous>")).replace(/^Anonymous function$/,"<anonymous>"),t=(n=t.split(".")).length>1?n[n.length-1]:n[0])),e;var t,n}))).map((function(e){var t=e.fileName,n=e.lineNumber,r=e.columnNumber,i=e.functionName,a=void 0===i?"<anonymous>":i;if(!t&&!n)return{};if(!r&&!n)return{};var o=function(e){void 0===e&&(e="");"<anonymous>"===e&&(e="");return e}(t),s=function(e){var t=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.indexOf(t)>-1&&(e=e.replace(t+"/",""));return e}(o);return function(e){if(e)return 0===window.location.href.indexOf(e);return!1}(o)&&(s="(inline script)"),{abs_path:t,filename:s,function:a,lineno:n,colno:r}}));var s},t.filterInvalidFrames=function(e){return e.filter((function(e){var t=e.filename,n=e.lineno;return void 0!==t&&void 0!==n}))};var r,i=(r=n(199))&&r.__esModule?r:{default:r}},function(e,t,n){var r,i,a;!function(o,s){"use strict";i=[n(200)],void 0===(a="function"==typeof(r=function(e){var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;function i(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=t.call(n,e[i]);return r}function a(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var r=[],i=0;i<e.length;i++)t.call(n,e[i])&&r.push(e[i]);return r}function o(e,t){if("function"==typeof Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return i(a(t.stack.split("\n"),(function(e){return!!e.match(n)}),this),(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),i=n.join(" ")||void 0,a=o(["eval","<anonymous>"],r[0])>-1?void 0:r[0];return new e(i,void 0,a,r[1],r[2],t)}),this)},parseFFOrSafari:function(t){return i(a(t.stack.split("\n"),(function(e){return!e.match(r)}),this),(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var n=t.split("@"),r=this.extractLocation(n.pop()),i=n.join("@")||void 0;return new e(i,void 0,r[0],r[1],r[2],t)}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),i=[],a=2,o=r.length;a<o;a+=2){var s=n.exec(r[a]);s&&i.push(new e(void 0,void 0,s[2],s[1],void 0,r[a]))}return i},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),i=[],a=0,o=r.length;a<o;a+=2){var s=n.exec(r[a]);s&&i.push(new e(s[3]||void 0,void 0,s[2],s[1],void 0,r[a]))}return i},parseOpera11:function(n){return i(a(n.stack.split("\n"),(function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this),(function(t){var n,r=t.split("@"),i=this.extractLocation(r.pop()),a=r.shift()||"",o=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(n=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e(o,s,i[0],i[1],i[2],t)}),this)}}})?r.apply(t,i):r)||(e.exports=a)}()},function(e,t,n){var r,i,a;!function(n,o){"use strict";i=[],void 0===(a="function"==typeof(r=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,n,r,i,a){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==i&&this.setColumnNumber(i),void 0!==a&&this.setSource(a)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})?r.apply(t,i):r)||(e.exports=a)}()},function(e,t,n){"use strict";(function(t){var n=setTimeout;function r(e){return Boolean(e&&void 0!==e.length)}function i(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}s(t.promise,r)}else(1===e._state?s:c)(t.promise,e._value)}))):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void d((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){c(e,t)}var r,i}function c(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,s(t,e))}),(function(e){n||(n=!0,c(t,e))}))}catch(e){if(n)return;n=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(i);return o(this,new f(e,t,n)),n},a.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},a.all=function(e){return new a((function(t,n){if(!r(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var a=i.length;function o(e,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,(function(t){o(e,t)}),n)}i[e]=r,0==--a&&t(i)}catch(e){n(e)}}for(var s=0;s<i.length;s++)o(s,i[s])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){if(!r(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,o=e.length;i<o;i++)a.resolve(e[i]).then(t,n)}))},a._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){n(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=a}).call(this,n(202).setImmediate)},function(e,t,n){(function(e){var r=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(203),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(27))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,s,c=1,u={},f=!1,d=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){v(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){v(e.data)},r=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){v(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(v,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&v(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}),l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},l.clearImmediate=p}function p(e){delete u[e]}function v(e){if(f)setTimeout(v,0,e);else{var t=u[e];if(t){f=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),f=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(27),n(35))},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=p(n(205)),i=p(n(206)),a=p(n(207)),o=n(86),s=n(96),c=n(78),u=n(79),f=n(85),d=n(208),l=n(82);function p(e){return e&&e.__esModule?e:{default:e}}var v=function(){function e(e,t){this._configService=e,this._loggingService=t,this.queue=void 0,this.throttleEvents=u.noop}var t=e.prototype;return t.init=function(){var e=this,t=this._configService.get("queueLimit"),n=this._configService.get("flushInterval"),a=this._configService.get("eventsLimit");this.queue=new r.default((function(t){var n=e.sendEvents(t);n&&n.catch((function(t){e._loggingService.warn("Failed sending events!",e._constructError(t))}))}),{queueLimit:t,flushInterval:n}),this.throttleEvents=(0,i.default)(this.queue.add.bind(this.queue),(function(){return e._loggingService.warn("Dropped events due to throttling!")}),{limit:a,interval:6e4})},t._postJson=function(e,t){var n=this,r={payload:t,headers:{"Content-Type":"application/x-ndjson"},beforeSend:this._configService.get("apmRequest")};return(0,d.compressPayload)(r).catch((function(e){return l.__DEV__&&n._loggingService.debug("Compressing the payload using CompressionStream API failed",e.message),r})).then((function(t){return n._makeHttpRequest("POST",e,t)})).then((function(e){return e.responseText}))},t._constructError=function(e){var t=e.url,n=e.status,r=e.responseText;if(void 0===n)return e;var i=t+" HTTP status: "+n;if(l.__DEV__&&r)try{var a=[],o=JSON.parse(r);o.errors&&o.errors.length>0&&(o.errors.forEach((function(e){return a.push(e.message)})),i+=" "+a.join(","))}catch(e){this._loggingService.debug("Error parsing response from APM server",e)}return new Error(i)},t._makeHttpRequest=function(e,t,n){var r=void 0===n?{}:n,i=r.timeout,a=void 0===i?1e4:i,s=r.payload,c=r.headers,u=r.beforeSend;return new f.Promise((function(n,r){var i=new window.XMLHttpRequest;if(i[o.XHR_IGNORE]=!0,i.open(e,t,!0),i.timeout=a,c)for(var f in c)c.hasOwnProperty(f)&&i.setRequestHeader(f,c[f]);i.onreadystatechange=function(){if(4===i.readyState){var e=i.status,a=i.responseText;0===e||e>399&&e<600?r({url:t,status:e,responseText:a}):n(i)}},i.onerror=function(){var e=i.status,n=i.responseText;r({url:t,status:e,responseText:n})};var d=!0;"function"==typeof u&&(d=u({url:t,method:e,headers:c,payload:s,xhr:i})),d?i.send(s):r({url:t,status:0,responseText:"Request rejected by user configuration."})}))},t.fetchConfig=function(e,t){var n=this,r=this._configService.get("serverUrl")+"/config/v1/rum/agents";if(!e)return f.Promise.reject("serviceName is required for fetching central config.");r+="?service.name="+e,t&&(r+="&service.environment="+t);var i=this._configService.getLocalConfig();i&&(r+="&ifnonematch="+i.etag);var a=this._configService.get("apmRequest");return this._makeHttpRequest("GET",r,{timeout:5e3,beforeSend:a}).then((function(e){var t=e.status,r=e.responseText;if(304===t)return i;var a=JSON.parse(r),o=e.getResponseHeader("etag");return o&&(a.etag=o.replace(/["]/g,""),n._configService.setLocalConfig(a,!0)),a})).catch((function(e){var t=n._constructError(e);return f.Promise.reject(t)}))},t.createMetaData=function(){var e=this._configService,t={service:{name:e.get("serviceName"),version:e.get("serviceVersion"),agent:{name:"rum-js",version:e.version},language:{name:"javascript"},environment:e.get("environment")},labels:e.get("context.tags")};return(0,s.truncateModel)(s.METADATA_MODEL,t)},t.addError=function(e){var t;this.throttleEvents(((t={})[c.ERRORS]=e,t))},t.addTransaction=function(e){var t;this.throttleEvents(((t={})[c.TRANSACTIONS]=e,t))},t.ndjsonErrors=function(e,t){var n=t?"e":"error";return e.map((function(e){var r;return a.default.stringify(((r={})[n]=t?(0,d.compressError)(e):e,r))}))},t.ndjsonMetricsets=function(e){return e.map((function(e){return a.default.stringify({metricset:e})})).join("")},t.ndjsonTransactions=function(e,t){var n=this,r=t?"x":"transaction";return e.map((function(e){var i,o="",s="";return t||(e.spans&&(o=e.spans.map((function(e){return a.default.stringify({span:e})})).join(""),delete e.spans),e.breakdown&&(s=n.ndjsonMetricsets(e.breakdown),delete e.breakdown)),a.default.stringify(((i={})[r]=t?(0,d.compressTransaction)(e):e,i))+o+s}))},t.sendEvents=function(e){var t,n;if(0!==e.length){for(var r=[],i=[],o=0;o<e.length;o++){var s=e[o];s[c.TRANSACTIONS]&&r.push(s[c.TRANSACTIONS]),s[c.ERRORS]&&i.push(s[c.ERRORS])}if(0!==r.length||0!==i.length){var u=this._configService,f=((t={})[c.TRANSACTIONS]=r,t[c.ERRORS]=i,t),l=u.applyFilters(f);if(l){var p=u.get("apiVersion"),v=p>2,h=[],g=this.createMetaData(),_=v?"m":"metadata";h.push(a.default.stringify(((n={})[_]=v?(0,d.compressMetadata)(g):g,n)));var m=(h=h.concat(this.ndjsonErrors(l[c.ERRORS],v),this.ndjsonTransactions(l[c.TRANSACTIONS],v))).join(""),E=u.get("serverUrlPrefix")||"/intake/v"+p+"/rum/events",T=u.get("serverUrl")+E;return this._postJson(T,m)}this._loggingService.warn("Dropped payload due to filtering!")}}},e}();t.default=v},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(){function e(e,t){void 0===t&&(t={}),this.onFlush=e,this.items=[],this.queueLimit=t.queueLimit||-1,this.flushInterval=t.flushInterval||0,this.timeoutId=void 0}var t=e.prototype;return t._setTimer=function(){var e=this;this.timeoutId=setTimeout((function(){return e.flush()}),this.flushInterval)},t._clear=function(){void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.items=[]},t.flush=function(){this.onFlush(this.items),this._clear()},t.add=function(e){this.items.push(e),-1!==this.queueLimit&&this.items.length>=this.queueLimit?this.flush():void 0===this.timeoutId&&this._setTimer()},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){var r,i=this,a=n.limit,o=n.interval,s=0;return function(){return s++,void 0===r&&(r=setTimeout((function(){s=0,r=void 0}),o)),s>a&&"function"==typeof t?t.apply(i,arguments):e.apply(i,arguments)}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(){function e(){}return e.stringify=function(e){return JSON.stringify(e)+"\n"},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.compressMetadata=function(e){var t=e.service,n=e.labels,r=t.agent,i=t.language;return{se:{n:t.name,ve:t.version,a:{n:r.name,ve:r.version},la:{n:i.name},en:t.environment},l:n}},t.compressTransaction=function(e){var t=e.spans.map((function(t){var n={id:t.id,n:t.name,t:t.type,s:t.start,d:t.duration,c:o(t.context),o:t.outcome,sr:t.sample_rate};return t.parent_id!==e.id&&(n.pid=t.parent_id),!0===t.sync&&(n.sy=!0),t.subtype&&(n.su=t.subtype),t.action&&(n.ac=t.action),n})),n={id:e.id,tid:e.trace_id,n:e.name,t:e.type,d:e.duration,c:o(e.context),k:s(e.marks),me:u(e.breakdown),y:t,yc:{sd:t.length},sm:e.sampled,sr:e.sample_rate,o:e.outcome};if(e.experience){var r=e.experience,i=r.cls,a=r.fid,c=r.tbt,f=r.longtask;n.exp={cls:i,fid:a,tbt:c,lt:f}}if(e.session){var d=e.session,l=d.id,p=d.sequence;n.ses={id:l,seq:p}}return n},t.compressError=function(e){var t=e.exception,n={id:e.id,cl:e.culprit,ex:{mg:t.message,st:(i=t.stacktrace,i.map((function(e){return{ap:e.abs_path,f:e.filename,fn:e.function,li:e.lineno,co:e.colno}}))),t:e.type},c:o(e.context)},r=e.transaction;var i;r&&(n.tid=e.trace_id,n.pid=e.parent_id,n.xid=e.transaction_id,n.x={t:r.type,sm:r.sampled});return n},t.compressMetricsets=u,t.compressPayload=function(e,t){void 0===t&&(t="gzip");var n="function"==typeof CompressionStream;return new r.Promise((function(r){if(!n)return r(e);var i=e.payload,a=e.headers,o=e.beforeSend,s=new Blob([i]).stream().pipeThrough(new CompressionStream(t));return new Response(s).blob().then((function(e){return a["Content-Encoding"]=t,r({payload:e,headers:a,beforeSend:o})}))}))};var r=n(85),i=n(106);function a(e){return{ts:e.transfer_size,ebs:e.encoded_body_size,dbs:e.decoded_body_size}}function o(e){if(!e)return null;var t={},n=e.page,r=e.http,i=e.response,o=e.destination,s=e.user,c=e.custom;if(n&&(t.p={rf:n.referer,url:n.url}),r&&(t.h=function(e){var t={},n=e.method,r=e.status_code,i=e.url,o=e.response;return t.url=i,n&&(t.mt=n),r&&(t.sc=r),o&&(t.r=a(o)),t}(r)),i&&(t.r=a(i)),o){var u=o.service;t.dt={se:{n:u.name,t:u.type,rc:u.resource},ad:o.address,po:o.port}}return s&&(t.u={id:s.id,un:s.username,em:s.email}),c&&(t.cu=c),t}function s(e){if(!e)return null;var t=function(e){if(!e)return null;var t={};return i.COMPRESSED_NAV_TIMING_MARKS.forEach((function(n,r){var a=i.NAVIGATION_TIMING_MARKS[r];t[n]=e[a]})),t}(e.navigationTiming);return{nt:t,a:c(t,e.agent)}}function c(e,t){var n={};if(e&&(n={fb:e.rs,di:e.di,dc:e.dc}),t){var r=t.firstContentfulPaint,i=t.largestContentfulPaint;r&&(n.fp=r),i&&(n.lp=i)}return 0===Object.keys(n).length?null:n}function u(e){return e.map((function(e){var t=e.span,n=e.samples;return null!=t?{y:{t:t.type},sa:{ysc:{v:n["span.self_time.count"].value},yss:{v:n["span.self_time.sum.us"].value}}}:{sa:{xdc:{v:n["transaction.duration.count"].value},xds:{v:n["transaction.duration.sum.us"].value},xbc:{v:n["transaction.breakdown.count"].value}}}}))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(79),a=(r=n(108))&&r.__esModule?r:{default:r},o=n(78);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(){function e(){this.config={serviceName:"",serviceVersion:"",environment:"",serverUrl:"http://localhost:8200",serverUrlPrefix:"",active:!0,instrument:!0,disableInstrumentations:[],logLevel:"warn",breakdownMetrics:!1,ignoreTransactions:[],eventsLimit:80,queueLimit:-1,flushInterval:500,distributedTracing:!0,distributedTracingOrigins:[],distributedTracingHeaderName:"traceparent",pageLoadTraceId:"",pageLoadSpanId:"",pageLoadSampled:!1,pageLoadTransactionName:"",propagateTracestate:!1,transactionSampleRate:1,centralConfig:!1,monitorLongtasks:!0,apiVersion:2,context:{},session:!1,apmRequest:null},this.events=new a.default,this.filters=[],this.version=""}var t=e.prototype;return t.init=function(){var e=function(e){if(!e)return{};for(var t={},n=/^data-([\w-]+)$/,r=e.attributes,i=0;i<r.length;i++){var a=r[i];n.test(a.nodeName)&&(t[a.nodeName.match(n)[1].split("-").map((function(e,t){return t>0?e.charAt(0).toUpperCase()+e.substring(1):e})).join("")]=a.value||a.nodeValue)}return t}((0,i.getCurrentScript)());this.setConfig(e)},t.setVersion=function(e){this.version=e},t.addFilter=function(e){if("function"!=typeof e)throw new Error("Argument to must be function");this.filters.push(e)},t.applyFilters=function(e){for(var t=0;t<this.filters.length;t++)if(!(e=this.filters[t](e)))return;return e},t.get=function(e){return e.split(".").reduce((function(e,t){return e&&e[t]}),this.config)},t.setUserContext=function(e){void 0===e&&(e={});var t={},n=e,r=n.id,a=n.username,o=n.email;"number"!=typeof r&&"string"!=typeof r||(t.id=r),"string"==typeof a&&(t.username=a),"string"==typeof o&&(t.email=o),this.config.context.user=(0,i.extend)(this.config.context.user||{},t)},t.setCustomContext=function(e){void 0===e&&(e={}),this.config.context.custom=(0,i.extend)(this.config.context.custom||{},e)},t.addLabels=function(e){var t=this;this.config.context.tags||(this.config.context.tags={}),Object.keys(e).forEach((function(n){return(0,i.setLabel)(n,e[n],t.config.context.tags)}))},t.setConfig=function(e){void 0===e&&(e={});var t=e,n=t.transactionSampleRate,r=t.serverUrl;r&&(e.serverUrl=r.replace(/\/+$/,"")),(0,i.isUndefined)(n)||(n<1e-4&&n>0&&(n=1e-4),e.transactionSampleRate=Math.round(1e4*n)/1e4),(0,i.merge)(this.config,e),this.events.send(o.CONFIG_CHANGE,[this.config])},t.validate=function(e){void 0===e&&(e={});var t=["serviceName","serverUrl"],n={missing:[],invalid:[]};Object.keys(e).forEach((function(r){-1===t.indexOf(r)||e[r]||n.missing.push(r)})),e.serviceName&&!/^[a-zA-Z0-9 _-]+$/.test(e.serviceName)&&n.invalid.push({key:"serviceName",value:e.serviceName,allowed:"a-z, A-Z, 0-9, _, -, <space>"});var r=e.transactionSampleRate;return void 0!==r&&("number"!=typeof r||isNaN(r)||r<0||r>1)&&n.invalid.push({key:"transactionSampleRate",value:r,allowed:"Number between 0 and 1"}),n},t.getLocalConfig=function(){var e=sessionStorage;this.config.session&&(e=localStorage);var t=e.getItem(o.LOCAL_CONFIG_KEY);if(t)return JSON.parse(t)},t.setLocalConfig=function(e,t){if(e){if(t)e=s({},this.getLocalConfig(),e);var n=sessionStorage;this.config.session&&(n=localStorage),n.setItem(o.LOCAL_CONFIG_KEY,JSON.stringify(e))}},e}();t.default=c},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(79),i=function(){function e(e){void 0===e&&(e={}),this.levels=["trace","debug","info","warn","error"],this.level=e.level||"warn",this.prefix=e.prefix||"",this.resetLogMethods()}var t=e.prototype;return t.shouldLog=function(e){return this.levels.indexOf(e)>=this.levels.indexOf(this.level)},t.setLevel=function(e){e!==this.level&&(this.level=e,this.resetLogMethods())},t.resetLogMethods=function(){var e=this;this.levels.forEach((function(t){e[t]=e.shouldLog(t)?function(){var e=t;"trace"!==t&&"debug"!==t||(e="info");var n=arguments;if(n[0]=this.prefix+n[0],console){var r=console[e]||console.log;"function"==typeof r&&r.apply(console,n)}}:r.noop}))},e}();t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.registerServices=function(){o.serviceCreators.TransactionService=function(e){var t=e.getService([a.LOGGING_SERVICE,a.CONFIG_SERVICE]),n=t[0],r=t[1];return new i.default(n,r)},o.serviceCreators.PerformanceMonitoring=function(e){var t=e.getService([a.APM_SERVER,a.CONFIG_SERVICE,a.LOGGING_SERVICE,"TransactionService"]),n=t[0],i=t[1],o=t[2],s=t[3];return new r.default(n,i,o,s)}};var r=s(n(212)),i=s(n(217)),a=n(78),o=n(97);function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.groupSmallContinuouslySimilarSpans=f,t.adjustTransaction=d,t.default=void 0;var r=n(79),i=n(95),a=n(99),o=n(86),s=n(78),c=n(96),u=n(82);function f(e,t,n){e.sort((function(e,t){return e._start-t._start}));var r=[],i=1;return e.forEach((function(a,o){if(0===r.length)r.push(a);else{var s=r[r.length-1],c=s.type===a.type&&s.subtype===a.subtype&&s.action===a.action&&s.name===a.name&&a.duration()/t<n&&(a._start-s._end)/t<n,u=e.length===o+1;c&&(i++,s._end=a._end),i>1&&(!c||u)&&(s.name=i+"x "+s.name,i=1),c||r.push(a)}})),r}function d(e){if(e.sampled){var t=e.spans.filter((function(t){return t.duration()>0&&t._start>=e._start&&t._end<=e._end}));if(e.isManaged()){var n=f(t,e.duration(),.05);e.spans=n}else e.spans=t}else e.resetFields();return e}var l=function(){function e(e,t,n,r){this._apmServer=e,this._configService=t,this._logginService=n,this._transactionService=r}var t=e.prototype;return t.init=function(e){var t=this;void 0===e&&(e={}),this._configService.events.observe(s.TRANSACTION_END+s.AFTER_EVENT,(function(e){var n=t.createTransactionPayload(e);n&&t._apmServer.addTransaction(n)})),e[s.HISTORY]&&a.patchEventHandler.observe(s.HISTORY,this.getHistorySub()),e[s.XMLHTTPREQUEST]&&a.patchEventHandler.observe(s.XMLHTTPREQUEST,this.getXHRSub()),e[s.FETCH]&&a.patchEventHandler.observe(s.FETCH,this.getFetchSub()),e[s.EVENT_TARGET]&&a.patchEventHandler.observe(s.EVENT_TARGET,this.getEventTargetSub())},t.getEventTargetSub=function(){var e=this._transactionService;return function(t,n){if(t===s.SCHEDULE&&n.source===s.EVENT_TARGET&&"click"===n.eventType){var r=n.target,i=r.tagName.toLowerCase(),a=i;if(r.dataset.transactionName)a=r.dataset.transactionName;else{var o=r.getAttribute("name");o&&(a=i+'["'+o+'"]')}var c=e.startTransaction("Click - "+a,s.USER_INTERACTION,{managed:!0,canReuse:!0,reuseThreshold:300});if(c){var u=r.getAttribute("class");u&&c.addContext({custom:{classes:u}})}}}},t.getHistorySub=function(){var e=this._transactionService;return function(t,n){n.source===s.HISTORY&&t===s.INVOKE&&e.startTransaction(n.data.title,"route-change",{managed:!0,canReuse:!0})}},t.getXHRSub=function(){var e=this;return function(t,n){n.source!==s.XMLHTTPREQUEST||o.globalState.fetchInProgress||e.processAPICalls(t,n)}},t.getFetchSub=function(){var e=this;return function(t,n){n.source===s.FETCH&&e.processAPICalls(t,n)}},t.processAPICalls=function(e,t){var n=this._configService,a=this._transactionService;if(e===s.SCHEDULE&&t.data){var o=t.data,c=new i.Url(o.url),f=o.method+" "+(c.relative?c.path:(0,r.stripQueryStringFromUrl)(c.href));a.getCurrentTransaction()||a.startTransaction(f,s.HTTP_REQUEST_TYPE,{managed:!0});var d=a.startSpan(f,"external.http",{blocking:!0});if(!d)return;var l=n.get("distributedTracing"),p=n.get("distributedTracingOrigins"),v=new i.Url(window.location.href),h=(0,r.checkSameOrigin)(c.origin,v.origin)||(0,r.checkSameOrigin)(c.origin,p),g=o.target;if(l&&h&&g)this.injectDtHeader(d,g),n.get("propagateTracestate")&&this.injectTSHeader(d,g);else u.__DEV__&&this._logginService.debug("Could not inject distributed tracing header to the request origin ('"+c.origin+"') from the current origin ('"+v.origin+"')");o.sync&&(d.sync=o.sync),o.span=d}else if(e===s.INVOKE){var _=t.data;if(_&&_.span){var m,E,T=_.span,S=_.response,y=_.target;m=S?S.status:y.status,"abort"!=_.status&&(E=m>=400||0==m?s.OUTCOME_FAILURE:s.OUTCOME_SUCCESS),T.outcome=E;var R=a.getCurrentTransaction();R&&R.type===s.HTTP_REQUEST_TYPE&&(R.outcome=E),a.endSpan(T,_)}}},t.injectDtHeader=function(e,t){var n=this._configService.get("distributedTracingHeaderName"),i=(0,r.getDtHeaderValue)(e);(0,r.isDtHeaderValid)(i)&&i&&n&&(0,r.setRequestHeader)(t,n,i)},t.injectTSHeader=function(e,t){var n=(0,r.getTSHeaderValue)(e);n&&(0,r.setRequestHeader)(t,"tracestate",n)},t.extractDtHeader=function(e){var t=this._configService.get("distributedTracingHeaderName");if(e)return(0,r.parseDtHeaderValue)(e[t])},t.filterTransaction=function(e){var t=e.duration();if(!t){if(u.__DEV__){var n="transaction("+e.id+", "+e.name+") was discarded! ";n+=0===t?"Transaction duration is 0":"Transaction wasn't ended",this._logginService.debug(n)}return!1}if(e.isManaged()){if(t>6e4)return u.__DEV__&&this._logginService.debug("transaction("+e.id+", "+e.name+") was discarded! Transaction duration ("+t+") is greater than managed transaction threshold (60000)"),!1;if(e.sampled&&0===e.spans.length)return u.__DEV__&&this._logginService.debug("transaction("+e.id+", "+e.name+") was discarded! Transaction does not have any spans"),!1}return!0},t.createTransactionDataModel=function(e){var t=e._start,n=e.spans.map((function(n){var r={id:n.id,transaction_id:e.id,parent_id:n.parentId||e.id,trace_id:e.traceId,name:n.name,type:n.type,subtype:n.subtype,action:n.action,sync:n.sync,start:parseInt(n._start-t),duration:n.duration(),context:n.context,outcome:n.outcome,sample_rate:n.sampleRate};return(0,c.truncateModel)(c.SPAN_MODEL,r)})),r={id:e.id,trace_id:e.traceId,session:e.session,name:e.name,type:e.type,duration:e.duration(),spans:n,context:e.context,marks:e.marks,breakdown:e.breakdownTimings,span_count:{started:n.length},sampled:e.sampled,sample_rate:e.sampleRate,experience:e.experience,outcome:e.outcome};return(0,c.truncateModel)(c.TRANSACTION_MODEL,r)},t.createTransactionPayload=function(e){var t=d(e);if(this.filterTransaction(t))return this.createTransactionDataModel(e)},e}();t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.patchXMLHttpRequest=function(e){var t=XMLHttpRequest.prototype;if(!t||!t[i.ADD_EVENT_LISTENER_STR])return;var n="readystatechange",a="load",o="error";function s(t,n){t.state!==i.INVOKE&&(t.state=i.INVOKE,t.data.status=n,e(i.INVOKE,t))}var c=(0,r.patchMethod)(t,"open",(function(){return function(e,t){return e[r.XHR_IGNORE]||(e[r.XHR_METHOD]=t[0],e[r.XHR_URL]=t[1],e[r.XHR_SYNC]=!1===t[2]),c.apply(e,t)}})),u=(0,r.patchMethod)(t,"send",(function(){return function(t,c){if(t[r.XHR_IGNORE])return u.apply(t,c);var f={source:i.XMLHTTPREQUEST,state:"",type:"macroTask",data:{target:t,method:t[r.XHR_METHOD],sync:t[r.XHR_SYNC],url:t[r.XHR_URL],status:""}};try{return function(t){if(t.state!==i.SCHEDULE){t.state=i.SCHEDULE,e(i.SCHEDULE,t);var r=t.data.target;c(n),c(a),c("timeout"),c(o),c("abort")}function c(e){r[i.ADD_EVENT_LISTENER_STR](e,(function(e){var i=e.type;i===n?4===r.readyState&&0!==r.status&&s(t,"success"):s(t,i===a?"success":i)}))}}(f),u.apply(t,c)}catch(e){throw s(f,o),e}}}))};var r=n(86),i=n(78)},function(e,t,n){"use strict";t.__esModule=!0,t.patchFetch=function(e){if(!window.fetch||!window.Request)return;function t(t){t.state=a.SCHEDULE,e(a.SCHEDULE,t)}function n(t){t.state=a.INVOKE,e(a.INVOKE,t)}var s=window.fetch;window.fetch=function(e,c){var u,f,d=this,l=arguments;if("string"==typeof e)u=new Request(e,c),f=e;else{if(!e)return s.apply(d,l);f=(u=e).url}var p={source:a.FETCH,state:"",type:"macroTask",data:{target:u,method:u.method,url:f,aborted:!1}};return new r.Promise((function(e,r){var a;i.globalState.fetchInProgress=!0,t(p);try{a=s.apply(d,[u])}catch(e){return r(e),p.data.error=e,n(p),void(i.globalState.fetchInProgress=!1)}a.then((function(t){e(t),(0,o.scheduleMicroTask)((function(){p.data.response=t,n(p)}))}),(function(e){r(e),(0,o.scheduleMicroTask)((function(){p.data.error=e,n(p)}))})),i.globalState.fetchInProgress=!1}))}};var r=n(85),i=n(86),a=n(78),o=n(79)},function(e,t,n){"use strict";t.__esModule=!0,t.patchHistory=function(e){if(!window.history)return;var t=history.pushState;"function"==typeof t&&(history.pushState=function(n,i,a){var o={source:r.HISTORY,data:{state:n,title:i,url:a}};e(r.INVOKE,o),t.apply(this,arguments)})};var r=n(78)},function(e,t,n){"use strict";t.__esModule=!0,t.patchEventTarget=function(e){if(!window.EventTarget)return;var t=window.EventTarget.prototype,n=t[r.ADD_EVENT_LISTENER_STR],i=t[r.REMOVE_EVENT_LISTENER_STR];function a(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if(a.eventType===t&&a.listenerFn===n&&a.capture===r)return i}return-1}function s(e){return"boolean"==typeof e?e:!!e&&!!e.capture}function c(t,n,i,c){var u=o[n];if(!u)return i;var f=t[u],d=s(c);if(f){var l=a(f,n,i,d);if(-1!==l)return f[l].wrappingFn}else f=t[u]=[];var p={source:r.EVENT_TARGET,target:t,eventType:n,listenerFn:i,capture:d,wrappingFn:v};function v(){var t;e(r.SCHEDULE,p);try{t=i.apply(this,arguments)}finally{e(r.INVOKE,p)}return t}return f.push(p),v}function f(e,t,n,r){var i=o[t],c=e[i];if(c){var u=a(c,t,n,s(r));if(-1!==u){var f=c[u];return c.splice(u,1),0===c.length&&(e[i]=void 0),f.wrappingFn}}return n}t[r.ADD_EVENT_LISTENER_STR]=function(e,t,r){var i=this;if(!u(i,e,t))return n.apply(i,arguments);var a=c(i,e,t,r),o=Array.prototype.slice.call(arguments);return o[1]=a,n.apply(i,o)},t[r.REMOVE_EVENT_LISTENER_STR]=function(e,t,n){var r=this;if(!u(r,e,t))return i.apply(r,arguments);var a=f(r,e,t,n),o=Array.prototype.slice.call(arguments);return o[1]=a,i.apply(r,o)}};for(var r=n(78),i=n(86),a=["click"],o={},s=0;s<a.length;s++){var c=a[s];o[c]=(0,i.apmSymbol)(c)}function u(e,t,n){return e instanceof Element&&a.indexOf(t)>=0&&"function"==typeof n}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(85),a=(r=n(109))&&r.__esModule?r:{default:r},o=n(219),s=n(79),c=n(106),u=n(78),f=n(94),d=n(82),l=n(95);var p=function(){function e(e,t){var n=this;this._config=t,this._logger=e,this.currentTransaction=void 0,this.respIntervalId=void 0,this.recorder=new o.PerfEntryRecorder((function(e){var t=n.getCurrentTransaction();if(t&&t.captureTimings){var r,i=t.type===u.PAGE_LOAD,a=(0,o.captureObserverEntries)(e,{isHardNavigation:i,trStart:i?0:t._start}),s=a.spans,c=a.marks;(r=t.spans).push.apply(r,s),t.addMarks({agent:c})}}))}var t=e.prototype;return t.createCurrentTransaction=function(e,t,n){var r=new a.default(e,t,n);return this.currentTransaction=r,r},t.getCurrentTransaction=function(){if(this.currentTransaction&&!this.currentTransaction.ended)return this.currentTransaction},t.createOptions=function(e){var t=this._config.config,n={transactionSampleRate:t.transactionSampleRate},r=(0,s.extend)(n,e);return r.managed&&(r=(0,s.extend)({pageLoadTraceId:t.pageLoadTraceId,pageLoadSampled:t.pageLoadSampled,pageLoadSpanId:t.pageLoadSpanId,pageLoadTransactionName:t.pageLoadTransactionName},r)),r},t.startManagedTransaction=function(e,t,n){var r=this.getCurrentTransaction(),i=!1;if(r)if(r.canReuse()&&n.canReuse){var a=r.type,o=u.TRANSACTION_TYPE_ORDER.indexOf(r.type),s=u.TRANSACTION_TYPE_ORDER.indexOf(t);o>=0&&s<o&&(a=t),d.__DEV__&&this._logger.debug("redefining transaction("+r.id+", "+r.name+", "+r.type+")","to","("+(e||r.name)+", "+a+")",r),r.redefine(e,a,n),i=!0}else d.__DEV__&&this._logger.debug("ending previous transaction("+r.id+", "+r.name+")",r),r.end(),r=this.createCurrentTransaction(e,t,n);else r=this.createCurrentTransaction(e,t,n);return r.type===u.PAGE_LOAD&&(i||(this.recorder.start(u.LARGEST_CONTENTFUL_PAINT),this.recorder.start(u.PAINT),this.recorder.start(u.FIRST_INPUT),this.recorder.start(u.LAYOUT_SHIFT)),n.pageLoadTraceId&&(r.traceId=n.pageLoadTraceId),n.pageLoadSampled&&(r.sampled=n.pageLoadSampled),r.name===u.NAME_UNKNOWN&&n.pageLoadTransactionName&&(r.name=n.pageLoadTransactionName)),!i&&this._config.get("monitorLongtasks")&&this.recorder.start(u.LONG_TASK),r.sampled&&(r.captureTimings=!0),r},t.startTransaction=function(e,t,n){var r,i=this,o=this.createOptions(n),s=!0;o.managed?this.currentTransaction===(r=this.startManagedTransaction(e,t,o))&&(s=!1):r=new a.default(e,t,o);return r.onEnd=function(){return i.handleTransactionEnd(r)},s&&(d.__DEV__&&this._logger.debug("startTransaction("+r.id+", "+r.name+", "+r.type+")"),this._config.events.send(u.TRANSACTION_START,[r])),r},t.handleTransactionEnd=function(e){var t=this;this.recorder.stop();var n=window.location.href;return i.Promise.resolve().then((function(){var r=e.name,i=e.type;if(d.state.lastHiddenStart>=e._start)d.__DEV__&&t._logger.debug("transaction("+e.id+", "+r+", "+i+") was discarded! The page was hidden during the transaction!");else if(t.shouldIgnoreTransaction(r)||i===u.TEMPORARY_TYPE)d.__DEV__&&t._logger.debug("transaction("+e.id+", "+r+", "+i+") is ignored");else{if(i===u.PAGE_LOAD){var a=t._config.get("pageLoadTransactionName");if(r===u.NAME_UNKNOWN&&a&&(e.name=a),e.captureTimings){var p=o.metrics.cls,v=o.metrics.fid,h=o.metrics.tbt,g=o.metrics.longtask;h.duration>0&&e.spans.push((0,o.createTotalBlockingTimeSpan)(h)),e.experience={},(0,s.isPerfTypeSupported)(u.LONG_TASK)&&(e.experience.tbt=h.duration),(0,s.isPerfTypeSupported)(u.LAYOUT_SHIFT)&&(e.experience.cls=p.score),v>0&&(e.experience.fid=v),g.count>0&&(e.experience.longtask={count:g.count,sum:g.duration,max:g.max})}t.setSession(e)}e.name===u.NAME_UNKNOWN&&(e.name=(0,l.slugifyUrl)(n)),(0,c.captureNavigation)(e),t.adjustTransactionTime(e),t._config.get("breakdownMetrics")&&e.captureBreakdown();var _=t._config.get("context");(0,f.addTransactionContext)(e,_),t._config.events.send(u.TRANSACTION_END,[e]),d.__DEV__&&t._logger.debug("end transaction("+e.id+", "+e.name+", "+e.type+")",e)}}),(function(n){d.__DEV__&&t._logger.debug("error ending transaction("+e.id+", "+e.name+")",n)}))},t.setSession=function(e){var t=this._config.get("session");if(t){"boolean"==typeof t||t.timestamp&&Date.now()-t.timestamp>u.SESSION_TIMEOUT?e.session={id:(0,s.generateRandomId)(16),sequence:1}:e.session={id:t.id,sequence:t.sequence?t.sequence+1:1};var n={session:{id:e.session.id,sequence:e.session.sequence,timestamp:Date.now()}};this._config.setConfig(n),this._config.setLocalConfig(n,!0)}},t.adjustTransactionTime=function(e){var t=e.spans,n=(0,s.getEarliestSpan)(t);n&&n._start<e._start&&(e._start=n._start);var r=(0,s.getLatestNonXHRSpan)(t);r&&r._end>e._end&&(e._end=r._end);for(var i=e._end,a=0;a<t.length;a++){var o=t[a];o._end>i&&(o._end=i,o.type+=u.TRUNCATED_TYPE),o._start>i&&(o._start=i)}},t.shouldIgnoreTransaction=function(e){var t=this._config.get("ignoreTransactions");if(t&&t.length)for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof r.test){if(r.test(e))return!0}else if(r===e)return!0}return!1},t.startSpan=function(e,t,n){var r=this.getCurrentTransaction();r||(r=this.createCurrentTransaction(void 0,u.TEMPORARY_TYPE,this.createOptions({canReuse:!0,managed:!0})));var i=r.startSpan(e,t,n);return d.__DEV__&&this._logger.debug("startSpan("+e+", "+i.type+")","on transaction("+r.id+", "+r.name+")"),i},t.endSpan=function(e,t){if(e){if(d.__DEV__){var n=this.getCurrentTransaction();n&&this._logger.debug("endSpan("+e.name+", "+e.type+")","on transaction("+n.id+", "+n.name+")")}e.end(null,t)}},e}();t.default=p},function(e,t,n){"use strict";t.__esModule=!0,t.captureBreakdown=function(e,t){void 0===t&&(t=r.PERF.timing);var n=[],c=e.duration(),u=e.name,f=e.type,d=e.sampled,l={name:u,type:f};if(n.push({transaction:l,samples:{"transaction.duration.count":o(1),"transaction.duration.sum.us":o(c),"transaction.breakdown.count":o(d?1:0)}}),!d)return n;if(f===i.PAGE_LOAD&&t)for(var p=0;p<a.length;p++){var v=a[p],h=t[v[0]],g=t[v[1]],_=(0,r.getDuration)(h,g);0!==_&&null!=_&&n.push(s(l,{details:{type:v[2]},duration:_}))}else{var m=function(e){var t={},n=function(e){var t=e.spans,n=e._start,r=e._end;if(0===t.length)return e.duration();t.sort((function(e,t){return e._start-t._start}));for(var i=t[0],a=i._end,o=i._start,s=a,c=o-n,u=1;u<t.length;u++)o=(i=t[u])._start,a=i._end,o>s?(c+=o-s,s=a):a>s&&(s=a);s<r&&(c+=r-s);return c}(e);t.app={count:1,duration:n};for(var r=e.spans,a=0;a<r.length;a++){var o=r[a],s=o.duration();if(0!==s&&null!=s){var c=o.type,u=o.subtype,f=c.replace(i.TRUNCATED_TYPE,"");u&&(f+="."+u),t[f]||(t[f]={duration:0,count:0}),t[f].count++,t[f].duration+=s}}return t}(e);Object.keys(m).forEach((function(e){var t=e.split("."),r=t[0],i=t[1],a=m[e],o=a.duration,c=a.count;n.push(s(l,{details:{type:r,subtype:i},duration:o,count:c}))}))}return n};var r=n(79),i=n(78),a=[["domainLookupStart","domainLookupEnd","DNS"],["connectStart","connectEnd","TCP"],["requestStart","responseStart","Request"],["responseStart","responseEnd","Response"],["domLoading","domComplete","Processing"],["loadEventStart","loadEventEnd","Load"]];function o(e){return{value:e}}function s(e,t){var n=t.details,r=t.count,i=void 0===r?1:r,a=t.duration;return{transaction:e,span:n,samples:{"span.self_time.count":o(i),"span.self_time.sum.us":o(a)}}}},function(e,t,n){"use strict";t.__esModule=!0,t.createLongTaskSpans=c,t.createFirstInputDelaySpan=u,t.createTotalBlockingTimeSpan=function(e){var t=e.start,n=e.duration,r=new o.default("Total Blocking Time",i.LONG_TASK,{startTime:t});return r.end(t+n),r},t.calculateTotalBlockingTime=f,t.calculateCumulativeLayoutShift=d,t.captureObserverEntries=function(e,t){var n=t.isHardNavigation,r=t.trStart,o=e.getEntriesByType(i.LONG_TASK).filter((function(e){return e.startTime>=r})),l={spans:c(o,s.longtask),marks:{}};if(!n)return l;var p=e.getEntriesByType(i.LARGEST_CONTENTFUL_PAINT),v=p[p.length-1];if(v){var h=parseInt(v.startTime);s.lcp=h,l.marks.largestContentfulPaint=h}var g=a.PERF.timing,_=g.fetchStart-g.navigationStart,m=e.getEntriesByName(i.FIRST_CONTENTFUL_PAINT)[0];if(m){var E=parseInt(_>=0?m.startTime-_:m.startTime);s.fcp=E,l.marks.firstContentfulPaint=E}var T=u(e.getEntriesByType(i.FIRST_INPUT));T&&(s.fid=T.duration(),l.spans.push(T));return f(o),d(e.getEntriesByType(i.LAYOUT_SHIFT)),l},t.PerfEntryRecorder=t.metrics=void 0;var r,i=n(78),a=n(79),o=(r=n(98))&&r.__esModule?r:{default:r};var s={fid:0,fcp:0,tbt:{start:1/0,duration:0},cls:{score:0,firstEntryTime:Number.NEGATIVE_INFINITY,prevEntryTime:Number.NEGATIVE_INFINITY,currentSessionScore:0},longtask:{count:0,duration:0,max:0}};t.metrics=s;function c(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],s=a.name,c=a.startTime,u=a.duration,f=a.attribution,d=c+u,l=new o.default("Longtask("+s+")",i.LONG_TASK,{startTime:c});if(t.count++,t.duration+=u,t.max=Math.max(u,t.max),f.length>0){var p=f[0],v=p.name,h=p.containerType,g=p.containerName,_=p.containerId,m={attribution:v,type:h};g&&(m.name=g),_&&(m.id=_),l.addContext({custom:m})}l.end(d),n.push(l)}return n}function u(e){var t=e[0];if(t){var n=t.startTime,r=t.processingStart,a=new o.default("First Input Delay",i.FIRST_INPUT,{startTime:n});return a.end(r),a}}function f(e){e.forEach((function(e){var t=e.name,n=e.startTime,r=e.duration;if(!(n<s.fcp||"self"!==t&&-1===t.indexOf("same-origin"))){s.tbt.start=Math.min(s.tbt.start,n);var i=r-50;i>0&&(s.tbt.duration+=i)}}))}function d(e){e.forEach((function(e){!e.hadRecentInput&&e.value&&((e.startTime-s.cls.firstEntryTime>5e3||e.startTime-s.cls.prevEntryTime>1e3)&&(s.cls.firstEntryTime=e.startTime,s.cls.currentSessionScore=0),s.cls.prevEntryTime=e.startTime,s.cls.currentSessionScore+=e.value,s.cls.score=Math.max(s.cls.score,s.cls.currentSessionScore))}))}var l=function(){function e(e){this.po={observe:a.noop,disconnect:a.noop},window.PerformanceObserver&&(this.po=new PerformanceObserver(e))}var t=e.prototype;return t.start=function(e){try{this.po.observe({type:e,buffered:!0})}catch(e){}},t.stop=function(){this.po.disconnect()},e}();t.PerfEntryRecorder=l},function(e,t,n){"use strict";t.__esModule=!0,t.getInstrumentationFlags=function(e,t){var n,i=((n={})[r.XMLHTTPREQUEST]=!1,n[r.FETCH]=!1,n[r.HISTORY]=!1,n[r.PAGE_LOAD]=!1,n[r.ERROR]=!1,n[r.EVENT_TARGET]=!1,n);if(!e)return i;return Object.keys(i).forEach((function(e){-1===t.indexOf(e)&&(i[e]=!0)})),i};var r=n(78)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=function(){clearTimeout(n),cancelAnimationFrame(r),setTimeout(e)},n=setTimeout(t,100),r=requestAnimationFrame(t)}},function(e,t,n){"use strict";t.__esModule=!0,t.bootstrap=function(){(0,r.isPlatformSupported)()?((0,i.patchAll)(),s(),a.state.bootstrapTime=(0,r.now)(),o=!0):r.isBrowser&&console.log("[Elastic APM] platform is not supported!");return o},t.bootstrapPerf=s;var r=n(79),i=n(99),a=n(82),o=!1;function s(){"hidden"===document.visibilityState&&(a.state.lastHiddenStart=0),window.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&(a.state.lastHiddenStart=performance.now())}),{capture:!0})}},function(e,t,n){"use strict";t.__esModule=!0,t.createTracer=function(e){var t=e.getService("PerformanceMonitoring"),n=e.getService("TransactionService"),i=e.getService("ErrorLogging"),a=e.getService("LoggingService");return new r.default(t,n,a,i)};var r=a(n(224));t.Tracer=r.default;var i=a(n(113));function a(e){return e&&e.__esModule?e:{default:e}}t.Span=i.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(110),a=n(111),o=n(84),s=n(79),c=n(82),u=(r=n(113))&&r.__esModule?r:{default:r};function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){var t,n;function r(t,n,r,i){var a;return(a=e.call(this)||this).performanceMonitoring=t,a.transactionService=n,a.loggingService=r,a.errorLogging=i,a}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var i=r.prototype;return i._startSpan=function(e,t){var n,r={managed:!0};if(t)if(r.timestamp=t.startTime,t.childOf)r.parentId=t.childOf.id;else if(t.references&&t.references.length>0){t.references.length>1&&c.__DEV__&&this.loggingService.debug("Elastic APM OpenTracing: Unsupported number of references, only the first childOf reference will be recorded.");var i=(0,s.find)(t.references,(function(e){return e.type()===a.REFERENCE_CHILD_OF}));i&&(r.parentId=i.referencedContext().id)}if(!(n=this.transactionService.getCurrentTransaction()?this.transactionService.startSpan(e,void 0,r):this.transactionService.startTransaction(e,void 0,r)))return new o.Span;r.timestamp&&(n._start=r.timestamp-(0,s.getTimeOrigin)());var f=new u.default(this,n);return t&&t.tags&&f.addTags(t.tags),f},i._inject=function(e,t,n){switch(t){case a.FORMAT_TEXT_MAP:case a.FORMAT_HTTP_HEADERS:this.performanceMonitoring.injectDtHeader(e,n);break;case a.FORMAT_BINARY:c.__DEV__&&this.loggingService.debug("Elastic APM OpenTracing: binary carrier format is not supported.")}},i._extract=function(e,t){var n;switch(e){case a.FORMAT_TEXT_MAP:case a.FORMAT_HTTP_HEADERS:n=this.performanceMonitoring.extractDtHeader(t);break;case a.FORMAT_BINARY:c.__DEV__&&this.loggingService.debug("Elastic APM OpenTracing: binary carrier format is not supported.")}return n||(n=null),n},r}(i.Tracer);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(111),i=n(226),a=n(84);t.childOf=function(e){return e instanceof a.default&&(e=e.context()),new i.default(r.REFERENCE_CHILD_OF,e)},t.followsFrom=function(e){return e instanceof a.default&&(e=e.context()),new i.default(r.REFERENCE_FOLLOWS_FROM,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(84),i=function(){function e(e,t){this._type=e,this._referencedContext=t instanceof r.default?t.context():t}return e.prototype.type=function(){return this._type},e.prototype.referencedContext=function(){return this._referencedContext},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.toTraceId=function(){return""},e.prototype.toSpanId=function(){return""},e}();t.SpanContext=r,t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(105),i=function(){function e(e,t){this._disable=t,this.serviceFactory=e,this._initialized=!1}var t=e.prototype;return t.isEnabled=function(){return!this._disable},t.isActive=function(){var e=this.serviceFactory.getService(r.CONFIG_SERVICE);return this.isEnabled()&&this._initialized&&e.get("active")},t.init=function(e){var t=this;if(this.isEnabled()&&!this._initialized){this._initialized=!0;var n=this.serviceFactory.getService([r.CONFIG_SERVICE,r.LOGGING_SERVICE]),i=n[0],a=n[1];i.setVersion("5.10.1"),this.config(e);var o=i.get("logLevel");if(a.setLevel(o),i.get("active")){this.serviceFactory.init();var s=(0,r.getInstrumentationFlags)(i.get("instrument"),i.get("disableInstrumentations"));if(this.serviceFactory.getService("PerformanceMonitoring").init(s),s[r.ERROR])this.serviceFactory.getService("ErrorLogging").registerListeners();if(i.get("session")){var c=i.getLocalConfig();c&&c.session&&i.setConfig({session:c.session})}var u=function(){return s[r.PAGE_LOAD]&&t._sendPageLoadMetrics()};i.get("centralConfig")?this.fetchCentralConfig().then(u):u()}else this._disable=!0,a.warn("RUM agent is inactive")}return this},t.fetchCentralConfig=function(){var e=this.serviceFactory.getService([r.APM_SERVER,r.LOGGING_SERVICE,r.CONFIG_SERVICE]),t=e[0],n=e[1],i=e[2];return t.fetchConfig(i.get("serviceName"),i.get("environment")).then((function(e){var t=e.transaction_sample_rate;if(t){var r={transactionSampleRate:t=Number(t)},a=i.validate(r).invalid;if(0===a.length)i.setConfig(r);else{var o=a[0],s=o.key,c=o.value,u=o.allowed;n.warn('invalid value "'+c+'" for '+s+". Allowed: "+u+".")}}return e})).catch((function(e){n.warn("failed fetching config:",e)}))},t._sendPageLoadMetrics=function(){var e=this.startTransaction(void 0,r.PAGE_LOAD,{managed:!0,canReuse:!0});if(e){e.addTask(r.PAGE_LOAD);var t=function(){setTimeout((function(){return e.removeTask(r.PAGE_LOAD)}))};"complete"===document.readyState?t():window.addEventListener("load",t)}},t.observe=function(e,t){this.serviceFactory.getService(r.CONFIG_SERVICE).events.observe(e,t)},t.config=function(e){var t=this.serviceFactory.getService(r.CONFIG_SERVICE),n=t.validate(e),i=n.missing,a=n.invalid;if(0===i.length&&0===a.length)t.setConfig(e);else{var o=this.serviceFactory.getService(r.LOGGING_SERVICE),s=", ",c="RUM agent isn't correctly configured. ";i.length>0&&(c+=i.join(s)+" is missing",a.length>0&&(c+=s)),a.forEach((function(e,t){var n=e.key,r=e.value,i=e.allowed;c+=n+' "'+r+'" contains invalid characters! (allowed: '+i+")"+(t!==a.length-1?s:"")})),o.error(c),t.setConfig({active:!1})}},t.setUserContext=function(e){this.serviceFactory.getService(r.CONFIG_SERVICE).setUserContext(e)},t.setCustomContext=function(e){this.serviceFactory.getService(r.CONFIG_SERVICE).setCustomContext(e)},t.addLabels=function(e){this.serviceFactory.getService(r.CONFIG_SERVICE).addLabels(e)},t.setInitialPageLoadName=function(e){this.serviceFactory.getService(r.CONFIG_SERVICE).setConfig({pageLoadTransactionName:e})},t.startTransaction=function(e,t,n){if(this.isEnabled())return this.serviceFactory.getService("TransactionService").startTransaction(e,t,n)},t.startSpan=function(e,t,n){if(this.isEnabled())return this.serviceFactory.getService("TransactionService").startSpan(e,t,n)},t.getCurrentTransaction=function(){if(this.isEnabled())return this.serviceFactory.getService("TransactionService").getCurrentTransaction()},t.captureError=function(e){if(this.isEnabled())return this.serviceFactory.getService("ErrorLogging").logError(e)},t.addFilter=function(e){this.serviceFactory.getService(r.CONFIG_SERVICE).addFilter(e)},e}();t.default=i},,function(e,t,n){"use strict";t.__esModule=!0,t.apm=t.apmBase=t.init=t.default=void 0;var r,i=n(105),a=(r=n(228))&&r.__esModule?r:{default:r};t.ApmBase=a.default;var o=function(){if(i.isBrowser&&window.elasticApm)return window.elasticApm;var e=(0,i.bootstrap)(),t=(0,i.createServiceFactory)(),n=new a.default(t,!e);return i.isBrowser&&(window.elasticApm=n),n}();t.apm=t.apmBase=o;var s=o.init.bind(o);t.init=s;var c=s;t.default=c}])]);