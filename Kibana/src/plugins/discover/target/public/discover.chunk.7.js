(window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[]).push([[7],{226:function(e,t,l){"use strict";l.r(t);l(100);var i=l(3),a=l(15),s=l(2),n=l(41),o=l(11),d=l(19),c=l(87),r=l(105),u=l(42),b=l(8),g=l(73),j=l(86),f=l(69),p=l(76),O=l(106),m=l(5);const x=({pinned:e,field:t,fieldMapping:l,flattenedField:n,onToggleColumn:o,onFilter:d,ignoredValue:c,onTogglePinned:r})=>{const[u,b]=Object(i.useState)(!1),g=s.i18n.translate("discover.docView.table.actions.open",{defaultMessage:"Open actions"}),j=s.i18n.translate("discover.docView.table.actions.label",{defaultMessage:"Actions"}),f=!l||!l.filterable||c,p=s.i18n.translate("discover.docViews.table.filterForValueButtonTooltip",{defaultMessage:"Filter for value"}),O=s.i18n.translate("discover.docViews.table.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),x=s.i18n.translate("discover.docViews.table.filterOutValueButtonTooltip",{defaultMessage:"Filter out value"}),v=s.i18n.translate("discover.docViews.table.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),F=f&&s.i18n.translate("discover.docViews.table.unindexedFieldsCanNotBeSearchedTooltip",{defaultMessage:"Unindexed fields or ignored values cannot be searched"})||void 0,C=s.i18n.translate("discover.docViews.table.filterForFieldPresentButtonTooltip",{defaultMessage:"Filter for field present"}),T=s.i18n.translate("discover.docViews.table.filterForFieldPresentButtonAriaLabel",{defaultMessage:"Filter for field present"}),w=!l||!l.filterable,P=w&&(l&&l.scripted?s.i18n.translate("discover.docViews.table.unableToFilterForPresenceOfScriptedFieldsTooltip",{defaultMessage:"Unable to filter for presence of scripted fields"}):s.i18n.translate("discover.docViews.table.unableToFilterForPresenceOfMetaFieldsTooltip",{defaultMessage:"Unable to filter for presence of meta fields"}))||void 0,M=s.i18n.translate("discover.docViews.table.toggleColumnInTableButtonTooltip",{defaultMessage:"Toggle column in table"}),V=s.i18n.translate("discover.docViews.table.toggleColumnInTableButtonAriaLabel",{defaultMessage:"Toggle column in table"}),h=e?s.i18n.translate("discover.docViews.table.unpinFieldLabel",{defaultMessage:"Unpin field"}):s.i18n.translate("discover.docViews.table.pinFieldLabel",{defaultMessage:"Pin field"}),k=e?s.i18n.translate("discover.docViews.table.unpinFieldAriaLabel",{defaultMessage:"Unpin field"}):s.i18n.translate("discover.docViews.table.pinFieldAriaLabel",{defaultMessage:"Pin field"}),y=e?"pinFilled":"pin",E=Object(i.useCallback)((()=>b(!0)),[b]),I=Object(i.useCallback)((()=>b(!1)),[b]),S=Object(i.useCallback)((()=>r(t)),[t,r]),N=Object(i.useCallback)((e=>()=>{e(),I()}),[I]),z=[{id:0,title:j,items:[{name:p,"aria-label":O,toolTipContent:F,icon:"plusInCircle",disabled:f,onClick:N(d.bind({},l,n,"+"))},{name:x,"aria-label":v,toolTipContent:F,icon:"minusInCircle",disabled:f,onClick:N(d.bind({},l,n,"-"))},{name:C,"aria-label":T,toolTipContent:P,icon:"filter",disabled:w,onClick:N(d.bind({},l,n,"-"))},{name:M,"aria-label":V,"data-test-subj":`toggleColumnButton-${t}`,icon:"listAdd",onClick:N(o.bind({},t))},{name:h,"aria-label":k,icon:y,onClick:N(S)}]}];return Object(m.jsx)(a.EuiPopover,{button:Object(m.jsx)(a.EuiButtonIcon,{"data-test-subj":`openFieldActionsButton-${t}`,"aria-label":g,onClick:E,iconType:"boxesHorizontal",color:"text"}),isOpen:u,closePopover:I,display:"block",panelPaddingSize:"none"},Object(m.jsx)(a.EuiContextMenu,{initialPanelId:0,size:"s",panels:z}))},v={header:!1},F=[25,50,100],C="discover:pinnedFields",T="discover:pageSize",w="discover:searchText",P=e=>{const t=Number(e.get(T));return t&&F.includes(t)?t:25},M=Object(o.debounce)(((e,t)=>t.set(w,e)),500);t.default=({columns:e,hit:t,indexPattern:l,filter:o,onAddColumn:V,onRemoveColumn:h})=>{const{storage:k,uiSettings:y,fieldFormats:E}=Object(d.a)(),I=y.get(b.SHOW_MULTIFIELDS),S=l.id,N=!o,[z,A]=Object(i.useState)((e=>e.get(w)||"")(k)),[B,_]=Object(i.useState)(((e,t)=>{const l=t.get(C);return"object"==typeof l&&null!==l&&Array.isArray(l[e])?l[e].filter((e=>"string"==typeof e)):[]})(S,k)),L=Object(u.flattenHit)(t,l,{source:!0,includeIgnoredValues:!0}),H=Object(g.a)(Object.keys(L),l,I),R=s.i18n.translate("discover.docView.table.searchPlaceHolder",{defaultMessage:"Search field names"}),U=Object(i.useCallback)((e=>l.fields.getByName(e)),[l.fields]),D=Object(i.useCallback)((t=>{h&&V&&e&&(e.includes(t)?h(t):V(t))}),[h,V,e]),W=Object(i.useCallback)((e=>{const t=B.includes(e)?B.filter((t=>t!==e)):[...B,e];((e,t,l)=>{let i=l.get(C);i="object"==typeof i&&null!==i?i:{},l.set(C,{...i,[t]:e})})(t,S,k),_(t)}),[S,B,k]),$=Object(i.useCallback)((i=>{var a;const s=U(i),n=null!==(a=null==s?void 0:s.displayName)&&void 0!==a?a:i,d=Object(p.a)(i,l)?"nested":null==s?void 0:s.type,c=Object(j.b)(null!=s?s:i,t._ignored);return{action:{onToggleColumn:D,onFilter:o,isActive:!(null==e||!e.includes(i)),flattenedField:L[i]},field:{field:i,displayName:n,fieldMapping:s,fieldType:d,scripted:Boolean(null==s?void 0:s.scripted),pinned:B.includes(n),onTogglePinned:W},value:{formattedValue:Object(f.a)(L[i],t,E,l,s),ignored:c}}}),[U,l,t,D,o,e,L,B,W,E]),G=Object(i.useCallback)((e=>{const t=e.currentTarget.value;M(t,k),A(t)}),[k]),{pinnedItems:q,restItems:J}=Object.keys(L).sort(((e,t)=>{const l=U(e),i=U(t),a=l&&l.displayName?l.displayName:e,s=i&&i.displayName?i.displayName:t;return a.localeCompare(s)})).reduce(((e,t)=>{if(!H.includes(t))return e;if(B.includes(t))e.pinnedItems.push($(t));else{var l;const i=U(t);(null!==(l=null==i?void 0:i.displayName)&&void 0!==l?l:t).includes(z)&&e.restItems.push($(t))}return e}),{pinnedItems:[],restItems:[]}),{curPageIndex:K,pageSize:Q,totalPages:X,startIndex:Y,changePageIndex:Z,changePageSize:ee}=Object(c.a)({initialPageSize:P(k),totalItems:J.length}),te=0!==X,le=Object(i.useCallback)((e=>{((e,t)=>{t.set(T,e)})(e,k),ee(e)}),[ee,k]),ie=[!N&&Object(m.jsx)(a.EuiTableHeaderCell,{align:"left",width:62,isSorted:!1},Object(m.jsx)(a.EuiText,{size:"xs"},Object(m.jsx)("strong",null,Object(m.jsx)(n.FormattedMessage,{id:"discover.fieldChooser.discoverField.actions",defaultMessage:"Actions"})))),Object(m.jsx)(a.EuiTableHeaderCell,{align:"left",width:"30%",isSorted:!1},Object(m.jsx)(a.EuiText,{size:"xs"},Object(m.jsx)("strong",null,Object(m.jsx)(n.FormattedMessage,{id:"discover.fieldChooser.discoverField.name",defaultMessage:"Field"})))),Object(m.jsx)(a.EuiTableHeaderCell,{align:"left",isSorted:!1},Object(m.jsx)(a.EuiText,{size:"xs"},Object(m.jsx)("strong",null,Object(m.jsx)(n.FormattedMessage,{id:"discover.fieldChooser.discoverField.value",defaultMessage:"Value"}))))],ae=Object(i.useCallback)((e=>e.map((({action:{flattenedField:e,onFilter:t},field:{field:l,fieldMapping:i,displayName:s,fieldType:n,scripted:o,pinned:d},value:{formattedValue:c,ignored:u}})=>Object(m.jsx)(a.EuiTableRow,{key:l,className:"kbnDocViewer__tableRow",isSelected:d},!N&&Object(m.jsx)(a.EuiTableRowCell,{key:l+"-actions",align:"center",width:62,className:"kbnDocViewer__tableActionsCell",textOnly:!1,mobileOptions:v},Object(m.jsx)(x,{field:l,pinned:d,fieldMapping:i,flattenedField:e,onFilter:t,onToggleColumn:D,ignoredValue:!!u,onTogglePinned:W})),Object(m.jsx)(a.EuiTableRowCell,{key:l+"-field-name",align:"left",width:"30%",className:"kbnDocViewer__tableFieldNameCell",textOnly:!1,mobileOptions:v},Object(m.jsx)(r.a,{fieldName:s,fieldType:n,fieldMapping:i,scripted:o})),Object(m.jsx)(a.EuiTableRowCell,{key:l+"-value",align:"left",className:"kbnDocViewer__tableValueCell",textOnly:!1,mobileOptions:v},Object(m.jsx)(O.a,{field:l,formattedValue:c,rawValue:e,ignoreReason:u})))))),[D,W,N]),se=[...ae(q),...ae(J.slice(Y,Q+Y))];return Object(m.jsx)(a.EuiFlexGroup,{direction:"column",gutterSize:"none",responsive:!1},Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiSpacer,{size:"s"})),Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiFieldSearch,{"aria-label":R,fullWidth:!0,onChange:G,placeholder:R,value:z})),0===se.length?Object(m.jsx)(a.EuiSelectableMessage,{style:{minHeight:300}},Object(m.jsx)("p",null,Object(m.jsx)(a.EuiI18n,{token:"discover.docViews.table.noFieldFound",default:"No fields found"}))):Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiTable,{responsive:!1},Object(m.jsx)(a.EuiTableHeader,null,ie),Object(m.jsx)(a.EuiTableBody,null,se))),Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiSpacer,{size:"m"})),te&&Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiTablePagination,{activePage:K,itemsPerPage:Q,itemsPerPageOptions:F,pageCount:X,onChangeItemsPerPage:le,onChangePage:Z})))}},87:function(e,t,l){"use strict";l.d(t,"a",(function(){return a}));var i=l(3);const a=({initialPageSize:e,totalItems:t})=>{const[l,a]=Object(i.useState)(e),[s,n]=Object(i.useState)(0),o=Object(i.useMemo)((()=>{const e=Math.ceil(t/l);return{totalPages:e,startIndex:l*s,hasNextPage:s+1<e}}),[s,l,t]),d=Object(i.useCallback)((e=>n(e)),[]),c=Object(i.useCallback)((e=>a(e)),[]);return Object(i.useEffect)((()=>{o.totalPages<s+1&&d(0)}),[s,o.totalPages,d]),Object(i.useMemo)((()=>({...o,curPageIndex:s,pageSize:l,changePageIndex:d,changePageSize:c})),[d,c,s,o,l])}}}]);