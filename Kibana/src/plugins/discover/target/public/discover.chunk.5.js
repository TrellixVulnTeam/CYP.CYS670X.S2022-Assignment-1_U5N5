(window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[]).push([[5],{103:function(e,t,r){"use strict";r.r(t),r.d(t,"getSharingData",(function(){return a})),r.d(t,"showPublicUrlSwitch",(function(){return c}));var n=r(8),i=r(68),s=r(71);async function a(e,t,r){const{uiSettings:a,data:c}=r,o=e.createCopy(),u=o.getField("index");let l=o.getField("filter");o.setField("sort",Object(i.c)(t.sort,u,a.get(n.SORT_DEFAULT_ORDER_SETTING))),o.removeField("filter"),o.removeField("highlight"),o.removeField("highlightAll"),o.removeField("aggs"),o.removeField("size");let d=t.columns||[];if(d&&d.length>0){let e;!a.get(n.DOC_HIDE_TIME_COLUMN_SETTING)&&u&&u.timeFieldName&&(e=u.timeFieldName),e&&!d.includes(e)&&(d=[e,...d])}const f=c.query.timefilter.timefilter.createFilter(u),S=c.query.timefilter.timefilter.createRelativeFilter(u);return{getSearchSource:e=>{const t=e?f:S;if(Array.isArray(l)?l=l.filter((e=>!Object(s.c)(e,f))):Object(s.c)(l,f)&&(l=void 0),l&&t)o.setField("filter",Array.isArray(l)?[t,...l]:[t,l]);else{const e=t||l;o.setField("filter",e)}return!a.get(n.SEARCH_FIELDS_FROM_SOURCE)&&d.length&&o.setField("fields",d),o.getSerializedFields(!0)},columns:d}}const c=e=>{if(!e.discover)return!1;return!!e.discover.show}},67:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a}));var n=r(11);function i(e,t){const r=t.getFieldByName(e);return!(!r||!r.sortable)}function s(e,t){return Array.isArray(e)?function(e){return 2===e.length&&"string"==typeof e[0]&&("desc"===e[1]||"asc"===e[1])}(e)?[{[e[0]]:e[1]}]:e.map((e=>function(e,t){if(Array.isArray(e)&&2===e.length&&i(String(e[0]),t)){const[t,r]=e;return{[t]:r}}if(Object(n.isPlainObject)(e)&&i(Object.keys(e)[0],t))return e}(e,t))).filter((e=>"object"==typeof e)):[]}function a(e,t){return s(e,t).reduce(((e,t)=>{const r=Object.entries(t);return r&&r[0]&&e.push(r[0]),e}),[])}},68:function(e,t,r){"use strict";r.d(t,"b",(function(){return n.b})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return s.a}));var n=r(67);function i(e,t,r="desc"){if(!e||!t||Array.isArray(e)&&0===e.length)return null!=t&&t.timeFieldName?[{_doc:r}]:[{_score:r}];const{timeFieldName:i}=t;return Object(n.a)(e,t).map((e=>t.isTimeNanosBased()&&i&&e[i]?{[i]:{order:e[i],numeric_type:"date_nanos"}}:e))}var s=r(70)},70:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(67);function i(e,t="desc"){return null!=e&&e.timeFieldName&&Object(n.c)(e.timeFieldName,e)?[[e.timeFieldName,t]]:[]}},71:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return f})),r.d(t,"a",(function(){return g}));var n=r(11),i=r(2),s=r(1),a=r(6);var c=r(75),o=r(12);const u="_a";function l({getStateDefaults:e,storeInSessionStorage:t=!1,history:r,toasts:i,uiSettings:o}){const l=e?e():{},f=Object(s.createKbnUrlStateStorage)({useHash:t,history:r,...i&&Object(s.withNotifyOnErrors)(i)}),g=f.get(u);var y;g&&g.query&&!g.query.language&&(g.query=(y=g.query,Object(n.has)(y,"language")?y:{query:y,language:"lucene"})),null!=g&&g.sort&&!g.sort.length&&delete g.sort;let h,m=Object(c.a)({...l,...g},o);const v=Object(s.createStateContainer)(m),p={...v,set:e=>{e&&(h=v.getState(),v.set(e))}},{start:F,stop:b}=Object(s.syncState)({storageKey:u,stateContainer:p,stateStorage:f}),O=async(e={})=>{const t={...v.getState(),...e};await f.set(u,t,{replace:!0})};return{kbnUrlStateStorage:f,appStateContainer:p,startSync:F,stopSync:b,setAppState:e=>d(p,e),replaceUrlAppState:O,resetInitialAppState:()=>{m=v.getState()},resetAppState:()=>{const t=Object(c.a)(e?e():{},o);d(p,t)},getPreviousAppState:()=>h,flushToUrl:()=>f.kbnUrlControls.flush(),isAppStateDirty:()=>!S(m,v.getState()),initializeAndSync:(e,t,r)=>{v.getState().index!==e.id&&d(p,{index:e.id});const i=v.getState().filters;i&&t.setAppFilters(Object(n.cloneDeep)(i));const s=v.getState().query;s&&r.query.queryString.setQuery(s);const c=Object(a.connectToQueryState)(r.query,v,{filters:a.esFilters.FilterStateStore.APP_STATE,query:!0}),{stop:o}=Object(a.syncQueryStateWithUrl)(r.query,f);return O({}).then((()=>{F()})),()=>{c(),o(),b()}}}}function d(e,t){const r=e.getState(),n={...r,...t};S(r,n)||e.set(n)}function f(e,t){return!e&&!t||!(!e||!t)&&a.esFilters.compareFilters(e,t,a.esFilters.COMPARE_ALL_OPTIONS)}function S(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const{filters:r=[],...i}=e,{filters:s=[],...a}=t;return Object(n.isEqual)(i,a)&&f(r,s)}function g(e){const t=()=>e.getSavedSearch().id;return{getName:async()=>{const t=e.getSavedSearch();return t.id&&t.title||i.i18n.translate("discover.discoverDefaultSearchSessionName",{defaultMessage:"Discover"})},getLocatorData:async()=>({id:o.a,initialState:y({...e,getSavedSearchId:t,shouldRestoreSearchSession:!1}),restoreState:y({...e,getSavedSearchId:t,shouldRestoreSearchSession:!0})})}}function y({appStateContainer:e,data:t,getSavedSearchId:r,shouldRestoreSearchSession:n}){const i=e.get();return{filters:t.query.filterManager.getFilters(),indexPatternId:i.index,query:i.query,savedSearchId:r(),timeRange:n?t.query.timefilter.timefilter.getAbsoluteTime():t.query.timefilter.timefilter.getTime(),searchSessionId:n?t.search.session.getSessionId():void 0,columns:i.columns,sort:i.sort,savedQuery:i.savedQuery,interval:i.interval,refreshInterval:n?{pause:!0,value:0}:void 0,useHash:!1,viewMode:i.viewMode,hideAggregatedPreview:i.hideAggregatedPreview}}},75:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(11),i=r(8);function s(e,t){if(!e.columns)return e;const r=!t.get(i.SEARCH_FIELDS_FROM_SOURCE),s=t.get(i.DEFAULT_COLUMNS_SETTING);if(r){let t=e.columns.filter((e=>"_source"!==e));return 0!==t.length||Object(n.isEqual)(s,["_source"])||(t=s,t=t.filter((e=>"_source"!==e))),{...e,columns:t}}if(0===e.columns.length){const t=s;return 0===t.length&&t.push("_source"),{...e,columns:[...t]}}return e}}}]);