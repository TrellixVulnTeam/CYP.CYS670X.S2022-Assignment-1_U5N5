(window.data_bundle_jsonpfunction=window.data_bundle_jsonpfunction||[]).push([[5],{116:function(e,t,n){"use strict";function a(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!Object.is(e[n[a]],t[n[a]]))return!1;return!0}n.d(t,"a",(function(){return a}))},119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(107),r=n(4),o=a.__importDefault(n(120));t.default=function(e,t){var n=r.useState(t),a=n[0],u=n[1];return o.default((function(){var t=e.subscribe(u);return function(){return t.unsubscribe()}}),[e]),a}},120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),r="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=r},126:function(e,t,n){"use strict";n.r(t),n.d(t,"QueryBarTopRow",(function(){return C}));var a=n(18),r=n.n(a),o=n(106),u=n.n(o),s=n(4),i=n.n(s),c=n(70),l=n.n(c),d=n(119),m=n.n(d),f=n(8),b=n(7),p=n(14),g=n(28),y=n(125),E=n(2),h=n(20),j=n(0);const v="data.noDataPopover";function O({showNoDataPopover:e,storage:t,children:n}){const[a,r]=Object(s.useState)((()=>Boolean(t.get(v)))),[o,u]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{e&&!a&&u(!0)}),[a,e]),i.a.createElement(p.EuiTourStep,{onFinish:()=>{},closePopover:()=>{u(!1)},content:i.a.createElement(p.EuiText,{size:"s"},i.a.createElement("p",{style:{maxWidth:300}},j.i18n.translate("data.noDataPopover.content",{defaultMessage:"This time range doesn't contain any data. Increase or adjust the time range to see more fields and create charts."}))),minWidth:300,anchorPosition:"downCenter",anchorClassName:"eui-displayBlock",step:1,stepsTotal:1,isStepOpen:o,subtitle:j.i18n.translate("data.noDataPopover.subtitle",{defaultMessage:"Tip"}),title:j.i18n.translate("data.noDataPopover.title",{defaultMessage:"Empty dataset"}),footerAction:i.a.createElement(p.EuiButtonEmpty,{size:"xs",flush:"right",color:"text","data-test-subj":"noDataPopoverDismissButton",onClick:()=>{t.set(v,!0),r(!0),u(!1)}},j.i18n.translate("data.noDataPopover.dismissAction",{defaultMessage:"Don't show again"}))},i.a.createElement("div",{onFocus:()=>{u(!1)}},n))}var S=n(116);const R=i.a.memo(p.EuiSuperDatePicker),P=i.a.memo(p.EuiSuperUpdateButton),T=Object(g.withKibana)(y.default),k=i.a.memo((function({from:e,to:t,dateFormat:n}){function a(e,t=!1){const n=r.a.parse(e,{roundUp:t});return n?n.toISOString():e}const o=Object(p.prettyDuration)(a(e),a(t),[],n);return i.a.createElement("div",{"data-shared-timefilter-duration":o,"data-test-subj":"dataSharedTimefilterDuration"})})),C=i.a.memo((function(e){var t;const{showQueryInput:n=!0,showDatePicker:a=!0,showAutoRefreshOnly:r=!1}=e,[o,c]=Object(s.useState)(!1),[l,d]=Object(s.useState)(!1),y=Object(g.useKibana)(),{uiSettings:j,storage:v,appName:S}=y.services,C=e.query&&e.query.language,_=Object(s.useRef)(e.query);_.current=e.query;const q=i.a.useMemo((()=>C&&j&&v&&S?Object(h.o)(j,v,S,C):void 0),[S,C,j,v]);const D=function(){const t=j.get(E.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS);return{from:e.dateRangeFrom||t.from,to:e.dateRangeTo||t.to}}(),F=Object(s.useRef)(D);F.current=D;const I=e.onSubmit,w=e=>e.map((({from:e,to:t})=>({start:e,end:t}))),B=e.timeHistory,x=Object(s.useMemo)((()=>{var e;return null!==(e=null==B?void 0:B.get$().pipe(Object(b.map)(w)))&&void 0!==e?e:f.EMPTY}),[B]),M=m()(x,w(null!==(t=null==B?void 0:B.get())&&void 0!==t?t:[])),[N]=Object(s.useState)((()=>{var e,t;return null!==(e=null==j||null===(t=j.get(E.UI_SETTINGS.TIMEPICKER_QUICK_RANGES))||void 0===t?void 0:t.map((({from:e,to:t,display:n})=>({start:e,end:t,label:n}))))&&void 0!==e?e:[]})),Q=Object(s.useCallback)((({query:e,dateRange:t})=>{B&&B.add(t),I({query:e,dateRange:t})}),[B,I]),U=Object(s.useCallback)((e=>{q&&_.current&&q.add(_.current.query),e.preventDefault(),Q({query:_.current,dateRange:F.current})}),[q,Q]),K=e.onChange,A=Object(s.useCallback)((e=>K({query:e,dateRange:F.current})),[K]),G=Object(s.useCallback)((e=>{d(e)}),[]),L=Object(s.useCallback)((({start:e,end:t,isInvalid:n,isQuickSelection:a})=>{c(n);const r={query:_.current,dateRange:{from:e,to:t}};a?Q(r):K(r)}),[K,Q]),z=e.onRefresh,H=Object(s.useCallback)((({start:e,end:t})=>{z&&z({dateRange:{from:e,to:t}})}),[z]),W=Object(s.useCallback)((e=>{Q({query:e,dateRange:F.current})}),[Q]);function Y(){return Boolean(a||r)}const $=u()("kbnQueryBar",{"kbnQueryBar--withDatePicker":a});return i.a.createElement(p.EuiFlexGroup,{className:$,responsive:!!a,gutterSize:"s",justifyContent:"flexEnd"},function(){if(Boolean(n&&e.indexPatterns&&e.query&&v))return i.a.createElement(p.EuiFlexItem,null,i.a.createElement(T,{disableAutoFocus:e.disableAutoFocus,indexPatterns:e.indexPatterns,prepend:e.prepend,query:e.query,screenTitle:e.screenTitle,onChange:A,onChangeQueryInputFocus:G,onSubmit:W,persistedLog:q,dataTestSubj:e.dataTestSubj,placeholder:e.placeholder,isClearable:e.isClearable,iconType:e.iconType,nonKqlMode:e.nonKqlMode,nonKqlModeHelpText:e.nonKqlModeHelpText,timeRangeForSuggestionsOverride:e.timeRangeForSuggestionsOverride}))}(),i.a.createElement(k,{from:D.from,to:D.to,dateFormat:j.get("dateFormat")}),i.a.createElement(p.EuiFlexItem,{grow:!1},function(){const t=e.customSubmitButton?i.a.cloneElement(e.customSubmitButton,{onClick:U}):i.a.createElement(P,{needsUpdate:e.isDirty,isDisabled:o,isLoading:e.isLoading,onClick:U,fill:e.fillSubmitButton,"data-test-subj":"querySubmitButton"});return Y()?i.a.createElement(O,{storage:v,showNoDataPopover:e.indicateNoData},i.a.createElement(p.EuiFlexGroup,{responsive:!1,gutterSize:"s"},function(){if(!Y())return null;const t=u()("kbnQueryBar__datePickerWrapper",{"kbnQueryBar__datePickerWrapper-isHidden":l});return i.a.createElement(p.EuiFlexItem,{className:t},i.a.createElement(R,{start:e.dateRangeFrom,end:e.dateRangeTo,isPaused:e.isRefreshPaused,refreshInterval:e.refreshInterval,onTimeChange:L,onRefresh:H,onRefreshChange:e.onRefreshChange,showUpdateButton:!1,recentlyUsedRanges:M,commonlyUsedRanges:N,dateFormat:j.get("dateFormat"),isAutoRefreshOnly:r,className:"kbnQueryBar__datePicker"}))}(),i.a.createElement(p.EuiFlexItem,{grow:!1},t))):t}()))}),(({query:e,...t},{query:n,...a})=>{let r=!0;return e!==n&&(l()(e,n)||(r=!1)),r&&Object(S.a)(t,a)}));t.default=C}}]);