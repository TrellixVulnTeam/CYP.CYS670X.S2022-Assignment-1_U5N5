(window.data_bundle_jsonpfunction=window.data_bundle_jsonpfunction||[]).push([[8],{137:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return IndexPatternSelect}));var s=n(50),i=n.n(s),o=n(3),a=n.n(o),d=n(1),h=n.n(d),r=n(4),c=n.n(r),l=n(14);class IndexPatternSelect extends r.Component{constructor(t){super(t),a()(this,"isMounted",!1),a()(this,"state",void 0),a()(this,"fetchSelectedIndexPattern",(async t=>{if(!t)return void this.setState({selectedIndexPattern:void 0});let e;try{e=(await this.props.indexPatternService.get(t)).title}catch(t){return}this.isMounted&&this.setState({selectedIndexPattern:{value:t,label:e}})})),a()(this,"debouncedFetch",h.a.debounce((async t=>{const e=await this.props.indexPatternService.getIdsWithTitle();if(!this.isMounted||t!==this.state.searchValue)return;const n=[];for(let s=0;s<e.length;s++)e[s].title.toLowerCase().includes(t.toLowerCase())&&n.push({label:e[s].title,value:e[s].id});this.setState({isLoading:!1,options:n}),this.props.onNoIndexPatterns&&""===t&&0===n.length&&this.props.onNoIndexPatterns()}),300)),a()(this,"fetchOptions",((t="")=>{this.setState({isLoading:!0,searchValue:t},this.debouncedFetch.bind(null,t))})),a()(this,"onChange",(t=>{this.props.onChange(h.a.get(t,"0.value"))})),this.state={isLoading:!1,options:[],selectedIndexPattern:void 0,searchValue:void 0}}componentWillUnmount(){this.isMounted=!1,this.debouncedFetch.cancel()}componentDidMount(){this.isMounted=!0,this.fetchOptions(""),this.fetchSelectedIndexPattern(this.props.indexPatternId)}UNSAFE_componentWillReceiveProps(t){t.indexPatternId!==this.props.indexPatternId&&this.fetchSelectedIndexPattern(t.indexPatternId)}render(){const{onChange:t,indexPatternId:e,placeholder:n,onNoIndexPatterns:s,indexPatternService:o,...a}=this.props;return c.a.createElement(l.EuiComboBox,i()({},a,{placeholder:n,singleSelection:!0,isLoading:this.state.isLoading,onSearchChange:this.fetchOptions,options:this.state.options,selectedOptions:this.state.selectedIndexPattern?[this.state.selectedIndexPattern]:[],onChange:this.onChange}))}}}}]);