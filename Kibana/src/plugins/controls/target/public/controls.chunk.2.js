(window.controls_bundle_jsonpfunction=window.controls_bundle_jsonpfunction||[]).push([[2],{37:function(e,t,o){"use strict";e.exports=o(62)},40:function(e,t,o){"use strict";e.exports=o(60)},41:function(e,t,o){"use strict";e.exports=o(61)},42:function(e,t,o){e.exports=o(18)(3)},55:function(e,t,o){switch(window.__kbnThemeTag__){case"v8dark":return o(56);case"v8light":return o(58)}},56:function(e,t,o){var n=o(33),r=o(57);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a={insert:"head",singleton:!1};n(r,a);e.exports=r.locals||{}},57:function(e,t,o){(t=o(34)(!1)).push([e.i,".controlGroup{min-height:64px}.controlsWrapper--empty{display:flex}@media only screen and (min-width: 768px) and (max-width: 991px){.controlsWrapper--empty{height:64px;overflow:hidden}.controlsWrapper--empty .addControlButton{text-align:center}.controlsWrapper--empty .emptyStateText{padding-left:32px}}@media only screen and (min-width: 992px) and (max-width: 1199px){.controlsWrapper--empty{height:64px;overflow:hidden}.controlsWrapper--empty .addControlButton{text-align:center}.controlsWrapper--empty .emptyStateText{padding-left:32px}}@media only screen and (min-width: 1200px){.controlsWrapper--empty{height:64px;overflow:hidden}.controlsWrapper--empty .addControlButton{text-align:center}.controlsWrapper--empty .emptyStateText{padding-left:32px}}@media only screen and (max-width: 574px){.controlsWrapper--empty .addControlButton{text-align:center}.controlsWrapper--empty .emptyStateText{text-align:center}.controlsWrapper--empty .controlsIllustration__container{margin-bottom:0 !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.controlsWrapper--empty .addControlButton{text-align:center}.controlsWrapper--empty .emptyStateText{text-align:center}.controlsWrapper--empty .controlsIllustration__container{margin-bottom:0 !important}}.controlsWrapper--twoLine .groupEditActions{padding-top:16px}.controlFrameCloneWrapper{width:max-content}.controlFrameCloneWrapper--small{width:224px}.controlFrameCloneWrapper--medium{width:400px}.controlFrameCloneWrapper--large{width:800px}.controlFrameCloneWrapper--twoLine{margin-top:-20px}.controlFrameCloneWrapper__label{cursor:grabbing !important}.controlFrameCloneWrapper .controlFrame__draggable{cursor:grabbing;height:40px;align-items:center;border-radius:6px;font-weight:600;background-color:#16171c;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(255,255,255,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;background-color:#2c2f37;min-width:224px;font-size:12px;font-size:.85714rem;line-height:1.14286rem}@supports (-moz-appearance: none){.controlFrameCloneWrapper .controlFrame__draggable{transition-property:box-shadow, background-image, background-size}}.controlFrameCloneWrapper .controlFrame__formControlLayout .controlFrame__dragHandle,.controlFrameCloneWrapper .controlFrame__draggable .controlFrame__dragHandle{cursor:grabbing}.controlFrameWrapper{flex-basis:auto;position:relative}.controlFrameWrapper .controlFrame__formControlLayout{width:100%;min-width:224px;transition:background-color .1s, color .1s}.controlFrameWrapper .controlFrame__formControlLayoutLabel{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;max-width:50%;border-radius:6px}.controlFrameWrapper .controlFrame__formControlLayout:not(.controlFrame__formControlLayout-clone) .controlFrame__dragHandle{cursor:grab}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control{height:100%;transition:opacity .1s}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control.controlFrame--twoLine{width:100%}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame--controlLoading{height:100%;display:flex;align-items:center;justify-content:center}.controlFrameWrapper--small{width:224px}.controlFrameWrapper--medium{width:400px}.controlFrameWrapper--large{width:800px}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after,.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{content:'';position:absolute;background-color:rgba(54,162,239,0.5);border-radius:6px;top:0;bottom:0;width:2px}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after{left:-5px}.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{right:-5px}.controlFrameWrapper .controlFrameFloatingActions{visibility:hidden;opacity:0;transition:visibility .3s, opacity .3s;z-index:1;position:absolute}.controlFrameWrapper .controlFrameFloatingActions--oneLine{right:4px;top:-24px;padding:4px;border-radius:6px;background-color:#1D1E24;box-shadow:0 0 0 1px #343741}.controlFrameWrapper .controlFrameFloatingActions--twoLine{right:4px;top:-4px}.controlFrameWrapper:hover .controlFrameFloatingActions{transition:visibility .1s, opacity .1s;visibility:visible;opacity:1}.controlFrameWrapper-isDragging .euiFormRow__labelWrapper{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout{background-color:#264341;color:transparent !important;box-shadow:none}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .euiFormLabel{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .controlFrame__control{opacity:0}\n",""]),e.exports=t},58:function(e,t,o){var n=o(33),r=o(59);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var a={insert:"head",singleton:!1};n(r,a);e.exports=r.locals||{}},59:function(e,t,o){(t=o(34)(!1)).push([e.i,".controlGroup{min-height:64px}.controlsWrapper--empty{display:flex}@media only screen and (min-width: 768px) and (max-width: 991px){.controlsWrapper--empty{height:64px;overflow:hidden}.controlsWrapper--empty .addControlButton{text-align:center}.controlsWrapper--empty .emptyStateText{padding-left:32px}}@media only screen and (min-width: 992px) and (max-width: 1199px){.controlsWrapper--empty{height:64px;overflow:hidden}.controlsWrapper--empty .addControlButton{text-align:center}.controlsWrapper--empty .emptyStateText{padding-left:32px}}@media only screen and (min-width: 1200px){.controlsWrapper--empty{height:64px;overflow:hidden}.controlsWrapper--empty .addControlButton{text-align:center}.controlsWrapper--empty .emptyStateText{padding-left:32px}}@media only screen and (max-width: 574px){.controlsWrapper--empty .addControlButton{text-align:center}.controlsWrapper--empty .emptyStateText{text-align:center}.controlsWrapper--empty .controlsIllustration__container{margin-bottom:0 !important}}@media only screen and (min-width: 575px) and (max-width: 767px){.controlsWrapper--empty .addControlButton{text-align:center}.controlsWrapper--empty .emptyStateText{text-align:center}.controlsWrapper--empty .controlsIllustration__container{margin-bottom:0 !important}}.controlsWrapper--twoLine .groupEditActions{padding-top:16px}.controlFrameCloneWrapper{width:max-content}.controlFrameCloneWrapper--small{width:224px}.controlFrameCloneWrapper--medium{width:400px}.controlFrameCloneWrapper--large{width:800px}.controlFrameCloneWrapper--twoLine{margin-top:-20px}.controlFrameCloneWrapper__label{cursor:grabbing !important}.controlFrameCloneWrapper .controlFrame__draggable{cursor:grabbing;height:40px;align-items:center;border-radius:6px;font-weight:600;background-color:#fbfcfd;background-repeat:no-repeat;background-size:0% 100%;box-shadow:0 0 transparent,inset 0 0 0 1px rgba(17,43,134,0.1);transition:box-shadow 150ms ease-in,background-image 150ms ease-in,background-size 150ms ease-in,background-color 150ms ease-in;background-color:#e9edf3;min-width:224px;font-size:12px;font-size:.85714rem;line-height:1.14286rem}@supports (-moz-appearance: none){.controlFrameCloneWrapper .controlFrame__draggable{transition-property:box-shadow, background-image, background-size}}.controlFrameCloneWrapper .controlFrame__formControlLayout .controlFrame__dragHandle,.controlFrameCloneWrapper .controlFrame__draggable .controlFrame__dragHandle{cursor:grabbing}.controlFrameWrapper{flex-basis:auto;position:relative}.controlFrameWrapper .controlFrame__formControlLayout{width:100%;min-width:224px;transition:background-color .1s, color .1s}.controlFrameWrapper .controlFrame__formControlLayoutLabel{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;max-width:50%;border-radius:6px}.controlFrameWrapper .controlFrame__formControlLayout:not(.controlFrame__formControlLayout-clone) .controlFrame__dragHandle{cursor:grab}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control{height:100%;transition:opacity .1s}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame__control.controlFrame--twoLine{width:100%}.controlFrameWrapper .controlFrame__formControlLayout .controlFrame--controlLoading{height:100%;display:flex;align-items:center;justify-content:center}.controlFrameWrapper--small{width:224px}.controlFrameWrapper--medium{width:400px}.controlFrameWrapper--large{width:800px}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after,.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{content:'';position:absolute;background-color:rgba(0,119,204,0.5);border-radius:6px;top:0;bottom:0;width:2px}.controlFrameWrapper--insertBefore .controlFrame__formControlLayout:after{left:-5px}.controlFrameWrapper--insertAfter .controlFrame__formControlLayout:after{right:-5px}.controlFrameWrapper .controlFrameFloatingActions{visibility:hidden;opacity:0;transition:visibility .3s, opacity .3s;z-index:1;position:absolute}.controlFrameWrapper .controlFrameFloatingActions--oneLine{right:4px;top:-24px;padding:4px;border-radius:6px;background-color:#fff;box-shadow:0 0 0 1px #D3DAE6}.controlFrameWrapper .controlFrameFloatingActions--twoLine{right:4px;top:-4px}.controlFrameWrapper:hover .controlFrameFloatingActions{transition:visibility .1s, opacity .1s;visibility:visible;opacity:1}.controlFrameWrapper-isDragging .euiFormRow__labelWrapper{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout{background-color:#e6f9f7;color:transparent !important;box-shadow:none}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .euiFormLabel{opacity:0}.controlFrameWrapper-isDragging .controlFrame__formControlLayout .controlFrame__control{opacity:0}\n",""]),e.exports=t},60:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=o(5),a=(n=r)&&"object"==typeof n&&"default"in n?n.default:n,l=o(41),i=o(37);function s(e,t,o){const n=e.slice();return n.splice(o<0?n.length+o:o,0,n.splice(t,1)[0]),n}function c(e){return null!==e&&e>=0}const d={scaleX:1,scaleY:1},u=({layoutRects:e,activeIndex:t,overIndex:o,index:n})=>{const r=s(e,o,t),a=e[n],l=r[n];return l&&a?{x:l.offsetLeft-a.offsetLeft,y:l.offsetTop-a.offsetTop,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},p={scaleX:1,scaleY:1},g=a.createContext({activeIndex:-1,containerId:"Sortable",disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:u,wasSorting:{current:!1}}),m=({isSorting:e,index:t,newIndex:o,transition:n})=>!(!n||!e&&o===t),f={duration:200,easing:"ease"},h=i.CSS.Transition.toString({property:"transform",duration:0,easing:"linear"}),b={roleDescription:"sortable"},y=[l.KeyboardCode.Down,l.KeyboardCode.Right,l.KeyboardCode.Up,l.KeyboardCode.Left];t.SortableContext=function({children:e,id:t,items:o,strategy:n=u}){const{active:s,overlayNode:c,droppableRects:d,over:p,recomputeLayouts:m,willRecomputeLayouts:f}=l.useDndContext(),h=i.useUniqueId("Sortable",t),b=Boolean(null!==c.rect),y=r.useMemo((()=>o.map((e=>"string"==typeof e?e:e.id))),[o]),v=s?y.indexOf(s.id):-1,x=-1!==v,C=r.useRef(x),w=p?y.indexOf(p.id):-1,j=r.useRef(y),E=function(e,t){return e.reduce(((e,o,n)=>{const r=t.get(o);return r&&(e[n]=r),e}),Array(e.length))}(y,d),F=(O=j.current,!(y.join()===O.join()));var O;const S=-1!==w&&-1===v||F;i.useIsomorphicLayoutEffect((()=>{F&&x&&!f&&m()}),[F,x,m,f]),r.useEffect((()=>{j.current=y}),[y]),r.useEffect((()=>{requestAnimationFrame((()=>{C.current=x}))}),[x]);const T=r.useMemo((()=>({activeIndex:v,containerId:h,disableTransforms:S,items:y,overIndex:w,useDragOverlay:b,sortedRects:E,strategy:n,wasSorting:C})),[v,h,S,y,w,E,b,n,C]);return a.createElement(g.Provider,{value:T},e)},t.arrayMove=s,t.defaultAnimateLayoutChanges=m,t.horizontalListSortingStrategy=({layoutRects:e,activeNodeRect:t,activeIndex:o,overIndex:n,index:r})=>{var a;const l=null!=(a=e[o])?a:t;if(!l)return null;const i=function(e,t,o){const n=e[t],r=e[t-1],a=e[t+1];return r||a?o<t?r?n.offsetLeft-(r.offsetLeft+r.width):a.offsetLeft-(n.offsetLeft+n.width):a?a.offsetLeft-(n.offsetLeft+n.width):n.offsetLeft-(r.offsetLeft+r.width):0}(e,r,o);if(r===o){const t=e[n];return t?{x:o<n?t.offsetLeft+t.width-(l.offsetLeft+l.width):t.offsetLeft-l.offsetLeft,y:0,...d}:null}return r>o&&r<=n?{x:-l.width-i,y:0,...d}:r<o&&r>=n?{x:l.width+i,y:0,...d}:{x:0,y:0,...d}},t.rectSortingStrategy=u,t.rectSwappingStrategy=({activeIndex:e,index:t,layoutRects:o,overIndex:n})=>{let r,a;return t===e&&(r=o[t],a=o[n]),t===n&&(r=o[t],a=o[e]),a&&r?{x:a.offsetLeft-r.offsetLeft,y:a.offsetTop-r.offsetTop,scaleX:a.width/r.width,scaleY:a.height/r.height}:null},t.sortableKeyboardCoordinates=(e,{context:{droppableContainers:t,translatedRect:o,scrollableAncestors:n}})=>{if(y.includes(e.code)){if(e.preventDefault(),!o)return;const a=[];Object.entries(t).forEach((([t,n])=>{if(null==n?void 0:n.disabled)return;const r=null==n?void 0:n.node.current;if(!r)return;const i=l.getViewRect(r);switch(e.code){case l.KeyboardCode.Down:o.top+o.height<=i.top&&a.push([t,i]);break;case l.KeyboardCode.Up:o.top>=i.top+i.height&&a.push([t,i]);break;case l.KeyboardCode.Left:o.left>=i.left+i.width&&a.push([t,i]);break;case l.KeyboardCode.Right:o.left+o.width<=i.left&&a.push([t,i])}}));const i=l.closestCorners(a,o);if(i){var r;const e=null==(r=t[i])?void 0:r.node.current;if(e){const t=l.getScrollableAncestors(e).some(((e,t)=>n[t]!==e)),r=l.getViewRect(e),a=t?{x:0,y:0}:{x:o.width-r.width,y:o.height-r.height};return{x:r.left-a.x,y:r.top-a.y}}}}},t.useSortable=function({animateLayoutChanges:e=m,attributes:t,disabled:o,data:n,id:a,strategy:d,transition:u=f}){const{items:p,containerId:y,activeIndex:v,disableTransforms:x,sortedRects:C,overIndex:w,useDragOverlay:j,strategy:E,wasSorting:F}=r.useContext(g),O=p.indexOf(a),S=r.useMemo((()=>({sortable:{containerId:y,index:O,items:p},...n})),[y,n,O,p]),{rect:T,node:L,setNodeRef:D}=l.useDroppable({id:a,data:S}),{active:R,activeNodeRect:W,activatorEvent:_,attributes:I,setNodeRef:M,listeners:N,isDragging:A,over:B,transform:k}=l.useDraggable({id:a,data:S,attributes:{...b,...t},disabled:o}),K=i.useCombinedRefs(D,M),P=Boolean(R),z=P&&F.current&&!x&&c(v)&&c(w),$=!j&&A,H=$&&z?k:null,q=z?null!=H?H:(null!=d?d:E)({layoutRects:C,activeNodeRect:W,activeIndex:v,overIndex:w,index:O}):null,G=c(v)&&c(w)?s(p,v,w).indexOf(a):O,Y=r.useRef(G),U=e({active:R,isDragging:A,isSorting:P,id:a,index:O,items:p,newIndex:Y.current,transition:u,wasSorting:F.current}),X=function({rect:e,disabled:t,index:o,node:n}){const[a,i]=r.useState(null),s=r.useRef(o);return r.useEffect((()=>{if(!t&&o!==s.current&&n.current){const t=e.current;if(t){const e=l.getBoundingClientRect(n.current),o={x:t.offsetLeft-e.offsetLeft,y:t.offsetTop-e.offsetTop,scaleX:t.width/e.width,scaleY:t.height/e.height};(o.x||o.y)&&i(o)}}o!==s.current&&(s.current=o)}),[t,o,n,e]),r.useEffect((()=>{a&&requestAnimationFrame((()=>{i(null)}))}),[a]),a}({disabled:!U,index:O,node:L,rect:T});return r.useEffect((()=>{P&&(Y.current=G)}),[P,G]),{active:R,attributes:I,activatorEvent:_,rect:T,index:O,isSorting:P,isDragging:A,listeners:N,node:L,overIndex:w,over:B,setNodeRef:K,setDroppableNodeRef:D,setDraggableNodeRef:M,transform:null!=X?X:q,transition:X?h:$||!u?null:P||U?i.CSS.Transition.toString({...u,property:"transform"}):null}},t.verticalListSortingStrategy=({activeIndex:e,activeNodeRect:t,index:o,layoutRects:n,overIndex:r})=>{var a;const l=null!=(a=n[e])?a:t;if(!l)return null;if(o===e){const t=n[r];return t?{x:0,y:e<r?t.offsetTop+t.height-(l.offsetTop+l.height):t.offsetTop-l.offsetTop,...p}:null}const i=function(e,t,o){const n=e[t],r=e[t-1],a=e[t+1];return n?o<t?r?n.offsetTop-(r.offsetTop+r.height):a?a.offsetTop-(n.offsetTop+n.height):0:a?a.offsetTop-(n.offsetTop+n.height):r?n.offsetTop-(r.offsetTop+r.height):0:0}(n,o,e);return o>e&&o<=r?{x:0,y:-l.height-i,...p}:o<e&&o>=r?{x:0,y:l.height+i,...p}:{x:0,y:0,...p}}},61:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=o(5),a=(n=r)&&"object"==typeof n&&"default"in n?n.default:n,l=o(27),i=o(37),s=o(63);const c={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},d={onDragStart:e=>`Picked up draggable item ${e}.`,onDragOver:(e,t)=>t?`Draggable item ${e} was moved over droppable area ${t}.`:`Draggable item ${e} is no longer over a droppable area.`,onDragEnd:(e,t)=>t?`Draggable item ${e} was dropped over droppable area ${t}`:`Draggable item ${e} was dropped.`,onDragCancel:e=>`Dragging was cancelled. Draggable item ${e} was dropped.`};var u;!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(u||(u={}));const p=e=>g(e,((e,t)=>e<t));function g(e,t){if(0===e.length)return-1;let o=e[0],n=0;for(var r=1;r<e.length;r++)t(e[r],o)&&(n=r,o=e[r]);return n}function m(...e){}function f(e,t){const{[e]:o,...n}=t;return n}const h=r.createContext({activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,activeNodeClientRect:null,activators:[],ariaDescribedById:{draggable:""},containerNodeRect:null,dispatch:m,draggableNodes:{},droppableRects:new Map,droppableContainers:{},over:null,overlayNode:{nodeRef:{current:null},rect:null,setRef:m},scrollableAncestors:[],scrollableAncestorRects:[],recomputeLayouts:m,windowRect:null,willRecomputeLayouts:!1}),b=Object.freeze({x:0,y:0});function y(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function v(e){if(function(e){var t;return(null==(t=window)?void 0:t.TouchEvent)&&e instanceof TouchEvent}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:o}=e.touches[0];return{x:t,y:o}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:o}=e.changedTouches[0];return{x:t,y:o}}}return function(e){var t;return(null==(t=window)?void 0:t.MouseEvent)&&e instanceof MouseEvent||e.type.includes("mouse")}(e)?{x:e.clientX,y:e.clientY}:{x:0,y:0}}function x(e,t){if(e instanceof KeyboardEvent)return"0 0";const o=v(e);return`${(o.x-t.left)/t.width*100}% ${(o.y-t.top)/t.height*100}%`}function C(e,t=e.offsetLeft,o=e.offsetTop){return{x:t+.5*e.width,y:o+.5*e.height}}const w=function(e){return function(t,...o){return o.reduce(((t,o)=>({...t,top:t.top+e*o.y,bottom:t.bottom+e*o.y,left:t.left+e*o.x,right:t.right+e*o.x,offsetLeft:t.offsetLeft+e*o.x,offsetTop:t.offsetTop+e*o.y})),{...t})}}(1);function j(e){const t=[];return e?function e(o){return o?o instanceof Document&&null!=o.scrollingElement?(t.push(o.scrollingElement),t):!(o instanceof HTMLElement)||o instanceof SVGElement?t:(function(e){const t=window.getComputedStyle(e),o=/(auto|scroll|overlay)/;return null!=["overflow","overflowX","overflowY"].find((e=>{const n=t[e];return"string"==typeof n&&o.test(n)}))}(o)&&t.push(o),e(o.parentNode)):t}(e.parentNode):t}function E(e){return i.canUseDOM?e===document.scrollingElement||e instanceof Document?window:e instanceof HTMLElement?e:null:null}function F(e){return e instanceof Window?{x:e.scrollX,y:e.scrollY}:{x:e.scrollLeft,y:e.scrollTop}}var O;function S(e){const t={x:0,y:0},o={x:e.scrollWidth-e.clientWidth,y:e.scrollHeight-e.clientHeight};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=o.y,isRight:e.scrollLeft>=o.x,maxScroll:o,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(O||(O={}));const T={x:.2,y:.2};function L(e,t,{top:o,left:n,right:r,bottom:a},l=10,s=T){const{clientHeight:c,clientWidth:d}=e,u=(p=e,i.canUseDOM&&p&&p===document.scrollingElement?{top:0,left:0,right:d,bottom:c,width:d,height:c}:t);var p;const{isTop:g,isBottom:m,isLeft:f,isRight:h}=S(e),b={x:0,y:0},y={x:0,y:0},v=u.height*s.y,x=u.width*s.x;return!g&&o<=u.top+v?(b.y=O.Backward,y.y=l*Math.abs((u.top+v-o)/v)):!m&&a>=u.bottom-v&&(b.y=O.Forward,y.y=l*Math.abs((u.bottom-v-a)/v)),!h&&r>=u.right-x?(b.x=O.Forward,y.x=l*Math.abs((u.right-x-r)/x)):!f&&n<=u.left+x&&(b.x=O.Backward,y.x=l*Math.abs((u.left+x-n)/x)),{direction:b,speed:y}}function D(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:o,right:n,bottom:r}=e.getBoundingClientRect();return{top:t,left:o,right:n,bottom:r,width:e.clientWidth,height:e.clientHeight}}function R(e){return e.reduce(((e,t)=>i.add(e,F(t))),b)}function W(e){const{offsetWidth:t,offsetHeight:o}=e,{x:n,y:r}=function e(t,o,n=b){if(!(t&&t instanceof HTMLElement))return n;const r={x:n.x+t.offsetLeft,y:n.y+t.offsetTop};return t.offsetParent===o?r:e(t.offsetParent,o,r)}(e,null);return{width:t,height:o,offsetTop:r,offsetLeft:n}}function _(e){if(e instanceof Window){const e=window.innerWidth,t=window.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t,offsetTop:0,offsetLeft:0}}const{offsetTop:t,offsetLeft:o}=W(e),{width:n,height:r,top:a,bottom:l,left:i,right:s}=e.getBoundingClientRect();return{width:n,height:r,top:a,bottom:l,right:s,left:i,offsetTop:t,offsetLeft:o}}function I(e){const{width:t,height:o,offsetTop:n,offsetLeft:r}=W(e),a=R(j(e)),l=n-a.y,i=r-a.x;return{width:t,height:o,top:l,bottom:l+o,right:i+t,left:i,offsetTop:n,offsetLeft:r}}function M(e){return"top"in e}function N(e,t=e.offsetLeft,o=e.offsetTop){return[{x:t,y:o},{x:t+e.width,y:o},{x:t,y:o+e.height},{x:t+e.width,y:o+e.height}]}const A=(e,t)=>{const o=e.map((([e,o])=>function(e,t){const o=Math.max(t.top,e.offsetTop),n=Math.max(t.left,e.offsetLeft),r=Math.min(t.left+t.width,e.offsetLeft+e.width),a=Math.min(t.top+t.height,e.offsetTop+e.height);if(n<r&&o<a){const l=(r-n)*(a-o);return Number((l/(t.width*t.height+e.width*e.height-l)).toFixed(4))}return 0}(o,t))),n=g(o,((e,t)=>e>t));return o[n]<=0?null:e[n]?e[n][0]:null};function B(e){return e instanceof HTMLElement?e.ownerDocument:document}function k(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:{},translate:{x:0,y:0}},droppable:{containers:{}}}}function K(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{const{element:o}=t,{id:n}=o;return{...e,droppable:{...e.droppable,containers:{...e.droppable.containers,[n]:o}}}}case u.SetDroppableDisabled:{const{id:o,disabled:n}=t,r=e.droppable.containers[o];return r?{...e,droppable:{...e.droppable,containers:{...e.droppable.containers,[o]:{...r,disabled:n}}}}:e}case u.UnregisterDroppable:{const{id:o}=t;return{...e,droppable:{...e.droppable,containers:f(o,e.droppable.containers)}}}default:return e}}const P=r.createContext({type:null,event:null});function z({onDragStart:e,onDragMove:t,onDragOver:o,onDragEnd:n,onDragCancel:a}){const l=r.useContext(P),i=r.useRef(l);r.useEffect((()=>{if(l!==i.current){const{type:r,event:s}=l;switch(r){case u.DragStart:null==e||e(s);break;case u.DragMove:null==t||t(s);break;case u.DragOver:null==o||o(s);break;case u.DragCancel:null==a||a(s);break;case u.DragEnd:null==n||n(s)}i.current=l}}),[l,e,t,o,n,a])}function $({announcements:e=d,hiddenTextDescribedById:t,screenReaderInstructions:o}){const{announce:n,announcement:c}=s.useAnnouncement(),u=i.useUniqueId("DndLiveRegion"),[p,g]=r.useState(!1);return r.useEffect((()=>{g(!0)}),[]),z(r.useMemo((()=>({onDragStart({active:t}){n(e.onDragStart(t.id))},onDragMove({active:t,over:o}){e.onDragMove&&n(e.onDragMove(t.id,null==o?void 0:o.id))},onDragOver({active:t,over:o}){n(e.onDragOver(t.id,null==o?void 0:o.id))},onDragEnd({active:t,over:o}){n(e.onDragEnd(t.id,null==o?void 0:o.id))},onDragCancel({active:t}){n(e.onDragCancel(t.id))}})),[n,e])),p?l.createPortal(a.createElement(a.Fragment,null,a.createElement(s.HiddenText,{id:t,value:o.draggable}),a.createElement(s.LiveRegion,{id:u,announcement:c})),document.body):null}var H,q,G;function Y(e){const t=r.useRef(e);return i.useIsomorphicLayoutEffect((()=>{t.current!==e&&(t.current=e)}),[e]),t}(H=t.AutoScrollActivator||(t.AutoScrollActivator={}))[H.Pointer=0]="Pointer",H[H.DraggableRect=1]="DraggableRect",(q=t.TraversalOrder||(t.TraversalOrder={}))[q.TreeOrder=0]="TreeOrder",q[q.ReversedTreeOrder=1]="ReversedTreeOrder",(G=t.LayoutMeasuringStrategy||(t.LayoutMeasuringStrategy={}))[G.Always=0]="Always",G[G.BeforeDragging=1]="BeforeDragging",G[G.WhileDragging=2]="WhileDragging",(t.LayoutMeasuringFrequency||(t.LayoutMeasuringFrequency={})).Optimized="optimized";const U=new Map,X={strategy:t.LayoutMeasuringStrategy.WhileDragging,frequency:t.LayoutMeasuringFrequency.Optimized},V=[],J=te(_),Q=function(e){const t=[];return function(o,n){const a=r.useRef(o);return i.useLazyMemo((r=>o.length?n||!r&&o.length||o!==a.current?o.map((t=>e(t))):null!=r?r:t:t),[o,n])}}(_),Z=te(I);function te(e){return function(t,o){const n=r.useRef(t);return i.useLazyMemo((r=>t?o||!r&&t||t!==n.current?t instanceof HTMLElement&&null==t.parentNode?null:e(t):null!=r?r:null:null),[t,o])}}class ee{constructor(e){this.target=e,this.listeners=[]}add(e,t,o){this.target.addEventListener(e,t,o),this.listeners.push({eventName:e,handler:t})}removeAll(){this.listeners.forEach((({eventName:e,handler:t})=>this.target.removeEventListener(e,t)))}}function oe(e,t){const o=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(o**2+n**2)>t:"x"in t&&"y"in t?o>t.x&&n>t.y:"x"in t?o>t.x:"y"in t&&n>t.y}var ne;(ne=t.KeyboardCode||(t.KeyboardCode={})).Space="Space",ne.Down="ArrowDown",ne.Right="ArrowRight",ne.Left="ArrowLeft",ne.Up="ArrowUp",ne.Esc="Escape",ne.Enter="Enter";const re={start:[t.KeyboardCode.Space,t.KeyboardCode.Enter],cancel:[t.KeyboardCode.Esc],end:[t.KeyboardCode.Space,t.KeyboardCode.Enter]},le=(e,{currentCoordinates:o})=>{switch(e.code){case t.KeyboardCode.Right:return{...o,x:o.x+25};case t.KeyboardCode.Left:return{...o,x:o.x-25};case t.KeyboardCode.Down:return{...o,y:o.y+25};case t.KeyboardCode.Up:return{...o,y:o.y-25}}};class ae{constructor(e){this.props=e,this.autoScrollEnabled=!1,this.coordinates=b;const{event:{target:t}}=e;this.props=e,this.listeners=new ee(B(t)),this.windowListeners=new ee(function(e){var t;return null!=(t=B(e).defaultView)?t:window}(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),setTimeout((()=>{this.listeners.add("keydown",this.handleKeyDown),this.windowListeners.add("resize",this.handleCancel)}))}handleStart(){const{activeNode:e,onStart:t}=this.props;if(!e.node.current)throw new Error("Active draggable node is undefined");const o=_(e.node.current),n={x:o.left,y:o.top};this.coordinates=n,t(n)}handleKeyDown(e){if(e instanceof KeyboardEvent){const{coordinates:o}=this,{active:n,context:r,options:a}=this.props,{keyboardCodes:l=re,coordinateGetter:s=le,scrollBehavior:c="smooth"}=a,{code:d}=e;if(l.end.includes(d))return void this.handleEnd(e);if(l.cancel.includes(d))return void this.handleCancel(e);const u=s(e,{active:n,context:r.current,currentCoordinates:o});if(u){const n={x:0,y:0},{scrollableAncestors:a}=r.current;for(const r of a){const a=e.code,l=i.subtract(u,o),{isTop:s,isRight:d,isLeft:p,isBottom:g,maxScroll:m,minScroll:f}=S(r),h=D(r),b={x:Math.min(a===t.KeyboardCode.Right?h.right-h.width/2:h.right,Math.max(a===t.KeyboardCode.Right?h.left:h.left+h.width/2,u.x)),y:Math.min(a===t.KeyboardCode.Down?h.bottom-h.height/2:h.bottom,Math.max(a===t.KeyboardCode.Down?h.top:h.top+h.height/2,u.y))},y=a===t.KeyboardCode.Right&&!d||a===t.KeyboardCode.Left&&!p,v=a===t.KeyboardCode.Down&&!g||a===t.KeyboardCode.Up&&!s;if(y&&b.x!==u.x){if(a===t.KeyboardCode.Right&&r.scrollLeft+l.x<=m.x||a===t.KeyboardCode.Left&&r.scrollLeft+l.x>=f.x)return void r.scrollBy({left:l.x,behavior:c});n.x=a===t.KeyboardCode.Right?r.scrollLeft-m.x:r.scrollLeft-f.x,r.scrollBy({left:-n.x,behavior:c});break}if(v&&b.y!==u.y){if(a===t.KeyboardCode.Down&&r.scrollTop+l.y<=m.y||a===t.KeyboardCode.Up&&r.scrollTop+l.y>=f.y)return void r.scrollBy({top:l.y,behavior:c});n.y=a===t.KeyboardCode.Down?r.scrollTop-m.y:r.scrollTop-f.y,r.scrollBy({top:-n.y,behavior:c});break}}this.handleMove(e,i.add(u,n))}}}handleMove(e,t){const{onMove:o}=this.props;e.preventDefault(),o(t),this.coordinates=t}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function ie(e){return Boolean(e&&"distance"in e)}function se(e){return Boolean(e&&"delay"in e)}var ue;ae.activators=[{eventName:"onKeyDown",handler:(e,{keyboardCodes:t=re,onActivation:o})=>{const{code:n}=e.nativeEvent;return!!t.start.includes(n)&&(e.preventDefault(),null==o||o({event:e.nativeEvent}),!0)}}],function(e){e.Keydown="keydown"}(ue||(ue={}));class ce{constructor(e,t,o=function(e){return e instanceof EventTarget?e:B(e)}(e.event.target)){this.props=e,this.events=t,this.autoScrollEnabled=!0,this.activated=!1,this.timeoutId=null;const{event:n}=e;this.props=e,this.events=t,this.ownerDocument=B(n.target),this.listeners=new ee(o),this.initialCoordinates=v(n),this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t}}}=this;if(this.listeners.add(e.move.name,this.handleMove,!1),this.listeners.add(e.end.name,this.handleEnd),this.ownerDocument.addEventListener(ue.Keydown,this.handleKeydown),t){if(ie(t))return;if(se(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay))}this.handleStart()}detach(){this.listeners.removeAll(),this.ownerDocument.removeEventListener(ue.Keydown,this.handleKeydown),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,t(e))}handleMove(e){const{activated:t,initialCoordinates:o,props:n}=this,{onMove:r,options:{activationConstraint:a}}=n;if(!o)return;const l=v(e),s=i.subtract(o,l);if(!t&&a){if(se(a))return oe(s,a.tolerance)?this.handleCancel():void 0;if(ie(a))return oe(s,a.distance)?this.handleStart():void 0}e.cancelable&&e.preventDefault(),r(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===t.KeyboardCode.Esc&&this.handleCancel()}}const pe={move:{name:"pointermove"},end:{name:"pointerup"}};class de extends ce{constructor(e){const{event:t}=e,o=B(t.target);super(e,pe,o)}}de.activators=[{eventName:"onPointerDown",handler:({nativeEvent:e},{onActivation:t})=>!(!e.isPrimary||0!==e.button||(null==t||t({event:e}),0))}];const ge={move:{name:"mousemove"},end:{name:"mouseup"}};var me;!function(e){e[e.RightClick=2]="RightClick"}(me||(me={}));class he extends ce{constructor(e){super(e,ge,B(e.event.target))}}he.activators=[{eventName:"onMouseDown",handler:({nativeEvent:e},{onActivation:t})=>e.button!==me.RightClick&&(null==t||t({event:e}),!0)}];const fe={move:{name:"touchmove"},end:{name:"touchend"}};class ve extends ce{constructor(e){super(e,fe)}}function be(e,{transform:t,...o}){return(null==e?void 0:e.length)?e.reduce(((e,t)=>t({transform:e,...o})),t):t}ve.activators=[{eventName:"onTouchStart",handler:({nativeEvent:e},{onActivation:t})=>{const{touches:o}=e;return!(o.length>1||(null==t||t({event:e}),0))}}];const ye=[{sensor:de,options:{}},{sensor:ae,options:{}}],xe={current:{}},Ce=r.createContext({...b,scaleX:1,scaleY:1}),we=r.memo((function({id:e,autoScroll:o=!0,announcements:n,children:l,sensors:s=ye,collisionDetection:d=A,layoutMeasuring:p,modifiers:g,screenReaderInstructions:m=c,...f}){var y,x,C;const O=r.useReducer(K,void 0,k),[S,T]=O,[D,_]=r.useState((()=>({type:null,event:null}))),{draggable:{active:I,nodes:M,translate:N},droppable:{containers:B}}=S,z=I?M[I]:null,H=r.useRef({initial:null,translated:null}),q=r.useMemo((()=>{var e;return null!=I?{id:I,data:null!=(e=null==z?void 0:z.data)?e:xe,rect:H}:null}),[I,z]),G=r.useRef(null),[Y,te]=r.useState(null),[oe,ne]=r.useState(null),re=r.useRef(f),le=i.useUniqueId("DndDescribedBy",e),{layoutRectMap:ie,recomputeLayouts:se,willRecomputeLayouts:ue}=function(e,{dragging:o,dependencies:n,config:a}){const[l,s]=r.useState(!1),{frequency:c,strategy:d}=(u=a)?{...X,...u}:X;var u;const p=r.useRef(e),g=r.useCallback((()=>s(!0)),[]),m=r.useRef(null),f=function(){switch(d){case t.LayoutMeasuringStrategy.Always:return!1;case t.LayoutMeasuringStrategy.BeforeDragging:return o;default:return!o}}(),h=i.useLazyMemo((t=>{if(f&&!o)return U;if(!t||t===U||p.current!==e||l){for(let t of Object.values(e))t&&(t.rect.current=t.node.current?W(t.node.current):null);return function(e){const t=new Map;if(e)for(const o of Object.values(e)){if(!o)continue;const{id:e,rect:n,disabled:r}=o;r||null==n.current||t.set(e,n.current)}return t}(e)}return t}),[e,o,f,l]);return r.useEffect((()=>{p.current=e}),[e]),r.useEffect((()=>{l&&s(!1)}),[l]),r.useEffect((function(){f||requestAnimationFrame(g)}),[o,f]),r.useEffect((function(){f||"number"!=typeof c||null!==m.current||(m.current=setTimeout((()=>{g(),m.current=null}),c))}),[c,f,g,...n]),{layoutRectMap:h,recomputeLayouts:g,willRecomputeLayouts:l}}(B,{dragging:null!=I,dependencies:[N.x,N.y],config:p}),pe=function(e,t){const o=null!==t?e[t]:void 0,n=o?o.node.current:null;return i.useLazyMemo((e=>{var o;return null===t?null:null!=(o=null!=n?n:e)?o:null}),[n,t])}(M,I),ge=oe?v(oe):null,me=Z(pe),fe=J(pe),we=r.useRef(null),je=(Fe=we.current,(Ee=me)&&Fe?{x:Ee.left-Fe.left,y:Ee.top-Fe.top}:b);var Ee,Fe;const Oe=r.useRef({active:null,activeNode:pe,collisionRect:null,droppableRects:ie,draggableNodes:M,draggingNodeRect:null,droppableContainers:B,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null,translatedRect:null}),Se=function(e,t){var o,n;return e&&null!=(o=null==(n=t[e])?void 0:n.node.current)?o:null}(null!=(y=null==(x=Oe.current.over)?void 0:x.id)?y:null,B),Te=J(pe?pe.ownerDocument.defaultView:null),Le=J(pe?pe.parentElement:null),De=function(e){const t=r.useRef(e),o=i.useLazyMemo((o=>e?o&&e&&t.current&&e.parentNode===t.current.parentNode?o:j(e):V),[e]);return r.useEffect((()=>{t.current=e}),[e]),o}(I?null!=Se?Se:pe:null),Re=Q(De),[We,_e]=i.useNodeRef(),Ie=J(I?We.current:null,ue),Me=null!=Ie?Ie:fe,Ne=be(g,{transform:{x:N.x-je.x,y:N.y-je.y,scaleX:1,scaleY:1},active:q,over:Oe.current.over,activeNodeRect:fe,draggingNodeRect:Me,containerNodeRect:Le,overlayNodeRect:Ie,scrollableAncestors:De,scrollableAncestorRects:Re,windowRect:Te}),Ae=ge?i.add(ge,N):null,Be=function(e){const[t,o]=r.useState(null),n=r.useRef(e),a=r.useCallback((e=>{const t=E(e.target);t&&o((e=>e?(e.set(t,F(t)),new Map(e)):null))}),[]);return r.useEffect((()=>{const t=n.current;if(e!==t){r(t);const l=e.map((e=>{const t=E(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,F(t)]):null})).filter((e=>null!=e));o(l.length?new Map(l):null),n.current=e}return()=>{r(e),r(t)};function r(e){e.forEach((e=>{const t=E(e);null==t||t.removeEventListener("scroll",a)}))}}),[a,e]),r.useMemo((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>i.add(e,t)),b):R(e):b),[e,t])}(De),ke=i.add(Ne,Be),Ke=me?w(me,Ne):null,Pe=Ke?w(Ke,Be):null,ze=function(e,t){var o;return e&&null!=(o=t[e])?o:null}(q&&Pe?d(Array.from(ie.entries()),Pe):null,B),$e=r.useMemo((()=>ze&&ze.rect.current?{id:ze.id,rect:ze.rect.current,data:ze.data,disabled:ze.disabled}:null),[ze]),He=function(e,t,o){return{...e,scaleX:t&&o?t.width/o.width:1,scaleY:t&&o?t.height/o.height:1}}(Ne,null!=(C=null==ze?void 0:ze.rect.current)?C:null,me),qe=r.useCallback(((e,{sensor:t,options:o})=>{if(!G.current)return;const n=M[G.current];if(!n)return;const r=new t({active:G.current,activeNode:n,event:e.nativeEvent,options:o,context:Oe,onStart(e){const t=G.current;if(!t)return;const o=M[t];if(!o)return;const{onDragStart:n}=re.current,r={active:{id:t,data:o.data,rect:H}};T({type:u.DragStart,initialCoordinates:e,active:t}),_({type:u.DragStart,event:r}),null==n||n(r)},onMove(e){T({type:u.DragMove,coordinates:e})},onEnd:a(u.DragEnd),onCancel:a(u.DragCancel)});function a(e){return async function(){const{active:t,over:o,scrollAdjustedTranslate:n}=Oe.current;let r=null;if(t&&n){const{cancelDrop:a}=re.current;r={active:t,delta:n,over:o},e===u.DragEnd&&"function"==typeof a&&await Promise.resolve(a(r))&&(e=u.DragCancel)}if(G.current=null,T({type:e}),te(null),ne(null),r){const{onDragCancel:t,onDragEnd:o}=re.current,n=e===u.DragEnd?o:t;_({type:e,event:r}),null==n||n(r)}}}te(r),ne(e.nativeEvent)}),[T,M]),Ge=function(e,t){return r.useMemo((()=>e.reduce(((e,o)=>{const{sensor:n}=o;return[...e,...n.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,o)})))]}),[])),[e,t])}(s,r.useCallback(((e,t)=>(o,n)=>{const r=o.nativeEvent;null!==G.current||r.dndKit||r.defaultPrevented||!0===e(o,t.options)&&(r.dndKit={capturedBy:t.sensor},G.current=n,qe(o,t))}),[qe]));i.useIsomorphicLayoutEffect((()=>{re.current=f}),Object.values(f)),r.useEffect((()=>{q||(we.current=null),q&&me&&!we.current&&(we.current=me)}),[me,q]),r.useEffect((()=>{const{onDragMove:e}=re.current,{active:t,over:o}=Oe.current;if(!t)return;const n={active:t,delta:{x:ke.x,y:ke.y},over:o};_({type:u.DragMove,event:n}),null==e||e(n)}),[ke.x,ke.y]),r.useEffect((()=>{const{active:e,scrollAdjustedTranslate:t}=Oe.current;if(!e||!G.current||!t)return;const{onDragOver:o}=re.current,n={active:e,delta:{x:t.x,y:t.y},over:$e};_({type:u.DragOver,event:n}),null==o||o(n)}),[null==$e?void 0:$e.id]),i.useIsomorphicLayoutEffect((()=>{Oe.current={active:q,activeNode:pe,collisionRect:Pe,droppableRects:ie,draggableNodes:M,draggingNodeRect:Me,droppableContainers:B,over:$e,scrollableAncestors:De,scrollAdjustedTranslate:ke,translatedRect:Ke},H.current={initial:Me,translated:Ke}}),[q,pe,Pe,M,Me,ie,B,$e,De,ke,Ke]),function({acceleration:e,activator:o=t.AutoScrollActivator.Pointer,canScroll:n,draggingRect:a,enabled:l,interval:s=5,order:c=t.TraversalOrder.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:p,threshold:g}){const[m,f]=i.useInterval(),h=r.useRef({x:1,y:1}),y=r.useMemo((()=>{switch(o){case t.AutoScrollActivator.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case t.AutoScrollActivator.DraggableRect:return a}return null}),[o,a,d]),v=r.useRef(b),x=r.useRef(null),C=r.useCallback((()=>{const e=x.current;e&&e.scrollBy(h.current.x*v.current.x,h.current.y*v.current.y)}),[]),w=r.useMemo((()=>c===t.TraversalOrder.TreeOrder?[...u].reverse():u),[c,u]);r.useEffect((()=>{if(l&&u.length&&y){for(const t of w){if(!1===(null==n?void 0:n(t)))continue;const o=u.indexOf(t),r=p[o];if(!r)continue;const{direction:a,speed:l}=L(t,r,y,e,g);if(l.x>0||l.y>0)return f(),x.current=t,m(C,s),h.current=l,void(v.current=a)}h.current={x:0,y:0},v.current={x:0,y:0},f()}else f()}),[e,C,n,f,l,s,JSON.stringify(y),m,u,w,p,JSON.stringify(g)])}({...function(){const e=!(!1===(null==Y?void 0:Y.autoScrollEnabled)||("object"==typeof o?!1===o.enabled:!1===o));return"object"==typeof o?{...o,enabled:e}:{enabled:e}}(),draggingRect:Ke,pointerCoordinates:Ae,scrollableAncestors:De,scrollableAncestorRects:Re});const Ye=r.useMemo((()=>({active:q,activeNode:pe,activeNodeRect:me,activeNodeClientRect:fe,activatorEvent:oe,activators:Ge,ariaDescribedById:{draggable:le},overlayNode:{nodeRef:We,rect:Ie,setRef:_e},containerNodeRect:Le,dispatch:T,draggableNodes:M,droppableContainers:B,droppableRects:ie,over:$e,recomputeLayouts:se,scrollableAncestors:De,scrollableAncestorRects:Re,willRecomputeLayouts:ue,windowRect:Te})),[q,pe,fe,me,oe,Ge,Le,Ie,We,T,M,le,B,ie,$e,se,De,Re,_e,ue,Te]);return a.createElement(P.Provider,{value:D},a.createElement(h.Provider,{value:Ye},a.createElement(Ce.Provider,{value:He},l)),a.createElement($,{announcements:n,hiddenTextDescribedById:le,screenReaderInstructions:m}))})),je=r.createContext(null),Ee="button";function Fe(){return r.useContext(h)}const Oe=e=>e instanceof KeyboardEvent?"transform 250ms ease":void 0,Se={duration:250,easing:"ease",dragSourceOpacity:0},Te=a.memo((({adjustScale:e=!1,children:t,dropAnimation:o=Se,style:n,transition:l=Oe,modifiers:s,wrapperElement:c="div",className:d,zIndex:u=999})=>{var p,g;const{active:m,activeNodeRect:f,activeNodeClientRect:h,containerNodeRect:b,draggableNodes:y,activatorEvent:v,over:C,overlayNode:w,scrollableAncestors:j,scrollableAncestorRects:E,windowRect:F}=Fe(),O=r.useContext(Ce),S=be(s,{active:m,activeNodeRect:h,draggingNodeRect:w.rect,containerNodeRect:b,over:C,overlayNodeRect:w.rect,scrollableAncestors:j,scrollableAncestorRects:E,transform:O,windowRect:F}),T=function(e,t,o){const n=r.useRef(t);return i.useLazyMemo((r=>{const a=n.current;if(t!==a){if(t&&a&&(a.left!==t.left||a.top!==t.top)&&!r){const n=null==o?void 0:o.getBoundingClientRect();if(n)return{...e,x:n.left-t.left,y:n.top-t.top}}n.current=t}}),[t,e,o])}(S,f,w.nodeRef.current),L=null!==m,D=null!=T?T:S,R=e?D:{...D,scaleX:1,scaleY:1},W=f?{position:"fixed",width:f.width,height:f.height,top:f.top,left:f.left,zIndex:u,transform:i.CSS.Transform.toString(R),touchAction:"none",transformOrigin:e&&v?x(v,f):void 0,transition:T?void 0:"function"==typeof l?l(v):l,...n}:void 0,_=L?{style:W,children:t,className:d,transform:R}:void 0,M=r.useRef(_),N=null!=_?_:M.current,{children:A,...B}=null!=N?N:{},k=r.useRef(null!=(p=null==m?void 0:m.id)?p:null),K=function({animate:e,adjustScale:t,activeId:o,draggableNodes:n,duration:a,easing:l,dragSourceOpacity:s,node:c,transform:d}){const[u,p]=r.useState(!1);return r.useEffect((()=>{e&&o&&l&&a?requestAnimationFrame((()=>{var e;const r=null==(e=n[o])?void 0:e.node.current;if(d&&c&&r&&null!==r.parentNode){const e=c.children.length>1?c:c.children[0];if(e){const o=e.getBoundingClientRect(),n=I(r),u={x:o.left-n.left,y:o.top-n.top};if(Math.abs(u.x)||Math.abs(u.y)){const e=i.CSS.Transform.toString({x:d.x-u.x,y:d.y-u.y,scaleX:t?n.width*d.scaleX/o.width:1,scaleY:t?n.height*d.scaleY/o.height:1}),g=r.style.opacity;return null!=s&&(r.style.opacity=""+s),void(c.animate([{transform:i.CSS.Transform.toString(d)},{transform:e}],{easing:l,duration:a}).onfinish=()=>{c.style.display="none",p(!0),r&&null!=s&&(r.style.opacity=g)})}}}p(!0)})):e&&p(!0)}),[e,o,t,n,a,l,s,c,d]),i.useIsomorphicLayoutEffect((()=>{u&&p(!1)}),[u]),u}({animate:Boolean(o&&k.current&&!m),adjustScale:e,activeId:k.current,draggableNodes:y,duration:null==o?void 0:o.duration,easing:null==o?void 0:o.easing,dragSourceOpacity:null==o?void 0:o.dragSourceOpacity,node:w.nodeRef.current,transform:null==(g=M.current)?void 0:g.transform}),P=Boolean(A&&(t||o&&!K));return r.useEffect((()=>{var e;(null==m?void 0:m.id)!==k.current&&(k.current=null!=(e=null==m?void 0:m.id)?e:null),m&&M.current!==_&&(M.current=_)}),[m,_]),r.useEffect((()=>{K&&(M.current=void 0)}),[K]),P?a.createElement(c,{...B,ref:w.setRef},A):null}));t.DndContext=we,t.DragOverlay=Te,t.KeyboardSensor=ae,t.MouseSensor=he,t.PointerSensor=de,t.TouchSensor=ve,t.applyModifiers=be,t.closestCenter=(e,t)=>{const o=C(t,t.left,t.top),n=e.map((([e,t])=>y(C(t),o))),r=p(n);return e[r]?e[r][0]:null},t.closestCorners=(e,t)=>{const o=N(t,t.left,t.top),n=e.map((([e,t])=>{const n=N(t,M(t)?t.left:void 0,M(t)?t.top:void 0),r=o.reduce(((e,t,o)=>e+y(n[o],t)),0);return Number((r/4).toFixed(4))})),r=p(n);return e[r]?e[r][0]:null},t.defaultAnnouncements=d,t.defaultCoordinates=b,t.defaultDropAnimation=Se,t.getBoundingClientRect=_,t.getScrollableAncestors=j,t.getViewRect=I,t.rectIntersection=A,t.useDndContext=Fe,t.useDndMonitor=z,t.useDraggable=function({id:e,data:t,disabled:o=!1,attributes:n}){const{active:a,activeNodeRect:l,activatorEvent:s,ariaDescribedById:c,draggableNodes:d,droppableRects:u,activators:p,over:g}=r.useContext(h),{role:m=Ee,roleDescription:f="draggable",tabIndex:b=0}=null!=n?n:{},y=(null==a?void 0:a.id)===e,v=r.useContext(y?Ce:je),[x,C]=i.useNodeRef(),w=function(e,t){return r.useMemo((()=>e.reduce(((e,{eventName:o,handler:n})=>(e[o]=e=>{n(e,t)},e)),{})),[e,t])}(p,e),j=Y(t);return r.useEffect((()=>(d[e]={node:x,data:j},()=>{delete d[e]})),[d,e]),{active:a,activeNodeRect:l,activatorEvent:s,attributes:r.useMemo((()=>({role:m,tabIndex:b,"aria-pressed":!(!y||m!==Ee)||void 0,"aria-roledescription":f,"aria-describedby":c.draggable})),[m,b,y,f,c.draggable]),droppableRects:u,isDragging:y,listeners:o?void 0:w,node:x,over:g,setNodeRef:C,transform:v}},t.useDroppable=function({data:e,disabled:t=!1,id:o}){const{active:n,dispatch:a,over:l}=r.useContext(h),s=r.useRef(null),[c,d]=i.useNodeRef(),p=Y(e);return i.useIsomorphicLayoutEffect((()=>(a({type:u.RegisterDroppable,element:{id:o,disabled:t,node:c,rect:s,data:p}}),()=>a({type:u.UnregisterDroppable,id:o}))),[o]),r.useEffect((()=>{a({type:u.SetDroppableDisabled,id:o,disabled:t})}),[t]),{active:n,rect:s,isOver:(null==l?void 0:l.id)===o,node:c,over:l,setNodeRef:d}},t.useSensor=function(e,t){return r.useMemo((()=>({sensor:e,options:null!=t?t:{}})),[e,t])},t.useSensors=function(...e){return r.useMemo((()=>[...e].filter((e=>null!=e))),[...e])}},62:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(5);const r="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,a=r?n.useLayoutEffect:n.useEffect;let l={};function i(e){return(t,...o)=>o.reduce(((t,o)=>{const n=Object.entries(o);for(const[o,r]of n){const n=t[o];null!=n&&(t[o]=n+e*r)}return t}),{...t})}const s=i(1),c=i(-1),d=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:o}=e;return`translate3d(${t?Math.round(t):0}px, ${o?Math.round(o):0}px, 0)`}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:o}=e;return`scaleX(${t}) scaleY(${o})`}},Transform:{toString(e){if(e)return[d.Translate.toString(e),d.Scale.toString(e)].join(" ")}},Transition:{toString:({property:e,duration:t,easing:o})=>`${e} ${t}ms ${o}`}});t.CSS=d,t.add=s,t.canUseDOM=r,t.subtract=c,t.useCombinedRefs=function(...e){return n.useMemo((()=>t=>{e.forEach((e=>e(t)))}),e)},t.useInterval=function(){const e=n.useRef(null);return[n.useCallback(((t,o)=>{e.current=setInterval(t,o)}),[]),n.useCallback((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]},t.useIsomorphicLayoutEffect=a,t.useLazyMemo=function(e,t){const o=n.useRef();return n.useMemo((()=>{const t=e(o.current);return o.current=t,t}),[...t])},t.useNodeRef=function(){const e=n.useRef(null),t=n.useCallback((t=>{e.current=t}),[]);return[e,t]},t.useUniqueId=function(e,t){return n.useMemo((()=>{if(t)return t;const o=null==l[e]?0:l[e]+1;return l[e]=o,`${e}-${o}`}),[e,t])}},63:function(e,t,o){"use strict";e.exports=o(64)},64:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=o(5),a=(n=r)&&"object"==typeof n&&"default"in n?n.default:n;const l={display:"none"},i={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};t.HiddenText=function({id:e,value:t}){return a.createElement("div",{id:e,style:l},t)},t.LiveRegion=function({id:e,announcement:t}){return a.createElement("div",{id:e,style:i,role:"status","aria-live":"assertive","aria-atomic":!0},t)},t.useAnnouncement=function(){const[e,t]=r.useState("");return{announce:r.useCallback((e=>{null!=e&&t(e)}),[]),announcement:e}}},73:function(e,t,o){"use strict";o.r(t),o.d(t,"ControlGroupContainer",(function(){return control_group_container_ControlGroupContainer}));var n=o(1),r=o.n(n),a=o(5),l=o.n(a),i=o(24),s=o(27),c=o.n(s),d=o(13),u=o.n(d),p=o(43),g=o(29),m=o(30),f=o(8),h=o(11),b=o(2),y=o(6),v=o(14);const x="auto",C=[{id:"auto","data-test-subj":"control-editor-width-auto",label:v.a.management.controlWidth.getAutoWidthTitle()},{id:"small","data-test-subj":"control-editor-width-small",label:v.a.management.controlWidth.getSmallWidthTitle()},{id:"medium","data-test-subj":"control-editor-width-medium",label:v.a.management.controlWidth.getMediumWidthTitle()},{id:"large","data-test-subj":"control-editor-width-large",label:v.a.management.controlWidth.getLargeWidthTitle()}],w=[{id:"oneLine","data-test-subj":"control-editor-layout-oneLine",label:v.a.management.controlStyle.getSingleLineTitle()},{id:"twoLine","data-test-subj":"control-editor-layout-twoLine",label:v.a.management.controlStyle.getTwoLineTitle()}];o(55);var j=o(25),E=o.n(j),F=o(40),O=o(41),S=o(26),T=o(42),L=o.n(T),D=o(37),R=o(3);const W=({embeddable:e,isCreate:t,title:o,width:n,onSave:r,onCancel:i,removeControl:s,updateTitle:c,updateWidth:d,onTypeEditorChange:u})=>{const{controls:p}=y.a.getServices(),{getControlTypes:g,getControlFactory:m}=p,[h,b]=Object(a.useState)(!t&&e?e.type:g()[0]),[x,w]=Object(a.useState)(),[j,E]=Object(a.useState)(o),[F,O]=Object(a.useState)(n),[S,T]=Object(a.useState)(!1),L=e=>e.map((e=>{var t,o,n,r;const a=m(e),l=null===(t=(o=a).getIconType)||void 0===t?void 0:t.call(o),i=null===(n=(r=a).getDescription)||void 0===n?void 0:n.call(r),s=Object(R.jsx)(f.EuiKeyPadMenuItem,{id:`createControlButton_${e}`,"data-test-subj":`create-${e}-control`,label:a.getDisplayName(),isSelected:h===e,onClick:()=>{b(e)}},Object(R.jsx)(f.EuiIcon,{type:l&&"empty"!==l?l:"controlsHorizontal",size:"l"}));return i?Object(R.jsx)(f.EuiToolTip,{content:i,position:"bottom"},s):s}));return Object(R.jsx)(l.a.Fragment,null,Object(R.jsx)(f.EuiFlyoutHeader,{hasBorder:!0},Object(R.jsx)(f.EuiTitle,{size:"m"},Object(R.jsx)("h2",null,t?v.a.manageControl.getFlyoutCreateTitle():v.a.manageControl.getFlyoutEditTitle()))),Object(R.jsx)(f.EuiFlyoutBody,{"data-test-subj":"control-editor-flyout"},Object(R.jsx)(f.EuiForm,null,Object(R.jsx)(f.EuiFormRow,{label:v.a.manageControl.getControlTypeTitle()},Object(R.jsx)(f.EuiKeyPadMenu,null,L(t?g():[h]))),h&&Object(R.jsx)(l.a.Fragment,null,(t=>{const o=m(t).controlEditorComponent;return o?Object(R.jsx)(o,{onChange:u,setValidState:T,initialInput:null==e?void 0:e.getInput(),setDefaultTitle:e=>{j&&j!==x||(E(e),c(e)),w(e)}}):null})(h),Object(R.jsx)(f.EuiFormRow,{label:v.a.manageControl.getTitleInputTitle()},Object(R.jsx)(f.EuiFieldText,{"data-test-subj":"control-editor-title-input",placeholder:x,value:j,onChange:e=>{c(e.target.value||x),E(e.target.value)}})),Object(R.jsx)(f.EuiFormRow,{label:v.a.manageControl.getWidthInputTitle()},Object(R.jsx)(f.EuiButtonGroup,{color:"primary",legend:v.a.management.controlWidth.getWidthSwitchLegend(),options:C,idSelected:F,onChange:e=>{O(e),d(e)}})),Object(R.jsx)(f.EuiSpacer,{size:"l"}),s&&Object(R.jsx)(f.EuiButtonEmpty,{"aria-label":`delete-${o}`,iconType:"trash",flush:"left",color:"danger",onClick:()=>{i(),s()}},v.a.management.getDeleteButtonTitle())))),Object(R.jsx)(f.EuiFlyoutFooter,null,Object(R.jsx)(f.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween"},Object(R.jsx)(f.EuiFlexItem,{grow:!1},Object(R.jsx)(f.EuiButtonEmpty,{"aria-label":`cancel-${o}`,"data-test-subj":"control-editor-cancel",iconType:"cross",onClick:()=>i()},v.a.manageControl.getCancelTitle())),Object(R.jsx)(f.EuiFlexItem,{grow:!1},Object(R.jsx)(f.EuiButton,{"aria-label":`save-${o}`,"data-test-subj":"control-editor-save",iconType:"check",color:"primary",disabled:!S,onClick:()=>r(h)},v.a.manageControl.getSaveChangesTitle())))))};var _=o(28);const I=({embeddableId:e})=>{const{overlays:t,controls:o}=y.a.getHooks(),{getControlFactory:n}=o.useService(),{openFlyout:r,openConfirm:l}=t.useService(),s=Object(b.useReduxContainerContext)(),{containerActions:{untilEmbeddableLoaded:c,removeEmbeddable:d,updateInputForChild:u},actions:{setControlWidth:p},useEmbeddableSelector:g,useEmbeddableDispatch:m}=s,h=m(),{panels:x}=g((e=>e)),C=Object(a.useRef)(x[e]);Object(a.useEffect)((()=>{C.current=x[e]}),[x,e]);const w=async()=>{const t=x[e],o=n(t.type),a=await c(e);let g={};if(!o)throw new S.EmbeddableFactoryNotFoundError(t.type);let m=!1;const f=o=>{m||Object(i.isEqual)(C.current.explicitInput,{...t.explicitInput,...g})&&Object(i.isEqual)(C.current.width,t.width)?o.close():l(v.a.management.discardChanges.getSubtitle(),{confirmButtonText:v.a.management.discardChanges.getConfirm(),cancelButtonText:v.a.management.discardChanges.getCancel(),title:v.a.management.discardChanges.getTitle(),buttonColor:"danger"}).then((n=>{n&&(h(p({width:t.width,embeddableId:e})),o.close())}))},w=r(((e,t)=>{const o=y.a.getContextProvider(),n=t.ReduxEmbeddableStoreProvider;return Object(_.toMountPoint)(Object(R.jsx)(n,null,Object(R.jsx)(b.ReduxEmbeddableContext.Provider,{value:t},Object(R.jsx)(o,null,e))))})(Object(R.jsx)(W,{isCreate:!1,width:t.width,embeddable:a,title:a.getTitle(),onCancel:()=>f(w),updateTitle:e=>g.title=e,updateWidth:t=>h(p({width:t,embeddableId:e})),onTypeEditorChange:e=>g={...g,...e},onSave:()=>{const t=o;t.presaveTransformFunction&&(g=t.presaveTransformFunction(g,a)),u(e,g),w.close()},removeControl:()=>{l(v.a.management.deleteControls.getSubtitle(),{confirmButtonText:v.a.management.deleteControls.getConfirm(),cancelButtonText:v.a.management.deleteControls.getCancel(),title:v.a.management.deleteControls.getDeleteTitle(),buttonColor:"danger"}).then((t=>{t&&(d(e),m=!0,w.close())}))}}),s),{onClose:e=>f(e)})};return Object(R.jsx)(f.EuiButtonIcon,{"data-test-subj":`control-action-${e}-edit`,"aria-label":v.a.floatingActions.getEditButtonTitle(),iconType:"pencil",onClick:()=>w(),color:"text"})},M=({customPrepend:e,enableActions:t,embeddableId:o})=>{var n;const r=Object(a.useMemo)((()=>l.a.createRef()),[]),{useEmbeddableSelector:i,containerActions:{untilEmbeddableLoaded:s,removeEmbeddable:c}}=Object(b.useReduxContainerContext)(),{controlStyle:d}=i((e=>e)),{overlays:u}=y.a.getHooks(),{openConfirm:p}=u.useService(),g=(({untilEmbeddableLoaded:e,embeddableId:t})=>{const[o,n]=Object(a.useState)();return Object(a.useEffect)((()=>{let o=!0;return(async()=>{const r=await e(t);o&&n(r)})(),()=>{o=!1}}),[e,t]),o})({untilEmbeddableLoaded:s,embeddableId:o}),[m,h]=Object(a.useState)(),x="twoLine"===d;Object(a.useEffect)((()=>{r.current&&g&&g.render(r.current);const e=null==g?void 0:g.getInput$().subscribe((e=>h(e.title)));return()=>{null==e||e.unsubscribe()}}),[g,r]);const C=Object(R.jsx)("div",{className:E()("controlFrameFloatingActions",{"controlFrameFloatingActions--twoLine":x,"controlFrameFloatingActions--oneLine":!x})},Object(R.jsx)(f.EuiToolTip,{content:v.a.floatingActions.getEditButtonTitle()},Object(R.jsx)(I,{embeddableId:o})),Object(R.jsx)(f.EuiToolTip,{content:v.a.floatingActions.getRemoveButtonTitle()},Object(R.jsx)(f.EuiButtonIcon,{"data-test-subj":`control-action-${o}-delete`,"aria-label":v.a.floatingActions.getRemoveButtonTitle(),onClick:()=>p(v.a.management.deleteControls.getSubtitle(),{confirmButtonText:v.a.management.deleteControls.getConfirm(),cancelButtonText:v.a.management.deleteControls.getCancel(),title:v.a.management.deleteControls.getDeleteTitle(),buttonColor:"danger"}).then((e=>{e&&c(o)})),iconType:"cross",color:"danger"}))),w=E()("controlFrame__control",{"controlFrame--twoLine":"twoLine"===d,"controlFrame--oneLine":"oneLine"===d}),j=Object(R.jsx)(f.EuiFormControlLayout,{className:"controlFrame__formControlLayout",fullWidth:!0,prepend:Object(R.jsx)(l.a.Fragment,null,null!==(n=g&&e)&&void 0!==n?n:null,x?void 0:Object(R.jsx)(f.EuiFormLabel,{className:"controlFrame__formControlLayoutLabel",htmlFor:o},m))},g&&Object(R.jsx)("div",{className:w,id:`controlFrame--${o}`,ref:r}),!g&&Object(R.jsx)("div",{className:w,id:`controlFrame--${o}`},Object(R.jsx)("div",{className:"controlFrame--controlLoading"},Object(R.jsx)(f.EuiLoadingChart,null))));return Object(R.jsx)(l.a.Fragment,null,g&&t&&C,Object(R.jsx)(f.EuiFormRow,{"data-test-subj":"control-frame-title",fullWidth:!0,label:x?m||v.a.emptyState.getTwoLineLoadingTitle():void 0},j))},N=e=>{const{embeddableId:t,isEditable:o}=e,{over:n,listeners:r,isSorting:a,transform:l,transition:i,attributes:s,isDragging:c,setNodeRef:d}=Object(F.useSortable)({id:t,animateLayoutChanges:()=>!0,disabled:!o});return e.dragInfo={...e.dragInfo,isOver:(null==n?void 0:n.id)===t,isDragging:c},Object(R.jsx)(A,L()({key:t,ref:d},e,s,r,{style:{transition:null!=i?i:void 0,transform:a?void 0:D.CSS.Translate.toString(l)}}))},A=Object(a.forwardRef)((({embeddableId:e,dragInfo:t,style:o,isEditable:n,...r},a)=>{const{isOver:l,isDragging:i,draggingIndex:s,index:c}=t,{useEmbeddableSelector:d}=Object(b.useReduxContainerContext)(),{panels:u}=d((e=>e)),p=u[e].width,g=Object(R.jsx)("button",L()({ref:a},r,{className:"controlFrame__dragHandle"}),Object(R.jsx)(f.EuiIcon,{type:"grabHorizontal"}));return Object(R.jsx)(f.EuiFlexItem,{grow:"auto"===p,"data-control-id":e,"data-test-subj":"control-frame","data-render-complete":"true",className:E()("controlFrameWrapper",{"controlFrameWrapper-isDragging":i,"controlFrameWrapper--small":"small"===p,"controlFrameWrapper--medium":"medium"===p,"controlFrameWrapper--large":"large"===p,"controlFrameWrapper--insertBefore":l&&(null!=c?c:-1)<(null!=s?s:-1),"controlFrameWrapper--insertAfter":l&&(null!=c?c:-1)>(null!=s?s:-1)}),style:o},Object(R.jsx)(M,{enableActions:n&&-1===s,embeddableId:e,customPrepend:n?g:void 0}))})),B=({draggingId:e})=>{const{useEmbeddableSelector:t}=Object(b.useReduxContainerContext)(),{panels:o,controlStyle:n}=t((e=>e)),r=o[e].width,a=o[e].explicitInput.title;return Object(R.jsx)(f.EuiFlexItem,{className:E()("controlFrameCloneWrapper",{"controlFrameCloneWrapper--small":"small"===r,"controlFrameCloneWrapper--medium":"medium"===r,"controlFrameCloneWrapper--large":"large"===r,"controlFrameCloneWrapper--twoLine":"twoLine"===n})},"twoLine"===n?Object(R.jsx)(f.EuiFormLabel,null,a):void 0,Object(R.jsx)(f.EuiFlexGroup,{responsive:!1,gutterSize:"none",className:"controlFrame__draggable"},Object(R.jsx)(f.EuiFlexItem,{grow:!1},Object(R.jsx)(f.EuiIcon,{type:"grabHorizontal",className:"controlFrame__dragHandle"})),"oneLine"===n?Object(R.jsx)(f.EuiFlexItem,null,Object(R.jsx)("label",{className:"controlFrameCloneWrapper__label"},a)):void 0))},k=()=>{const e=Object(b.useReduxContainerContext)(),{useEmbeddableSelector:t,useEmbeddableDispatch:o,actions:{setControlOrders:n}}=e,r=o(),{panels:i,viewMode:s,controlStyle:c}=t((e=>e)),d=s===S.ViewMode.EDIT,u=Object(a.useMemo)((()=>Object.values(i).sort(((e,t)=>e.order>t.order?1:-1)).reduce(((e,t)=>(e.push(t.explicitInput.id),e)),[])),[i]),[p,g]=Object(a.useState)(null),m=Object(a.useMemo)((()=>p?u.indexOf(p):-1),[u,p]),h=Object(O.useSensors)(Object(O.useSensor)(O.PointerSensor),Object(O.useSensor)(O.KeyboardSensor,{coordinateGetter:F.sortableKeyboardCoordinates})),y=!(u&&u.length>0);if(!d&&y)return null;let v="subdued";return y&&(v="plain"),p&&(v="success"),Object(R.jsx)(l.a.Fragment,null,u.length>0?Object(R.jsx)(f.EuiPanel,{borderRadius:"m",color:v,paddingSize:y?"s":"none","data-test-subj":"controls-group-wrapper",className:E()("controlsWrapper",{"controlsWrapper--empty":y,"controlsWrapper--twoLine":"twoLine"===c})},Object(R.jsx)(f.EuiFlexGroup,{wrap:!1,gutterSize:"m",direction:"row",responsive:!1,alignItems:"center","data-test-subj":"controls-group","data-shared-items-count":u.length},Object(R.jsx)(f.EuiFlexItem,null,Object(R.jsx)(O.DndContext,{onDragStart:({active:e})=>g(e.id),onDragEnd:({over:e})=>{if(e){const t=u.indexOf(e.id);if(m!==t){const e=t;r(n({ids:Object(F.arrayMove)([...u],m,e)}))}}g(null)},onDragCancel:()=>g(null),sensors:h,collisionDetection:O.closestCenter,layoutMeasuring:{strategy:O.LayoutMeasuringStrategy.Always}},Object(R.jsx)(F.SortableContext,{items:u,strategy:F.rectSortingStrategy},Object(R.jsx)(f.EuiFlexGroup,{className:E()("controlGroup",{"controlGroup-isDragging":p}),alignItems:"center",gutterSize:"s",wrap:!0},u.map(((e,t)=>i[e]&&Object(R.jsx)(N,{isEditable:d,dragInfo:{index:t,draggingIndex:m},embeddableId:e,key:e}))))),Object(R.jsx)(O.DragOverlay,null,p?Object(R.jsx)(B,{draggingId:p}):null))))):Object(R.jsx)(l.a.Fragment,null))},K={setControlStyle:(e,t)=>{e.controlStyle=t.payload},setDefaultControlWidth:(e,t)=>{e.defaultControlWidth=t.payload},setControlWidth:(e,t)=>{e.panels[t.payload.embeddableId].width=t.payload.width},setControlOrders:(e,t)=>{t.payload.ids.forEach(((t,o)=>{e.panels[t].order=o}))}},P=({defaultControlWidth:e,updateDefaultWidth:t,addNewEmbeddable:o,buttonType:n,closePopover:r})=>{const{overlays:a,controls:l}=y.a.getServices(),{getControlTypes:i,getControlFactory:s}=l,{openFlyout:c,openConfirm:d}=a;if(0===i().length)return null;const u={key:"addControl",onClick:()=>{(async()=>{const n=y.a.getContextProvider();new Promise(((o,r)=>{let a={};const l=e=>{if(0===Object.keys(a).length)return r(),void e.close();d(v.a.management.discardNewControl.getSubtitle(),{confirmButtonText:v.a.management.discardNewControl.getConfirm(),cancelButtonText:v.a.management.discardNewControl.getCancel(),title:v.a.management.discardNewControl.getTitle(),buttonColor:"danger"}).then((t=>{t&&(r(),e.close())}))},i=c(Object(_.toMountPoint)(Object(R.jsx)(n,null,Object(R.jsx)(W,{isCreate:!0,width:null!=e?e:x,updateTitle:e=>a.title=e,updateWidth:t,onSave:e=>{const t=s(e);t.presaveTransformFunction&&(a=t.presaveTransformFunction(a)),o({type:e,controlInput:a}),i.close()},onCancel:()=>l(i),onTypeEditorChange:e=>a={...a,...e}}))),{onClose:e=>l(e)})})).then((async e=>{await o(e.type,e.controlInput)}),(()=>{}))})(),r&&r()},"data-test-subj":"controls-create-button","aria-label":v.a.management.getManageButtonTitle()};return"callout"===n?Object(R.jsx)(f.EuiButton,L()({},u,{color:"primary",size:"s"}),v.a.emptyState.getAddControlButtonTitle()):Object(R.jsx)(f.EuiContextMenuItem,L()({},u,{icon:"plusInCircle"}),v.a.emptyState.getAddControlButtonTitle())},z=({width:e,controlStyle:t,setAllWidths:o,controlCount:n,updateControlStyle:r,updateWidth:i,updateAllControlWidths:s,onCancel:c,onClose:d})=>{const[u,p]=Object(a.useState)(t),[g,m]=Object(a.useState)(e),[h,b]=Object(a.useState)(o);return Object(R.jsx)(l.a.Fragment,null,Object(R.jsx)(f.EuiFlyoutHeader,{hasBorder:!0},Object(R.jsx)(f.EuiTitle,{size:"m"},Object(R.jsx)("h2",null,v.a.management.getFlyoutTitle()))),Object(R.jsx)(f.EuiFlyoutBody,{"data-test-subj":"control-group-settings-flyout"},Object(R.jsx)(f.EuiFormRow,{label:v.a.management.getLayoutTitle()},Object(R.jsx)(f.EuiButtonGroup,{color:"primary",idSelected:u,legend:v.a.management.controlStyle.getDesignSwitchLegend(),"data-test-subj":"control-group-layout-options",options:w,onChange:e=>{p(e)}})),Object(R.jsx)(f.EuiSpacer,{size:"m"}),Object(R.jsx)(f.EuiFormRow,{label:v.a.management.getDefaultWidthTitle()},Object(R.jsx)(f.EuiButtonGroup,{color:"primary",idSelected:g,legend:v.a.management.controlWidth.getWidthSwitchLegend(),"data-test-subj":"control-group-default-size-options",options:C,onChange:e=>{m(e)}})),n>0?Object(R.jsx)(l.a.Fragment,null,Object(R.jsx)(f.EuiSpacer,{size:"s"}),Object(R.jsx)(f.EuiCheckbox,{id:"editControls_setAllSizesCheckbox","data-test-subj":"set-all-control-sizes-checkbox",label:v.a.management.getSetAllWidthsToDefaultTitle(),checked:h,onChange:e=>{b(e.target.checked)}}),Object(R.jsx)(f.EuiSpacer,{size:"l"}),Object(R.jsx)(f.EuiButtonEmpty,{onClick:c,"aria-label":"delete-all","data-test-subj":"delete-all-controls-button",iconType:"trash",color:"danger",flush:"left",size:"s"},v.a.management.getDeleteAllButtonTitle())):null),Object(R.jsx)(f.EuiFlyoutFooter,null,Object(R.jsx)(f.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween"},Object(R.jsx)(f.EuiFlexItem,{grow:!1},Object(R.jsx)(f.EuiButtonEmpty,{"aria-label":"cancel-editing-group",iconType:"cross",onClick:()=>{d()}},v.a.manageControl.getCancelTitle())),Object(R.jsx)(f.EuiFlexItem,{grow:!1},Object(R.jsx)(f.EuiButton,{"aria-label":"save-group",iconType:"check",color:"primary","data-test-subj":"control-group-editor-save",onClick:()=>{u&&u!==t&&r(u),g&&g!==e&&i(g),h&&s(g),d()}},v.a.manageControl.getSaveChangesTitle())))))},$=({panels:e,defaultControlWidth:t,controlStyle:o,setControlStyle:n,setDefaultControlWidth:r,setAllControlWidths:a,removeEmbeddable:l,closePopover:i})=>{const{overlays:s}=y.a.getServices(),{openConfirm:c,openFlyout:d}=s,u=()=>{const i=y.a.getContextProvider(),s=d(Object(_.toMountPoint)(Object(R.jsx)(i,null,Object(R.jsx)(z,{width:null!=t?t:x,controlStyle:null!=o?o:"oneLine",setAllWidths:!1,controlCount:Object.keys(null!=e?e:{}).length,updateControlStyle:n,updateWidth:r,updateAllControlWidths:a,onCancel:()=>{return t=s,void(l&&e&&c(v.a.management.deleteControls.getSubtitle(),{confirmButtonText:v.a.management.deleteControls.getConfirm(),cancelButtonText:v.a.management.deleteControls.getCancel(),title:v.a.management.deleteControls.getDeleteAllTitle(),buttonColor:"danger"}).then((o=>{o&&Object.keys(e).forEach((e=>l(e))),t.close()})));var t},onClose:()=>s.close()}))),{onClose:()=>s.close()})},p={key:"manageControls",onClick:()=>{u(),i()},icon:"gear","data-test-subj":"controls-settings-button","aria-label":v.a.management.getManageButtonTitle()};return Object(R.jsx)(f.EuiContextMenuItem,p,v.a.management.getManageButtonTitle())},H=Object(b.withSuspense)(b.LazyReduxEmbeddableWrapper);class control_group_container_ControlGroupContainer extends S.Container{constructor(e,t){super(e,{embeddableLoaded:{}},y.a.getServices().controls.getControlFactory,t),r()(this,"type",h.a),r()(this,"subscriptions",new g.Subscription),r()(this,"domNode",void 0),r()(this,"untilReady",(()=>{const e=()=>Object.values(this.getOutput().embeddableLoaded).some((e=>!e));return e()?new Promise(((t,o)=>{const n=Object(g.merge)(this.getOutput$(),this.getInput$()).subscribe((()=>{this.destroyed&&o(),e()||(n.unsubscribe(),t())}))})):Promise.resolve()})),r()(this,"getCreateControlButton",((e,t)=>Object(R.jsx)(P,{buttonType:e,defaultControlWidth:this.getInput().defaultControlWidth,updateDefaultWidth:e=>this.updateInput({defaultControlWidth:e}),addNewEmbeddable:(e,t)=>this.addNewEmbeddable(e,t),closePopover:t}))),r()(this,"getEditControlGroupButton",(e=>Object(R.jsx)($,{controlStyle:this.getInput().controlStyle,panels:this.getInput().panels,defaultControlWidth:this.getInput().defaultControlWidth,setControlStyle:e=>this.updateInput({controlStyle:e}),setDefaultControlWidth:e=>this.updateInput({defaultControlWidth:e}),setAllControlWidths:e=>{Object.keys(this.getInput().panels).forEach((t=>this.getInput().panels[t].width=e))},removeEmbeddable:e=>this.removeEmbeddable(e),closePopover:e}))),r()(this,"getToolbarButtons",(()=>Object(R.jsx)(b.SolutionToolbarPopover,{ownFocus:!0,label:v.a.getControlButtonTitle(),iconType:"arrowDown",iconSide:"right",panelPaddingSize:"none","data-test-subj":"dashboard-controls-menu-button"},(({closePopover:e})=>Object(R.jsx)(f.EuiContextMenuPanel,{items:[this.getCreateControlButton("toolbar",e),this.getEditControlGroupButton(e)]}))))),r()(this,"getPanelCount",(()=>Object.keys(this.getInput().panels).length)),r()(this,"recalculateOutput",(()=>{const e=[],t=[];Object.values(this.children).map((o=>{var n,r;const a=o.getOutput();e.push(...null!==(n=null==a?void 0:a.filters)&&void 0!==n?n:[]),t.push(...null!==(r=a.dataViews)&&void 0!==r?r:[])})),this.updateOutput({filters:Object(p.e)(e),dataViews:Object(i.uniqBy)(t,"id")})}));const o=Object(g.pipe)(Object(m.map)((()=>this.getChildIds())),Object(m.distinctUntilChanged)(u.a),Object(m.switchMap)((e=>Object(g.merge)(...e.map((e=>this.getChild(e).getOutput$().pipe(Object(m.catchError)((()=>g.EMPTY)))))))));this.subscriptions.add(Object(g.concat)(Object(g.merge)(this.getOutput$(),this.getOutput$().pipe(o)).pipe(Object(m.take)(1)),Object(g.merge)(this.getOutput$(),this.getOutput$().pipe(o)).pipe(Object(m.debounceTime)(10))).subscribe(this.recalculateOutput))}createNewPanelState(e,t={}){var o;const n=super.createNewPanelState(e,t);return{order:Object.values(this.getInput().panels).reduce(((e,t)=>(t.order>e&&(e=t.order),e)),0)+1,width:null!==(o=this.getInput().defaultControlWidth)&&void 0!==o?o:x,...n}}getInheritedInput(e){const{filters:t,query:o,ignoreParentSettings:n,timeRange:r}=this.getInput();return{filters:null!=n&&n.ignoreFilters?void 0:t,query:null!=n&&n.ignoreQuery?void 0:o,timeRange:null!=n&&n.ignoreTimerange?void 0:r,id:e}}destroy(){super.destroy(),this.subscriptions.unsubscribe(),this.domNode&&c.a.unmountComponentAtNode(this.domNode)}render(e){this.domNode&&c.a.unmountComponentAtNode(this.domNode),this.domNode=e;const t=y.a.getContextProvider();c.a.render(Object(R.jsx)(t,null,Object(R.jsx)(H,{embeddable:this,reducers:K},Object(R.jsx)(k,null))),e)}}}}]);