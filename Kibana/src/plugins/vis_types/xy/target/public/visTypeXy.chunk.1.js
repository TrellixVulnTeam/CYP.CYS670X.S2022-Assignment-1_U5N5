(window.visTypeXy_bundle_jsonpfunction=window.visTypeXy_bundle_jsonpfunction||[]).push([[1],{35:function(e,t,i){"use strict";var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),r=[];function s(e){for(var t=-1,i=0;i<r.length;i++)if(r[i].identifier===e){t=i;break}return t}function l(e,t){for(var i={},n=[],o=0;o<e.length;o++){var a=e[o],l=t.base?a[0]+t.base:a[0],c=i[l]||0,d="".concat(l," ").concat(c);i[l]=c+1;var u=s(d),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(r[u].references++,r[u].updater(p)):r.push({identifier:d,updater:g(p,t),references:1}),n.push(d)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=a(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function p(e,t,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var a=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function m(e,t,i){var n=i.css,o=i.media,a=i.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var v=null,f=0;function g(e,t){var i,n,o;if(t.singleton){var a=f++;i=v||(v=c(t)),n=p.bind(null,i,a,!1),o=p.bind(null,i,a,!0)}else i=c(t),n=m.bind(null,i,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var i=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var o=s(i[n]);r[o].references--}for(var a=l(e,t),c=0;c<i.length;c++){var d=s(i[c]);0===r[d].references&&(r[d].updater(),r.splice(d,1))}i=a}}}},36:function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var o=(r=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[i].concat(a).concat([o]).join("\n")}var r,s,l;return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var a=0;a<this.length;a++){var r=this[a][0];null!=r&&(o[r]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&o[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),t.push(l))}},t}},37:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(38);case"v8light":return i(40)}},38:function(e,t,i){var n=i(35),o=i(39);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};n(o,a);e.exports=o.locals||{}},39:function(e,t,i){(t=i(36)(!1)).push([e.i,".detailedTooltip{box-shadow:0 1px 5px rgba(0,0,0,0.25),0 3.6px 13px rgba(0,0,0,0.175),0 8.4px 23px rgba(0,0,0,0.15),0 23px 35px rgba(0,0,0,0.125);border-radius:6px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},40:function(e,t,i){var n=i(35),o=i(41);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};n(o,a);e.exports=o.locals||{}},41:function(e,t,i){(t=i(36)(!1)).push([e.i,".detailedTooltip{box-shadow:0 1px 5px rgba(0,0,0,0.1),0 3.6px 13px rgba(0,0,0,0.07),0 8.4px 23px rgba(0,0,0,0.06),0 23px 35px rgba(0,0,0,0.05);border-radius:6px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},42:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(43);case"v8light":return i(45)}},43:function(e,t,i){var n=i(35),o=i(44);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};n(o,a);e.exports=o.locals||{}},44:function(e,t,i){(t=i(36)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},45:function(e,t,i){var n=i(35),o=i(46);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};n(o,a);e.exports=o.locals||{}},46:function(e,t,i){(t=i(36)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},47:function(e,t,i){"use strict";i.r(t);var n=i(13),o=i.n(n),a=i(9),r=i.n(a),s=i(4),l=i(32),c=i(8),d=i(6),u=i(18);var p=i(7);const m=e=>{switch(e){case"cardinal":return s.CurveType.CURVE_MONOTONE_X;case"step-after":return s.CurveType.CURVE_STEP_AFTER;case"linear":default:return s.CurveType.LINEAR}},v=({aspects:e,yAxes:t,xAxis:i,showValueLabel:n,enableHistogramMode:o,fittingFunction:a,fillOpacity:r},l,c,v,f,g,b,h)=>{let x=[];return t.forEach((t=>{const i=t.scale,n=l.filter((e=>e.valueAxis===t.groupId)),o=[];n.forEach((t=>{const i=t.data.id,n=e.y.filter((e=>e.aggId===i));o.push(...n)}));const a=o.map((e=>e.accessor));if("percentage"===i.mode){var r,d;const t=(null===(r=e.splitColumn)||void 0===r?void 0:r.accessor)||(null===(d=e.splitRow)||void 0===d?void 0:d.accessor);x=((e,t,i,n)=>{const o=[String(t)];return n&&o.push(n),Object(s.computeRatioByGroups)(e,o,i.map((e=>[t=>t[e],(t,i)=>({...t,[e]:i})])))})(c,b,a,t)}})),l.map((({show:l,valueAxis:y,data:{id:j},lineWidth:w,showCircles:T,circlesRadius:O,drawLinesBetweenPoints:C,mode:_,interpolate:k,type:S})=>{var A,E,L,M;const I=e.y.filter((e=>Object(u.g)(j,e)));if(!l||!I.length)return null;const P=I.map((e=>e.accessor)),R=`${S}-${P[0]}`,D=null===(A=t.find((({groupId:e})=>e===y)))||void 0===A?void 0:A.scale,B="stacked"===_,V="normal"===(null==D?void 0:D.mode)||null==D?void 0:D.mode,z=B?`__pseudo_stacked_group-${y}__`:y,F=B?y:void 0;switch(S){case d.ChartType.Histogram:return Object(p.jsx)(s.BarSeries,{key:R,id:R,name:v,color:f,tickFormat:I[0].formatter,groupId:z,useDefaultGroupDomain:F,xScaleType:i.scale.type,yScaleType:null==D?void 0:D.type,xAccessor:b,yAccessors:P,splitSeriesAccessors:h,data:B||"percentage"!==(null==D?void 0:D.mode)?c:x,timeZone:g,stackAccessors:B?["__any_value__"]:void 0,enableHistogramMode:o,stackMode:V,minBarHeight:2,displayValueSettings:{showValueLabel:n,isValueContainedInElement:!1,isAlternatingValueLabel:!1,overflowConstraints:[s.LabelOverflowConstraint.ChartEdges,s.LabelOverflowConstraint.BarGeometry]}});case d.ChartType.Area:case d.ChartType.Line:const t=T&&null!==(E=null===(L=e.z)||void 0===L?void 0:L.accessor)&&void 0!==E?E:void 0;return Object(p.jsx)(s.AreaSeries,{key:R,id:R,fit:a,color:f,tickFormat:I[0].formatter,name:v,curve:m(k),groupId:z,useDefaultGroupDomain:F,xScaleType:i.scale.type,yScaleType:null==D?void 0:D.type,xAccessor:b,yAccessors:P,markSizeAccessor:t,markFormat:null===(M=e.z)||void 0===M?void 0:M.formatter,splitSeriesAccessors:h,data:B||"percentage"!==(null==D?void 0:D.mode)?c:x,stackAccessors:B?["__any_value__"]:void 0,displayValueSettings:{showValueLabel:n,overflowConstraints:[s.LabelOverflowConstraint.ChartEdges]},timeZone:g,stackMode:V,areaSeriesStyle:{area:{...S===d.ChartType.Line?{opacity:0}:{opacity:r}},line:{strokeWidth:w,visible:C},point:{visible:T,fill:t?s.ColorVariant.Series:void 0,radius:O}}});default:return null}}))};var f=i(24),g=i.n(f),b=i(10);var h=i(0),x=i(14);const y=(e,t,i,n)=>({series:[o]})=>{const[r,l]=Object(a.useState)(!1),[c,d]=Object(a.useState)(!1),u=o,m=Object(a.useMemo)((()=>t(u)),[u]),[v,f]=Object(s.useLegendAction)();if(Object(a.useEffect)((()=>{(async()=>{d(await e(m))})()}),[m]),!c||!m)return null;const g=n(u),b=[{id:"main",title:`${g}`,items:[{name:h.i18n.translate("visTypeXy.legend.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":`legend-${g}-filterIn`,icon:Object(p.jsx)(x.EuiIcon,{type:"plusInCircle",size:"m"}),onClick:()=>{l(!1),i(m)}},{name:h.i18n.translate("visTypeXy.legend.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":`legend-${g}-filterOut`,icon:Object(p.jsx)(x.EuiIcon,{type:"minusInCircle",size:"m"}),onClick:()=>{l(!1),i(m,!0)}}]}],y=Object(p.jsx)("div",{tabIndex:0,ref:v,role:"button","aria-pressed":"false",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginLeft:4,marginRight:4},"data-test-subj":`legend-${g}`,onKeyPress:()=>l(!r),onClick:()=>l(!r)},Object(p.jsx)(x.EuiIcon,{size:"s",type:"boxesVertical"}));return Object(p.jsx)(x.EuiPopover,{id:"contextMenuNormal",button:y,isOpen:r,closePopover:()=>{l(!1),f()},panelPaddingSize:"none",anchorPosition:"upLeft",title:h.i18n.translate("visTypeXy.legend.filterOptionsLegend",{defaultMessage:"{legendDataLabel}, filter options",values:{legendDataLabel:g}})},Object(p.jsx)(x.EuiContextMenu,{initialPanelId:"main",panels:b}))};function j(e){switch(e){case s.Position.Bottom:return"upCenter";case s.Position.Top:return"downCenter";case s.Position.Left:return"rightCenter";default:return"leftCenter"}}const w=({id:e,title:t,show:i,position:n,groupId:o,grid:a,ticks:r,domain:l,style:c,integersOnly:d,timeAxisLayerCount:u})=>Object(p.jsx)(s.Axis,{id:`${e}__axis`,groupId:o,hide:!i,title:t,style:c,domain:l,position:n,integersOnly:d,showGridLines:null==a?void 0:a.show,tickFormat:null==r?void 0:r.formatter,labelFormat:null==r?void 0:r.labelFormatter,showOverlappingLabels:null==r?void 0:r.showOverlappingLabels,showDuplicatedTicks:null==r?void 0:r.showDuplicates,timeAxisLayerCount:u}),T=({enabled:e,isDarkMode:t,isFullBin:i,hideTooltips:n,domain:o,adjustedDomain:a})=>e&&o&&a&&"min"in o&&"max"in o&&void 0!==o.minInterval&&"min"in a&&"max"in a?Object(p.jsx)(c.Endzones,{isFullBin:i,isDarkMode:t,domainStart:o.min,domainEnd:o.max,interval:o.minInterval,domainMin:a.min,domainMax:a.max,hideTooltips:n}):null,O=({enabled:e,isDarkMode:t,domain:i})=>{if(!e)return null;const n=i&&"max"in i?i.max:void 0;return Object(p.jsx)(c.CurrentTime,{isDarkMode:t,domainEnd:n})};const C=({markSizeRatio:e,rotation:t,enableHistogramMode:i,tooltip:n,isTimeChart:o,xAxis:a,orderBucketsBySum:r,xDomain:l,adjustedXDomain:d,showLegend:u,onElementClick:m,onPointerUpdate:v,onBrushEnd:f,onRenderChange:g,legendAction:h,legendColorPicker:x,legendPosition:y,maxLegendLines:j,truncateLegend:w})=>{var T,O,C,_,k,S,A;const E=Object(b.e)(),L=E.useChartsTheme(),M=E.useChartsBaseTheme(),I={markSizeRatio:e,barSeriesStyle:{...{displayValue:{fontSize:{min:10,max:12},alignment:{horizontal:s.HorizontalAlignment.Center,vertical:s.VerticalAlignment.Middle}}}},crosshair:{...L.crosshair},legend:{labelOptions:{maxLines:w?null!=j?j:1:0}},axes:{axisTitle:{padding:{outer:10}}},chartMargins:y===s.Position.Top||y===s.Position.Right?{bottom:(null!==(T=null===(O=L.chartMargins)||void 0===O?void 0:O.bottom)&&void 0!==T?T:0)+10}:{right:(null!==(C=null===(_=L.chartMargins)||void 0===_?void 0:_.right)&&void 0!==C?C:0)+10}},P=null!==(k=a.ticks)&&void 0!==k&&k.formatter?e=>{var t,i,n;return null!==(t=null===(i=a.ticks)||void 0===i||null===(n=i.formatter)||void 0===n?void 0:n.call(i,e))&&void 0!==t?t:""}:void 0,R=o&&l&&d?Object(c.renderEndzoneTooltip)(l.minInterval,"min"in l?l.min:void 0,"max"in l?l.max:void 0,P,!n.detailedTooltip):P&&(n.detailedTooltip?void 0:({value:e})=>P(e)),D=null!==(S=document.getElementById("app-fixed-viewport"))&&void 0!==S?S:void 0,B=n.detailedTooltip?{...n,boundary:D,customTooltip:n.detailedTooltip(R),headerFormatter:void 0}:{...n,boundary:D,headerFormatter:R};return Object(p.jsx)(s.Settings,{debugState:null!==(A=window._echDebugStateFlag)&&void 0!==A&&A,onPointerUpdate:v,xDomain:d,rotation:t,theme:[I,L],baseTheme:M,showLegend:u,legendPosition:y,allowBrushingLastHistogramBin:o,roundHistogramBrushValues:i&&!o,legendColorPicker:x,onElementClick:m,onBrushEnd:f,onRenderChange:g,legendAction:h,tooltip:B,orderOrdinalBinsBy:r?{direction:s.Direction.Descending}:void 0})},_=({show:e,value:t,color:i,width:n,groupId:o,dash:a})=>e?Object(p.jsx)(s.LineAnnotation,{id:"__threshold_line__",groupId:o,domainType:s.AnnotationDomainType.YDomain,dataValues:[{dataValue:t}],style:{line:{stroke:i,strokeWidth:null!=n?n:2,opacity:1,dash:a}}}):null;var k=i(2),S=i(1);function A({style:e,...t},i,n){var o;const a=null===(o=i.find((({id:e})=>n.some((({valueAxis:t})=>e===t)))))||void 0===o?void 0:o.groupId;return{...t,dash:E(e),groupId:a}}function E(e){switch(e){case S.f.Dashed:return[10,5];case S.f.DotDashed:return[20,5,5,5];case S.f.Full:default:return}}i(37);const L=({label:e,value:t},i)=>e&&t?Object(p.jsx)("tr",{key:e+t+i},Object(p.jsx)("td",{className:"detailedTooltip__label"},Object(p.jsx)("div",{className:"detailedTooltip__labelContainer"},e)),Object(p.jsx)("td",{className:"detailedTooltip__value"},Object(p.jsx)("div",{className:"detailedTooltip__valueContainer"},t))):null,M=e=>t=>function({header:i,values:n}){const o=n.find((({isHighlighted:e})=>e));if(!o)return null;const a=((e,t,i)=>{var n;const o=[];if(t){const i=Object(u.f)(e.x.aggType)?null:e.x.formatter;o.push({label:e.x.title,value:i?i(t.value):`${t.value}`})}const a=i.seriesIdentifier,r=null!==(n=e.y.find((({accessor:e})=>e===a.yAccessor)))&&void 0!==n?n:null;return r&&o.push({label:r.title,value:r.formatter?r.formatter(i.value):`${i.value}`}),e.z&&!Object(l.isNil)(i.markValue)&&o.push({label:e.z.title,value:e.z.formatter?e.z.formatter(i.markValue):`${i.markValue}`}),a.splitAccessors.forEach(((t,i)=>{var n;const a=(null!==(n=e.series)&&void 0!==n?n:[]).find((({accessor:e},t)=>e===i||i===`${u.a}::${t}`));a&&o.push({label:null==a?void 0:a.title,value:null!=a&&a.formatter&&!i.toString().startsWith(u.a)?null==a?void 0:a.formatter(t):`${t}`})})),e.splitColumn&&void 0!==a.smHorizontalAccessorValue&&void 0!==a.smHorizontalAccessorValue&&o.push({label:e.splitColumn.title,value:`${a.smHorizontalAccessorValue}`}),e.splitRow&&void 0!==a.smVerticalAccessorValue&&void 0!==a.smVerticalAccessorValue&&o.push({label:e.splitRow.title,value:`${a.smVerticalAccessorValue}`}),o})(e,i,o);return 0===a.length?null:Object(p.jsx)("div",{className:"detailedTooltip"},t&&i&&Object(p.jsx)("div",{className:"detailedTooltip__header"},t(i)),Object(p.jsx)("table",null,Object(p.jsx)("tbody",null,a.map(L))))};function I({addLegend:e,legendPosition:t}){return{show:e,position:t}}var P=i(23);function R({type:e,title:t,labels:i,scale:n,...o},{categoryLines:a,valueAxis:r},{params:s,format:d,formatter:u,title:p="",aggType:m},v,f=!1,g=!1,b=!1){const h=e===S.b.Category,x=(h||v.some((({valueAxis:e})=>e===o.id)))&&o.show,y=o.id,j=h?{show:a}:{show:r===o.id},w=m===k.BUCKET_TYPES.DATE_RANGE||m===k.BUCKET_TYPES.RANGE?l.identity:u,T={formatter:w,labelFormatter:D(i.truncate,w),show:i.show,rotation:i.rotate,showOverlappingLabels:!i.filter,showDuplicates:!i.filter},O=function(e,t,i,n){var o;const a=n?B(e,"number"===(null==i?void 0:i.id)||"number"===(null==i||null===(o=i.params)||void 0===o?void 0:o.id)&&(null==i?void 0:i.id)!==k.BUCKET_TYPES.RANGE&&(null==i?void 0:i.id)!==k.BUCKET_TYPES.TERMS,"date"in t,"interval"in t):B(e,!0);return{...e,type:a}}(n,s,d,h),C=t.text||p,_=h&&f?c.LabelRotation.Horizontal:c.LabelRotation.Vertical;return{...o,show:x,groupId:y,title:C,ticks:T,grid:j,scale:O,style:V(g,b,T,C,_),domain:z(O,h),integersOnly:"count"===m,timeAxisLayerCount:g?3:0}}function D(e,t){return null==e?t:i=>{const n=`${t?t(i):i}`;return n.length>e?`${n.slice(0,e)}...`:n}}function B(e,t,i=!1,n=!1){if(i)return s.ScaleType.Time;if(n)return s.ScaleType.Linear;if(!t)return s.ScaleType.Ordinal;const o=null==e?void 0:e.type;return o===S.e.SquareRoot?s.ScaleType.Sqrt:o}function V(e,t,i,n,o=c.LabelRotation.Vertical){var a;return e?{...P.MULTILAYER_TIME_AXIS_STYLE,tickLabel:{...P.MULTILAYER_TIME_AXIS_STYLE.tickLabel,visible:Boolean(null==i?void 0:i.show)},tickLine:{...P.MULTILAYER_TIME_AXIS_STYLE.tickLine,visible:Boolean(null==i?void 0:i.show)},axisTitle:{visible:(null!=n?n:"").trim().length>0}}:{axisTitle:{visible:(null!=n?n:"").trim().length>0},tickLabel:{visible:Boolean(null==i?void 0:i.show),rotation:-(null!==(a=null==i?void 0:i.rotation)&&void 0!==a?a:o)}}}function z(e,t){if(t||!e)return;const{min:i,max:n,defaultYExtents:o,boundsMargin:a}=e;return{fit:o,padding:a||void 0,min:null!=i?i:NaN,max:null!=n?n:NaN}}var F=i(21);function N(e,t){if(!t)return;if(Array.isArray(t))return Object(l.compact)(t.map((t=>{const i=t&&e[t.accessor];return i&&$(i,t)})));const i=e[t.accessor];return i&&$(i,t)}const $=({id:e,name:t},{accessor:i,format:n,params:o,aggType:a})=>({accessor:e,column:i,title:t,format:n,aggType:a,aggId:Object(F.a)(e),formatter:e=>Object(b.c)().deserialize(n).convert(e),params:o});var H=i(27);function U(e,t,i=!1,n=!1){var o,a,r,l;const{thresholdLine:c,orderBucketsBySum:d,addTimeMarker:p,radiusRatio:m,labels:v,fittingFunction:f,detailedTooltip:g,isVislibVis:b,fillOpacity:x}=t,y=function(e,{x:t,y:i,z:n,series:o,splitColumn:a,splitRow:r}){var s,l;const c=Array.isArray(o)||void 0===o?o:[o];return{x:null!==(s=N(e,t))&&void 0!==s?s:{accessor:null,aggId:null,aggType:null,title:h.i18n.translate("visTypeXy.aggResponse.allDocsTitle",{defaultMessage:"All docs"}),params:{defaultValue:"_all"}},y:null!==(l=N(e,i))&&void 0!==l?l:[],z:n&&(null==n?void 0:n.length)>0?N(e,n[0]):void 0,series:N(e,c),splitColumn:null!=a&&a.length?N(e,a[0]):void 0,splitRow:null!=r&&r.length?N(e,r[0]):void 0}}(e.columns,t.dimensions),j=function(e,{addTooltip:t,detailedTooltip:i}){return{type:t?s.TooltipType.VerticalCursor:s.TooltipType.None,detailedTooltip:i?M(e):void 0}}(y,t),w=[],T=new Set;t.dimensions.y.forEach((e=>{const i=e.accessor,n=y.y.find((({column:e})=>e===i)),o=Object(u.c)(null==n?void 0:n.aggId),a=t.seriesParams.find((({data:{id:e}})=>e===o)),r=t.valueAxes.find((({id:e})=>e===(null==a?void 0:a.valueAxis)));n&&r&&!T.has(o)&&(w.push(R(r,t.grid,n,t.seriesParams)),T.add(o))}));const O=function({position:e}){return"left"===e||"right"===e?90:0}(t.categoryAxes[0]),C=(null===(o=t.dimensions.x)||void 0===o?void 0:o.aggType)===k.BUCKET_TYPES.DATE_HISTOGRAM,_=(null===(a=t.dimensions.x)||void 0===a?void 0:a.aggType)===k.BUCKET_TYPES.HISTOGRAM,S=(C||_)&&Y(t.seriesParams,y.y,w),E=S&&C&&!i&&0===O,L=R(t.categoryAxes[0],t.grid,y.x,t.seriesParams,C,E,n),P=null!==(r=y.x.params.date)&&void 0!==r&&r;return{markSizeRatio:.6*m,fittingFunction:f,fillOpacity:x,detailedTooltip:g,orderBucketsBySum:d,isTimeChart:P,isVislibVis:b,showCurrentTime:p&&P,showValueLabel:null!==(l=v.show)&&void 0!==l&&l,enableHistogramMode:S,tooltip:j,aspects:y,xAxis:L,yAxes:w,legend:I(t),rotation:O,thresholdLine:A(c,w,t.seriesParams)}}const Y=(e,t,i)=>{const n=e.filter((({type:e,data:{id:i}})=>e===H.ChartType.Histogram&&void 0!==t.find((({aggId:e})=>e===i))));return!([...n.reduce(((e,{valueAxis:t,mode:i})=>(e.add(t),e)),new Set)].length>1)&&n.every((({valueAxis:e,mode:t})=>"stacked"===t))};i(42);const X="__chart_splitter__",G=({splitColumnAccessor:e,splitRowAccessor:t,splitDimension:i})=>{var n,o;let a="alphaDesc";if("terms"===(null==i||null===(n=i.meta)||void 0===n||null===(o=n.params)||void 0===o?void 0:o.id)){var l,c;const e=null==i||null===(l=i.meta)||void 0===l||null===(c=l.sourceParams)||void 0===c?void 0:c.params;a="asc"===(null==e?void 0:e.order)?"alphaAsc":"alphaDesc"}return e||t?Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(s.GroupBy,{id:X,by:(i,n)=>{const o=e||t;return o?"function"==typeof o?o(n):n[o]:i.id},sort:a}),Object(p.jsx)(s.SmallMultiples,{splitVertically:t?X:void 0,splitHorizontally:e?X:void 0})):null},K=e=>{var t,i,n;const[r,m]=Object(a.useState)((()=>{var t;const i=null==e.visParams.addLegend||e.visParams.addLegend;return null===(t=e.uiState)||void 0===t?void 0:t.get("vis.legendOpen",i)})),[f,h]=Object(a.useState)(null),k=Object(a.useRef)(null),S=Object(c.useActiveCursor)(Object(b.a)(),k,{datatables:[e.visData]}),A=Object(a.useCallback)((t=>{t&&e.renderComplete()}),[e]);Object(a.useEffect)((()=>{(async()=>{const e=await Object(b.d)().getPalettes();h(e)})()}),[]);const E=Object(a.useCallback)(((t,i,n,o)=>{const a=Object(u.d)(n);return n=>{if(null!==i){const r=Object(c.getFilterFromChartClickEventFn)(t,i,a,o)(n);e.fireEvent(r)}}}),[e]),L=Object(a.useCallback)(((t,i,n)=>{if(null!==i&&n)return n=>{const o=Object(c.getBrushFromChartBrushEventFn)(t,i)(n);e.fireEvent(o)}}),[e]),M=Object(a.useCallback)(((e,t,i)=>{const n=Object(u.d)(i);return i=>null!==t?Object(c.getFilterFromSeriesFn)(e)(i,n):null}),[]),I=Object(a.useCallback)(((t,i=!1)=>{e.fireEvent({...t,data:{...t.data,negate:i}})}),[e]),P=Object(a.useCallback)((()=>{m((t=>{var i;const n=!t;return null!==(i=e.uiState)&&void 0!==i&&i.set&&e.uiState.set("vis.legendOpen",n),n}))}),[e.uiState]),R=Object(a.useCallback)(((t,i)=>{var n,o;const a=(null===(n=e.uiState)||void 0===n?void 0:n.get("vis.colors"))||{};a[i]!==t&&t?a[i]=t:delete a[i],null!==(o=e.uiState)&&void 0!==o&&o.set&&(e.uiState.setSilent("vis.colors",null),e.uiState.set("vis.colors",a),e.uiState.emit("colorChanged"))}),[e.uiState]),{visData:D,visParams:B,syncColors:V}=e,z=Object(b.e)().useDarkMode(),F=U(D,B,e.useLegacyTimeAxis,z),N=function(){const e=Object(b.g)();if(e.isDefault("dateFormat:tz")){return g.a.tz.guess()||g()().format("Z")}return e.get("dateFormat:tz","Browser")}(),$=F.xAxis.scale.type===s.ScaleType.Ordinal?void 0:(e=>{var t;const i=null!==(t=null==e?void 0:e.interval)&&void 0!==t?t:void 0,n=e.date?e.bounds:null;return n?{min:n.min,max:n.max,minInterval:i}:{minInterval:i,min:NaN,max:NaN}})(F.aspects.x.params),H=B.seriesParams.some((({type:e,data:{id:t}})=>e===d.ChartType.Histogram&&void 0!==F.aspects.y.find((({aggId:e})=>e===t)))),Y=F.xAxis.scale.type===s.ScaleType.Ordinal?void 0:((e,{accessor:t,params:i},n,o,a)=>{if(t&&o&&"min"in o&&"max"in o&&"intervalESValue"in i&&"intervalESUnit"in i){const{interval:r,intervalESValue:s,intervalESUnit:d}=i,u=Object(l.uniq)(e.map((e=>e[t])).sort()),[p]=u,m=u[u.length-1],v=Math.min(p,o.min),f=Math.max(o.max-r,m);return{min:v,max:a?f:f+r,minInterval:Object(c.getAdjustedInterval)(u,s,d,n)}}return{minInterval:"interval"in i?i.interval:void 0,min:NaN,max:NaN}})(D.rows,F.aspects.x,N,$,H),X=Object(a.useMemo)((()=>{var e;return null!==(e=F.legend.position)&&void 0!==e?e:s.Position.Right}),[F.legend.position]),K=((e,t=!1)=>Object(l.memoize)((({splitAccessors:i,yAccessor:n})=>{var o,a;const r=function(e,t){if(e.size<1)return[];const i=[];return e.forEach(((e,n)=>{const o=(null!=t?t:[]).find((({accessor:e})=>e===n));i.push(null!=o&&o.formatter?null==o?void 0:o.formatter(e):e)})),i}(i,e.series),s=null!==(o=null===(a=e.y.find((({accessor:e})=>e===n)))||void 0===a?void 0:a.title)&&void 0!==o?o:null;return s?t?0===r.length?s:`${r.join(" - ")}: ${s}`:r.length>0?r.join(" - "):s:null})))(F.aspects,F.aspects.y.length>1),W=null===(t=F.aspects.series)||void 0===t?void 0:t.map((({accessor:e,formatter:t})=>({accessor:e,formatter:t}))),q=Object(a.useMemo)((()=>((e,t,i)=>{const n=[];return t?(e.forEach((e=>{let o="";null==t||t.forEach((({accessor:t,formatter:i})=>{if(!t)return;const n=i?i(e[t]):e[t];o?o+=` - ${n}`:o=n})),i.length>1?i.forEach((e=>{n.includes(`${o}: ${e.title}`)||n.push(`${o}: ${e.title}`)})):n.includes(o)||n.push(o)})),n):[]})(D.rows,W,F.aspects.y)),[F.aspects.y,W,D.rows]),Z=Object(a.useCallback)((t=>{var i;const n=K(t);if(!n)return null;const o=null!==(i=e.uiState)&&void 0!==i&&i.get?e.uiState.get("vis.colors",{}):{};if(Object.keys(o).includes(n))return o[n];return(null==f?void 0:f.get(B.palette.name).getCategoricalColor([{name:n,rankAtDepth:W?q.findIndex((e=>e===n)):F.aspects.y.findIndex((e=>e.accessor===t.yAccessor)),totalSeriesAtDepth:W?q.length:F.aspects.y.length}],{maxDepth:1,totalSeries:W?q.length:F.aspects.y.length,behindText:!1,syncColors:V}))||null}),[q,F.aspects.y,K,e.uiState,W,V,B.palette.name,f]),J=Object(u.e)(F.aspects.x),Q=Object(a.useMemo)((()=>F.aspects.series?Object(l.compact)(F.aspects.series.map(Object(u.b)(u.a))):[]),[F.aspects.series]),ee=F.aspects.splitColumn?Object(u.b)(u.a,!0)(F.aspects.splitColumn):void 0,te=F.aspects.splitRow?Object(u.b)(u.a,!0)(F.aspects.splitRow):void 0,ie=Object(a.useMemo)((()=>v(F,B.seriesParams,D.rows,K,Z,N,J,Q)),[F,Z,K,Q,N,D.rows,B.seriesParams,J]),ne=Object(a.useMemo)((()=>((e,t,i,n,o)=>({anchor:r,color:s,onClose:l,onChange:d,seriesIdentifiers:[u]})=>{const m=i(u),v=null==o?void 0:o.get("vis.colors",{}),f=Object.keys(v).includes(m);let g=!1;const b=Object(a.useCallback)((()=>{null==l||l()}),[l]);return Object(p.jsx)(x.EuiOutsideClickDetector,{onOutsideClick:b},Object(p.jsx)(x.EuiWrappingPopover,{isOpen:!0,ownFocus:!0,display:"block",button:r,anchorPosition:j(e),closePopover:l,panelPaddingSize:"s"},Object(p.jsx)(c.ColorPicker,{color:"kibana_palette"===n?s:s.toLowerCase(),onChange:e=>{m&&(e&&d(e),t(e,m),e&&g||l())},label:m,useLegacyColors:"kibana_palette"===n,colorIsOverwritten:f,onKeyDown:e=>{13===e.keyCode&&(null==l||l()),g=!0}})))})(X,R,K,B.palette.name,e.uiState)),[K,X,e.uiState,R,B.palette.name]),oe=B.dimensions.splitColumn?D.columns[B.dimensions.splitColumn[0].accessor]:B.dimensions.splitRow?D.columns[B.dimensions.splitRow[0].accessor]:void 0;return Object(p.jsx)("div",{className:"xyChart__container","data-test-subj":"visTypeXyChart"},Object(p.jsx)(c.LegendToggle,{onClick:P,showLegend:r,legendPosition:X}),Object(p.jsx)(s.Chart,{size:"100%",ref:k},Object(p.jsx)(G,{splitColumnAccessor:ee,splitRowAccessor:te,splitDimension:oe}),Object(p.jsx)(C,o()({},F,{truncateLegend:B.truncateLegend,maxLegendLines:B.maxLegendLines,showLegend:r,onPointerUpdate:S,legendPosition:X,xDomain:$,adjustedXDomain:Y,legendColorPicker:ne,onElementClick:E(D,J,Q,null!=ee?ee:te),onBrushEnd:L(D,J,"interval"in F.aspects.x.params),onRenderChange:A,legendAction:F.aspects.series&&(null!==(i=null===(n=F.aspects.series)||void 0===n?void 0:n.length)&&void 0!==i?i:0)>0?y((async e=>{if(!e)return!1;const t=await Object(b.b)().createFiltersFromValueClickAction(e.data);return Boolean(t.length)}),M(D,J,Q),I,K):void 0})),Object(p.jsx)(_,F.thresholdLine),Object(p.jsx)(O,{enabled:F.showCurrentTime,isDarkMode:z,domain:$}),Object(p.jsx)(T,{isFullBin:!F.enableHistogramMode,enabled:F.isTimeChart,isDarkMode:z,domain:$,hideTooltips:!F.detailedTooltip,adjustedDomain:Y}),Object(p.jsx)(w,F.xAxis),F.yAxes.map((e=>Object(p.jsx)(w,o()({key:e.id},e)))),ie))};t.default=Object(a.memo)(K)}}]);