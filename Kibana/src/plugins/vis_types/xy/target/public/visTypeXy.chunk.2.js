(window.visTypeXy_bundle_jsonpfunction=window.visTypeXy_bundle_jsonpfunction||[]).push([[2],{34:function(e,t,s){"use strict";s.d(t,"c",(function(){return c})),s.d(t,"f",(function(){return x})),s.d(t,"e",(function(){return d})),s.d(t,"b",(function(){return b})),s.d(t,"a",(function(){return p}));var a=s(0),i=s(4),l=s(1),n=s(6),o=s(8),r=s(20),u=s(19);s.d(t,"d",(function(){return u.a}));const c=()=>[{text:a.i18n.translate("visTypeXy.interpolationModes.straightText",{defaultMessage:"Straight"}),value:l.d.Linear},{text:a.i18n.translate("visTypeXy.interpolationModes.smoothedText",{defaultMessage:"Smoothed"}),value:l.d.Cardinal},{text:a.i18n.translate("visTypeXy.interpolationModes.steppedText",{defaultMessage:"Stepped"}),value:l.d.StepAfter}],x=()=>[{value:l.f.Full,text:a.i18n.translate("visTypeXy.thresholdLine.style.fullText",{defaultMessage:"Full"})},{value:l.f.Dashed,text:a.i18n.translate("visTypeXy.thresholdLine.style.dashedText",{defaultMessage:"Dashed"})},{value:l.f.DotDashed,text:a.i18n.translate("visTypeXy.thresholdLine.style.dotdashedText",{defaultMessage:"Dot-dashed"})}],d=()=>[{text:a.i18n.translate("visTypeXy.categoryAxis.rotate.horizontalText",{defaultMessage:"Horizontal"}),value:o.LabelRotation.Horizontal},{text:a.i18n.translate("visTypeXy.categoryAxis.rotate.verticalText",{defaultMessage:"Vertical"}),value:o.LabelRotation.Vertical},{text:a.i18n.translate("visTypeXy.categoryAxis.rotate.angledText",{defaultMessage:"Angled"}),value:o.LabelRotation.Angled}],b=()=>[{value:i.Fit.None,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.none",{defaultMessage:"Hide (Do not fill gaps)"})},{value:i.Fit.Zero,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.zero",{defaultMessage:"Zero (Fill gaps with zeros)"})},{value:i.Fit.Linear,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.linear",{defaultMessage:"Linear (Fill gaps with a line)"})},{value:i.Fit.Carry,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.carry",{defaultMessage:"Last (Fill gaps with the last value)"})},{value:i.Fit.Lookahead,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.lookahead",{defaultMessage:"Next (Fill gaps with the next value)"})}],p=()=>({legendPositions:Object(u.a)(),positions:Object(u.a)(),chartTypes:[{text:a.i18n.translate("visTypeXy.chartTypes.lineText",{defaultMessage:"Line"}),value:n.ChartType.Line},{text:a.i18n.translate("visTypeXy.chartTypes.areaText",{defaultMessage:"Area"}),value:n.ChartType.Area},{text:a.i18n.translate("visTypeXy.chartTypes.barText",{defaultMessage:"Bar"}),value:n.ChartType.Histogram}],axisModes:[{text:a.i18n.translate("visTypeXy.axisModes.normalText",{defaultMessage:"Normal"}),value:l.a.Normal},{text:a.i18n.translate("visTypeXy.axisModes.percentageText",{defaultMessage:"Percentage"}),value:l.a.Percentage},{text:a.i18n.translate("visTypeXy.axisModes.wiggleText",{defaultMessage:"Wiggle"}),value:l.a.Wiggle},{text:a.i18n.translate("visTypeXy.axisModes.silhouetteText",{defaultMessage:"Silhouette"}),value:l.a.Silhouette}],scaleTypes:Object(r.a)(),chartModes:[{text:a.i18n.translate("visTypeXy.chartModes.normalText",{defaultMessage:"Normal"}),value:l.c.Normal},{text:a.i18n.translate("visTypeXy.chartModes.stackedText",{defaultMessage:"Stacked"}),value:l.c.Stacked}],interpolationModes:c(),thresholdLineStyles:x(),fittingFunctions:b()})},48:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return W}));var a=s(9),i=s.n(a),l=s(32),n=s(14),o=s(4),r=s(2),u=s(10),c=s(13),x=s.n(c),d=s(0),b=s(17),p=s(31),j=s(34),y=s(7);const m=Object(j.c)();function g({chart:e,setChart:t}){const s=Object(a.useCallback)(((e,s)=>{t(e,""===s?void 0:s)}),[t]);return Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypeXy.controls.pointSeries.series.showLineLabel",{defaultMessage:"Show line"}),paramName:"drawLinesBetweenPoints",value:e.drawLinesBetweenPoints,setValue:t}),Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(y.jsx)(n.EuiFlexItem,null,Object(y.jsx)(p.SelectOption,{disabled:!e.drawLinesBetweenPoints,label:d.i18n.translate("visTypeXy.controls.pointSeries.series.lineModeLabel",{defaultMessage:"Line mode"}),options:m,paramName:"interpolate",value:e.interpolate,setValue:t})),Object(y.jsx)(n.EuiFlexItem,null,Object(y.jsx)(p.NumberInputOption,{disabled:!e.drawLinesBetweenPoints,label:d.i18n.translate("visTypeXy.controls.pointSeries.series.lineWidthLabel",{defaultMessage:"Line width"}),paramName:"lineWidth",step:.5,min:0,value:e.lineWidth,setValue:s}))))}function v({chart:e,setChart:t}){return Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypeXy.controls.pointSeries.series.showDotsLabel",{defaultMessage:"Show dots"}),paramName:"showCircles",value:e.showCircles,setValue:t}),Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(n.EuiFormRow,{label:d.i18n.translate("visTypeXy.controls.pointSeries.series.circlesRadius",{defaultMessage:"Dots size"}),fullWidth:!0,display:"rowCompressed"},Object(y.jsx)(n.EuiRange,{"data-test-subj":"circlesRadius",value:e.circlesRadius,min:1,max:10,step:1,fullWidth:!0,disabled:!e.showCircles,showInput:!0,compressed:!0,onChange:e=>{t("circlesRadius",Number(e.currentTarget.value))}})))}var O=s(6);const A=Object(j.a)();function T({chart:e,index:t,valueAxes:s,changeValueAxis:l,setParamByIndex:o}){const r=Object(a.useCallback)(((e,s)=>{o("seriesParams",t,e,s)}),[o,t]),u=Object(a.useCallback)(((e,s)=>{l(t,e,s)}),[l,t]),c=Object(a.useMemo)((()=>[...s.map((({id:e,name:t})=>({text:t,value:e}))),{text:d.i18n.translate("visTypeXy.controls.pointSeries.series.newAxisLabel",{defaultMessage:"New axisâ€¦"}),value:"new"}]),[s]);return Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(p.SelectOption,{id:`seriesValueAxis${t}`,label:d.i18n.translate("visTypeXy.controls.pointSeries.series.valueAxisLabel",{defaultMessage:"Value axis"}),options:c,paramName:"valueAxis",value:e.valueAxis,setValue:u}),Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(y.jsx)(n.EuiFlexItem,null,Object(y.jsx)(p.SelectOption,{id:`seriesType${t}`,label:d.i18n.translate("visTypeXy.controls.pointSeries.series.chartTypeLabel",{defaultMessage:"Chart type"}),options:A.chartTypes,paramName:"type",value:e.type,setValue:r})),Object(y.jsx)(n.EuiFlexItem,null,Object(y.jsx)(p.SelectOption,{id:`seriesMode${t}`,label:d.i18n.translate("visTypeXy.controls.pointSeries.series.modeLabel",{defaultMessage:"Mode"}),options:A.chartModes,paramName:"mode",value:e.mode,setValue:r}))),e.type===O.ChartType.Area&&Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(p.SelectOption,{label:d.i18n.translate("visTypeXy.controls.pointSeries.series.lineModeLabel",{defaultMessage:"Line mode"}),options:A.interpolationModes,paramName:"interpolate",value:e.interpolate,setValue:r})),e.type===O.ChartType.Line&&Object(y.jsx)(g,{chart:e,setChart:r}),(e.type===O.ChartType.Area||e.type===O.ChartType.Line)&&Object(y.jsx)(v,{chart:e,setChart:r}))}function h({seriesParams:e,...t}){return Object(y.jsx)(n.EuiPanel,{paddingSize:"s"},Object(y.jsx)(n.EuiTitle,{size:"xs"},Object(y.jsx)("h3",null,Object(y.jsx)(b.FormattedMessage,{id:"visTypeXy.controls.pointSeries.series.metricsTitle",defaultMessage:"Metrics"}))),Object(y.jsx)(n.EuiSpacer,{size:"s"}),e.map(((e,s)=>Object(y.jsx)(n.EuiAccordion,{id:`visEditorSeriesAccordion${e.data.id}`,key:s,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:0===s,buttonContent:e.data.label,buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate","aria-label":d.i18n.translate("visTypeXy.controls.pointSeries.seriesAccordionAriaLabel",{defaultMessage:"Toggle {agg} options",values:{agg:e.data.label}})},Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(T,x()({index:s,chart:e},t)))))))}var f=s(22);s(15);function S({axisLabels:e,axisFilterCheckboxName:t,setAxisLabel:s,disableSingleLayerAxisControls:l}){const o=Object(a.useCallback)(((e,t)=>{s(e,Number(t))}),[s]),r=Object(a.useMemo)(j.e,[]),u=l?d.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.axisLabelsOptionsMultilayer.disabled",{defaultMessage:"This option can be configured only with non-time-based axes"}):void 0,c=!e.show||l;return Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(n.EuiTitle,{size:"xxs"},Object(y.jsx)("h3",null,Object(y.jsx)(b.FormattedMessage,{id:"visTypeXy.controls.pointSeries.categoryAxis.labelsTitle",defaultMessage:"Labels"}))),Object(y.jsx)(n.EuiSpacer,{size:"s"}),Object(y.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.showLabelsLabel",{defaultMessage:"Show labels"}),paramName:"show",value:e.show,setValue:s}),Object(y.jsx)(p.SwitchOption,{"data-test-subj":t,disabled:c,label:d.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.filterLabelsLabel",{defaultMessage:"Filter labels"}),paramName:"filter",value:e.filter,setValue:s,tooltip:u}),Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(y.jsx)(n.EuiFlexItem,null,Object(y.jsx)(n.EuiToolTip,{content:u,delay:"long",position:"right"},Object(y.jsx)(p.SelectOption,{disabled:c,label:d.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.alignLabel",{defaultMessage:"Align"}),options:r,paramName:"rotate",value:e.rotate,setValue:o}))),Object(y.jsx)(n.EuiFlexItem,null,Object(y.jsx)(n.EuiToolTip,{content:u,delay:"long",position:"right"},Object(y.jsx)(f.a,{disabled:c,value:e.truncate,setValue:s})))))}const M=Object(j.d)();function E({axis:e,onPositionChanged:t,setCategoryAxis:s,useMultiLayerAxis:i}){const l=Object(a.useCallback)(((t,a)=>{const i={...e,[t]:a};s(i)}),[s,e]),o=Object(a.useCallback)(((e,s)=>{l(e,s),t(s)}),[l,t]),r=Object(a.useCallback)(((t,s)=>{const a={...e.labels,[t]:s};l("labels",a)}),[e.labels,l]);return Object(y.jsx)(n.EuiPanel,{paddingSize:"s"},Object(y.jsx)(n.EuiTitle,{size:"xs"},Object(y.jsx)("h3",null,Object(y.jsx)(b.FormattedMessage,{id:"visTypeXy.controls.pointSeries.categoryAxis.xAxisTitle",defaultMessage:"X-axis"}))),Object(y.jsx)(n.EuiSpacer,{size:"s"}),Object(y.jsx)(p.SelectOption,{label:d.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.positionLabel",{defaultMessage:"Position"}),options:M,paramName:"position",value:e.position,setValue:o,"data-test-subj":"categoryAxisPosition"}),Object(y.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.showLabel",{defaultMessage:"Show axis lines and labels"}),paramName:"show",value:e.show,setValue:l}),e.show&&Object(y.jsx)(S,{axisLabels:e.labels,axisFilterCheckboxName:`xAxisFilterLabelsCheckbox${e.id}`,setAxisLabel:r,disableSingleLayerAxisControls:i}))}var C=s(1);const L=d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.minErrorMessage",{defaultMessage:"Min should be less than Max."}),w=d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.minNeededScaleText",{defaultMessage:"Min must exceed 0 when a log scale is selected."});function X(e){return null==e}function P({scale:e,setScale:t,setMultipleValidity:s}){const{min:l,max:o,type:r}=e,u=[];(function(e=null,t=null){return null===e||null===t||t>e})(l,o)||u.push(L),r===C.e.Log&&(X(l)||l<=0)&&u.push(w);const c=!u.length,x=Object(a.useCallback)(((e,s)=>{t(e,""===s?null:s)}),[t]);return Object(a.useEffect)((()=>(s("yExtents",c),()=>s("yExtents",!0))),[c,s]),Object(y.jsx)(n.EuiFormRow,{error:u,isInvalid:!!u.length,fullWidth:!0,display:"rowCompressed"},Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(y.jsx)(n.EuiFlexItem,null,Object(y.jsx)(p.NumberInputOption,{"data-test-subj":"yAxisYExtentsMin",isInvalid:!!u.length,label:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.minLabel",{defaultMessage:"Min"}),step:.1,paramName:"min",value:X(l)?"":l,setValue:x})),Object(y.jsx)(n.EuiFlexItem,null,Object(y.jsx)(p.NumberInputOption,{"data-test-subj":"yAxisYExtentsMax",label:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.maxLabel",{defaultMessage:"Max"}),step:.1,paramName:"max",value:X(o)?"":o,setValue:x})))))}function F({axisScale:e,setMultipleValidity:t,setValueAxis:s,setValueAxisScale:l,disableAxisExtents:n=!1}){const o=d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBounds.minNeededBoundsMargin",{defaultMessage:"Bounds margin must be greater than or equal to 0."}),r=!e.defaultYExtents||!e.boundsMargin||e.boundsMargin>=0,u=Object(a.useCallback)(((e,t)=>l(e,""===t?void 0:t)),[l]),c=Object(a.useCallback)(((t,a)=>{const i={...e,[t]:a};i.defaultYExtents||delete i.boundsMargin,s("scale",i)}),[e,s]),x=Object(a.useCallback)(((t,a)=>{const i={...e,[t]:a};i.setYExtents||(delete i.min,delete i.max),s("scale",i)}),[e,s]);return Object(a.useEffect)((()=>(t("boundsMargin",r),()=>t("boundsMargin",!0))),[r,t]),Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBoundsLabel",{defaultMessage:"Scale to data bounds"}),paramName:"defaultYExtents",value:e.defaultYExtents,setValue:c}),e.defaultYExtents&&Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(p.NumberInputOption,{error:!r&&o,isInvalid:!r,label:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBounds.boundsMargin",{defaultMessage:"Bounds margin"}),step:.1,min:0,paramName:"boundsMargin",value:e.boundsMargin,setValue:u})),Object(y.jsx)(p.SwitchOption,{"data-test-subj":"yAxisSetYExtents",label:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.setAxisExtentsLabel",{defaultMessage:"Set axis extents"}),paramName:"setYExtents",value:e.setYExtents,setValue:x,disabled:n}),e.setYExtents&&!n&&Object(y.jsx)(P,{scale:e,setScale:l,setMultipleValidity:t}))}const V=Object(j.a)();function N({axis:e,index:t,valueAxis:s,onValueAxisPositionChanged:l,setParamByIndex:o,setMultipleValidity:r}){const u=Object(a.useCallback)(((e,s)=>o("valueAxes",t,e,s)),[o,t]),c=Object(a.useCallback)(((e,a)=>{const i={...s.title,[e]:a};o("valueAxes",t,"title",i)}),[s.title,o,t]),x=Object(a.useCallback)(((e,a)=>{const i={...s.scale,[e]:a};o("valueAxes",t,"scale",i)}),[s.scale,o,t]),b=Object(a.useCallback)(((e,a)=>{const i={...s.labels,[e]:a};o("valueAxes",t,"labels",i)}),[s.labels,o,t]),j=Object(a.useCallback)(((e,s)=>{l(t,s)}),[t,l]);return Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(p.SelectOption,{label:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.positionLabel",{defaultMessage:"Position"}),options:V.positions,paramName:"position",value:e.position,setValue:j}),Object(y.jsx)(p.SelectOption,{id:`valueAxisMode${t}`,label:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.modeLabel",{defaultMessage:"Mode"}),options:V.axisModes,paramName:"mode",value:e.scale.mode,setValue:x}),Object(y.jsx)(p.SelectOption,{id:`scaleSelectYAxis-${e.id}`,label:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleTypeLabel",{defaultMessage:"Scale type"}),options:V.scaleTypes,paramName:"type",value:e.scale.type,setValue:x}),Object(y.jsx)(n.EuiHorizontalRule,{margin:"m"}),Object(y.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.showLabel",{defaultMessage:"Show axis lines and labels"}),"data-test-subj":`valueAxisShow-${e.id}`,paramName:"show",value:e.show,setValue:u}),e.show?Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(p.TextInputOption,{"data-test-subj":`valueAxisTitle${t}`,label:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.titleLabel",{defaultMessage:"Title"}),paramName:"text",value:e.title.text,setValue:c}),Object(y.jsx)(S,{axisLabels:e.labels,axisFilterCheckboxName:`yAxisFilterLabelsCheckbox-${e.id}`,setAxisLabel:b})):Object(y.jsx)(n.EuiSpacer,{size:"xs"}),Object(y.jsx)(n.EuiHorizontalRule,{margin:"s"}),Object(y.jsx)(n.EuiAccordion,{id:`yAxisOptionsAccordion${e.id}`,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:!1,buttonContentClassName:"euiText euiText--small",buttonContent:d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.customExtentsLabel",{defaultMessage:"Custom extents"}),"aria-label":d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.toggleCustomExtendsAriaLabel",{defaultMessage:"Toggle custom extents"})},Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(F,{axisScale:e.scale,setMultipleValidity:r,setValueAxisScale:x,setValueAxis:u,disableAxisExtents:"percentage"===e.scale.mode}))))}function k(e){const{addValueAxis:t,removeValueAxis:s,seriesParams:l,valueAxes:o}=e,r=Object(a.useCallback)((e=>{const t=o[0].id===e.id;return l.filter((s=>s.valueAxis===e.id||t&&!s.valueAxis)).map((e=>e.data.label)).join(", ")}),[l,o]),u=Object(a.useMemo)((()=>d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.removeButtonTooltip",{defaultMessage:"Remove Y-axis"})),[]),c=Object(a.useCallback)((e=>Object(y.jsx)(n.EuiToolTip,{position:"bottom",content:u},Object(y.jsx)(n.EuiButtonIcon,{color:"danger",iconType:"cross",onClick:()=>s(e),"aria-label":u,"data-test-subj":"removeValueAxisBtn"}))),[s,u]),x=Object(a.useMemo)((()=>d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.addButtonTooltip",{defaultMessage:"Add Y-axis"})),[]),p=Object(a.useCallback)((e=>{const t=r(e);return Object(y.jsx)(i.a.Fragment,null,e.name," ",Object(y.jsx)(n.EuiToolTip,{content:t},Object(y.jsx)(i.a.Fragment,null,t)))}),[r]);return Object(y.jsx)(n.EuiPanel,{paddingSize:"s"},Object(y.jsx)(n.EuiFlexGroup,{gutterSize:"none",justifyContent:"spaceBetween",alignItems:"baseline"},Object(y.jsx)(n.EuiFlexItem,{grow:!1},Object(y.jsx)(n.EuiTitle,{size:"xs"},Object(y.jsx)("h3",null,Object(y.jsx)(b.FormattedMessage,{id:"visTypeXy.controls.pointSeries.valueAxes.yAxisTitle",defaultMessage:"Y-axes"})))),Object(y.jsx)(n.EuiFlexItem,{grow:!1},Object(y.jsx)(n.EuiToolTip,{position:"bottom",content:x},Object(y.jsx)(n.EuiButtonIcon,{iconType:"plusInCircleFilled",onClick:t,"aria-label":x,"data-test-subj":"visualizeAddYAxisButton"})))),Object(y.jsx)(n.EuiSpacer,{size:"s"}),o.map(((t,s)=>Object(y.jsx)(n.EuiAccordion,{id:`yAxisAccordion${t.id}`,key:t.id,"data-test-subj":`toggleYAxisOptions-${t.id}`,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:!1,buttonContent:p(t),buttonClassName:"eui-textTruncate",buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate","aria-label":d.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.toggleOptionsAriaLabel",{defaultMessage:"Toggle {axisName} options",values:{axisName:t.name}}),extraAction:1===o.length?void 0:c(t)},Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(n.EuiSpacer,{size:"m"}),Object(y.jsx)(N,{axis:t,index:s,valueAxis:o[s],onValueAxisPositionChanged:e.onValueAxisPositionChanged,setParamByIndex:e.setParamByIndex,setMultipleValidity:e.setMultipleValidity}))))))}const z=e=>[o.Position.Top,o.Position.Bottom].includes(e);function I(e,t="id"){return(s,a)=>{const i=e.length;if(a[t].substr(0,i)===e){const e=parseInt(a[t].substr(i),10);e>=s&&(s=e+1)}return s}}const B=(e,t)=>{const s=Object(l.upperFirst)(e)+"Axis-";return`${s}${t.reduce(I(s,"name"),1)}`};function _(e){switch(e){case o.Position.Bottom:return o.Position.Top;case o.Position.Top:return o.Position.Bottom;case o.Position.Left:return o.Position.Right;case o.Position.Right:return o.Position.Left;default:throw new Error("Invalid legend position.")}}function Y(e,t,s){return e===t?s:_(s)}function R(e){switch(e){case o.Position.Bottom:return o.Position.Left;case o.Position.Top:return o.Position.Right;case o.Position.Left:return o.Position.Bottom;case o.Position.Right:return o.Position.Top}}var $=s(25),D=s(23);const G="ValueAxis-";function W(e){const{stateParams:t,setValue:s,aggs:c,vis:x,isTabSelected:d}=e,b=Object(a.useCallback)(((e,a,i,l)=>{const n=[...t[e]];n[a]={...n[a],[i]:l},s(e,n)}),[t,s]),p=Object(a.useCallback)((e=>{const a=[...t.categoryAxes];a[0]=e,s("categoryAxes",a)}),[s,t.categoryAxes]),[j,m]=Object(a.useState)({}),[g,v]=Object(a.useState)({}),O=Object(a.useCallback)((e=>{const a=e||t.seriesParams;let i=!1,n=!1;const o={...j},r={...g},u=t.valueAxes.map(((e,t)=>{let s,u="";const x=[];if(a.forEach(((s,a)=>{if(0===t&&!s.valueAxis||s.valueAxis===e.id){const e=c.bySchemaName("metric")[a];x.push(e)}})),1===x.length&&(u=x[0].makeLabel()),j[e.id]!==u&&""!==u){const t=Object(l.get)(g,`${x[0].id}.type`),a=Object(l.get)(g,`${x[0].id}.field`),c=Object(l.get)(x,"[0]type.name",""),d=Object(l.get)(x,"[0]params.field.name",""),b=t!==c,p=a!==d;r[x[0].id]={type:c,field:d},o[e.id]=u,n=!0,0!==Object.keys(j).length&&(b||p||""===e.title.text||j[e.id]===e.title.text)&&u!==e.title.text&&(s={...e,title:{...e.title,text:u}},i=!0)}return s||e}));i&&s("valueAxes",u),n&&(v(r),m(o))}),[c,j,g,s,t.seriesParams,t.valueAxes]),A=Object(a.useCallback)(((e,a)=>{const i=z(a),l=[...t.valueAxes],n=B(a,l),[o]=t.categoryAxes;if(z(o.position)===i){const t={...o,position:R(o.position)};s("categoryAxes",[t]);const i=l[e].position,n=l.map((({position:t,...s},l)=>({...s,position:l===e?a:Y(t,i,a)})));s("valueAxes",n)}else l[e]={...l[e],name:n,position:a},s("valueAxes",l)}),[t.valueAxes,t.categoryAxes,s]),T=Object(a.useCallback)((e=>{const a=z(e);if(t.valueAxes.some((({position:e})=>z(e)===a))){const e=t.valueAxes.map((({position:e,...t})=>({...t,position:R(e)})));s("valueAxes",e)}}),[s,t.valueAxes]),f=Object(a.useCallback)((()=>{const e=t.valueAxes.reduce(I(G),1),a=Object(l.cloneDeep)(t.valueAxes[0]);return a.id=G+e,a.position=_(a.position),a.name=B(a.position,t.valueAxes),s("valueAxes",[...t.valueAxes,a]),a}),[t.valueAxes,s]),S=Object(a.useCallback)((e=>{const a=t.valueAxes.filter((t=>t.id!==e.id));s("valueAxes",a);let i=!1;const l=t.seriesParams.map((t=>e.id===t.valueAxis?(i=!0,{...t,valueAxis:a[0].id}):t));i&&s("seriesParams",l),t.grid.valueAxis===e.id&&s("grid",{...t.grid,valueAxis:void 0})}),[t.seriesParams,t.valueAxes,s,t.grid]),M=Object(a.useCallback)(((e,t,s)=>{let a=s;if("new"===s){a=f().id}b("seriesParams",e,t,a),O()}),[f,b,O]),C=x.type.schemas.metrics[0].name,L=t.valueAxes[0].id;Object(a.useEffect)((()=>{const e=Object($.a)(c,t.seriesParams,C,L);e&&s("seriesParams",e),O(e)}),[L,s,t.seriesParams,O,c,C]);const w=c.aggs.some((e=>{var t;return"segment"===e.schema&&e.enabled&&(null===(t=e.type)||void 0===t?void 0:t.name)===r.BUCKET_TYPES.DATE_HISTOGRAM})),X=t.categoryAxes[0].position===o.Position.Bottom||t.categoryAxes[0].position===o.Position.Top,P=Object(u.g)().get(D.LEGACY_TIME_AXIS,!1),F=t.seriesParams.every((({mode:e,type:t})=>"histogram"!==t||"histogram"===t&&"stacked"===e)),V=X&&w&&!P&&F;return d?Object(y.jsx)(i.a.Fragment,null,Object(y.jsx)(h,{changeValueAxis:M,setParamByIndex:b,seriesParams:t.seriesParams,valueAxes:t.valueAxes,vis:x}),Object(y.jsx)(n.EuiSpacer,{size:"s"}),Object(y.jsx)(k,{addValueAxis:f,removeValueAxis:S,onValueAxisPositionChanged:A,setParamByIndex:b,setMultipleValidity:e.setMultipleValidity,seriesParams:t.seriesParams,valueAxes:t.valueAxes}),Object(y.jsx)(n.EuiSpacer,{size:"s"}),Object(y.jsx)(E,{axis:t.categoryAxes[0],onPositionChanged:T,setCategoryAxis:p,useMultiLayerAxis:V})):null}}}]);