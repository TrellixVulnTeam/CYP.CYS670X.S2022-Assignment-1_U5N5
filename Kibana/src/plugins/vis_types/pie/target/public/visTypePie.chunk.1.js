(window.visTypePie_bundle_jsonpfunction=window.visTypePie_bundle_jsonpfunction||[]).push([[1],{18:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return L}));var a=s(9),i=s.n(a),l=s(6),n=s.n(l),o=s(15),u=s(14),d=s(2),r=s(16),p=s(17),c=s(7);function b({disabled:e,value:t=null,setValue:s}){return Object(c.jsx)(u.EuiFormRow,{label:d.i18n.translate("visTypePie.controls.truncateLabel",{defaultMessage:"Truncate"}),fullWidth:!0,display:"rowCompressed",labelAppend:Object(c.jsx)(u.EuiIconTip,{content:d.i18n.translate("visTypePie.controls.truncateTooltip",{defaultMessage:"Number of characters for labels positioned outside the chart."}),position:"top",type:"iInCircle",color:"subdued"})},Object(c.jsx)(u.EuiFieldNumber,{"data-test-subj":"pieLabelTruncateInput",disabled:e,value:t||"",onChange:e=>s("truncate",""===e.target.value?null:parseFloat(e.target.value)),fullWidth:!0,compressed:!0}))}var v=s(3),m=s(1);const j=[{text:d.i18n.translate("visTypePie.labelPositions.insideText",{defaultMessage:"Inside"}),value:m.LabelPositions.INSIDE},{text:d.i18n.translate("visTypePie.labelPositions.insideOrOutsideText",{defaultMessage:"Inside or outside"}),value:m.LabelPositions.DEFAULT}],g=[{text:d.i18n.translate("visTypePie.valuesFormats.percent",{defaultMessage:"Show percent"}),value:m.ValueFormats.PERCENT},{text:d.i18n.translate("visTypePie.valuesFormats.value",{defaultMessage:"Show value"}),value:m.ValueFormats.VALUE}],O=[{id:"emptySizeRatioOption-small",value:m.EmptySizeRatios.SMALL,label:d.i18n.translate("visTypePie.emptySizeRatioOptions.small",{defaultMessage:"Small"})},{id:"emptySizeRatioOption-medium",value:m.EmptySizeRatios.MEDIUM,label:d.i18n.translate("visTypePie.emptySizeRatioOptions.medium",{defaultMessage:"Medium"})},{id:"emptySizeRatioOption-large",value:m.EmptySizeRatios.LARGE,label:d.i18n.translate("visTypePie.emptySizeRatioOptions.large",{defaultMessage:"Large"})}];var P=s(8);const T=[{text:d.i18n.translate("visTypePie.legendPositions.topText",{defaultMessage:"Top"}),value:P.Position.Top},{text:d.i18n.translate("visTypePie.legendPositions.leftText",{defaultMessage:"Left"}),value:P.Position.Left},{text:d.i18n.translate("visTypePie.legendPositions.rightText",{defaultMessage:"Right"}),value:P.Position.Right},{text:d.i18n.translate("visTypePie.legendPositions.bottomText",{defaultMessage:"Bottom"}),value:P.Position.Bottom}],h=d.i18n.translate("visTypePie.editors.pie.emptySizeRatioLabel",{defaultMessage:"Inner area size"});function x({paramName:e,value:t,setValue:s}){return Object(c.jsx)(u.EuiFormRow,{fullWidth:!0,label:d.i18n.translate("visTypePie.editors.pie.decimalSliderLabel",{defaultMessage:"Maximum decimal places for percent"}),"data-test-subj":"visTypePieValueDecimals"},Object(c.jsx)(u.EuiRange,{value:t,min:0,max:4,showInput:!0,compressed:!0,onChange:t=>{s(e,Number(t.currentTarget.value))}}))}const L=e=>{var t,s,a,P,L,y,S,E,f;const{stateParams:w,setValue:M,aggs:C}=e,I=(e,t)=>M("labels",{...w.labels,[e]:t}),R=null===(t=e.uiState)||void 0===t?void 0:t.get("vis.legendOpen"),[F,z]=Object(l.useState)(void 0),[N,V]=Object(l.useState)((()=>{var t;const s=null!=w.addLegend&&w.addLegend;return null===(t=e.uiState)||void 0===t?void 0:t.get("vis.legendOpen",s)})),_=Boolean(null==C||null===(s=C.aggs)||void 0===s?void 0:s.find((e=>"split"===e.schema&&e.enabled))),D=null!==(a=null==C||null===(P=C.aggs)||void 0===P?void 0:P.filter((e=>"segment"===e.schema&&e.enabled)))&&void 0!==a?a:[];Object(l.useEffect)((()=>{V(R)}),[R]),Object(l.useEffect)((()=>{(async()=>{var t;const s=await(null===(t=e.palettes)||void 0===t?void 0:t.getPalettes());z(s)})()}),[e.palettes]);const U=Object(l.useCallback)((e=>{var t;const s=null===(t=O.find((({id:t})=>t===e)))||void 0===t?void 0:t.value;M("emptySizeRatio",s)}),[M]);return Object(c.jsx)(n.a.Fragment,null,Object(c.jsx)(u.EuiPanel,{paddingSize:"s"},Object(c.jsx)(u.EuiTitle,{size:"xs"},Object(c.jsx)("h3",null,Object(c.jsx)(r.FormattedMessage,{id:"visTypePie.editors.pie.pieSettingsTitle",defaultMessage:"Pie settings"}))),Object(c.jsx)(u.EuiSpacer,{size:"s"}),Object(c.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.donutLabel",{defaultMessage:"Donut"}),paramName:"isDonut",value:w.isDonut,setValue:M}),e.showElasticChartsOptions&&w.isDonut&&Object(c.jsx)(u.EuiFormRow,{label:h,fullWidth:!0},Object(c.jsx)(u.EuiButtonGroup,{isFullWidth:!0,name:"emptySizeRatio",buttonSize:"compressed",legend:h,options:O,idSelected:null!==(L=null===(y=O.find((({value:e})=>e===w.emptySizeRatio)))||void 0===y?void 0:y.id)&&void 0!==L?L:"emptySizeRatioOption-small",onChange:U,"data-test-subj":"visTypePieEmptySizeRatioButtonGroup"})),Object(c.jsx)(p.BasicOptions,i()({},e,{legendPositions:T})),e.showElasticChartsOptions&&Object(c.jsx)(n.a.Fragment,null,Object(c.jsx)(u.EuiFormRow,null,Object(c.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(c.jsx)(u.EuiFlexItem,{grow:!1},Object(c.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.distinctColorsLabel",{defaultMessage:"Use distinct colors per slice"}),paramName:"distinctColors",value:w.distinctColors,disabled:(null==D?void 0:D.length)<=1&&!_,setValue:M,"data-test-subj":"visTypePiedistinctColorsSwitch"})),Object(c.jsx)(u.EuiFlexItem,{grow:!1},Object(c.jsx)(u.EuiIconTip,{content:"Use with multi-layer chart or multiple charts.",position:"top",type:"iInCircle",color:"subdued"})))),Object(c.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.addLegendLabel",{defaultMessage:"Show legend"}),paramName:"addLegend",value:N,setValue:(e,t)=>{V(t),M(e,t)},"data-test-subj":"visTypePieAddLegendSwitch"}),Object(c.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.nestedLegendLabel",{defaultMessage:"Nest legend"}),paramName:"nestedLegend",value:w.nestedLegend,disabled:!w.addLegend,setValue:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"nested_legend_switched"),M(t,s)},"data-test-subj":"visTypePieNestedLegendSwitch"}),Object(c.jsx)(p.LongLegendOptions,{"data-test-subj":"pieLongLegendsOptions",truncateLegend:null===(S=w.truncateLegend)||void 0===S||S,maxLegendLines:null!==(E=w.maxLegendLines)&&void 0!==E?E:1,setValue:M})),e.showElasticChartsOptions&&F&&Object(c.jsx)(p.PalettePicker,{palettes:F,activePalette:w.palette,paramName:"palette",setPalette:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"palette_selected"),M(t,s)}})),Object(c.jsx)(u.EuiSpacer,{size:"s"}),Object(c.jsx)(u.EuiPanel,{paddingSize:"s"},Object(c.jsx)(u.EuiTitle,{size:"xs"},Object(c.jsx)("h3",null,Object(c.jsx)(r.FormattedMessage,{id:"visTypePie.editors.pie.labelsSettingsTitle",defaultMessage:"Labels settings"}))),Object(c.jsx)(u.EuiSpacer,{size:"s"}),Object(c.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.showLabelsLabel",{defaultMessage:"Show labels"}),paramName:"show",value:w.labels.show,setValue:I}),e.showElasticChartsOptions&&Object(c.jsx)(p.SelectOption,{label:d.i18n.translate("visTypePie.editors.pie.labelPositionLabel",{defaultMessage:"Label position"}),disabled:!w.labels.show||_,options:j,paramName:"position",value:_?m.LabelPositions.INSIDE:w.labels.position||m.LabelPositions.DEFAULT,setValue:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"label_position_selected"),I(t,s)},"data-test-subj":"visTypePieLabelPositionSelect"}),Object(c.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.showTopLevelOnlyLabel",{defaultMessage:"Show top level only"}),disabled:!w.labels.show||e.showElasticChartsOptions&&w.labels.position===m.LabelPositions.INSIDE,paramName:"last_level",value:w.labels.last_level,setValue:I,"data-test-subj":"visTypePieTopLevelSwitch"}),Object(c.jsx)(p.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.showValuesLabel",{defaultMessage:"Show values"}),disabled:!w.labels.show,paramName:"values",value:w.labels.values,setValue:I}),e.showElasticChartsOptions&&Object(c.jsx)(n.a.Fragment,null,Object(c.jsx)(p.SelectOption,{label:d.i18n.translate("visTypePie.editors.pie.valueFormatsLabel",{defaultMessage:"Values"}),disabled:!w.labels.values,options:g,paramName:"valuesFormat",value:w.labels.valuesFormat||m.ValueFormats.PERCENT,setValue:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"values_format_selected"),I(t,s)},"data-test-subj":"visTypePieValueFormatsSelect"}),Object(c.jsx)(x,{paramName:"percentDecimals",value:null!==(f=w.labels.percentDecimals)&&void 0!==f?f:v.DEFAULT_PERCENT_DECIMALS,setValue:I})),Object(c.jsx)(b,{value:w.labels.truncate,setValue:I,disabled:e.showElasticChartsOptions&&w.labels.position===m.LabelPositions.INSIDE})))}}}]);