!function(e){function t(t){for(var n,r,s=t[0],o=t[1],a=0,c=[];a<s.length;a++)r=s[a],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&c.push(i[r][0]),i[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(u&&u(t);c.length;)c.shift()()}var n={},i={1:0};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=s);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.src=function(e){return r.p+"visTypeTimelion.chunk."+e+".js"}(e);var u=new Error;o=function(t){a.onerror=a.onload=null,clearTimeout(c);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",u.name="ChunkLoadError",u.type=r,u.request=s,n[1](u)}i[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:a})}),12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var s=window.visTypeTimelion_bundle_jsonpfunction=window.visTypeTimelion_bundle_jsonpfunction||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var u=o;r(r.s=16)}([function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return c}));var i=n(7);const[r,s]=Object(i.createGetterSetter)("IndexPatterns"),[o,a]=Object(i.createGetterSetter)("Search"),[u,c]=Object(i.createGetterSetter)("Charts")},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/visDefaultEditor/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=async e=>{const{parseTimelionExpression:t}=await n.e(4).then(n.bind(null,27));return t(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(3),r=n(1),s=n(0);function o(){const e=Object(r.c)();async function t(t){const n=t.find((({name:e})=>"index"===e));if(!n)return;const r=Object(i.get)(n,"value.text");return(await e.find(r)).find((e=>e.title===r))}function n(e,t){return!e||t.name.includes(e)}const o={es:{async index(t){const n=t?`${t}*`:"*";return(await e.find(n,25)).map((({title:e})=>({name:e,insertText:e})))},async metric(e,i){if(!e||!e.includes(":"))return[{name:"avg:"},{name:"cardinality:"},{name:"count"},{name:"max:"},{name:"min:"},{name:"percentiles:"},{name:"sum:"}];const r=await t(i);if(!r)return[];const o=e.split(":");return r.fields.getByType(s.KBN_FIELD_TYPES.NUMBER).filter((e=>e.aggregatable&&n(o[1],e)&&!s.indexPatterns.isNestedField(e))).map((e=>{const t=e.name.replaceAll(":","\\:");return{name:`${o[0]}:${t}`,help:e.type,insertText:t}}))},async split(e,i){const r=await t(i);return r?r.fields.getAll().filter((t=>t.aggregatable&&[s.KBN_FIELD_TYPES.NUMBER,s.KBN_FIELD_TYPES.BOOLEAN,s.KBN_FIELD_TYPES.DATE,s.KBN_FIELD_TYPES.IP,s.KBN_FIELD_TYPES.STRING].includes(t.type)&&n(e,t)&&!s.indexPatterns.isNestedField(t))).map((e=>({name:e.name,help:e.type,insertText:e.name}))):[]},async timefield(e,i){const r=await t(i);return r?r.fields.getByType(s.KBN_FIELD_TYPES.DATE).filter((t=>n(e,t)&&!s.indexPatterns.isNestedField(t))).map((e=>({name:e.name,insertText:e.name}))):[]}}};return{hasDynamicSuggestionsForArgument:(e,t)=>o[e]&&o[e][t],getDynamicSuggestionsForArgument:async(e,t,n,i="")=>await o[e][t](i,n),getStaticSuggestionsForInput:(e="",t=[])=>e?t.filter((t=>t.name.includes(e))):t}}},function(e,t,n){e.exports=n(15)(3)},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n(17),__kbnBundles__.define("plugin/visTypeTimelion/public",n,18)},function(e,t,n){n.p=window.__kbnPublicPath__.visTypeTimelion},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return j}));var i=n(3),r=n(5),s=n(14),o=n.n(s),a=n(4),u=n(11),c=n(9);const l=e=>{const{expression:t,interval:n}=e.params,i=Object(c.buildExpressionFunction)("timelion_vis",{expression:t,interval:n});return Object(c.buildExpression)([i]).toAst()};var p=n(1),d=n(12),f=n(6),_=n(2);const m=Object(a.lazy)((()=>n.e(3).then(n.bind(null,64)))),b="timelion";var g=n(13),v=n(10),h=n(8);const y="timelion:legacyChartsLibrary",x=Object(a.lazy)((()=>n.e(0).then(n.bind(null,63)).then((({TimelionVisComponent:e})=>({default:e}))))),O=Object(a.lazy)((()=>n.e(2).then(n.bind(null,65))));class plugin_TimelionVisPlugin{constructor(e){this.initializerContext=e}setup({uiSettings:e,http:t,theme:s},{expressions:a,visualizations:c,data:g,charts:j}){const T={http:t,uiSettings:e,timefilter:g.query.timefilter.timefilter,theme:s};var S;a.registerFunction((()=>(e=>({name:"timelion_vis",type:"render",inputTypes:["kibana_context","null"],help:r.i18n.translate("timelion.function.help",{defaultMessage:"Timelion visualization"}),args:{expression:{types:["string"],aliases:["_"],default:'".es(*)"',help:""},interval:{types:["string"],default:"auto",help:""}},async fn(t,r,{getSearchSessionId:s,getExecutionContext:o}){const{getTimelionRequestHandler:a}=await n.e(0).then(n.bind(null,63)),u=a(e),c={expression:r.expression,interval:r.interval},l=await u({timeRange:Object(i.get)(t,"timeRange"),query:Object(i.get)(t,"query"),filters:Object(i.get)(t,"filters"),visParams:c,searchSessionId:s(),executionContext:o()});return l.visType=b,{type:"render",as:"timelion_vis",value:{visParams:c,visType:b,visData:l}}}}))(T))),a.registerRenderer((S=T,{name:"timelion_vis",displayName:"Timelion visualization",reuseDomNode:!0,render:(e,{visData:t,visParams:n},i)=>{i.onDestroy((()=>{Object(v.unmountComponentAtNode)(e)}));const[r]=t.sheet,s=!r||!r.list.length,o=S.uiSettings.get(y,!1)?O:x;Object(v.render)(Object(_.jsx)(f.VisualizationContainer,{handlers:i,showNoResult:s},Object(_.jsx)(h.KibanaThemeProvider,{theme$:S.theme.theme$},Object(_.jsx)(h.KibanaContextProvider,{services:{...S}},Object(_.jsx)(o,{interval:n.interval,seriesList:r,renderComplete:i.done,onBrushEvent:e=>{i.event({name:"applyFilter",data:{timeFieldName:"*",filters:[{query:{range:{"*":e}}}]}})}})))),e)}})),c.createBaseVisualization(function(e){return{name:b,title:"Timelion",icon:"visTimelion",description:r.i18n.translate("timelion.timelionDescription",{defaultMessage:"Show time series data on a graph."}),visConfig:{defaults:{expression:".es(*)",interval:"auto"}},editorConfig:{optionsTemplate:t=>Object(_.jsx)(m,o()({services:e},t)),defaultSize:u.DefaultEditorSize.MEDIUM},toExpressionAst:l,inspectorAdapters:{},getSupportedTriggers:()=>[f.VIS_EVENT_TO_TRIGGER.applyFilter],getUsedIndexPattern:async e=>{try{var t,n;const i=(null!==(t=null===(n=await Object(d.a)(e.expression))||void 0===n?void 0:n.args)&&void 0!==t?t:[]).find((({type:e,name:t,function:n})=>"namedArg"===e&&"es"===n&&"index"===t));if(null!=i&&i.value.text)return Object(p.c)().find(i.value.text)}catch{}return[]},options:{showIndexSelection:!1,showQueryBar:!1,showFilterBar:!1},requiresSearch:!0}}(T))}start(e,{data:t,charts:n}){return Object(p.f)(t.indexPatterns),Object(p.e)(t.search),Object(p.d)(n),{getArgValueSuggestions:g.a}}}function j(e){return new plugin_TimelionVisPlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t){e.exports=__kbnSharedDeps__.Jquery},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact}]);