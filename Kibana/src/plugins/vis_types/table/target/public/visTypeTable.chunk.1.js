(window.visTypeTable_bundle_jsonpfunction=window.visTypeTable_bundle_jsonpfunction||[]).push([[1],{21:function(e,t,o){"use strict";var n,a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},r=function(){var e={};return function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}e[t]=o}return e[t]}}(),i=[];function l(e){for(var t=-1,o=0;o<i.length;o++)if(i[o].identifier===e){t=o;break}return t}function s(e,t){for(var o={},n=[],a=0;a<e.length;a++){var r=e[a],s=t.base?r[0]+t.base:r[0],c=o[s]||0,u="".concat(s," ").concat(c);o[s]=c+1;var d=l(u),b={css:r[1],media:r[2],sourceMap:r[3]};-1!==d?(i[d].references++,i[d].updater(b)):i.push({identifier:u,updater:m(b,t),references:1}),n.push(u)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=o.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var i=r(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function b(e,t,o,n){var a=o?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,a);else{var r=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(r,i[t]):e.appendChild(r)}}function p(e,t,o){var n=o.css,a=o.media,r=o.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,v=0;function m(e,t){var o,n,a;if(t.singleton){var r=v++;o=f||(f=c(t)),n=b.bind(null,o,r,!1),a=b.bind(null,o,r,!0)}else o=c(t),n=p.bind(null,o,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(o)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var o=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<o.length;n++){var a=l(o[n]);i[a].references--}for(var r=s(e,t),c=0;c<o.length;c++){var u=l(o[c]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}o=r}}}},22:function(e,t,o){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=function(e,t){var o=e[1]||"",n=e[3];if(!n)return o;if(t&&"function"==typeof btoa){var a=(i=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(s," */")),r=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[o].concat(r).concat([a]).join("\n")}var i,l,s;return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(o,"}"):o})).join("")},t.i=function(e,o,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var r=0;r<this.length;r++){var i=this[r][0];null!=i&&(a[i]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);n&&a[s[0]]||(o&&(s[2]?s[2]="".concat(o," and ").concat(s[2]):s[2]=o),t.push(s))}},t}},23:function(e,t,o){switch(window.__kbnThemeTag__){case"v8dark":return o(24);case"v8light":return o(26)}},24:function(e,t,o){var n=o(21),a=o(25);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(a,r);e.exports=a.locals||{}},25:function(e,t,o){(t=o(22)(!1)).push([e.i,".tbvChart{display:flex;flex-direction:column;flex:1 0 0;overflow:auto;scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin}.tbvChart::-webkit-scrollbar{width:16px;height:16px}.tbvChart::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.tbvChart::-webkit-scrollbar-corner,.tbvChart::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.tbvChart .euiDataGrid--stickyFooter .euiDataGridFooter{display:flex}.tbvChart__split{padding:8px;margin-bottom:24px;display:flex;flex-direction:column;flex:1 0 0}.tbvChart__split>h3{text-align:center}.tbvChart__splitColumns{flex-direction:row;align-items:flex-start}.tbvChartCellContent{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),e.exports=t},26:function(e,t,o){var n=o(21),a=o(27);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(a,r);e.exports=a.locals||{}},27:function(e,t,o){(t=o(22)(!1)).push([e.i,".tbvChart{display:flex;flex-direction:column;flex:1 0 0;overflow:auto;scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin}.tbvChart::-webkit-scrollbar{width:16px;height:16px}.tbvChart::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.tbvChart::-webkit-scrollbar-corner,.tbvChart::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.tbvChart .euiDataGrid--stickyFooter .euiDataGridFooter{display:flex}.tbvChart__split{padding:8px;margin-bottom:24px;display:flex;flex-direction:column;flex:1 0 0}.tbvChart__split>h3{text-align:center}.tbvChart__splitColumns{flex-direction:row;align-items:flex-start}.tbvChartCellContent{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),e.exports=t},28:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return g}));o(23);var n=o(1),a=o.n(n),r=o(18),i=o.n(r),l=o(11),s=o(10),c=o(0),u=o(3),d=o(5);var b=o(12),p=o(17),f=o(8),v=o(19),m=o(6);const h=Object(n.memo)((({dataGridAriaLabel:e,filename:t,columns:o,rows:a})=>{const[r,i]=Object(n.useState)(!1),u=Object(n.useCallback)((()=>i((e=>!e))),[]),b=Object(n.useCallback)((()=>i(!1)),[]),{services:{uiSettings:h}}=Object(l.useKibana)(),C=f.exporters.tableHasFormulas(o,a),x=Object(n.useCallback)((e=>{const n=h.get(v.CSV_SEPARATOR_SETTING),r=h.get(v.CSV_QUOTE_VALUES_SETTING),i=f.exporters.datatableToCSV({type:"datatable",columns:o,rows:a},{csvSeparator:n,quoteValues:r,formatFactory:Object(m.a)().deserialize,raw:!e,escapeFormulaValues:!1});Object(v.downloadFileAs)(`${t||"unsaved"}.csv`,{content:i,type:f.exporters.CSV_MIME_TYPE})}),[o,a,t,h]),g=c.i18n.translate("visTypeTable.vis.controls.exportButtonAriaLabel",{defaultMessage:"Export {dataGridAriaLabel} as CSV",values:{dataGridAriaLabel:e}}),j=Object(d.jsx)(s.EuiButtonEmpty,{"aria-label":g,size:"xs",iconType:"exportAction",color:"text",className:"euiDataGrid__controlBtn",onClick:u},Object(d.jsx)(p.FormattedMessage,{id:"visTypeTable.vis.controls.exportButtonLabel",defaultMessage:"Export"})),w=C?Object(d.jsx)(s.EuiToolTip,{position:"top",content:c.i18n.translate("visTypeTable.vis.controls.exportButtonFormulasWarning",{defaultMessage:"Your CSV contains characters that spreadsheet applications might interpret as formulas."})},j):j,T=[Object(d.jsx)(s.EuiContextMenuItem,{key:"rawCsv",onClick:()=>x(!1)},Object(d.jsx)(p.FormattedMessage,{id:"visTypeTable.vis.controls.rawCSVButtonLabel",defaultMessage:"Raw"})),Object(d.jsx)(s.EuiContextMenuItem,{key:"csv",onClick:()=>x(!0)},Object(d.jsx)(p.FormattedMessage,{id:"visTypeTable.vis.controls.formattedCSVButtonLabel",defaultMessage:"Formatted"}))];return Object(d.jsx)(s.EuiPopover,{id:"dataTableExportData",button:w,isOpen:r,closePopover:b,panelPaddingSize:"none",repositionOnScroll:!0},Object(d.jsx)(s.EuiContextMenuPanel,{className:"eui-textNoWrap",items:T}))})),C=Object(n.memo)((({fireEvent:e,table:t,visConfig:o,title:r,uiStateProps:{columnsWidth:i,sort:l,setColumnsWidth:p,setSort:f}})=>{const{columns:v,rows:m,formattedColumns:C}=t,x=Object(n.useMemo)((()=>{var e;return null!==l.columnIndex&&l.direction?Object(u.orderBy)(m,null===(e=v[l.columnIndex])||void 0===e?void 0:e.id,l.direction):m}),[v,m,l]),g=Object(n.useMemo)((()=>((e,t,o)=>({rowIndex:n,columnId:a})=>{const r=e[n][a],i=t[a].formatter.convert(r,"html");return Object(d.jsx)("div",{dangerouslySetInnerHTML:{__html:i},"data-test-subj":"tbvChartCellContent",className:o?"":"tbvChartCellContent"})})(x,C,o.autoFitRowToContent)),[C,x,o.autoFitRowToContent]),j=Object(n.useMemo)((()=>o.autoFitRowToContent?{defaultHeight:"auto"}:void 0),[o.autoFitRowToContent]),w=((e,t,o,n,a)=>{const r=(o,n)=>{a({name:"filterBucket",data:{data:[{table:{columns:e,rows:t},...o,column:o.column}],negate:n}})};return e.map(((e,a)=>{const i=o[e.id],l=i.filterable?[({rowIndex:e,columnId:o,Component:n,closePopover:l})=>{const s=t[e][o],u=null!=s,b=i.formatter.convert(s),p=c.i18n.translate("visTypeTable.tableCellFilter.filterForValueText",{defaultMessage:"Filter for value"}),f=c.i18n.translate("visTypeTable.tableCellFilter.filterForValueAriaLabel",{defaultMessage:"Filter for value: {cellContent}",values:{cellContent:b}});return u&&Object(d.jsx)(n,{"aria-label":f,"data-test-subj":"tbvChartCell__filterForCellValue",onClick:()=>{r({row:e,column:a,value:s},!1),l()},iconType:"plusInCircle"},p)},({rowIndex:e,columnId:o,Component:n,closePopover:l})=>{const s=t[e][o],u=null!=s,b=i.formatter.convert(s),p=c.i18n.translate("visTypeTable.tableCellFilter.filterOutValueText",{defaultMessage:"Filter out value"}),f=c.i18n.translate("visTypeTable.tableCellFilter.filterOutValueAriaLabel",{defaultMessage:"Filter out value: {cellContent}",values:{cellContent:b}});return u&&Object(d.jsx)(n,{"aria-label":f,onClick:()=>{r({row:e,column:a,value:s},!0),l()},iconType:"minusInCircle"},p)}]:void 0,s=n.find((e=>e.colIndex===a)),u={id:e.id,display:e.name,displayAsText:e.name,actions:{showHide:!1,showMoveLeft:!1,showMoveRight:!1,showSortAsc:{label:c.i18n.translate("visTypeTable.sort.ascLabel",{defaultMessage:"Sort asc"})},showSortDesc:{label:c.i18n.translate("visTypeTable.sort.descLabel",{defaultMessage:"Sort desc"})}},cellActions:l};return s&&(u.initialWidth=s.width),u}))})(v,x,C,i,e),T=Object(b.b)(o,m.length),y=Object(n.useMemo)((()=>{var e;return null!==l.columnIndex&&l.direction?[{id:null===(e=v[l.columnIndex])||void 0===e?void 0:e.id,direction:l.direction}]:[]}),[v,l]),O=Object(n.useCallback)((e=>{const t=e.length<=1?e[0]:e[1];f(t&&{columnIndex:v.findIndex((e=>e.id===t.id)),direction:t.direction})}),[v,f]),S=r||o.title||c.i18n.translate("visTypeTable.defaultAriaLabel",{defaultMessage:"Data table visualization"}),_=Object(n.useCallback)((({columnId:e,width:t})=>{const o=v.findIndex((t=>t.id===e));p({colIndex:o,width:t})}),[v,p]);return Object(d.jsx)(a.a.Fragment,null,r&&Object(d.jsx)(s.EuiTitle,{size:"xs"},Object(d.jsx)("h3",null,r)),Object(d.jsx)(s.EuiDataGrid,{"aria-label":S,columns:w,gridStyle:{border:"horizontal",header:"underline"},rowHeightsOptions:j,rowCount:m.length,columnVisibility:{visibleColumns:v.map((({id:e})=>e)),setVisibleColumns:()=>{}},toolbarVisibility:o.showToolbar&&{showColumnSelector:!1,showFullScreenSelector:!1,showSortSelector:!1,showDisplaySelector:!1,additionalControls:Object(d.jsx)(h,{dataGridAriaLabel:S,columns:v,rows:x,filename:o.title})},renderCellValue:g,renderFooterCellValue:o.showTotal?({columnId:e})=>C[e].formattedTotal||null:void 0,pagination:T,sorting:{columns:y,onSort:O},onColumnResize:_,minSizeForControls:1}))})),x=Object(n.memo)((({fireEvent:e,tables:t,visConfig:o,uiStateProps:n})=>Object(d.jsx)(a.a.Fragment,null,t.map((({table:t,title:a})=>Object(d.jsx)("div",{key:a,className:"tbvChart__split"},Object(d.jsx)(C,{fireEvent:e,table:t,visConfig:o,title:a,uiStateProps:n}))))))),g=({core:e,handlers:t,visData:{direction:o,table:a,tables:r},visConfig:s})=>{Object(n.useEffect)((()=>{t.done()}),[t]);const c=Object(b.c)(t.uiState),u=i()("tbvChart",{tbvChart__splitColumns:"column"===o});return Object(d.jsx)(e.i18n.Context,null,Object(d.jsx)(l.KibanaContextProvider,{services:e},Object(d.jsx)("div",{className:u,"data-test-subj":"tbvChart"},a?Object(d.jsx)(C,{fireEvent:t.event,table:a,visConfig:s,uiStateProps:c}):Object(d.jsx)(x,{fireEvent:t.event,tables:r,visConfig:s,uiStateProps:c}))))}}}]);