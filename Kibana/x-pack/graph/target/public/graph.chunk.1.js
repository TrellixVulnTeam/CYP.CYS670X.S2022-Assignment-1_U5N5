/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.graph_bundle_jsonpfunction=window.graph_bundle_jsonpfunction||[]).push([[1],Array(28).concat([function(e,t,n){e.exports=n(7)(1115)},function(e,t,n){"use strict";var r=n(28);t.__esModule=!0;var a=r(n(71));t.Provider=a.default;var i=r(n(46));t.connectAdvanced=i.default;var o=n(32);t.ReactReduxContext=o.ReactReduxContext;var s=r(n(75));t.connect=s.default;var u=n(83);t.useDispatch=u.useDispatch,t.createDispatchHook=u.createDispatchHook;var l=n(84);t.useSelector=l.useSelector,t.createSelectorHook=l.createSelectorHook;var c=n(52);t.useStore=c.useStore,t.createStoreHook=c.createStoreHook;var f=n(45),h=n(85);t.batch=h.unstable_batchedUpdates;var p=r(n(48));t.shallowEqual=p.default,(0,f.setBatch)(h.unstable_batchedUpdates)},function(e,t,n){e.exports=n(7)(3)},function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=function(e){return e instanceof Error});var n=e?e+"/":"";function r(e,r,a){void 0===a&&(a=t);var i=n+e;return Object.assign((function(e,t){var n={type:i,payload:e};return(r||t)&&(n.meta=Object.assign({},r,t)),a&&("boolean"==typeof a||a(e))&&(n.error=!0),n}),{type:i,toString:function(){return i},match:function(e){return e.type===i}})}return Object.assign(r,{async:function(e,t){return{type:n+e,started:r(e+"_STARTED",t,!1),done:r(e+"_DONE",t,!1),failed:r(e+"_FAILED",t,!0)}}})}Object.defineProperty(t,"__esModule",{value:!0}),t.isType=function(e,t){return e.type===t.type},t.actionCreatorFactory=r,t.default=r},function(e,t,n){"use strict";var r=n(28);t.__esModule=!0,t.default=t.ReactReduxContext=void 0;var a=r(n(11)).default.createContext(null);t.ReactReduxContext=a;var i=a;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(86);Object.keys(r).forEach((function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}))},function(e,t,n){"use strict";var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],a=0;a<e.length;a++){var i=e[a],u=t.base?i[0]+t.base:i[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var f=s(c),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(o[f].references++,o[f].updater(h)):o.push({identifier:c,updater:v(h,t),references:1}),r.push(c)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,f=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,g=0;function v(e,t){var n,r,a;if(t.singleton){var i=g++;n=d||(d=l(t)),r=h.bind(null,n,i,!1),a=h.bind(null,n,i,!0)}else n=l(t),r=p.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=s(n[r]);o[a].references--}for(var i=u(e,t),l=0;l<n.length;l++){var c=s(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=i}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var a=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),i=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(i).concat([a]).join("\n")}var o,s,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&a[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function a(e){var t={},n=i(e,t);return n.caseWithAction=function(e,r){return t[e.type]=r,n},n.case=function(e,t){return n.caseWithAction(e,(function(e,n){return t(e,n.payload)}))},n.casesWithAction=function(e,t){for(var r=0,a=e;r<a.length;r++){var i=a[r];n.caseWithAction(i,t)}return n},n.cases=function(e,t){return n.casesWithAction(e,(function(e,n){return t(e,n.payload)}))},n.withHandling=function(e){return e(n)},n.default=function(n){return i(e,r({},t),n)},n.build=function(){return i(e,r({},t))},n}function i(e,t,n){return function(r,a){var i=void 0!==r?r:e,o=t[a.type]||n;return o?o(i,a):i}}Object.defineProperty(t,"__esModule",{value:!0}),t.reducerWithInitialState=function(e){return a(e)},t.reducerWithoutInitialState=function(){return a()},t.upcastingReducer=function(){return a()}},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(77));function i(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var o="function"==typeof Symbol&&Symbol.observable||"@@observable",s=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+s(),REPLACE:"@@redux/REPLACE"+s(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+s()}};function l(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t){return function(){return t(e.apply(this,arguments))}}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}t.__DO_NOT_USE__ActionTypes=u,t.applyMiddleware=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(i(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=t.map((function(e){return e(o)}));return r=f.apply(void 0,s)(n.dispatch),a.default(a.default({},n),{},{dispatch:r})}}},t.bindActionCreators=function(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error(i(16));var n={};for(var r in e){var a=e[r];"function"==typeof a&&(n[r]=c(a,t))}return n},t.combineReducers=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];0,"function"==typeof e[a]&&(n[a]=e[a])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:u.INIT}))throw new Error(i(12));if(void 0===n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(i(13))}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},u=0;u<s.length;u++){var l=s[u],c=n[l],f=e[l],h=c(f,t);if(void 0===h){t&&t.type;throw new Error(i(14))}a[l]=h,r=r||h!==f}return(r=r||s.length!==Object.keys(e).length)?a:e}},t.compose=f,t.createStore=function e(t,n,r){var a;if("function"==typeof n&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(i(0));if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw new Error(i(1));return r(e)(t,n)}if("function"!=typeof t)throw new Error(i(2));var s=t,c=n,f=[],h=f,p=!1;function d(){h===f&&(h=f.slice())}function g(){if(p)throw new Error(i(3));return c}function v(e){if("function"!=typeof e)throw new Error(i(4));if(p)throw new Error(i(5));var t=!0;return d(),h.push(e),function(){if(t){if(p)throw new Error(i(6));t=!1,d();var n=h.indexOf(e);h.splice(n,1),f=null}}}function m(e){if(!l(e))throw new Error(i(7));if(void 0===e.type)throw new Error(i(8));if(p)throw new Error(i(9));try{p=!0,c=s(c,e)}finally{p=!1}for(var t=f=h,n=0;n<t.length;n++){(0,t[n])()}return e}function b(e){if("function"!=typeof e)throw new Error(i(10));s=e,m({type:u.REPLACE})}function y(){var e,t=v;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(i(11));function n(){e.next&&e.next(g())}return n(),{unsubscribe:t(n)}}})[o]=function(){return this},e}return m({type:u.INIT}),(a={dispatch:m,subscribe:v,getState:g,replaceReducer:b})[o]=y,a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return"@@redux-saga/"+e},a=r("CANCEL_PROMISE"),i=r("CHANNEL_END"),o=r("IO"),s=r("MATCH"),u=r("MULTICAST"),l=r("SAGA_ACTION"),c=r("SELF_CANCELLATION"),f=r("TASK"),h=r("TASK_CANCEL"),p=r("TERMINATE"),d=r("LOCATION");t.CANCEL=a,t.CHANNEL_END_TYPE=i,t.IO=o,t.MATCH=s,t.MULTICAST=u,t.SAGA_ACTION=l,t.SAGA_LOCATION=d,t.SELF_CANCELLATION=c,t.TASK=f,t.TASK_CANCEL=h,t.TERMINATE=p},function(e,t,n){e.exports=n(7)(1116)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(45),a={notify:function(){}};var i=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=a,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t,n;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(e=(0,r.getBatch)(),t=null,n=null,{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,a=n={callback:e,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){r&&null!==t&&(r=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=a)},e}();t.default=i},function(e,t,n){"use strict";function r(e,t){return e===t}function a(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,i=null;return function(){return a(t,n,arguments)||(i=e.apply(null,arguments)),n=arguments,i}}function o(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];var i=0,s=r.pop(),u=o(r),l=e.apply(void 0,[function(){return i++,s.apply(null,arguments)}].concat(n)),c=e((function(){for(var e=[],t=u.length,n=0;n<t;n++)e.push(u[n].apply(null,arguments));return l.apply(null,e)}));return c.resultFunc=s,c.dependencies=u,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}t.__esModule=!0,t.defaultMemoize=i,t.createSelectorCreator=s,t.createStructuredSelector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}))};var u=t.createSelector=s(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(38),a=function(e){return"function"==typeof e},i=function(e){return"string"==typeof e},o=Array.isArray,s=function(e){return e&&a(e.take)&&a(e.close)},u=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};t.array=o,t.buffer=function(e){return e&&a(e.isEmpty)&&a(e.take)&&a(e.put)},t.channel=s,t.effect=function(e){return e&&e[r.IO]},t.func=a,t.iterable=function(e){return e&&a(Symbol)?a(e[Symbol.iterator]):o(e)},t.iterator=function(e){return e&&a(e.next)&&a(e.throw)},t.multicast=function(e){return s(e)&&e[r.MULTICAST]},t.notUndef=function(e){return null!=e},t.number=function(e){return"number"==typeof e},t.object=function(e){return e&&!o(e)&&"object"==typeof e},t.observable=function(e){return e&&a(e.subscribe)},t.pattern=function e(t){return t&&(i(t)||u(t)||a(t)||o(t)&&t.every(e))},t.promise=function(e){return e&&a(e.then)},t.sagaAction=function(e){return Boolean(e&&e[r.SAGA_ACTION])},t.string=i,t.stringableFunc=function(e){return a(e)&&e.hasOwnProperty("toString")},t.symbol=u,t.task=function(e){return e&&e[r.TASK]},t.undef=function(e){return null==e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(38);t.default=function(e,t){var n;void 0===t&&(t=!0);var a=new Promise((function(r){n=setTimeout(r,e,t)}));return a[r.CANCEL]=function(){clearTimeout(n)},a}},function(e,t,n){e.exports=n(7)(2454)},function(e,t,n){"use strict";t.__esModule=!0,t.getBatch=t.setBatch=void 0;var r=function(e){e()};t.setBatch=function(e){return r=e};t.getBatch=function(){return r}},function(e,t,n){"use strict";var r=n(44),a=n(28);t.__esModule=!0,t.default=function(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,a=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,f=n.methodName,x=void 0===f?"connectAdvanced":f,k=n.renderCountProp,_=void 0===k?void 0:k,w=n.shouldHandleStateChanges,j=void 0===w||w,M=n.storeKey,S=void 0===M?"store":M,O=(n.withRef,n.forwardRef),E=void 0!==O&&O,N=n.context,C=void 0===N?h.ReactReduxContext:N,T=(0,o.default)(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);0;var A=C;return function(t){var n=t.displayName||t.name||"Component",r=a(n),f=(0,i.default)({},T,{getDisplayName:a,methodName:x,renderCountProp:_,shouldHandleStateChanges:j,storeKey:S,displayName:r,wrappedComponentName:n,WrappedComponent:t}),h=T.pure;var k=h?u.useMemo:function(e){return e()};function w(n){var r=(0,u.useMemo)((function(){var e=n.forwardedRef,t=(0,o.default)(n,["forwardedRef"]);return[n.context,e,t]}),[n]),a=r[0],s=r[1],h=r[2],x=(0,u.useMemo)((function(){return a&&a.Consumer&&(0,l.isContextConsumer)(u.default.createElement(a.Consumer,null))?a:A}),[a,A]),_=(0,u.useContext)(x),w=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(_)&&Boolean(_.store);var M=w?n.store:_.store,S=(0,u.useMemo)((function(){return function(t){return e(t.dispatch,f)}(M)}),[M]),O=(0,u.useMemo)((function(){if(!j)return d;var e=new c.default(M,w?null:_.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[M,w,_]),E=O[0],N=O[1],C=(0,u.useMemo)((function(){return w?_:(0,i.default)({},_,{subscription:E})}),[w,_,E]),T=(0,u.useReducer)(g,p,y),L=T[0][0],P=T[1];if(L&&L.error)throw L.error;var I=(0,u.useRef)(),F=(0,u.useRef)(h),D=(0,u.useRef)(),R=(0,u.useRef)(!1),B=k((function(){return D.current&&h===F.current?D.current:S(M.getState(),h)}),[M,L,h]);v(m,[F,I,R,h,B,D,N]),v(b,[j,M,E,S,F,I,R,D,N,P],[M,E,S]);var q=(0,u.useMemo)((function(){return u.default.createElement(t,(0,i.default)({},B,{ref:s}))}),[s,t,B]);return(0,u.useMemo)((function(){return j?u.default.createElement(x.Provider,{value:C},q):q}),[x,q,C])}var M=h?u.default.memo(w):w;if(M.WrappedComponent=t,M.displayName=r,E){var O=u.default.forwardRef((function(e,t){return u.default.createElement(M,(0,i.default)({},e,{forwardedRef:t}))}));return O.displayName=r,O.WrappedComponent=t,(0,s.default)(O,t)}return(0,s.default)(M,t)}};var i=a(n(30)),o=a(n(39)),s=a(n(73)),u=r(n(11)),l=n(74),c=a(n(40)),f=n(47),h=n(32),p=[],d=[null,null];function g(e,t){var n=e[1];return[t.payload,n+1]}function v(e,t,n){(0,f.useIsomorphicLayoutEffect)((function(){return e.apply(void 0,t)}),n)}function m(e,t,n,r,a,i,o){e.current=r,t.current=a,n.current=!1,i.current&&(i.current=null,o())}function b(e,t,n,r,a,i,o,s,u,l){if(e){var c=!1,f=null,h=function(){if(!c){var e,n,h=t.getState();try{e=r(h,a.current)}catch(e){n=e,f=e}n||(f=null),e===i.current?o.current||u():(i.current=e,s.current=e,o.current=!0,l({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(c=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var y=function(){return[null,0]}},function(e,t,n){"use strict";t.__esModule=!0,t.useIsomorphicLayoutEffect=void 0;var r=n(11),a="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;t.useIsomorphicLayoutEffect=a},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.__esModule=!0,t.default=function(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!r(e[n[i]],t[n[i]]))return!1;return!0}},function(e,t,n){"use strict";var r=n(28);t.__esModule=!0,t.wrapMapToPropsConstant=function(e){return function(t,n){var r=e(t,n);function a(){return r}return a.dependsOnOwnProps=!1,a}},t.getDependsOnOwnProps=a,t.wrapMapToPropsFunc=function(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=a(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=a(i),i=r(t,n)),i},r}};r(n(50));function a(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}},function(e,t,n){"use strict";var r=n(28);t.__esModule=!0,t.default=function(e,t,n){(0,a.default)(e)||(0,i.default)(n+"() in "+t+" must return a plain object. Instead received "+e+".")};var a=r(n(78)),i=r(n(51))},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},function(e,t,n){"use strict";t.__esModule=!0,t.createStoreHook=o,t.useStore=void 0;var r=n(11),a=n(32),i=n(53);function o(e){void 0===e&&(e=a.ReactReduxContext);var t=e===a.ReactReduxContext?i.useReduxContext:function(){return(0,r.useContext)(e)};return function(){return t().store}}var s=o();t.useStore=s},function(e,t,n){"use strict";t.__esModule=!0,t.useReduxContext=function(){0;return(0,r.useContext)(a.ReactReduxContext)};var r=n(11),a=n(32)},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=n(38),i=r(n(30)),o=n(42),s=r(n(43)),u=function(e){return function(){return e}}(!0);t.noop=function(){};var l=function(e){return e};var c=function(e){throw e},f=function(e){return{value:e,done:!0}};var h=function(e){return Array.apply(null,new Array(e))},p=function(e){return e===a.TERMINATE},d=function(e){return e===a.TASK_CANCEL},g=function(e){return p(e)||d(e)};function v(e){return e[a.SAGA_LOCATION]}var m={isEmpty:u,put:t.noop,take:t.noop};function b(e,t){void 0===e&&(e=10);var n=new Array(e),r=0,a=0,i=0,o=function(t){n[a]=t,a=(a+1)%e,r++},s=function(){if(0!=r){var t=n[i];return n[i]=null,r--,i=(i+1)%e,t}},u=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var l;if(r<e)o(s);else switch(t){case 1:throw new Error("Channel's Buffer overflow!");case 3:n[a]=s,i=a=(a+1)%e;break;case 4:l=2*e,n=u(),r=n.length,a=n.length,i=0,n.length=l,e=l,o(s)}},take:s,flush:u}}var y=function(){return m},x=function(e){return b(e,3)},k=function(e){return b(e,4)},_=Object.freeze({__proto__:null,none:y,fixed:function(e){return b(e,1)},dropping:function(e){return b(e,2)},sliding:x,expanding:k}),w="TAKE",j="PUT",M="ALL",S="RACE",O="CALL",E="CPS",N="FORK",C="JOIN",T="CANCEL",A="SELECT",L="ACTION_CHANNEL",P="CANCELLED",I="FLUSH",F="GET_CONTEXT",D="SET_CONTEXT",R=Object.freeze({__proto__:null,TAKE:w,PUT:j,ALL:M,RACE:S,CALL:O,CPS:E,FORK:N,JOIN:C,CANCEL:T,SELECT:A,ACTION_CHANNEL:L,CANCELLED:P,FLUSH:I,GET_CONTEXT:F,SET_CONTEXT:D}),B=function(e,t){var n;return(n={})[a.IO]=!0,n.combinator=!1,n.type=e,n.payload=t,n},q=function(e){return B(N,i({},e.payload,{detached:!0}))};function z(e,t){return void 0===e&&(e="*"),o.pattern(e)?B(w,{pattern:e}):o.multicast(e)&&o.notUndef(t)&&o.pattern(t)?B(w,{channel:e,pattern:t}):o.channel(e)?B(w,{channel:e}):void 0}function U(e,t){return o.undef(t)&&(t=e,e=void 0),B(j,{channel:e,action:t})}function H(e,t){var n,r=null;return o.func(e)?n=e:(o.array(e)?(r=e[0],n=e[1]):(r=e.context,n=e.fn),r&&o.string(n)&&o.func(r[n])&&(n=r[n])),{context:r,fn:n,args:t}}function W(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return B(O,H(e,n))}function G(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return B(N,H(e,n))}var V=W.bind(null,s);t.ACTION_CHANNEL=L,t.ALL=M,t.CALL=O,t.CANCEL=T,t.CANCELLED=P,t.CPS=E,t.FLUSH=I,t.FORK=N,t.GET_CONTEXT=F,t.JOIN=C,t.PUT=j,t.RACE=S,t.SELECT=A,t.SET_CONTEXT=D,t.TAKE=w,t.actionChannel=function(e,t){return B(L,{pattern:e,buffer:t})},t.all=function(e){var t=B(M,e);return t.combinator=!0,t},t.apply=function(e,t,n){return void 0===n&&(n=[]),B(O,H([e,t],n))},t.assignWithSymbols=function(e,t){i(e,t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach((function(n){e[n]=t[n]}))},t.buffers=_,t.call=W,t.cancel=function(e){return void 0===e&&(e=a.SELF_CANCELLATION),B(T,e)},t.cancelled=function(){return B(P,{})},t.cps=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return B(E,H(e,n))},t.createAllStyleChildCallbacks=function(e,n){var r,a=Object.keys(e),i=a.length,s=0,u=o.array(e)?h(i):{},l={};return a.forEach((function(e){var a=function(t,a){r||(a||g(t)?(n.cancel(),n(t,a)):(u[e]=t,++s===i&&(r=!0,n(u))))};a.cancel=t.noop,l[e]=a})),n.cancel=function(){r||(r=!0,a.forEach((function(e){return l[e].cancel()})))},l},t.createEmptyArray=h,t.delay=V,t.detach=q,t.effectTypes=R,t.expanding=k,t.flatMap=function(e,t){var n;return(n=[]).concat.apply(n,t.map(e))},t.flush=function(e){return B(I,e)},t.fork=G,t.getContext=function(e){return B(F,e)},t.getLocation=v,t.getMetaInfo=function(e){return{name:e.name||"anonymous",location:v(e)}},t.identity=l,t.join=function(e){return B(C,e)},t.kTrue=u,t.logError=function(e,t){var n=t.sagaStack;console.error(e),console.error(n)},t.makeIterator=function(e,t,n){void 0===t&&(t=c),void 0===n&&(n="iterator");var r={meta:{name:n},next:e,throw:t,return:f,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r},t.none=y,t.once=function(e){var t=!1;return function(){t||(t=!0,e())}},t.put=U,t.putResolve=function(){var e=U.apply(void 0,arguments);return e.payload.resolve=!0,e},t.race=function(e){var t=B(S,e);return t.combinator=!0,t},t.remove=function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},t.select=function(e){void 0===e&&(e=l);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return B(A,{selector:e,args:n})},t.setContext=function(e){return B(D,e)},t.shouldCancel=d,t.shouldComplete=g,t.shouldTerminate=p,t.sliding=x,t.spawn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return q(G.apply(void 0,[e].concat(n)))},t.take=z,t.takeMaybe=function(){var e=z.apply(void 0,arguments);return e.payload.maybe=!0,e},t.wrapSagaDispatch=function(e){return function(t){return e(Object.defineProperty(t,a.SAGA_ACTION,{value:!0}))}}},function(e,t,n){var r,a;!function(){var i={version:"3.5.17"},o=[].slice,s=function(e){return o.call(e)},u=this.document;function l(e){return e&&(e.ownerDocument||e.document||e).documentElement}function c(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(u)try{s(u.documentElement.childNodes)[0].nodeType}catch(e){s=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var f=this.Element.prototype,h=f.setAttribute,p=f.setAttributeNS,d=this.CSSStyleDeclaration.prototype,g=d.setProperty;f.setAttribute=function(e,t){h.call(this,e,t+"")},f.setAttributeNS=function(e,t,n){p.call(this,e,t,n+"")},d.setProperty=function(e,t,n){g.call(this,e,t+"",n)}}function v(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function m(e){return null===e?NaN:+e}function b(e){return!isNaN(e)}function y(e){return{left:function(t,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)<0?r=i+1:a=i}return r},right:function(t,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)>0?a=i:r=i+1}return r}}}i.ascending=v,i.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},i.min=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r>=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&n>r&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&n>r&&(n=r)}return n},i.max=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r>=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&r>n&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&r>n&&(n=r)}return n},i.extent=function(e,t){var n,r,a,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=a=r;break}for(;++i<o;)null!=(r=e[i])&&(n>r&&(n=r),a<r&&(a=r))}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=a=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&(n>r&&(n=r),a<r&&(a=r))}return[n,a]},i.sum=function(e,t){var n,r=0,a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)b(n=+e[i])&&(r+=n);else for(;++i<a;)b(n=+t.call(e,e[i],i))&&(r+=n);return r},i.mean=function(e,t){var n,r=0,a=e.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)b(n=m(e[i]))?r+=n:--o;else for(;++i<a;)b(n=m(t.call(e,e[i],i)))?r+=n:--o;if(o)return r/o},i.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),a=+e[r-1],i=n-r;return i?a+i*(e[r]-a):a},i.median=function(e,t){var n,r=[],a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)b(n=m(e[o]))&&r.push(n);else for(;++o<a;)b(n=m(t.call(e,e[o],o)))&&r.push(n);if(r.length)return i.quantile(r.sort(v),.5)},i.variance=function(e,t){var n,r,a=e.length,i=0,o=0,s=-1,u=0;if(1===arguments.length)for(;++s<a;)b(n=m(e[s]))&&(o+=(r=n-i)*(n-(i+=r/++u)));else for(;++s<a;)b(n=m(t.call(e,e[s],s)))&&(o+=(r=n-i)*(n-(i+=r/++u)));if(u>1)return o/(u-1)},i.deviation=function(){var e=i.variance.apply(this,arguments);return e?Math.sqrt(e):e};var x=y(v);function k(e){return e.length}i.bisectLeft=x.left,i.bisect=i.bisectRight=x.right,i.bisector=function(e){return y(1===e.length?function(t,n){return v(e(t),n)}:e)},i.shuffle=function(e,t,n){(i=arguments.length)<3&&(n=e.length,i<2&&(t=0));for(var r,a,i=n-t;i;)a=Math.random()*i--|0,r=e[i+t],e[i+t]=e[a+t],e[a+t]=r;return e},i.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},i.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],a=new Array(n<0?0:n);t<n;)a[t]=[r,r=e[++t]];return a},i.transpose=function(e){if(!(a=e.length))return[];for(var t=-1,n=i.min(e,k),r=new Array(n);++t<n;)for(var a,o=-1,s=r[t]=new Array(a);++o<a;)s[o]=e[o][t];return r},i.zip=function(){return i.transpose(arguments)},i.keys=function(e){var t=[];for(var n in e)t.push(n);return t},i.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},i.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},i.merge=function(e){for(var t,n,r,a=e.length,i=-1,o=0;++i<a;)o+=e[i].length;for(n=new Array(o);--a>=0;)for(t=(r=e[a]).length;--t>=0;)n[--o]=r[t];return n};var _=Math.abs;function w(e){for(var t=1;e*t%1;)t*=10;return t}function j(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function M(){this._=Object.create(null)}i.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,a=[],i=w(_(n)),o=-1;if(e*=i,t*=i,(n*=i)<0)for(;(r=e+n*++o)>t;)a.push(r/i);else for(;(r=e+n*++o)<t;)a.push(r/i);return a},i.map=function(e,t){var n=new M;if(e instanceof M)e.forEach((function(e,t){n.set(e,t)}));else if(Array.isArray(e)){var r,a=-1,i=e.length;if(1===arguments.length)for(;++a<i;)n.set(a,e[a]);else for(;++a<i;)n.set(t.call(e,r=e[a],a),r)}else for(var o in e)n.set(o,e[o]);return n};function S(e){return"__proto__"==(e+="")||"\0"===e[0]?"\0"+e:e}function O(e){return"\0"===(e+="")[0]?e.slice(1):e}function E(e){return S(e)in this._}function N(e){return(e=S(e))in this._&&delete this._[e]}function C(){var e=[];for(var t in this._)e.push(O(t));return e}function T(){var e=0;for(var t in this._)++e;return e}function A(){for(var e in this._)return!1;return!0}function L(){this._=Object.create(null)}function P(e){return e}function I(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function F(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=D.length;n<r;++n){var a=D[n]+t;if(a in e)return a}}j(M,{has:E,get:function(e){return this._[S(e)]},set:function(e,t){return this._[S(e)]=t},remove:N,keys:C,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:O(t),value:this._[t]});return e},size:T,empty:A,forEach:function(e){for(var t in this._)e.call(this,O(t),this._[t])}}),i.nest=function(){var e,t,n={},r=[],a=[];function o(a,i,s){if(s>=r.length)return t?t.call(n,i):e?i.sort(e):i;for(var u,l,c,f,h=-1,p=i.length,d=r[s++],g=new M;++h<p;)(f=g.get(u=d(l=i[h])))?f.push(l):g.set(u,[l]);return a?(l=a(),c=function(e,t){l.set(e,o(a,t,s))}):(l={},c=function(e,t){l[e]=o(a,t,s)}),g.forEach(c),l}function s(e,t){if(t>=r.length)return e;var n=[],i=a[t++];return e.forEach((function(e,r){n.push({key:e,values:s(r,t)})})),i?n.sort((function(e,t){return i(e.key,t.key)})):n}return n.map=function(e,t){return o(t,e,0)},n.entries=function(e){return s(o(i.map,e,0),0)},n.key=function(e){return r.push(e),n},n.sortKeys=function(e){return a[r.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return t=e,n},n},i.set=function(e){var t=new L;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},j(L,{has:E,add:function(e){return this._[S(e+="")]=!0,e},remove:N,values:C,size:T,empty:A,forEach:function(e){for(var t in this._)e.call(this,O(t))}}),i.behavior={},i.rebind=function(e,t){for(var n,r=1,a=arguments.length;++r<a;)e[n=arguments[r]]=I(e,t,t[n]);return e};var D=["webkit","ms","moz","Moz","o","O"];function R(){}function B(){}function q(e){var t=[],n=new M;function r(){for(var n,r=t,a=-1,i=r.length;++a<i;)(n=r[a].on)&&n.apply(this,arguments);return e}return r.on=function(r,a){var i,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,i=t.indexOf(o)).concat(t.slice(i+1)),n.remove(r)),a&&t.push(n.set(r,{on:a})),e)},r}function z(){i.event.preventDefault()}function U(){for(var e,t=i.event;e=t.sourceEvent;)t=e;return t}function H(e){for(var t=new B,n=0,r=arguments.length;++n<r;)t[arguments[n]]=q(t);return t.of=function(n,r){return function(a){try{var o=a.sourceEvent=i.event;a.target=e,i.event=a,t[a.type].apply(n,r)}finally{i.event=o}}},t}i.dispatch=function(){for(var e=new B,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=q(e);return e},B.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},i.event=null,i.requote=function(e){return e.replace(W,"\\$&")};var W=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function V(e){return G(e,J),e}var K=function(e,t){return t.querySelector(e)},$=function(e,t){return t.querySelectorAll(e)},Y=function(e,t){var n=e.matches||e[F(e,"matchesSelector")];return(Y=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(K=function(e,t){return Sizzle(e,t)[0]||null},$=Sizzle,Y=Sizzle.matchesSelector),i.selection=function(){return i.select(u.documentElement)};var J=i.selection.prototype=[];function X(e){return"function"==typeof e?e:function(){return K(e,this)}}function Q(e){return"function"==typeof e?e:function(){return $(e,this)}}J.select=function(e){var t,n,r,a,i=[];e=X(e);for(var o=-1,s=this.length;++o<s;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var u=-1,l=r.length;++u<l;)(a=r[u])?(t.push(n=e.call(a,a.__data__,u,o)),n&&"__data__"in a&&(n.__data__=a.__data__)):t.push(null)}return V(i)},J.selectAll=function(e){var t,n,r=[];e=Q(e);for(var a=-1,i=this.length;++a<i;)for(var o=this[a],u=-1,l=o.length;++u<l;)(n=o[u])&&(r.push(t=s(e.call(n,n.__data__,u,a))),t.parentNode=n);return V(r)};var Z="http://www.w3.org/1999/xhtml",ee={svg:"http://www.w3.org/2000/svg",xhtml:Z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function te(e,t){return e=i.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function ne(e){return e.trim().replace(/\s+/g," ")}function re(e){return new RegExp("(?:^|\\s+)"+i.requote(e)+"(?:\\s+|$)","g")}function ae(e){return(e+"").trim().split(/^|\s+/)}function ie(e,t){var n=(e=ae(e).map(oe)).length;return"function"==typeof t?function(){for(var r=-1,a=t.apply(this,arguments);++r<n;)e[r](this,a)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function oe(e){var t=re(e);return function(n,r){if(a=n.classList)return r?a.add(e):a.remove(e);var a=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(a)||n.setAttribute("class",ne(a+" "+e))):n.setAttribute("class",ne(a.replace(t," ")))}}function se(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function ue(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function le(e){return"function"==typeof e?e:(e=i.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Z&&t.documentElement.namespaceURI===Z?t.createElement(e):t.createElementNS(n,e)}}function ce(){var e=this.parentNode;e&&e.removeChild(this)}function fe(e){return{__data__:e}}function he(e){return function(){return Y(this,e)}}function pe(e){return arguments.length||(e=v),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function de(e,t){for(var n=0,r=e.length;n<r;n++)for(var a,i=e[n],o=0,s=i.length;o<s;o++)(a=i[o])&&t(a,o,n);return e}function ge(e){return G(e,ve),e}i.ns={prefix:ee,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),ee.hasOwnProperty(n)?{space:ee[n],local:e}:e}},J.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=i.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(te(t,e[t]));return this}return this.each(te(e,t))},J.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=ae(e)).length,a=-1;if(t=n.classList){for(;++a<r;)if(!t.contains(e[a]))return!1}else for(t=n.getAttribute("class");++a<r;)if(!re(e[a]).test(t))return!1;return!0}for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))},J.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(se(n,e[n],t));return this}if(r<2){var a=this.node();return c(a).getComputedStyle(a,null).getPropertyValue(e)}n=""}return this.each(se(e,t,n))},J.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(ue(t,e[t]));return this}return this.each(ue(e,t))},J.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},J.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},J.append=function(e){return e=le(e),this.select((function(){return this.appendChild(e.apply(this,arguments))}))},J.insert=function(e,t){return e=le(e),t=X(t),this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))},J.remove=function(){return this.each(ce)},J.data=function(e,t){var n,r,a=-1,i=this.length;if(!arguments.length){for(e=new Array(i=(n=this[0]).length);++a<i;)(r=n[a])&&(e[a]=r.__data__);return e}function o(e,n){var r,a,i,o=e.length,c=n.length,f=Math.min(o,c),h=new Array(c),p=new Array(c),d=new Array(o);if(t){var g,v=new M,m=new Array(o);for(r=-1;++r<o;)(a=e[r])&&(v.has(g=t.call(a,a.__data__,r))?d[r]=a:v.set(g,a),m[r]=g);for(r=-1;++r<c;)(a=v.get(g=t.call(n,i=n[r],r)))?!0!==a&&(h[r]=a,a.__data__=i):p[r]=fe(i),v.set(g,!0);for(r=-1;++r<o;)r in m&&!0!==v.get(m[r])&&(d[r]=e[r])}else{for(r=-1;++r<f;)a=e[r],i=n[r],a?(a.__data__=i,h[r]=a):p[r]=fe(i);for(;r<c;++r)p[r]=fe(n[r]);for(;r<o;++r)d[r]=e[r]}p.update=h,p.parentNode=h.parentNode=d.parentNode=e.parentNode,s.push(p),u.push(h),l.push(d)}var s=ge([]),u=V([]),l=V([]);if("function"==typeof e)for(;++a<i;)o(n=this[a],e.call(n,n.parentNode.__data__,a));else for(;++a<i;)o(n=this[a],e);return u.enter=function(){return s},u.exit=function(){return l},u},J.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},J.filter=function(e){var t,n,r,a=[];"function"!=typeof e&&(e=he(e));for(var i=0,o=this.length;i<o;i++){a.push(t=[]),t.parentNode=(n=this[i]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&e.call(r,r.__data__,s,i)&&t.push(r)}return V(a)},J.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],a=r.length-1,i=r[a];--a>=0;)(n=r[a])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},J.sort=function(e){e=pe.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},J.each=function(e){return de(this,(function(t,n,r){e.call(t,t.__data__,n,r)}))},J.call=function(e){var t=s(arguments);return e.apply(t[0]=this,t),this},J.empty=function(){return!this.node()},J.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,a=n.length;r<a;r++){var i=n[r];if(i)return i}return null},J.size=function(){var e=0;return de(this,(function(){++e})),e};var ve=[];function me(e){var t,n;return function(r,a,i){var o,s=e[i].update,u=s.length;for(i!=n&&(n=i,t=0),a>=t&&(t=a+1);!(o=s[t])&&++t<u;);return o}}function be(e,t,n){var r="__on"+e,a=e.indexOf("."),o=xe;a>0&&(e=e.slice(0,a));var u=ye.get(e);function l(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}return u&&(e=u,o=ke),a?t?function(){var a=o(t,s(arguments));l.call(this),this.addEventListener(e,this[r]=a,a.$=n),a._=t}:l:t?R:function(){var t,n=new RegExp("^__on([^.]+)"+i.requote(e)+"$");for(var r in this)if(t=r.match(n)){var a=this[r];this.removeEventListener(t[1],a,a.$),delete this[r]}}}i.selection.enter=ge,i.selection.enter.prototype=ve,ve.append=J.append,ve.empty=J.empty,ve.node=J.node,ve.call=J.call,ve.size=J.size,ve.select=function(e){for(var t,n,r,a,i,o=[],s=-1,u=this.length;++s<u;){r=(a=this[s]).update,o.push(t=[]),t.parentNode=a.parentNode;for(var l=-1,c=a.length;++l<c;)(i=a[l])?(t.push(r[l]=n=e.call(a.parentNode,i.__data__,l,s)),n.__data__=i.__data__):t.push(null)}return V(o)},ve.insert=function(e,t){return arguments.length<2&&(t=me(this)),J.insert.call(this,e,t)},i.select=function(e){var t;return"string"==typeof e?(t=[K(e,u)]).parentNode=u.documentElement:(t=[e]).parentNode=l(e),V([t])},i.selectAll=function(e){var t;return"string"==typeof e?(t=s($(e,u))).parentNode=u.documentElement:(t=s(e)).parentNode=null,V([t])},J.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(be(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(be(e,t,n))};var ye=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});function xe(e,t){return function(n){var r=i.event;i.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{i.event=r}}}function ke(e,t){var n=xe(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}u&&ye.forEach((function(e){"on"+e in u&&ye.remove(e)}));var _e,we=0;function je(e){var t=".dragsuppress-"+ ++we,n="click"+t,r=i.select(c(e)).on("touchmove"+t,z).on("dragstart"+t,z).on("selectstart"+t,z);if(null==_e&&(_e=!("onselectstart"in e)&&F(e.style,"userSelect")),_e){var a=l(e).style,o=a[_e];a[_e]="none"}return function(e){if(r.on(t,null),_e&&(a[_e]=o),e){var i=function(){r.on(n,null)};r.on(n,(function(){z(),i()}),!0),setTimeout(i,0)}}}i.mouse=function(e){return Se(e,U())};var Me=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Se(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(Me<0){var a=c(e);if(a.scrollX||a.scrollY){var o=(n=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Me=!(o.f||o.e),n.remove()}}return Me?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function Oe(){return i.event.changedTouches[0].identifier}i.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=U().changedTouches),t)for(var r,a=0,i=t.length;a<i;++a)if((r=t[a]).identifier===n)return Se(e,r)},i.behavior.drag=function(){var e=H(a,"drag","dragstart","dragend"),t=null,n=o(R,i.mouse,c,"mousemove","mouseup"),r=o(Oe,i.touch,P,"touchmove","touchend");function a(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,a,o,s){return function(){var u,l=this,c=i.event.target.correspondingElement||i.event.target,f=l.parentNode,h=e.of(l,arguments),p=0,d=n(),g=".drag"+(null==d?"":"-"+d),v=i.select(a(c)).on(o+g,y).on(s+g,x),m=je(c),b=r(f,d);function y(){var e,t,n=r(f,d);n&&(e=n[0]-b[0],t=n[1]-b[1],p|=e|t,b=n,h({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:e,dy:t}))}function x(){r(f,d)&&(v.on(o+g,null).on(s+g,null),m(p),h({type:"dragend"}))}u=t?[(u=t.apply(l,arguments)).x-b[0],u.y-b[1]]:[0,0],h({type:"dragstart"})}}return a.origin=function(e){return arguments.length?(t=e,a):t},i.rebind(a,e,"on")},i.touches=function(e,t){return arguments.length<2&&(t=U().touches),t?s(t).map((function(t){var n=Se(e,t);return n.identifier=t.identifier,n})):[]};var Ee=1e-6,Ne=Ee*Ee,Ce=Math.PI,Te=2*Ce,Ae=Te-Ee,Le=Ce/2,Pe=Ce/180,Ie=180/Ce;function Fe(e){return e>0?1:e<0?-1:0}function De(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Re(e){return e>1?0:e<-1?Ce:Math.acos(e)}function Be(e){return e>1?Le:e<-1?-Le:Math.asin(e)}function qe(e){return((e=Math.exp(e))+1/e)/2}function ze(e){return(e=Math.sin(e/2))*e}var Ue=Math.SQRT2;i.interpolateZoom=function(e,t){var n,r,a=e[0],i=e[1],o=e[2],s=t[0],u=t[1],l=t[2],c=s-a,f=u-i,h=c*c+f*f;if(h<Ne)r=Math.log(l/o)/Ue,n=function(e){return[a+e*c,i+e*f,o*Math.exp(Ue*e*r)]};else{var p=Math.sqrt(h),d=(l*l-o*o+4*h)/(2*o*2*p),g=(l*l-o*o-4*h)/(2*l*2*p),v=Math.log(Math.sqrt(d*d+1)-d),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/Ue,n=function(e){var t,n=e*r,s=qe(v),u=o/(2*p)*(s*(t=Ue*n+v,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(v));return[a+u*c,i+u*f,o*s/qe(Ue*n+v)]}}return n.duration=1e3*r,n},i.behavior.zoom=function(){var e,t,n,r,a,o,s,l,f,h={x:0,y:0,k:1},p=[960,500],d=Ge,g=250,v=0,m="mousedown.zoom",b="mousemove.zoom",y="mouseup.zoom",x="touchstart.zoom",k=H(_,"zoomstart","zoom","zoomend");function _(e){e.on(m,T).on(We+".zoom",L).on("dblclick.zoom",P).on(x,A)}function w(e){return[(e[0]-h.x)/h.k,(e[1]-h.y)/h.k]}function j(e){h.k=Math.max(d[0],Math.min(d[1],e))}function M(e,t){t=function(e){return[e[0]*h.k+h.x,e[1]*h.k+h.y]}(t),h.x+=e[0]-t[0],h.y+=e[1]-t[1]}function S(e,n,r,a){e.__chart__={x:h.x,y:h.y,k:h.k},j(Math.pow(2,a)),M(t=n,r),e=i.select(e),g>0&&(e=e.transition().duration(g)),e.call(_.event)}function O(){s&&s.domain(o.range().map((function(e){return(e-h.x)/h.k})).map(o.invert)),f&&f.domain(l.range().map((function(e){return(e-h.y)/h.k})).map(l.invert))}function E(e){v++||e({type:"zoomstart"})}function N(e){O(),e({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function C(e){--v||(e({type:"zoomend"}),t=null)}function T(){var e=this,t=k.of(e,arguments),n=0,r=i.select(c(e)).on(b,s).on(y,u),a=w(i.mouse(e)),o=je(e);function s(){n=1,M(i.mouse(e),a),N(t)}function u(){r.on(b,null).on(y,null),o(n),C(t)}Fs.call(e),E(t)}function A(){var e,t=this,n=k.of(t,arguments),r={},o=0,s=".zoom-"+i.event.changedTouches[0].identifier,u="touchmove"+s,l="touchend"+s,c=[],f=i.select(t),p=je(t);function d(){var n=i.touches(t);return e=h.k,n.forEach((function(e){e.identifier in r&&(r[e.identifier]=w(e))})),n}function g(){var e=i.event.target;i.select(e).on(u,v).on(l,b),c.push(e);for(var n=i.event.changedTouches,s=0,f=n.length;s<f;++s)r[n[s].identifier]=null;var p=d(),g=Date.now();if(1===p.length){if(g-a<500){var m=p[0];S(t,m,r[m.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),z()}a=g}else if(p.length>1){m=p[0];var y=p[1],x=m[0]-y[0],k=m[1]-y[1];o=x*x+k*k}}function v(){var s,u,l,c,f=i.touches(t);Fs.call(t);for(var h=0,p=f.length;h<p;++h,c=null)if(l=f[h],c=r[l.identifier]){if(u)break;s=l,u=c}if(c){var d=(d=l[0]-s[0])*d+(d=l[1]-s[1])*d,g=o&&Math.sqrt(d/o);s=[(s[0]+l[0])/2,(s[1]+l[1])/2],u=[(u[0]+c[0])/2,(u[1]+c[1])/2],j(g*e)}a=null,M(s,u),N(n)}function b(){if(i.event.touches.length){for(var e=i.event.changedTouches,t=0,a=e.length;t<a;++t)delete r[e[t].identifier];for(var o in r)return void d()}i.selectAll(c).on(s,null),f.on(m,T).on(x,A),p(),C(n)}g(),E(n),f.on(m,null).on(x,g)}function L(){var a=k.of(this,arguments);r?clearTimeout(r):(Fs.call(this),e=w(t=n||i.mouse(this)),E(a)),r=setTimeout((function(){r=null,C(a)}),50),z(),j(Math.pow(2,.002*He())*h.k),M(t,e),N(a)}function P(){var e=i.mouse(this),t=Math.log(h.k)/Math.LN2;S(this,e,w(e),i.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return We||(We="onwheel"in u?(He=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(He=function(){return i.event.wheelDelta},"mousewheel"):(He=function(){return-i.event.detail},"MozMousePixelScroll")),_.event=function(e){e.each((function(){var e=k.of(this,arguments),n=h;Bs?i.select(this).transition().each("start.zoom",(function(){h=this.__chart__||{x:0,y:0,k:1},E(e)})).tween("zoom:zoom",(function(){var r=p[0],a=p[1],o=t?t[0]:r/2,s=t?t[1]:a/2,u=i.interpolateZoom([(o-h.x)/h.k,(s-h.y)/h.k,r/h.k],[(o-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(t){var n=u(t),a=r/n[2];this.__chart__=h={x:o-n[0]*a,y:s-n[1]*a,k:a},N(e)}})).each("interrupt.zoom",(function(){C(e)})).each("end.zoom",(function(){C(e)})):(this.__chart__=h,E(e),N(e),C(e))}))},_.translate=function(e){return arguments.length?(h={x:+e[0],y:+e[1],k:h.k},O(),_):[h.x,h.y]},_.scale=function(e){return arguments.length?(h={x:h.x,y:h.y,k:null},j(+e),O(),_):h.k},_.scaleExtent=function(e){return arguments.length?(d=null==e?Ge:[+e[0],+e[1]],_):d},_.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],_):n},_.size=function(e){return arguments.length?(p=e&&[+e[0],+e[1]],_):p},_.duration=function(e){return arguments.length?(g=+e,_):g},_.x=function(e){return arguments.length?(s=e,o=e.copy(),h={x:0,y:0,k:1},_):s},_.y=function(e){return arguments.length?(f=e,l=e.copy(),h={x:0,y:0,k:1},_):f},i.rebind(_,k,"on")};var He,We,Ge=[0,1/0];function Ve(){}function Ke(e,t,n){return this instanceof Ke?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Ke?new Ke(e.h,e.s,e.l):dt(""+e,gt,Ke):new Ke(e,t,n)}i.color=Ve,Ve.prototype.toString=function(){return this.rgb()+""},i.hsl=Ke;var $e=Ke.prototype=new Ve;function Ye(e,t,n){var r,a;function i(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(a=n<=.5?n*(1+t):n+t-n*t),new lt(i(e+120),i(e),i(e-120))}function Je(e,t,n){return this instanceof Je?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof Je?new Je(e.h,e.c,e.l):it(e instanceof Ze?e.l:(e=vt((e=i.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Je(e,t,n)}$e.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ke(this.h,this.s,this.l/e)},$e.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ke(this.h,this.s,e*this.l)},$e.rgb=function(){return Ye(this.h,this.s,this.l)},i.hcl=Je;var Xe=Je.prototype=new Ve;function Qe(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Ze(n,Math.cos(e*=Pe)*t,Math.sin(e)*t)}function Ze(e,t,n){return this instanceof Ze?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Ze?new Ze(e.l,e.a,e.b):e instanceof Je?Qe(e.h,e.c,e.l):vt((e=lt(e)).r,e.g,e.b):new Ze(e,t,n)}Xe.brighter=function(e){return new Je(this.h,this.c,Math.min(100,this.l+et*(arguments.length?e:1)))},Xe.darker=function(e){return new Je(this.h,this.c,Math.max(0,this.l-et*(arguments.length?e:1)))},Xe.rgb=function(){return Qe(this.h,this.c,this.l).rgb()},i.lab=Ze;var et=18,tt=.95047,nt=1.08883,rt=Ze.prototype=new Ve;function at(e,t,n){var r=(e+16)/116,a=r+t/500,i=r-n/200;return new lt(ut(3.2404542*(a=ot(a)*tt)-1.5371385*(r=1*ot(r))-.4985314*(i=ot(i)*nt)),ut(-.969266*a+1.8760108*r+.041556*i),ut(.0556434*a-.2040259*r+1.0572252*i))}function it(e,t,n){return e>0?new Je(Math.atan2(n,t)*Ie,Math.sqrt(t*t+n*n),e):new Je(NaN,NaN,e)}function ot(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function st(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ut(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function lt(e,t,n){return this instanceof lt?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof lt?new lt(e.r,e.g,e.b):dt(""+e,lt,Ye):new lt(e,t,n)}function ct(e){return new lt(e>>16,e>>8&255,255&e)}function ft(e){return ct(e)+""}rt.brighter=function(e){return new Ze(Math.min(100,this.l+et*(arguments.length?e:1)),this.a,this.b)},rt.darker=function(e){return new Ze(Math.max(0,this.l-et*(arguments.length?e:1)),this.a,this.b)},rt.rgb=function(){return at(this.l,this.a,this.b)},i.rgb=lt;var ht=lt.prototype=new Ve;function pt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function dt(e,t,n){var r,a,i,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(a=r[2].split(","),r[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return t(bt(a[0]),bt(a[1]),bt(a[2]))}return(i=yt.get(e))?t(i.r,i.g,i.b):(null==e||"#"!==e.charAt(0)||isNaN(i=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&i)>>4,o|=o>>4,s=240&i,s|=s>>4,u=15&i,u|=u<<4):7===e.length&&(o=(16711680&i)>>16,s=(65280&i)>>8,u=255&i)),t(o,s,u))}function gt(e,t,n){var r,a,i=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-i,u=(o+i)/2;return s?(a=u<.5?s/(o+i):s/(2-o-i),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,a=u>0&&u<1?0:r),new Ke(r,a,u)}function vt(e,t,n){var r=st((.4124564*(e=mt(e))+.3575761*(t=mt(t))+.1804375*(n=mt(n)))/tt),a=st((.2126729*e+.7151522*t+.072175*n)/1);return Ze(116*a-16,500*(r-a),200*(a-st((.0193339*e+.119192*t+.9503041*n)/nt)))}function mt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}ht.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,a=30;return t||n||r?(t&&t<a&&(t=a),n&&n<a&&(n=a),r&&r<a&&(r=a),new lt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new lt(a,a,a)},ht.darker=function(e){return new lt((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},ht.hsl=function(){return gt(this.r,this.g,this.b)},ht.toString=function(){return"#"+pt(this.r)+pt(this.g)+pt(this.b)};var yt=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function xt(e){return"function"==typeof e?e:function(){return e}}function kt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),_t(t,n,e,r)}}function _t(e,t,n,r){var a={},o=i.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;function f(){var e,t=l.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(l)||t>=200&&t<300||304===t){try{e=n.call(a,l)}catch(e){return void o.error.call(a,e)}o.load.call(a,e)}else o.error.call(a,l)}return this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()},l.onprogress=function(e){var t=i.event;i.event=e;try{o.progress.call(a,l)}finally{i.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(c=e,a):c},a.response=function(e){return n=e,a},["get","post"].forEach((function(e){a[e]=function(){return a.send.apply(a,[e].concat(s(arguments)))}})),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),l.setRequestHeader)for(var s in u)l.setRequestHeader(s,u[s]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=i&&a.on("error",i).on("load",(function(e){i(null,e)})),o.beforesend.call(a,l),l.send(null==r?null:r),a},a.abort=function(){return l.abort(),a},i.rebind(a,o,"on"),null==r?a:a.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(r))}yt.forEach((function(e,t){yt.set(e,ct(t))})),i.functor=xt,i.xhr=kt(P),i.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function a(e,n,r){arguments.length<3&&(r=n,n=null);var a=_t(e,t,null==n?i:o(n),r);return a.row=function(e){return arguments.length?a.response(null==(n=e)?i:o(e)):n},a}function i(e){return a.parse(e.responseText)}function o(e){return function(t){return a.parse(t.responseText,e)}}function s(t){return t.map(u).join(e)}function u(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return a.parse=function(e,t){var n;return a.parseRows(e,(function(e,r){if(n)return n(e,r-1);var a=new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}");n=t?function(e,n){return t(a(e),n)}:a}))},a.parseRows=function(e,t){var n,a,i={},o={},s=[],u=e.length,l=0,c=0;function f(){if(l>=u)return o;if(a)return a=!1,i;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return l=n+2,13===(s=e.charCodeAt(n+1))?(a=!0,10===e.charCodeAt(n+2)&&++l):10===s&&(a=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l<u;){var s,c=1;if(10===(s=e.charCodeAt(l++)))a=!0;else if(13===s)a=!0,10===e.charCodeAt(l)&&(++l,++c);else if(s!==r)continue;return e.slice(t,l-c)}return e.slice(t)}for(;(n=f())!==o;){for(var h=[];n!==i&&n!==o;)h.push(n),n=f();t&&null==(h=t(h,c++))||s.push(h)}return s},a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var n=new L,r=[];return t.forEach((function(e){for(var t in e)n.has(t)||r.push(n.add(t))})),[r.map(u).join(e)].concat(t.map((function(t){return r.map((function(e){return u(t[e])})).join(e)}))).join("\n")},a.formatRows=function(e){return e.map(s).join("\n")},a},i.csv=i.dsv(",","text/csv"),i.tsv=i.dsv("\t","text/tab-separated-values");var wt,jt,Mt,St,Ot=this[F(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function Et(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var a=n+t,i={c:e,t:a,n:null};return jt?jt.n=i:wt=i,jt=i,Mt||(St=clearTimeout(St),Mt=1,Ot(Nt)),i}function Nt(){var e=Ct(),t=Tt()-e;t>24?(isFinite(t)&&(clearTimeout(St),St=setTimeout(Nt,t)),Mt=0):(Mt=1,Ot(Nt))}function Ct(){for(var e=Date.now(),t=wt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Tt(){for(var e,t=wt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:wt=t.n;return jt=e,n}function At(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}i.timer=function(){Et.apply(this,arguments)},i.timer.flush=function(){Ct(),Tt()},i.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Lt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map((function(e,t){var n=Math.pow(10,3*_(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}));function Pt(e){var t=e.decimal,n=e.thousands,r=e.grouping,a=e.currency,o=r&&n?function(e,t){for(var a=e.length,i=[],o=0,s=r[0],u=0;a>0&&s>0&&(u+s+1>t&&(s=Math.max(1,t-u)),i.push(e.substring(a-=s,a+s)),!((u+=s+1)>t));)s=r[o=(o+1)%r.length];return i.reverse().join(n)}:P;return function(e){var n=It.exec(e),r=n[1]||" ",s=n[2]||">",u=n[3]||"-",l=n[4]||"",c=n[5],f=+n[6],h=n[7],p=n[8],d=n[9],g=1,v="",m="",b=!1,y=!0;switch(p&&(p=+p.substring(1)),(c||"0"===r&&"="===s)&&(c=r="0",s="="),d){case"n":h=!0,d="g";break;case"%":g=100,m="%",d="f";break;case"p":g=100,m="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+d.toLowerCase());case"c":y=!1;case"d":b=!0,p=0;break;case"s":g=-1,d="r"}"$"===l&&(v=a[0],m=a[1]),"r"!=d||p||(d="g"),null!=p&&("g"==d?p=Math.max(1,Math.min(21,p)):"e"!=d&&"f"!=d||(p=Math.max(0,Math.min(20,p)))),d=Ft.get(d)||Dt;var x=c&&h;return function(e){var n=m;if(b&&e%1)return"";var a=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===u?"":u;if(g<0){var l=i.formatPrefix(e,p);e=l.scale(e),n=l.symbol+m}else e*=g;var k,_,w=(e=d(e,p)).lastIndexOf(".");if(w<0){var j=y?e.lastIndexOf("e"):-1;j<0?(k=e,_=""):(k=e.substring(0,j),_=e.substring(j))}else k=e.substring(0,w),_=t+e.substring(w+1);!c&&h&&(k=o(k,1/0));var M=v.length+k.length+_.length+(x?0:a.length),S=M<f?new Array(M=f-M+1).join(r):"";return x&&(k=o(S+k,S.length?f-_.length:1/0)),a+=v,e=k+_,("<"===s?a+e+S:">"===s?S+a+e:"^"===s?S.substring(0,M>>=1)+a+e+S.substring(M):a+(x?e:S+e))+n}}}i.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=i.round(e,At(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Lt[8+n/3]};var It=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ft=i.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=i.round(e,At(e,t))).toFixed(Math.max(0,Math.min(20,At(e*(1+1e-15),t))))}});function Dt(e){return e+""}var Rt=i.time={},Bt=Date;function qt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}qt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){zt.setUTCDate.apply(this._,arguments)},setDay:function(){zt.setUTCDay.apply(this._,arguments)},setFullYear:function(){zt.setUTCFullYear.apply(this._,arguments)},setHours:function(){zt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){zt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){zt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){zt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){zt.setUTCSeconds.apply(this._,arguments)},setTime:function(){zt.setTime.apply(this._,arguments)}};var zt=Date.prototype;function Ut(e,t,n){function r(t){var n=e(t),r=i(n,1);return t-n<r-t?n:r}function a(n){return t(n=e(new Bt(n-1)),1),n}function i(e,n){return t(e=new Bt(+e),n),e}function o(e,r,i){var o=a(e),s=[];if(i>1)for(;o<r;)n(o)%i||s.push(new Date(+o)),t(o,1);else for(;o<r;)s.push(new Date(+o)),t(o,1);return s}e.floor=e,e.round=r,e.ceil=a,e.offset=i,e.range=o;var s=e.utc=Ht(e);return s.floor=s,s.round=Ht(r),s.ceil=Ht(a),s.offset=Ht(i),s.range=function(e,t,n){try{Bt=qt;var r=new qt;return r._=e,o(r,t,n)}finally{Bt=Date}},e}function Ht(e){return function(t,n){try{Bt=qt;var r=new qt;return r._=t,e(r,n)._}finally{Bt=Date}}}function Wt(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function c(e){var t=e.length;function n(n){for(var r,a,i,o=[],s=-1,u=0;++s<t;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(a=Gt[r=e.charAt(++s)])&&(r=e.charAt(++s)),(i=k[r])&&(r=i(n,null==a?"e"===r?" ":"0":a)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(n,e,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Bt!==qt,a=new(r?qt:Bt);return"j"in n?a.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),a.setFullYear(n.y,0,1),a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(a.getDay()+5)%7:n.w+7*n.U-(a.getDay()+6)%7)):a.setFullYear(n.y,n.m,n.d),a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?a._:a},n.toString=function(){return e},n}function f(e,t,n,r){for(var a,i,o,s=0,u=t.length,l=n.length;s<u;){if(r>=l)return-1;if(37===(a=t.charCodeAt(s++))){if(o=t.charAt(s++),!(i=_[o in Gt?t.charAt(s++):o])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}c.utc=function(e){var t=c(e);function n(e){try{var n=new(Bt=qt);return n._=e,t(n)}finally{Bt=Date}}return n.parse=function(e){try{Bt=qt;var n=t.parse(e);return n&&n._}finally{Bt=Date}},n.toString=t.toString,n},c.multi=c.utc.multi=pn;var h=i.map(),p=Yt(o),d=Jt(o),g=Yt(s),v=Jt(s),m=Yt(u),b=Jt(u),y=Yt(l),x=Jt(l);a.forEach((function(e,t){h.set(e.toLowerCase(),t)}));var k={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:c(t),d:function(e,t){return $t(e.getDate(),t,2)},e:function(e,t){return $t(e.getDate(),t,2)},H:function(e,t){return $t(e.getHours(),t,2)},I:function(e,t){return $t(e.getHours()%12||12,t,2)},j:function(e,t){return $t(1+Rt.dayOfYear(e),t,3)},L:function(e,t){return $t(e.getMilliseconds(),t,3)},m:function(e,t){return $t(e.getMonth()+1,t,2)},M:function(e,t){return $t(e.getMinutes(),t,2)},p:function(e){return a[+(e.getHours()>=12)]},S:function(e,t){return $t(e.getSeconds(),t,2)},U:function(e,t){return $t(Rt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return $t(Rt.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return $t(e.getFullYear()%100,t,2)},Y:function(e,t){return $t(e.getFullYear()%1e4,t,4)},Z:fn,"%":function(){return"%"}},_={a:function(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){y.lastIndex=0;var r=y.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){m.lastIndex=0;var r=m.exec(t.slice(n));return r?(e.m=b.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,n){return f(e,k.c.toString(),t,n)},d:an,e:an,H:sn,I:sn,j:on,L:cn,m:rn,M:un,p:function(e,t,n){var r=h.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:ln,U:Qt,w:Xt,W:Zt,x:function(e,t,n){return f(e,k.x.toString(),t,n)},X:function(e,t,n){return f(e,k.X.toString(),t,n)},y:tn,Y:en,Z:nn,"%":hn};return c}Rt.year=Ut((function(e){return(e=Rt.day(e)).setMonth(0,1),e}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e){return e.getFullYear()})),Rt.years=Rt.year.range,Rt.years.utc=Rt.year.utc.range,Rt.day=Ut((function(e){var t=new Bt(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e){return e.getDate()-1})),Rt.days=Rt.day.range,Rt.days.utc=Rt.day.utc.range,Rt.dayOfYear=function(e){var t=Rt.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(e,t){t=7-t;var n=Rt[e]=Ut((function(e){return(e=Rt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e}),(function(e,t){e.setDate(e.getDate()+7*Math.floor(t))}),(function(e){var n=Rt.year(e).getDay();return Math.floor((Rt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)}));Rt[e+"s"]=n.range,Rt[e+"s"].utc=n.utc.range,Rt[e+"OfYear"]=function(e){var n=Rt.year(e).getDay();return Math.floor((Rt.dayOfYear(e)+(n+t)%7)/7)}})),Rt.week=Rt.sunday,Rt.weeks=Rt.sunday.range,Rt.weeks.utc=Rt.sunday.utc.range,Rt.weekOfYear=Rt.sundayOfYear;var Gt={"-":"",_:" ",0:"0"},Vt=/^\s*\d+/,Kt=/^%/;function $t(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function Yt(e){return new RegExp("^(?:"+e.map(i.requote).join("|")+")","i")}function Jt(e){for(var t=new M,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Xt(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Qt(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Zt(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function en(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function tn(e,t,n){Vt.lastIndex=0;var r,a=Vt.exec(t.slice(n,n+2));return a?(e.y=(r=+a[0])+(r>68?1900:2e3),n+a[0].length):-1}function nn(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function rn(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function an(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function on(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function sn(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function un(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ln(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function cn(e,t,n){Vt.lastIndex=0;var r=Vt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function fn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=_(t)/60|0,a=_(t)%60;return n+$t(r,"0",2)+$t(a,"0",2)}function hn(e,t,n){Kt.lastIndex=0;var r=Kt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function pn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}i.locale=function(e){return{numberFormat:Pt(e),timeFormat:Wt(e)}};var dn=i.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gn(){}i.format=dn.numberFormat,i.geo={},gn.prototype={s:0,t:0,add:function(e){mn(e,this.t,vn),mn(vn.s,this.s,this),this.s?this.t+=vn.t:this.s=vn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var vn=new gn;function mn(e,t,n){var r=n.s=e+t,a=r-e,i=r-a;n.t=e-i+(t-a)}function bn(e,t){e&&xn.hasOwnProperty(e.type)&&xn[e.type](e,t)}i.geo.stream=function(e,t){e&&yn.hasOwnProperty(e.type)?yn[e.type](e,t):bn(e,t)};var yn={Feature:function(e,t){bn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)bn(n[r].geometry,t)}},xn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){kn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)kn(n[r],t,0)},Polygon:function(e,t){_n(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)_n(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)bn(n[r],t)}};function kn(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function _n(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)kn(e[n],t,1);t.polygonEnd()}i.geo.area=function(e){return wn=0,i.geo.stream(e,Fn),wn};var wn,jn,Mn,Sn,On,En,Nn,Cn,Tn,An,Ln,Pn,In=new gn,Fn={sphere:function(){wn+=4*Ce},point:R,lineStart:R,lineEnd:R,polygonStart:function(){In.reset(),Fn.lineStart=Dn},polygonEnd:function(){var e=2*In;wn+=e<0?4*Ce+e:e,Fn.lineStart=Fn.lineEnd=Fn.point=R}};function Dn(){var e,t,n,r,a;function i(e,t){t=t*Pe/2+Ce/4;var i=(e*=Pe)-n,o=i>=0?1:-1,s=o*i,u=Math.cos(t),l=Math.sin(t),c=a*l,f=r*u+c*Math.cos(s),h=c*o*Math.sin(s);In.add(Math.atan2(h,f)),n=e,r=u,a=l}Fn.point=function(o,s){Fn.point=i,n=(e=o)*Pe,r=Math.cos(s=(t=s)*Pe/2+Ce/4),a=Math.sin(s)},Fn.lineEnd=function(){i(e,t)}}function Rn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Bn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function qn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function zn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Un(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Hn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Wn(e){return[Math.atan2(e[1],e[0]),Be(e[2])]}function Gn(e,t){return _(e[0]-t[0])<Ee&&_(e[1]-t[1])<Ee}i.geo.bounds=function(){var e,t,n,r,a,o,s,u,l,c,f,h={point:p,lineStart:g,lineEnd:v,polygonStart:function(){h.point=m,h.lineStart=b,h.lineEnd=y,l=0,Fn.polygonStart()},polygonEnd:function(){Fn.polygonEnd(),h.point=p,h.lineStart=g,h.lineEnd=v,In<0?(e=-(n=180),t=-(r=90)):l>Ee?r=90:l<-Ee&&(t=-90),f[0]=e,f[1]=n}};function p(a,i){c.push(f=[e=a,n=a]),i<t&&(t=i),i>r&&(r=i)}function d(i,o){var s=Rn([i*Pe,o*Pe]);if(u){var l=qn(u,s),c=qn([l[1],-l[0],0],l);Hn(c),c=Wn(c);var f=i-a,h=f>0?1:-1,d=c[0]*Ie*h,g=_(f)>180;if(g^(h*a<d&&d<h*i))(v=c[1]*Ie)>r&&(r=v);else if(g^(h*a<(d=(d+360)%360-180)&&d<h*i)){var v;(v=-c[1]*Ie)<t&&(t=v)}else o<t&&(t=o),o>r&&(r=o);g?i<a?x(e,i)>x(e,n)&&(n=i):x(i,n)>x(e,n)&&(e=i):n>=e?(i<e&&(e=i),i>n&&(n=i)):i>a?x(e,i)>x(e,n)&&(n=i):x(i,n)>x(e,n)&&(e=i)}else p(i,o);u=s,a=i}function g(){h.point=d}function v(){f[0]=e,f[1]=n,h.point=p,u=null}function m(e,t){if(u){var n=e-a;l+=_(n)>180?n+(n>0?360:-360):n}else o=e,s=t;Fn.point(e,t),d(e,t)}function b(){Fn.lineStart()}function y(){m(o,s),Fn.lineEnd(),_(l)>Ee&&(e=-(n=180)),f[0]=e,f[1]=n,u=null}function x(e,t){return(t-=e)<0?t+360:t}function k(e,t){return e[0]-t[0]}function w(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(a){if(r=n=-(e=t=1/0),c=[],i.geo.stream(a,h),l=c.length){c.sort(k);for(var o=1,s=[g=c[0]];o<l;++o)w((p=c[o])[0],g)||w(p[1],g)?(x(g[0],p[1])>x(g[0],g[1])&&(g[1]=p[1]),x(p[0],g[1])>x(g[0],g[1])&&(g[0]=p[0])):s.push(g=p);for(var u,l,p,d=-1/0,g=(o=0,s[l=s.length-1]);o<=l;g=p,++o)p=s[o],(u=x(g[1],p[0]))>d&&(d=u,e=p[0],n=g[1])}return c=f=null,e===1/0||t===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,t],[n,r]]}}(),i.geo.centroid=function(e){jn=Mn=Sn=On=En=Nn=Cn=Tn=An=Ln=Pn=0,i.geo.stream(e,Vn);var t=An,n=Ln,r=Pn,a=t*t+n*n+r*r;return a<Ne&&(t=Nn,n=Cn,r=Tn,Mn<Ee&&(t=Sn,n=On,r=En),(a=t*t+n*n+r*r)<Ne)?[NaN,NaN]:[Math.atan2(n,t)*Ie,Be(r/Math.sqrt(a))*Ie]};var Vn={sphere:R,point:Kn,lineStart:Yn,lineEnd:Jn,polygonStart:function(){Vn.lineStart=Xn},polygonEnd:function(){Vn.lineStart=Yn}};function Kn(e,t){e*=Pe;var n=Math.cos(t*=Pe);$n(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function $n(e,t,n){++jn,Sn+=(e-Sn)/jn,On+=(t-On)/jn,En+=(n-En)/jn}function Yn(){var e,t,n;function r(r,a){r*=Pe;var i=Math.cos(a*=Pe),o=i*Math.cos(r),s=i*Math.sin(r),u=Math.sin(a),l=Math.atan2(Math.sqrt((l=t*u-n*s)*l+(l=n*o-e*u)*l+(l=e*s-t*o)*l),e*o+t*s+n*u);Mn+=l,Nn+=l*(e+(e=o)),Cn+=l*(t+(t=s)),Tn+=l*(n+(n=u)),$n(e,t,n)}Vn.point=function(a,i){a*=Pe;var o=Math.cos(i*=Pe);e=o*Math.cos(a),t=o*Math.sin(a),n=Math.sin(i),Vn.point=r,$n(e,t,n)}}function Jn(){Vn.point=Kn}function Xn(){var e,t,n,r,a;function i(e,t){e*=Pe;var i=Math.cos(t*=Pe),o=i*Math.cos(e),s=i*Math.sin(e),u=Math.sin(t),l=r*u-a*s,c=a*o-n*u,f=n*s-r*o,h=Math.sqrt(l*l+c*c+f*f),p=n*o+r*s+a*u,d=h&&-Re(p)/h,g=Math.atan2(h,p);An+=d*l,Ln+=d*c,Pn+=d*f,Mn+=g,Nn+=g*(n+(n=o)),Cn+=g*(r+(r=s)),Tn+=g*(a+(a=u)),$n(n,r,a)}Vn.point=function(o,s){e=o,t=s,Vn.point=i,o*=Pe;var u=Math.cos(s*=Pe);n=u*Math.cos(o),r=u*Math.sin(o),a=Math.sin(s),$n(n,r,a)},Vn.lineEnd=function(){i(e,t),Vn.lineEnd=Jn,Vn.point=Kn}}function Qn(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Zn(){return!0}function er(e,t,n,r,a){var i=[],o=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Gn(n,r)){a.lineStart();for(var s=0;s<t;++s)a.point((n=e[s])[0],n[1]);a.lineEnd()}else{var u=new nr(n,e,null,!0),l=new nr(n,null,u,!1);u.o=l,i.push(u),o.push(l),u=new nr(r,e,null,!1),l=new nr(r,null,u,!0),u.o=l,i.push(u),o.push(l)}}})),o.sort(t),tr(i),tr(o),i.length){for(var s=0,u=n,l=o.length;s<l;++s)o[s].e=u=!u;for(var c,f,h=i[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;c=p.z,a.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(s=0,l=c.length;s<l;++s)a.point((f=c[s])[0],f[1]);else r(p.x,p.n.x,1,a);p=p.n}else{if(d)for(s=(c=p.p.z).length-1;s>=0;--s)a.point((f=c[s])[0],f[1]);else r(p.x,p.p.x,-1,a);p=p.p}c=(p=p.o).z,d=!d}while(!p.v);a.lineEnd()}}}function tr(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function nr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function rr(e,t,n,r){return function(a,o){var s,u=t(o),l=a.invert(r[0],r[1]),c={point:f,lineStart:p,lineEnd:d,polygonStart:function(){c.point=x,c.lineStart=k,c.lineEnd=_,s=[],g=[]},polygonEnd:function(){c.point=f,c.lineStart=p,c.lineEnd=d,s=i.merge(s);var e=function(e,t){var n=e[0],r=e[1],a=[Math.sin(n),-Math.cos(n),0],i=0,o=0;In.reset();for(var s=0,u=t.length;s<u;++s){var l=t[s],c=l.length;if(c)for(var f=l[0],h=f[0],p=f[1]/2+Ce/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===c&&(v=0);var m=(e=l[v])[0],b=e[1]/2+Ce/4,y=Math.sin(b),x=Math.cos(b),k=m-h,_=k>=0?1:-1,w=_*k,j=w>Ce,M=d*y;if(In.add(Math.atan2(M*_*Math.sin(w),g*x+M*Math.cos(w))),i+=j?k+_*Te:k,j^h>=n^m>=n){var S=qn(Rn(f),Rn(e));Hn(S);var O=qn(a,S);Hn(O);var E=(j^k>=0?-1:1)*Be(O[2]);(r>E||r===E&&(S[0]||S[1]))&&(o+=j^k>=0?1:-1)}if(!v++)break;h=m,d=y,g=x,f=e}}return(i<-Ee||i<Ee&&In<-Ee)^1&o}(l,g);s.length?(y||(o.polygonStart(),y=!0),er(s,or,e,n,o)):e&&(y||(o.polygonStart(),y=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),y&&(o.polygonEnd(),y=!1),s=g=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function f(t,n){var r=a(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function h(e,t){var n=a(e,t);u.point(n[0],n[1])}function p(){c.point=h,u.lineStart()}function d(){c.point=f,u.lineEnd()}var g,v,m=ir(),b=t(m),y=!1;function x(e,t){v.push([e,t]);var n=a(e,t);b.point(n[0],n[1])}function k(){b.lineStart(),v=[]}function _(){x(v[0][0],v[0][1]),b.lineEnd();var e,t=b.clean(),n=m.buffer(),r=n.length;if(v.pop(),g.push(v),v=null,r)if(1&t){var a,i=-1;if((r=(e=n[0]).length-1)>0){for(y||(o.polygonStart(),y=!0),o.lineStart();++i<r;)o.point((a=e[i])[0],a[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),s.push(n.filter(ar))}return c}}function ar(e){return e.length>1}function ir(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:R,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function or(e,t){return((e=e.x)[0]<0?e[1]-Le-Ee:Le-e[1])-((t=t.x)[0]<0?t[1]-Le-Ee:Le-t[1])}var sr=rr(Zn,(function(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,o){var s=i>0?Ce:-Ce,u=_(i-n);_(u-Ce)<Ee?(e.point(n,r=(r+o)/2>0?Le:-Le),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(i,r),t=0):a!==s&&u>=Ce&&(_(n-a)<Ee&&(n-=a*Ee),_(i-s)<Ee&&(i-=s*Ee),r=function(e,t,n,r){var a,i,o=Math.sin(e-n);return _(o)>Ee?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(n)-Math.sin(r)*(a=Math.cos(t))*Math.sin(e))/(a*i*o)):(t+r)/2}(n,r,i,o),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=i,r=o),a=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var a;if(null==e)a=n*Le,r.point(-Ce,a),r.point(0,a),r.point(Ce,a),r.point(Ce,0),r.point(Ce,-a),r.point(0,-a),r.point(-Ce,-a),r.point(-Ce,0),r.point(-Ce,a);else if(_(e[0]-t[0])>Ee){var i=e[0]<t[0]?Ce:-Ce;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(t[0],t[1])}),[-Ce,-Ce/2]);function ur(e){var t=Math.cos(e),n=t>0,r=_(t)>Ee;return rr(a,(function(e){var t,s,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,h){var p,d=[f,h],g=a(f,h),v=n?g?0:o(f,h):g?o(f+(f<0?Ce:-Ce),h):0;if(!t&&(l=u=g)&&e.lineStart(),g!==u&&(p=i(t,d),(Gn(t,p)||Gn(d,p))&&(d[0]+=Ee,d[1]+=Ee,g=a(d[0],d[1]))),g!==u)c=0,g?(e.lineStart(),p=i(d,t),e.point(p[0],p[1])):(p=i(t,d),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(r&&t&&n^g){var m;v&s||!(m=i(d,t,!0))||(c=0,n?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1])))}!g||t&&Gn(t,d)||e.point(d[0],d[1]),t=d,u=g,s=v},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),Gr(e,6*Pe),n?[0,-e]:[-Ce,e-Ce]);function a(e,n){return Math.cos(e)*Math.cos(n)>t}function i(e,n,r){var a=[1,0,0],i=qn(Rn(e),Rn(n)),o=Bn(i,i),s=i[0],u=o-s*s;if(!u)return!r&&e;var l=t*o/u,c=-t*s/u,f=qn(a,i),h=Un(a,l);zn(h,Un(i,c));var p=f,d=Bn(h,p),g=Bn(p,p),v=d*d-g*(Bn(h,h)-1);if(!(v<0)){var m=Math.sqrt(v),b=Un(p,(-d-m)/g);if(zn(b,h),b=Wn(b),!r)return b;var y,x=e[0],k=n[0],w=e[1],j=n[1];k<x&&(y=x,x=k,k=y);var M=k-x,S=_(M-Ce)<Ee;if(!S&&j<w&&(y=w,w=j,j=y),S||M<Ee?S?w+j>0^b[1]<(_(b[0]-x)<Ee?w:j):w<=b[1]&&b[1]<=j:M>Ce^(x<=b[0]&&b[0]<=k)){var O=Un(p,(-d+m)/g);return zn(O,h),[b,Wn(O)]}}}function o(t,r){var a=n?e:Ce-e,i=0;return t<-a?i|=1:t>a&&(i|=2),r<-a?i|=4:r>a&&(i|=8),i}}function lr(e,t,n,r){return function(a){var i,o=a.a,s=a.b,u=o.x,l=o.y,c=0,f=1,h=s.x-u,p=s.y-l;if(i=e-u,h||!(i>0)){if(i/=h,h<0){if(i<c)return;i<f&&(f=i)}else if(h>0){if(i>f)return;i>c&&(c=i)}if(i=n-u,h||!(i<0)){if(i/=h,h<0){if(i>f)return;i>c&&(c=i)}else if(h>0){if(i<c)return;i<f&&(f=i)}if(i=t-l,p||!(i>0)){if(i/=p,p<0){if(i<c)return;i<f&&(f=i)}else if(p>0){if(i>f)return;i>c&&(c=i)}if(i=r-l,p||!(i<0)){if(i/=p,p<0){if(i>f)return;i>c&&(c=i)}else if(p>0){if(i<c)return;i<f&&(f=i)}return c>0&&(a.a={x:u+c*h,y:l+c*p}),f<1&&(a.b={x:u+f*h,y:l+f*p}),a}}}}}}var cr=1e9;function fr(e,t,n,r){return function(u){var l,c,f,h,p,d,g,v,m,b,y,x=u,k=ir(),_=lr(e,t,n,r),w={point:S,lineStart:function(){w.point=O,c&&c.push(f=[]);b=!0,m=!1,g=v=NaN},lineEnd:function(){l&&(O(h,p),d&&m&&k.rejoin(),l.push(k.buffer()));w.point=S,m&&u.lineEnd()},polygonStart:function(){u=k,l=[],c=[],y=!0},polygonEnd:function(){u=x,l=i.merge(l);var t=function(e){for(var t=0,n=c.length,r=e[1],a=0;a<n;++a)for(var i,o=1,s=c[a],u=s.length,l=s[0];o<u;++o)i=s[o],l[1]<=r?i[1]>r&&De(l,i,e)>0&&++t:i[1]<=r&&De(l,i,e)<0&&--t,l=i;return 0!==t}([e,r]),n=y&&t,a=l.length;(n||a)&&(u.polygonStart(),n&&(u.lineStart(),j(null,null,1,u),u.lineEnd()),a&&er(l,o,t,j,u),u.polygonEnd()),l=c=f=null}};function j(i,o,u,l){var c=0,f=0;if(null==i||(c=a(i,u))!==(f=a(o,u))||s(i,o)<0^u>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+u+4)%4)!==f);else l.point(o[0],o[1])}function M(a,i){return e<=a&&a<=n&&t<=i&&i<=r}function S(e,t){M(e,t)&&u.point(e,t)}function O(e,t){var n=M(e=Math.max(-1e9,Math.min(cr,e)),t=Math.max(-1e9,Math.min(cr,t)));if(c&&f.push([e,t]),b)h=e,p=t,d=n,b=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&m)u.point(e,t);else{var r={a:{x:g,y:v},b:{x:e,y:t}};_(r)?(m||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),y=!1):n&&(u.lineStart(),u.point(e,t),y=!1)}g=e,v=t,m=n}return w};function a(r,a){return _(r[0]-e)<Ee?a>0?0:3:_(r[0]-n)<Ee?a>0?2:1:_(r[1]-t)<Ee?a>0?1:0:a>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function hr(e){var t=0,n=Ce/3,r=Dr(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*Ce/180,n=e[1]*Ce/180):[t/Ce*180,n/Ce*180]},a}function pr(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,a=1+n*(2*r-n),i=Math.sqrt(a)/r;function o(e,t){var n=Math.sqrt(a-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),i-n*Math.cos(e)]}return o.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,Be((a-(e*e+n*n)*r*r)/(2*r))]},o}i.geo.clipExtent=function(){var e,t,n,r,a,i,o={stream:function(e){return a&&(a.valid=!1),(a=i(e)).valid=!0,a},extent:function(s){return arguments.length?(i=fr(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),a&&(a.valid=!1,a=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(i.geo.conicEqualArea=function(){return hr(pr)}).raw=pr,i.geo.albers=function(){return i.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},i.geo.albersUsa=function(){var e,t,n,r,a=i.geo.albers(),o=i.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=i.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};function l(a){var i=a[0],o=a[1];return e=null,t(i,o),e||(n(i,o),e)||r(i,o),e}return l.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:a).invert(e)},l.stream=function(e){var t=a.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,a){t.point(e,a),n.point(e,a),r.point(e,a)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},l.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),s.precision(e),l):a.precision()},l.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),s.scale(e),l.translate(a.translate())):a.scale()},l.translate=function(e){if(!arguments.length)return a.translate();var i=a.scale(),c=+e[0],f=+e[1];return t=a.translate(e).clipExtent([[c-.455*i,f-.238*i],[c+.455*i,f+.238*i]]).stream(u).point,n=o.translate([c-.307*i,f+.201*i]).clipExtent([[c-.425*i+Ee,f+.12*i+Ee],[c-.214*i-Ee,f+.234*i-Ee]]).stream(u).point,r=s.translate([c-.205*i,f+.212*i]).clipExtent([[c-.214*i+Ee,f+.166*i+Ee],[c-.115*i-Ee,f+.234*i-Ee]]).stream(u).point,l},l.scale(1070)};var dr,gr,vr,mr,br,yr,xr={point:R,lineStart:R,lineEnd:R,polygonStart:function(){gr=0,xr.lineStart=kr},polygonEnd:function(){xr.lineStart=xr.lineEnd=xr.point=R,dr+=_(gr/2)}};function kr(){var e,t,n,r;function a(e,t){gr+=r*e-n*t,n=e,r=t}xr.point=function(i,o){xr.point=a,e=n=i,t=r=o},xr.lineEnd=function(){a(e,t)}}var _r={point:function(e,t){e<vr&&(vr=e);e>br&&(br=e);t<mr&&(mr=t);t>yr&&(yr=t)},lineStart:R,lineEnd:R,polygonStart:R,polygonEnd:R};function wr(){var e=jr(4.5),t=[],n={point:r,lineStart:function(){n.point=a},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=jr(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};function r(n,r){t.push("M",n,",",r,e)}function a(e,r){t.push("M",e,",",r),n.point=i}function i(e,n){t.push("L",e,",",n)}function o(){n.point=r}function s(){t.push("Z")}return n}function jr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Mr,Sr={point:Or,lineStart:Er,lineEnd:Nr,polygonStart:function(){Sr.lineStart=Cr},polygonEnd:function(){Sr.point=Or,Sr.lineStart=Er,Sr.lineEnd=Nr}};function Or(e,t){Sn+=e,On+=t,++En}function Er(){var e,t;function n(n,r){var a=n-e,i=r-t,o=Math.sqrt(a*a+i*i);Nn+=o*(e+n)/2,Cn+=o*(t+r)/2,Tn+=o,Or(e=n,t=r)}Sr.point=function(r,a){Sr.point=n,Or(e=r,t=a)}}function Nr(){Sr.point=Or}function Cr(){var e,t,n,r;function a(e,t){var a=e-n,i=t-r,o=Math.sqrt(a*a+i*i);Nn+=o*(n+e)/2,Cn+=o*(r+t)/2,Tn+=o,An+=(o=r*e-n*t)*(n+e),Ln+=o*(r+t),Pn+=3*o,Or(n=e,r=t)}Sr.point=function(i,o){Sr.point=a,Or(e=n=i,t=r=o)},Sr.lineEnd=function(){a(e,t)}}function Tr(e){var t=4.5,n={point:r,lineStart:function(){n.point=a},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:R};function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,Te)}function a(t,r){e.moveTo(t,r),n.point=i}function i(t,n){e.lineTo(t,n)}function o(){n.point=r}function s(){e.closePath()}return n}function Ar(e){var t=.5,n=Math.cos(30*Pe),r=16;function a(e){return(r?o:i)(e)}function i(t){return Ir(t,(function(n,r){n=e(n,r),t.point(n[0],n[1])}))}function o(t){var n,a,i,o,u,l,c,f,h,p,d,g,v={point:m,lineStart:b,lineEnd:x,polygonStart:function(){t.polygonStart(),v.lineStart=k},polygonEnd:function(){t.polygonEnd(),v.lineStart=b}};function m(n,r){n=e(n,r),t.point(n[0],n[1])}function b(){f=NaN,v.point=y,t.lineStart()}function y(n,a){var i=Rn([n,a]),o=e(n,a);s(f,h,c,p,d,g,f=o[0],h=o[1],c=n,p=i[0],d=i[1],g=i[2],r,t),t.point(f,h)}function x(){v.point=m,t.lineEnd()}function k(){b(),v.point=_,v.lineEnd=w}function _(e,t){y(n=e,t),a=f,i=h,o=p,u=d,l=g,v.point=y}function w(){s(f,h,c,p,d,g,a,i,n,o,u,l,r,t),v.lineEnd=x,x()}return v}function s(r,a,i,o,u,l,c,f,h,p,d,g,v,m){var b=c-r,y=f-a,x=b*b+y*y;if(x>4*t&&v--){var k=o+p,w=u+d,j=l+g,M=Math.sqrt(k*k+w*w+j*j),S=Math.asin(j/=M),O=_(_(j)-1)<Ee||_(i-h)<Ee?(i+h)/2:Math.atan2(w,k),E=e(O,S),N=E[0],C=E[1],T=N-r,A=C-a,L=y*T-b*A;(L*L/x>t||_((b*T+y*A)/x-.5)>.3||o*p+u*d+l*g<n)&&(s(r,a,i,o,u,l,N,C,O,k/=M,w/=M,j,v,m),m.point(N,C),s(N,C,O,k,w,j,c,f,h,p,d,g,v,m))}}return a.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,a):Math.sqrt(t)},a}function Lr(e){var t=Ar((function(t,n){return e([t*Ie,n*Ie])}));return function(e){return Rr(t(e))}}function Pr(e){this.stream=e}function Ir(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Fr(e){return Dr((function(){return e}))()}function Dr(e){var t,n,r,a,o,s,u=Ar((function(e,n){return[(e=t(e,n))[0]*l+a,o-e[1]*l]})),l=150,c=480,f=250,h=0,p=0,d=0,g=0,v=0,m=sr,b=P,y=null,x=null;function k(e){return[(e=r(e[0]*Pe,e[1]*Pe))[0]*l+a,o-e[1]*l]}function _(e){return(e=r.invert((e[0]-a)/l,(o-e[1])/l))&&[e[0]*Ie,e[1]*Ie]}function w(){r=Qn(n=zr(d,g,v),t);var e=t(h,p);return a=c-e[0]*l,o=f+e[1]*l,j()}function j(){return s&&(s.valid=!1,s=null),k}return k.stream=function(e){return s&&(s.valid=!1),(s=Rr(m(n,u(b(e))))).valid=!0,s},k.clipAngle=function(e){return arguments.length?(m=null==e?(y=e,sr):ur((y=+e)*Pe),j()):y},k.clipExtent=function(e){return arguments.length?(x=e,b=e?fr(e[0][0],e[0][1],e[1][0],e[1][1]):P,j()):x},k.scale=function(e){return arguments.length?(l=+e,w()):l},k.translate=function(e){return arguments.length?(c=+e[0],f=+e[1],w()):[c,f]},k.center=function(e){return arguments.length?(h=e[0]%360*Pe,p=e[1]%360*Pe,w()):[h*Ie,p*Ie]},k.rotate=function(e){return arguments.length?(d=e[0]%360*Pe,g=e[1]%360*Pe,v=e.length>2?e[2]%360*Pe:0,w()):[d*Ie,g*Ie,v*Ie]},i.rebind(k,u,"precision"),function(){return t=e.apply(this,arguments),k.invert=t.invert&&_,w()}}function Rr(e){return Ir(e,(function(t,n){e.point(t*Pe,n*Pe)}))}function Br(e,t){return[e,t]}function qr(e,t){return[e>Ce?e-Te:e<-Ce?e+Te:e,t]}function zr(e,t,n){return e?t||n?Qn(Hr(e),Wr(t,n)):Hr(e):t||n?Wr(t,n):qr}function Ur(e){return function(t,n){return[(t+=e)>Ce?t-Te:t<-Ce?t+Te:t,n]}}function Hr(e){var t=Ur(e);return t.invert=Ur(-e),t}function Wr(e,t){var n=Math.cos(e),r=Math.sin(e),a=Math.cos(t),i=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*n+s*r;return[Math.atan2(u*a-c*i,s*n-l*r),Be(c*a+u*i)]}return o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*a-u*i;return[Math.atan2(u*a+l*i,s*n+c*r),Be(c*n-s*r)]},o}function Gr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(a,i,o,s){var u=o*t;null!=a?(a=Vr(n,a),i=Vr(n,i),(o>0?a<i:a>i)&&(a+=o*Te)):(a=e+o*Te,i=e-.5*u);for(var l,c=a;o>0?c>i:c<i;c-=u)s.point((l=Wn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function Vr(e,t){var n=Rn(t);n[0]-=e,Hn(n);var r=Re(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ee)%(2*Math.PI)}function Kr(e,t,n){var r=i.range(e,t-Ee,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function $r(e,t,n){var r=i.range(e,t-Ee,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function Yr(e){return e.source}function Jr(e){return e.target}i.geo.path=function(){var e,t,n,r,a,o=4.5;function s(e){return e&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=n(r)),i.geo.stream(e,a)),r.result()}function u(){return a=null,s}return s.area=function(e){return dr=0,i.geo.stream(e,n(xr)),dr},s.centroid=function(e){return Sn=On=En=Nn=Cn=Tn=An=Ln=Pn=0,i.geo.stream(e,n(Sr)),Pn?[An/Pn,Ln/Pn]:Tn?[Nn/Tn,Cn/Tn]:En?[Sn/En,On/En]:[NaN,NaN]},s.bounds=function(e){return br=yr=-(vr=mr=1/0),i.geo.stream(e,n(_r)),[[vr,mr],[br,yr]]},s.projection=function(t){return arguments.length?(n=(e=t)?t.stream||Lr(t):P,u()):e},s.context=function(e){return arguments.length?(r=null==(t=e)?new wr:new Tr(e),"function"!=typeof o&&r.pointRadius(o),u()):t},s.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(r.pointRadius(+e),+e),s):o},s.projection(i.geo.albersUsa()).context(null)},i.geo.transform=function(e){return{stream:function(t){var n=new Pr(t);for(var r in e)n[r]=e[r];return n}}},Pr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},i.geo.projection=Fr,i.geo.projectionMutator=Dr,(i.geo.equirectangular=function(){return Fr(Br)}).raw=Br.invert=Br,i.geo.rotation=function(e){function t(t){return(t=e(t[0]*Pe,t[1]*Pe))[0]*=Ie,t[1]*=Ie,t}return e=zr(e[0]%360*Pe,e[1]*Pe,e.length>2?e[2]*Pe:0),t.invert=function(t){return(t=e.invert(t[0]*Pe,t[1]*Pe))[0]*=Ie,t[1]*=Ie,t},t},qr.invert=Br,i.geo.circle=function(){var e,t,n=[0,0],r=6;function a(){var e="function"==typeof n?n.apply(this,arguments):n,r=zr(-e[0]*Pe,-e[1]*Pe,0).invert,a=[];return t(null,null,1,{point:function(e,t){a.push(e=r(e,t)),e[0]*=Ie,e[1]*=Ie}}),{type:"Polygon",coordinates:[a]}}return a.origin=function(e){return arguments.length?(n=e,a):n},a.angle=function(n){return arguments.length?(t=Gr((e=+n)*Pe,r*Pe),a):e},a.precision=function(n){return arguments.length?(t=Gr(e*Pe,(r=+n)*Pe),a):r},a.angle(90)},i.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Pe,a=e[1]*Pe,i=t[1]*Pe,o=Math.sin(r),s=Math.cos(r),u=Math.sin(a),l=Math.cos(a),c=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((n=f*o)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},i.geo.graticule=function(){var e,t,n,r,a,o,s,u,l,c,f,h,p=10,d=p,g=90,v=360,m=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return i.range(Math.ceil(r/g)*g,n,g).map(f).concat(i.range(Math.ceil(u/v)*v,s,v).map(h)).concat(i.range(Math.ceil(t/p)*p,e,p).filter((function(e){return _(e%g)>Ee})).map(l)).concat(i.range(Math.ceil(o/d)*d,a,d).filter((function(e){return _(e%v)>Ee})).map(c))}return b.lines=function(){return y().map((function(e){return{type:"LineString",coordinates:e}}))},b.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(s).slice(1),f(n).reverse().slice(1),h(u).reverse().slice(1))]}},b.extent=function(e){return arguments.length?b.majorExtent(e).minorExtent(e):b.minorExtent()},b.majorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],s=+e[1][1],r>n&&(e=r,r=n,n=e),u>s&&(e=u,u=s,s=e),b.precision(m)):[[r,u],[n,s]]},b.minorExtent=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],a=+n[1][1],t>e&&(n=t,t=e,e=n),o>a&&(n=o,o=a,a=n),b.precision(m)):[[t,o],[e,a]]},b.step=function(e){return arguments.length?b.majorStep(e).minorStep(e):b.minorStep()},b.majorStep=function(e){return arguments.length?(g=+e[0],v=+e[1],b):[g,v]},b.minorStep=function(e){return arguments.length?(p=+e[0],d=+e[1],b):[p,d]},b.precision=function(i){return arguments.length?(m=+i,l=Kr(o,a,90),c=$r(t,e,m),f=Kr(u,s,90),h=$r(r,n,m),b):m},b.majorExtent([[-180,-90+Ee],[180,90-Ee]]).minorExtent([[-180,-80-Ee],[180,80+Ee]])},i.geo.greatArc=function(){var e,t,n=Yr,r=Jr;function a(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),t||r.apply(this,arguments)]}}return a.distance=function(){return i.geo.distance(e||n.apply(this,arguments),t||r.apply(this,arguments))},a.source=function(t){return arguments.length?(n=t,e="function"==typeof t?null:t,a):n},a.target=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,a):r},a.precision=function(){return arguments.length?a:0},a},i.geo.interpolate=function(e,t){return n=e[0]*Pe,r=e[1]*Pe,a=t[0]*Pe,i=t[1]*Pe,o=Math.cos(r),s=Math.sin(r),u=Math.cos(i),l=Math.sin(i),c=o*Math.cos(n),f=o*Math.sin(n),h=u*Math.cos(a),p=u*Math.sin(a),d=2*Math.asin(Math.sqrt(ze(i-r)+o*u*ze(a-n))),g=1/Math.sin(d),(v=d?function(e){var t=Math.sin(e*=d)*g,n=Math.sin(d-e)*g,r=n*c+t*h,a=n*f+t*p,i=n*s+t*l;return[Math.atan2(a,r)*Ie,Math.atan2(i,Math.sqrt(r*r+a*a))*Ie]}:function(){return[n*Ie,r*Ie]}).distance=d,v;var n,r,a,i,o,s,u,l,c,f,h,p,d,g,v},i.geo.length=function(e){return Mr=0,i.geo.stream(e,Xr),Mr};var Xr={sphere:R,point:R,lineStart:function(){var e,t,n;function r(r,a){var i=Math.sin(a*=Pe),o=Math.cos(a),s=_((r*=Pe)-e),u=Math.cos(s);Mr+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*i-t*o*u)*s),t*i+n*o*u),e=r,t=i,n=o}Xr.point=function(a,i){e=a*Pe,t=Math.sin(i*=Pe),n=Math.cos(i),Xr.point=r},Xr.lineEnd=function(){Xr.point=Xr.lineEnd=R}},lineEnd:R,polygonStart:R,polygonEnd:R};function Qr(e,t){function n(t,n){var r=Math.cos(t),a=Math.cos(n),i=e(r*a);return[i*a*Math.sin(t),i*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),a=t(r),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(e*i,r*o),Math.asin(r&&n*i/r)]},n}var Zr=Qr((function(e){return Math.sqrt(2/(1+e))}),(function(e){return 2*Math.asin(e/2)}));(i.geo.azimuthalEqualArea=function(){return Fr(Zr)}).raw=Zr;var ea=Qr((function(e){var t=Math.acos(e);return t&&t/Math.sin(t)}),P);function ta(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Ce/4+e/2)},a=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),i=n*Math.pow(r(e),a)/a;if(!a)return aa;function o(e,t){i>0?t<-Le+Ee&&(t=-Le+Ee):t>Le-Ee&&(t=Le-Ee);var n=i/Math.pow(r(t),a);return[n*Math.sin(a*e),i-n*Math.cos(a*e)]}return o.invert=function(e,t){var n=i-t,r=Fe(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(i/r,1/a))-Le]},o}function na(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),a=n/r+e;if(_(r)<Ee)return Br;function i(e,t){var n=a-t;return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}return i.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,a-Fe(r)*Math.sqrt(e*e+n*n)]},i}(i.geo.azimuthalEquidistant=function(){return Fr(ea)}).raw=ea,(i.geo.conicConformal=function(){return hr(ta)}).raw=ta,(i.geo.conicEquidistant=function(){return hr(na)}).raw=na;var ra=Qr((function(e){return 1/e}),Math.atan);function aa(e,t){return[e,Math.log(Math.tan(Ce/4+t/2))]}function ia(e){var t,n=Fr(e),r=n.scale,a=n.translate,i=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=a.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=i.apply(n,arguments);if(o===n){if(t=null==e){var s=Ce*r(),u=a();i([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}(i.geo.gnomonic=function(){return Fr(ra)}).raw=ra,aa.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Le]},(i.geo.mercator=function(){return ia(aa)}).raw=aa;var oa=Qr((function(){return 1}),Math.asin);(i.geo.orthographic=function(){return Fr(oa)}).raw=oa;var sa=Qr((function(e){return 1/(1+e)}),(function(e){return 2*Math.atan(e)}));function ua(e,t){return[Math.log(Math.tan(Ce/4+t/2)),-e]}function la(e){return e[0]}function ca(e){return e[1]}function fa(e){for(var t=e.length,n=[0,1],r=2,a=2;a<t;a++){for(;r>1&&De(e[n[r-2]],e[n[r-1]],e[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function ha(e,t){return e[0]-t[0]||e[1]-t[1]}(i.geo.stereographic=function(){return Fr(sa)}).raw=sa,ua.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Le]},(i.geo.transverseMercator=function(){var e=ia(ua),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=ua,i.geom={},i.geom.hull=function(e){var t=la,n=ca;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r,a=xt(t),i=xt(n),o=e.length,s=[],u=[];for(r=0;r<o;r++)s.push([+a.call(this,e[r],r),+i.call(this,e[r],r),r]);for(s.sort(ha),r=0;r<o;r++)u.push([s[r][0],-s[r][1]]);var l=fa(s),c=fa(u),f=c[0]===l[0],h=c[c.length-1]===l[l.length-1],p=[];for(r=l.length-1;r>=0;--r)p.push(e[s[l[r]][2]]);for(r=+f;r<c.length-h;++r)p.push(e[s[c[r]][2]]);return p}return r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},i.geom.polygon=function(e){return G(e,pa),e};var pa=i.geom.polygon.prototype=[];function da(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function ga(e,t,n,r){var a=e[0],i=n[0],o=t[0]-a,s=r[0]-i,u=e[1],l=n[1],c=t[1]-u,f=r[1]-l,h=(s*(u-l)-f*(a-i))/(f*o-s*c);return[a+h*o,u+h*c]}function va(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}pa.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],a=0;++t<n;)e=r,r=this[t],a+=e[1]*r[0]-e[0]*r[1];return.5*a},pa.centroid=function(e){var t,n,r=-1,a=this.length,i=0,o=0,s=this[a-1];for(arguments.length||(e=-1/(6*this.area()));++r<a;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],i+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[i*e,o*e]},pa.clip=function(e){for(var t,n,r,a,i,o,s=va(e),u=-1,l=this.length-va(this),c=this[l-1];++u<l;){for(t=e.slice(),e.length=0,a=this[u],i=t[(r=t.length-s)-1],n=-1;++n<r;)da(o=t[n],c,a)?(da(i,c,a)||e.push(ga(i,o,c,a)),e.push(o)):da(i,c,a)&&e.push(ga(i,o,c,a)),i=o;s&&e.push(e[0]),c=a}return e};var ma,ba,ya,xa,ka,_a=[],wa=[];function ja(){Ha(this),this.edge=this.site=this.circle=null}function Ma(e){var t=_a.pop()||new ja;return t.site=e,t}function Sa(e){Ia(e),ya.remove(e),_a.push(e),Ha(e)}function Oa(e){var t=e.circle,n=t.x,r=t.cy,a={x:n,y:r},i=e.P,o=e.N,s=[e];Sa(e);for(var u=i;u.circle&&_(n-u.circle.x)<Ee&&_(r-u.circle.cy)<Ee;)i=u.P,s.unshift(u),Sa(u),u=i;s.unshift(u),Ia(u);for(var l=o;l.circle&&_(n-l.circle.x)<Ee&&_(r-l.circle.cy)<Ee;)o=l.N,s.push(l),Sa(l),l=o;s.push(l),Ia(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],qa(l.edge,u.site,l.site,a);u=s[0],(l=s[f-1]).edge=Ra(u.site,l.site,null,a),Pa(u),Pa(l)}function Ea(e){for(var t,n,r,a,i=e.x,o=e.y,s=ya._;s;)if((r=Na(s,o)-i)>Ee)s=s.L;else{if(!((a=i-Ca(s,o))>Ee)){r>-Ee?(t=s.P,n=s):a>-Ee?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var u=Ma(e);if(ya.insert(t,u),t||n){if(t===n)return Ia(t),n=Ma(t.site),ya.insert(u,n),u.edge=n.edge=Ra(t.site,u.site),Pa(t),void Pa(n);if(n){Ia(t),Ia(n);var l=t.site,c=l.x,f=l.y,h=e.x-c,p=e.y-f,d=n.site,g=d.x-c,v=d.y-f,m=2*(h*v-p*g),b=h*h+p*p,y=g*g+v*v,x={x:(v*b-p*y)/m+c,y:(h*y-g*b)/m+f};qa(n.edge,l,d,x),u.edge=Ra(l,e,null,x),n.edge=Ra(e,d,null,x),Pa(t),Pa(n)}else u.edge=Ra(t.site,u.site)}}function Na(e,t){var n=e.site,r=n.x,a=n.y,i=a-t;if(!i)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,u=n.y,l=u-t;if(!l)return s;var c=s-r,f=1/i-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-u+l/2+a-i/2)))/f+r:(r+s)/2}function Ca(e,t){var n=e.N;if(n)return Na(n,t);var r=e.site;return r.y===t?r.x:1/0}function Ta(e){this.site=e,this.edges=[]}function Aa(e,t){return t.angle-e.angle}function La(){Ha(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pa(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,a=e.site,i=n.site;if(r!==i){var o=a.x,s=a.y,u=r.x-o,l=r.y-s,c=i.x-o,f=2*(u*(v=i.y-s)-l*c);if(!(f>=-Ne)){var h=u*u+l*l,p=c*c+v*v,d=(v*h-l*p)/f,g=(u*p-c*h)/f,v=g+s,m=wa.pop()||new La;m.arc=e,m.site=a,m.x=d+o,m.y=v+Math.sqrt(d*d+g*g),m.cy=v,e.circle=m;for(var b=null,y=ka._;y;)if(m.y<y.y||m.y===y.y&&m.x<=y.x){if(!y.L){b=y.P;break}y=y.L}else{if(!y.R){b=y;break}y=y.R}ka.insert(b,m),b||(xa=m)}}}}function Ia(e){var t=e.circle;t&&(t.P||(xa=t.N),ka.remove(t),wa.push(t),Ha(t),e.circle=null)}function Fa(e,t){var n=e.b;if(n)return!0;var r,a,i=e.a,o=t[0][0],s=t[1][0],u=t[0][1],l=t[1][1],c=e.l,f=e.r,h=c.x,p=c.y,d=f.x,g=f.y,v=(h+d)/2,m=(p+g)/2;if(g===p){if(v<o||v>=s)return;if(h>d){if(i){if(i.y>=l)return}else i={x:v,y:u};n={x:v,y:l}}else{if(i){if(i.y<u)return}else i={x:v,y:l};n={x:v,y:u}}}else if(a=m-(r=(h-d)/(g-p))*v,r<-1||r>1)if(h>d){if(i){if(i.y>=l)return}else i={x:(u-a)/r,y:u};n={x:(l-a)/r,y:l}}else{if(i){if(i.y<u)return}else i={x:(l-a)/r,y:l};n={x:(u-a)/r,y:u}}else if(p<g){if(i){if(i.x>=s)return}else i={x:o,y:r*o+a};n={x:s,y:r*s+a}}else{if(i){if(i.x<o)return}else i={x:s,y:r*s+a};n={x:o,y:r*o+a}}return e.a=i,e.b=n,!0}function Da(e,t){this.l=e,this.r=t,this.a=this.b=null}function Ra(e,t,n,r){var a=new Da(e,t);return ma.push(a),n&&qa(a,e,t,n),r&&qa(a,t,e,r),ba[e.i].edges.push(new za(a,e,t)),ba[t.i].edges.push(new za(a,t,e)),a}function Ba(e,t,n){var r=new Da(e,null);return r.a=t,r.b=n,ma.push(r),r}function qa(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function za(e,t,n){var r=e.a,a=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function Ua(){this._=null}function Ha(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Wa(e,t){var n=t,r=t.R,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ga(e,t){var n=t,r=t.L,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Va(e){for(;e.L;)e=e.L;return e}function Ka(e,t){var n,r,a,i=e.sort($a).pop();for(ma=[],ba=new Array(e.length),ya=new Ua,ka=new Ua;;)if(a=xa,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===n&&i.y===r||(ba[i.i]=new Ta(i),Ea(i),n=i.x,r=i.y),i=e.pop();else{if(!a)break;Oa(a.arc)}t&&(function(e){for(var t,n=ma,r=lr(e[0][0],e[0][1],e[1][0],e[1][1]),a=n.length;a--;)(!Fa(t=n[a],e)||!r(t)||_(t.a.x-t.b.x)<Ee&&_(t.a.y-t.b.y)<Ee)&&(t.a=t.b=null,n.splice(a,1))}(t),function(e){for(var t,n,r,a,i,o,s,u,l,c,f=e[0][0],h=e[1][0],p=e[0][1],d=e[1][1],g=ba,v=g.length;v--;)if((i=g[v])&&i.prepare())for(u=(s=i.edges).length,o=0;o<u;)r=(c=s[o].end()).x,a=c.y,t=(l=s[++o%u].start()).x,n=l.y,(_(r-t)>Ee||_(a-n)>Ee)&&(s.splice(o,0,new za(Ba(i.site,c,_(r-f)<Ee&&d-a>Ee?{x:f,y:_(t-f)<Ee?n:d}:_(a-d)<Ee&&h-r>Ee?{x:_(n-d)<Ee?t:h,y:d}:_(r-h)<Ee&&a-p>Ee?{x:h,y:_(t-h)<Ee?n:p}:_(a-p)<Ee&&r-f>Ee?{x:_(n-p)<Ee?t:f,y:p}:null),i.site,null)),++u)}(t));var o={cells:ba,edges:ma};return ya=ka=ma=ba=null,o}function $a(e,t){return t.y-e.y||t.x-e.x}Ta.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Aa),t.length},za.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ua.prototype={insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Va(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(a=r.R)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(Wa(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ga(this,r)):(a=r.L)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(Ga(this,n),n=(e=n).U),n.C=!1,r.C=!0,Wa(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,a=e.U,i=e.L,o=e.R;if(n=i?o?Va(o):i:o,a?a.L===e?a.L=n:a.R=n:this._=n,i&&o?(r=n.C,n.C=e.C,n.L=i,i.U=n,n!==o?(a=n.U,n.U=e.U,e=n.R,a.L=e,n.R=o,o.U=n):(n.U=a,a=n,e=n.R)):(r=e.C,e=n),e&&(e.U=a),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===a.L){if((t=a.R).C&&(t.C=!1,a.C=!0,Wa(this,a),t=a.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ga(this,t),t=a.R),t.C=a.C,a.C=t.R.C=!1,Wa(this,a),e=this._;break}}else if((t=a.L).C&&(t.C=!1,a.C=!0,Ga(this,a),t=a.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Wa(this,t),t=a.L),t.C=a.C,a.C=t.L.C=!1,Ga(this,a),e=this._;break}t.C=!0,e=a,a=a.U}while(!e.C);e&&(e.C=!1)}}},i.geom.voronoi=function(e){var t=la,n=ca,r=t,a=n,i=Ya;if(e)return o(e);function o(e){var t=new Array(e.length),n=i[0][0],r=i[0][1],a=i[1][0],o=i[1][1];return Ka(s(e),i).cells.forEach((function(i,s){var u=i.edges,l=i.site;(t[s]=u.length?u.map((function(e){var t=e.start();return[t.x,t.y]})):l.x>=n&&l.x<=a&&l.y>=r&&l.y<=o?[[n,o],[a,o],[a,r],[n,r]]:[]).point=e[s]})),t}function s(e){return e.map((function(e,t){return{x:Math.round(r(e,t)/Ee)*Ee,y:Math.round(a(e,t)/Ee)*Ee,i:t}}))}return o.links=function(e){return Ka(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))},o.triangles=function(e){var t=[];return Ka(s(e)).cells.forEach((function(n,r){for(var a,i,o,s,u=n.site,l=n.edges.sort(Aa),c=-1,f=l.length,h=l[f-1].edge,p=h.l===u?h.r:h.l;++c<f;)h,a=p,p=(h=l[c].edge).l===u?h.r:h.l,r<a.i&&r<p.i&&(o=a,s=p,((i=u).x-s.x)*(o.y-i.y)-(i.x-o.x)*(s.y-i.y)<0)&&t.push([e[r],e[a.i],e[p.i]])})),t},o.x=function(e){return arguments.length?(r=xt(t=e),o):t},o.y=function(e){return arguments.length?(a=xt(n=e),o):n},o.clipExtent=function(e){return arguments.length?(i=null==e?Ya:e,o):i===Ya?null:i},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):i===Ya?null:i&&i[1]},o};var Ya=[[-1e6,-1e6],[1e6,1e6]];function Ja(e){return e.x}function Xa(e){return e.y}function Qa(e,t,n,r,a,i){if(!e(t,n,r,a,i)){var o=.5*(n+a),s=.5*(r+i),u=t.nodes;u[0]&&Qa(e,u[0],n,r,o,s),u[1]&&Qa(e,u[1],o,r,a,s),u[2]&&Qa(e,u[2],n,s,o,i),u[3]&&Qa(e,u[3],o,s,a,i)}}function Za(e,t,n,r,a,i,o){var s,u=1/0;return function e(l,c,f,h,p){if(!(c>i||f>o||h<r||p<a)){if(d=l.point){var d,g=t-l.x,v=n-l.y,m=g*g+v*v;if(m<u){var b=Math.sqrt(u=m);r=t-b,a=n-b,i=t+b,o=n+b,s=d}}for(var y=l.nodes,x=.5*(c+h),k=.5*(f+p),_=(n>=k)<<1|t>=x,w=_+4;_<w;++_)if(l=y[3&_])switch(3&_){case 0:e(l,c,f,x,k);break;case 1:e(l,x,f,h,k);break;case 2:e(l,c,k,x,p);break;case 3:e(l,x,k,h,p)}}}(e,r,a,i,o),s}function ei(e,t){e=i.rgb(e),t=i.rgb(t);var n=e.r,r=e.g,a=e.b,o=t.r-n,s=t.g-r,u=t.b-a;return function(e){return"#"+pt(Math.round(n+o*e))+pt(Math.round(r+s*e))+pt(Math.round(a+u*e))}}function ti(e,t){var n,r={},a={};for(n in e)n in t?r[n]=oi(e[n],t[n]):a[n]=e[n];for(n in t)n in e||(a[n]=t[n]);return function(e){for(n in r)a[n]=r[n](e);return a}}function ni(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ri(e,t){var n,r,a,i=ai.lastIndex=ii.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=ai.exec(e))&&(r=ii.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:ni(n,r)})),i=ii.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}i.geom.delaunay=function(e){return i.geom.voronoi().triangles(e)},i.geom.quadtree=function(e,t,n,r,a){var i,o=la,s=ca;if(i=arguments.length)return o=Ja,s=Xa,3===i&&(a=n,r=t,n=t=0),u(e);function u(e){var u,l,c,f,h,p,d,g,v,m=xt(o),b=xt(s);if(null!=t)p=t,d=n,g=r,v=a;else if(g=v=-(p=d=1/0),l=[],c=[],h=e.length,i)for(f=0;f<h;++f)(u=e[f]).x<p&&(p=u.x),u.y<d&&(d=u.y),u.x>g&&(g=u.x),u.y>v&&(v=u.y),l.push(u.x),c.push(u.y);else for(f=0;f<h;++f){var y=+m(u=e[f],f),x=+b(u,f);y<p&&(p=y),x<d&&(d=x),y>g&&(g=y),x>v&&(v=x),l.push(y),c.push(x)}var k=g-p,w=v-d;function j(e,t,n,r,a,i,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var u=e.x,l=e.y;if(null!=u)if(_(u-n)+_(l-r)<.01)M(e,t,n,r,a,i,o,s);else{var c=e.point;e.x=e.y=e.point=null,M(e,c,u,l,a,i,o,s),M(e,t,n,r,a,i,o,s)}else e.x=n,e.y=r,e.point=t}else M(e,t,n,r,a,i,o,s)}function M(e,t,n,r,a,i,o,s){var u=.5*(a+o),l=.5*(i+s),c=n>=u,f=r>=l,h=f<<1|c;e.leaf=!1,c?a=u:o=u,f?i=l:s=l,j(e=e.nodes[h]||(e.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,r,a,i,o,s)}k>w?v=d+k:g=p+w;var S={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){j(S,e,+m(e,++f),+b(e,f),p,d,g,v)},visit:function(e){Qa(e,S,p,d,g,v)},find:function(e){return Za(S,e[0],e[1],p,d,g,v)}};if(f=-1,null==t){for(;++f<h;)j(S,e[f],l[f],c[f],p,d,g,v);--f}else e.forEach(S.add);return l=c=e=u=null,S}return u.x=function(e){return arguments.length?(o=e,u):o},u.y=function(e){return arguments.length?(s=e,u):s},u.extent=function(e){return arguments.length?(null==e?t=n=r=a=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),u):null==t?null:[[t,n],[r,a]]},u.size=function(e){return arguments.length?(null==e?t=n=r=a=null:(t=n=0,r=+e[0],a=+e[1]),u):null==t?null:[r-t,a-n]},u},i.interpolateRgb=ei,i.interpolateObject=ti,i.interpolateNumber=ni,i.interpolateString=ri;var ai=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ii=new RegExp(ai.source,"g");function oi(e,t){for(var n,r=i.interpolators.length;--r>=0&&!(n=i.interpolators[r](e,t)););return n}function si(e,t){var n,r=[],a=[],i=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(oi(e[n],t[n]));for(;n<i;++n)a[n]=e[n];for(;n<o;++n)a[n]=t[n];return function(e){for(n=0;n<s;++n)a[n]=r[n](e);return a}}i.interpolate=oi,i.interpolators=[function(e,t){var n=typeof t;return("string"===n?yt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?ei:ri:t instanceof Ve?ei:Array.isArray(t)?si:"object"===n&&isNaN(t)?ti:ni)(e,t)}],i.interpolateArray=si;var ui=function(){return P},li=i.map({linear:ui,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return di},cubic:function(){return gi},sin:function(){return mi},exp:function(){return bi},circle:function(){return yi},elastic:function(e,t){var n;arguments.length<2&&(t=.45);arguments.length?n=t/Te*Math.asin(1/e):(e=1,n=t/4);return function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Te/t)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return xi}}),ci=i.map({in:P,out:hi,"in-out":pi,"out-in":function(e){return pi(hi(e))}});function fi(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function hi(e){return function(t){return 1-e(1-t)}}function pi(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function di(e){return e*e}function gi(e){return e*e*e}function vi(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function mi(e){return 1-Math.cos(e*Le)}function bi(e){return Math.pow(2,10*(e-1))}function yi(e){return 1-Math.sqrt(1-e*e)}function xi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function ki(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function _i(e){var t,n,r,a=[e.a,e.b],i=[e.c,e.d],o=ji(a),s=wi(a,i),u=ji(((t=i)[0]+=(r=-s)*(n=a)[0],t[1]+=r*n[1],t))||0;a[0]*i[1]<i[0]*a[1]&&(a[0]*=-1,a[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(a[1],a[0]):Math.atan2(-i[0],i[1]))*Ie,this.translate=[e.e,e.f],this.scale=[o,u],this.skew=u?Math.atan2(s,u)*Ie:0}function wi(e,t){return e[0]*t[0]+e[1]*t[1]}function ji(e){var t=Math.sqrt(wi(e,e));return t&&(e[0]/=t,e[1]/=t),t}i.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=li.get(n)||ui,fi((r=ci.get(r)||P)(n.apply(null,o.call(arguments,1))))},i.interpolateHcl=function(e,t){e=i.hcl(e),t=i.hcl(t);var n=e.h,r=e.c,a=e.l,o=t.h-n,s=t.c-r,u=t.l-a;isNaN(s)&&(s=0,r=isNaN(r)?t.c:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return Qe(n+o*e,r+s*e,a+u*e)+""}},i.interpolateHsl=function(e,t){e=i.hsl(e),t=i.hsl(t);var n=e.h,r=e.s,a=e.l,o=t.h-n,s=t.s-r,u=t.l-a;isNaN(s)&&(s=0,r=isNaN(r)?t.s:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return Ye(n+o*e,r+s*e,a+u*e)+""}},i.interpolateLab=function(e,t){e=i.lab(e),t=i.lab(t);var n=e.l,r=e.a,a=e.b,o=t.l-n,s=t.a-r,u=t.b-a;return function(e){return at(n+o*e,r+s*e,a+u*e)+""}},i.interpolateRound=ki,i.transform=function(e){var t=u.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new _i(n?n.matrix:Mi)})(e)},_i.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Mi={a:1,b:0,c:0,d:1,e:0,f:0};function Si(e){return e.length?e.pop()+",":""}function Oi(e,t){var n=[],r=[];return e=i.transform(e),t=i.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var a=n.push("translate(",null,",",null,")");r.push({i:a-4,x:ni(e[0],t[0])},{i:a-2,x:ni(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,n,r),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Si(n)+"rotate(",null,")")-2,x:ni(e,t)})):t&&n.push(Si(n)+"rotate("+t+")")}(e.rotate,t.rotate,n,r),function(e,t,n,r){e!==t?r.push({i:n.push(Si(n)+"skewX(",null,")")-2,x:ni(e,t)}):t&&n.push(Si(n)+"skewX("+t+")")}(e.skew,t.skew,n,r),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var a=n.push(Si(n)+"scale(",null,",",null,")");r.push({i:a-4,x:ni(e[0],t[0])},{i:a-2,x:ni(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(Si(n)+"scale("+t+")")}(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,a=-1,i=r.length;++a<i;)n[(t=r[a]).i]=t.x(e);return n.join("")}}function Ei(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Ni(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Ci(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=Ti(e),r=Ti(t),a=n.pop(),i=r.pop(),o=null;for(;a===i;)o=a,a=n.pop(),i=r.pop();return o}(t,n),a=[t];t!==r;)t=t.parent,a.push(t);for(var i=a.length;n!==r;)a.splice(i,0,n),n=n.parent;return a}function Ti(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Ai(e){e.fixed|=2}function Li(e){e.fixed&=-7}function Pi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Ii(e){e.fixed&=-5}function Fi(e,t,n){var r=0,a=0;if(e.charge=0,!e.leaf)for(var i,o=e.nodes,s=o.length,u=-1;++u<s;)null!=(i=o[u])&&(Fi(i,t,n),e.charge+=i.charge,r+=i.charge*i.cx,a+=i.charge*i.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=t*n[e.point.index];e.charge+=e.pointCharge=l,r+=l*e.point.x,a+=l*e.point.y}e.cx=r/e.charge,e.cy=a/e.charge}i.interpolateTransform=Oi,i.layout={},i.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Ci(e[n]));return t}},i.layout.chord=function(){var e,t,n,r,a,o,s,u={},l=0;function c(){var u,c,h,p,d,g={},v=[],m=i.range(r),b=[];for(e=[],t=[],u=0,p=-1;++p<r;){for(c=0,d=-1;++d<r;)c+=n[p][d];v.push(c),b.push(i.range(r)),u+=c}for(a&&m.sort((function(e,t){return a(v[e],v[t])})),o&&b.forEach((function(e,t){e.sort((function(e,r){return o(n[t][e],n[t][r])}))})),u=(Te-l*r)/u,c=0,p=-1;++p<r;){for(h=c,d=-1;++d<r;){var y=m[p],x=b[y][d],k=n[y][x],_=c,w=c+=k*u;g[y+"-"+x]={index:y,subindex:x,startAngle:_,endAngle:w,value:k}}t[y]={index:y,startAngle:h,endAngle:c,value:v[y]},c+=l}for(p=-1;++p<r;)for(d=p-1;++d<r;){var j=g[p+"-"+d],M=g[d+"-"+p];(j.value||M.value)&&e.push(j.value<M.value?{source:M,target:j}:{source:j,target:M})}s&&f()}function f(){e.sort((function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}return u.matrix=function(a){return arguments.length?(r=(n=a)&&n.length,e=t=null,u):n},u.padding=function(n){return arguments.length?(l=n,e=t=null,u):l},u.sortGroups=function(n){return arguments.length?(a=n,e=t=null,u):a},u.sortSubgroups=function(t){return arguments.length?(o=t,e=null,u):o},u.sortChords=function(t){return arguments.length?(s=t,e&&f(),u):s},u.chords=function(){return e||c(),e},u.groups=function(){return t||c(),t},u},i.layout.force=function(){var e,t,n,r,a,o,s={},u=i.dispatch("start","tick","end"),l=[1,1],c=.9,f=Di,h=Ri,p=-30,d=Bi,g=.1,v=.64,m=[],b=[];function y(e){return function(t,n,r,a){if(t.point!==e){var i=t.cx-e.x,o=t.cy-e.y,s=a-n,u=i*i+o*o;if(s*s/v<u){if(u<d){var l=t.charge/u;e.px-=i*l,e.py-=o*l}return!0}if(t.point&&u&&u<d){l=t.pointCharge/u;e.px-=i*l,e.py-=o*l}}return!t.charge}}function x(e){e.px=i.event.x,e.py=i.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return e=null,u.end({type:"end",alpha:n=0}),!0;var t,s,f,h,d,v,x,k,_,w=m.length,j=b.length;for(s=0;s<j;++s)h=(f=b[s]).source,(v=(k=(d=f.target).x-h.x)*k+(_=d.y-h.y)*_)&&(k*=v=n*a[s]*((v=Math.sqrt(v))-r[s])/v,_*=v,d.x-=k*(x=h.weight+d.weight?h.weight/(h.weight+d.weight):.5),d.y-=_*x,h.x+=k*(x=1-x),h.y+=_*x);if((x=n*g)&&(k=l[0]/2,_=l[1]/2,s=-1,x))for(;++s<w;)(f=m[s]).x+=(k-f.x)*x,f.y+=(_-f.y)*x;if(p)for(Fi(t=i.geom.quadtree(m),n,o),s=-1;++s<w;)(f=m[s]).fixed||t.visit(y(f));for(s=-1;++s<w;)(f=m[s]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);u.tick({type:"tick",alpha:n})},s.nodes=function(e){return arguments.length?(m=e,s):m},s.links=function(e){return arguments.length?(b=e,s):b},s.size=function(e){return arguments.length?(l=e,s):l},s.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.friction=function(e){return arguments.length?(c=+e,s):c},s.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.chargeDistance=function(e){return arguments.length?(d=e*e,s):Math.sqrt(d)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(v=e*e,s):Math.sqrt(v)},s.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,u.end({type:"end",alpha:n=0})):t>0&&(u.start({type:"start",alpha:n=t}),e=Et(s.tick)),s):n},s.start=function(){var e,t,n,i=m.length,u=b.length,c=l[0],d=l[1];for(e=0;e<i;++e)(n=m[e]).index=e,n.weight=0;for(e=0;e<u;++e)"number"==typeof(n=b[e]).source&&(n.source=m[n.source]),"number"==typeof n.target&&(n.target=m[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<i;++e)n=m[e],isNaN(n.x)&&(n.x=g("x",c)),isNaN(n.y)&&(n.y=g("y",d)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof f)for(e=0;e<u;++e)r[e]=+f.call(this,b[e],e);else for(e=0;e<u;++e)r[e]=f;if(a=[],"function"==typeof h)for(e=0;e<u;++e)a[e]=+h.call(this,b[e],e);else for(e=0;e<u;++e)a[e]=h;if(o=[],"function"==typeof p)for(e=0;e<i;++e)o[e]=+p.call(this,m[e],e);else for(e=0;e<i;++e)o[e]=p;function g(n,r){if(!t){for(t=new Array(i),l=0;l<i;++l)t[l]=[];for(l=0;l<u;++l){var a=b[l];t[a.source.index].push(a.target),t[a.target.index].push(a.source)}}for(var o,s=t[e],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][n]))return o;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(t||(t=i.behavior.drag().origin(P).on("dragstart.force",Ai).on("drag.force",x).on("dragend.force",Li)),!arguments.length)return t;this.on("mouseover.force",Pi).on("mouseout.force",Ii).call(t)},i.rebind(s,u,"on")};var Di=20,Ri=1,Bi=1/0;function qi(e,t){return i.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Vi,e}function zi(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(a=e.children)&&(r=a.length))for(var r,a;--r>=0;)n.push(a[r])}function Ui(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(i=e.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)n.push(i[o]);for(;null!=(e=r.pop());)t(e)}function Hi(e){return e.children}function Wi(e){return e.value}function Gi(e,t){return t.value-e.value}function Vi(e){return i.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}i.layout.hierarchy=function(){var e=Gi,t=Hi,n=Wi;function r(a){var i,o=[a],s=[];for(a.depth=0;null!=(i=o.pop());)if(s.push(i),(l=t.call(r,i,i.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)o.push(c=l[u]),c.parent=i,c.depth=i.depth+1;n&&(i.value=0),i.children=l}else n&&(i.value=+n.call(r,i,i.depth)||0),delete i.children;return Ui(a,(function(t){var r,a;e&&(r=t.children)&&r.sort(e),n&&(a=t.parent)&&(a.value+=t.value)})),s}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(zi(e,(function(e){e.children&&(e.value=0)})),Ui(e,(function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)}))),e},r},i.layout.partition=function(){var e=i.layout.hierarchy(),t=[1,1];function n(e,t,r,a){var i=e.children;if(e.x=t,e.y=e.depth*a,e.dx=r,e.dy=a,i&&(o=i.length)){var o,s,u,l=-1;for(r=e.value?r/e.value:0;++l<o;)n(s=i[l],t,u=s.value*r,a),t+=u}}function r(e){var t=e.children,n=0;if(t&&(a=t.length))for(var a,i=-1;++i<a;)n=Math.max(n,r(t[i]));return 1+n}function a(a,i){var o=e.call(this,a,i);return n(o[0],0,t[0],t[1]/r(o[0])),o}return a.size=function(e){return arguments.length?(t=e,a):t},qi(a,e)},i.layout.pie=function(){var e=Number,t=Ki,n=0,r=Te,a=0;function o(s){var u,l=s.length,c=s.map((function(t,n){return+e.call(o,t,n)})),f=+("function"==typeof n?n.apply(this,arguments):n),h=("function"==typeof r?r.apply(this,arguments):r)-f,p=Math.min(Math.abs(h)/l,+("function"==typeof a?a.apply(this,arguments):a)),d=p*(h<0?-1:1),g=i.sum(c),v=g?(h-l*d)/g:0,m=i.range(l),b=[];return null!=t&&m.sort(t===Ki?function(e,t){return c[t]-c[e]}:function(e,n){return t(s[e],s[n])}),m.forEach((function(e){b[e]={data:s[e],value:u=c[e],startAngle:f,endAngle:f+=u*v+d,padAngle:p}})),b}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(e){return arguments.length?(t=e,o):t},o.startAngle=function(e){return arguments.length?(n=e,o):n},o.endAngle=function(e){return arguments.length?(r=e,o):r},o.padAngle=function(e){return arguments.length?(a=e,o):a},o};var Ki={};function $i(e){return e.x}function Yi(e){return e.y}function Ji(e,t,n){e.y0=t,e.y=n}i.layout.stack=function(){var e=P,t=Zi,n=eo,r=Ji,a=$i,o=Yi;function s(u,l){if(!(p=u.length))return u;var c=u.map((function(t,n){return e.call(s,t,n)})),f=c.map((function(e){return e.map((function(e,t){return[a.call(s,e,t),o.call(s,e,t)]}))})),h=t.call(s,f,l);c=i.permute(c,h),f=i.permute(f,h);var p,d,g,v,m=n.call(s,f,l),b=c[0].length;for(g=0;g<b;++g)for(r.call(s,c[0][g],v=m[g],f[0][g][1]),d=1;d<p;++d)r.call(s,c[d][g],v+=f[d-1][g][1],f[d][g][1]);return u}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(e){return arguments.length?(t="function"==typeof e?e:Xi.get(e)||Zi,s):t},s.offset=function(e){return arguments.length?(n="function"==typeof e?e:Qi.get(e)||eo,s):n},s.x=function(e){return arguments.length?(a=e,s):a},s.y=function(e){return arguments.length?(o=e,s):o},s.out=function(e){return arguments.length?(r=e,s):r},s};var Xi=i.map({"inside-out":function(e){var t,n,r=e.length,a=e.map(to),o=e.map(no),s=i.range(r).sort((function(e,t){return a[e]-a[t]})),u=0,l=0,c=[],f=[];for(t=0;t<r;++t)n=s[t],u<l?(u+=o[n],c.push(n)):(l+=o[n],f.push(n));return f.reverse().concat(c)},reverse:function(e){return i.range(e.length).reverse()},default:Zi}),Qi=i.map({silhouette:function(e){var t,n,r,a=e.length,i=e[0].length,o=[],s=0,u=[];for(n=0;n<i;++n){for(t=0,r=0;t<a;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<i;++n)u[n]=(s-o[n])/2;return u},wiggle:function(e){var t,n,r,a,i,o,s,u,l,c=e.length,f=e[0],h=f.length,p=[];for(p[0]=u=l=0,n=1;n<h;++n){for(t=0,a=0;t<c;++t)a+=e[t][n][1];for(t=0,i=0,s=f[n][0]-f[n-1][0];t<c;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;i+=o*e[t][n][1]}p[n]=u-=a?i/a*s:0,u<l&&(l=u)}for(n=0;n<h;++n)p[n]-=l;return p},expand:function(e){var t,n,r,a=e.length,i=e[0].length,o=1/a,s=[];for(n=0;n<i;++n){for(t=0,r=0;t<a;t++)r+=e[t][n][1];if(r)for(t=0;t<a;t++)e[t][n][1]/=r;else for(t=0;t<a;t++)e[t][n][1]=o}for(n=0;n<i;++n)s[n]=0;return s},zero:eo});function Zi(e){return i.range(e.length)}function eo(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function to(e){for(var t,n=1,r=0,a=e[0][1],i=e.length;n<i;++n)(t=e[n][1])>a&&(r=n,a=t);return r}function no(e){return e.reduce(ro,0)}function ro(e,t){return e+t[1]}function ao(e,t){return io(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function io(e,t){for(var n=-1,r=+e[0],a=(e[1]-r)/t,i=[];++n<=t;)i[n]=a*n+r;return i}function oo(e){return[i.min(e),i.max(e)]}function so(e,t){return e.value-t.value}function uo(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function lo(e,t){e._pack_next=t,t._pack_prev=e}function co(e,t){var n=t.x-e.x,r=t.y-e.y,a=e.r+t.r;return.999*a*a>n*n+r*r}function fo(e){if((t=e.children)&&(u=t.length)){var t,n,r,a,i,o,s,u,l=1/0,c=-1/0,f=1/0,h=-1/0;if(t.forEach(ho),(n=t[0]).x=-n.r,n.y=0,y(n),u>1&&((r=t[1]).x=r.r,r.y=0,y(r),u>2))for(vo(n,r,a=t[2]),y(a),uo(n,a),n._pack_prev=a,uo(a,r),r=n._pack_next,i=3;i<u;i++){vo(n,r,a=t[i]);var p=0,d=1,g=1;for(o=r._pack_next;o!==r;o=o._pack_next,d++)if(co(o,a)){p=1;break}if(1==p)for(s=n._pack_prev;s!==o._pack_prev&&!co(s,a);s=s._pack_prev,g++);p?(d<g||d==g&&r.r<n.r?lo(n,r=o):lo(n=s,r),i--):(uo(n,a),r=a,y(a))}var v=(l+c)/2,m=(f+h)/2,b=0;for(i=0;i<u;i++)(a=t[i]).x-=v,a.y-=m,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,t.forEach(po)}function y(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),f=Math.min(e.y-e.r,f),h=Math.max(e.y+e.r,h)}}function ho(e){e._pack_next=e._pack_prev=e}function po(e){delete e._pack_next,delete e._pack_prev}function go(e,t,n,r){var a=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,a)for(var i=-1,o=a.length;++i<o;)go(a[i],t,n,r)}function vo(e,t,n){var r=e.r+n.r,a=t.x-e.x,i=t.y-e.y;if(r&&(a||i)){var o=t.r+n.r,s=a*a+i*i,u=.5+((r*=r)-(o*=o))/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*a+l*i,n.y=e.y+u*i-l*a}else n.x=e.x+r,n.y=e.y}function mo(e,t){return e.parent==t.parent?1:2}function bo(e){var t=e.children;return t.length?t[0]:e.t}function yo(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function xo(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ko(e,t,n){return e.a.parent===t.parent?e.a:n}function _o(e){var t=e.children;return t&&t.length?_o(t[0]):e}function wo(e){var t,n=e.children;return n&&(t=n.length)?wo(n[t-1]):e}function jo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Mo(e,t){var n=e.x+t[3],r=e.y+t[0],a=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];return a<0&&(n+=a/2,a=0),i<0&&(r+=i/2,i=0),{x:n,y:r,dx:a,dy:i}}function So(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Oo(e){return e.rangeExtent?e.rangeExtent():So(e.range())}function Eo(e,t,n,r){var a=n(e[0],e[1]),i=r(t[0],t[1]);return function(e){return i(a(e))}}function No(e,t){var n,r=0,a=e.length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Co(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:To}i.layout.histogram=function(){var e=!0,t=Number,n=oo,r=ao;function a(a,o){for(var s,u,l=[],c=a.map(t,this),f=n.call(this,c,o),h=r.call(this,f,c,o),p=(o=-1,c.length),d=h.length-1,g=e?1:1/p;++o<d;)(s=l[o]=[]).dx=h[o+1]-(s.x=h[o]),s.y=0;if(d>0)for(o=-1;++o<p;)(u=c[o])>=f[0]&&u<=f[1]&&((s=l[i.bisect(h,u,1,d)-1]).y+=g,s.push(a[o]));return l}return a.value=function(e){return arguments.length?(t=e,a):t},a.range=function(e){return arguments.length?(n=xt(e),a):n},a.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return io(t,e)}:xt(e),a):r},a.frequency=function(t){return arguments.length?(e=!!t,a):e},a},i.layout.pack=function(){var e,t=i.layout.hierarchy().sort(so),n=0,r=[1,1];function a(a,i){var o=t.call(this,a,i),s=o[0],u=r[0],l=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Ui(s,(function(e){e.r=+c(e.value)})),Ui(s,fo),n){var f=n*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;Ui(s,(function(e){e.r+=f})),Ui(s,fo),Ui(s,(function(e){e.r-=f}))}return go(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),o}return a.size=function(e){return arguments.length?(r=e,a):r},a.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,a):e},a.padding=function(e){return arguments.length?(n=+e,a):n},qi(a,t)},i.layout.tree=function(){var e=i.layout.hierarchy().sort(null).value(null),t=mo,n=[1,1],r=null;function a(a,i){var l=e.call(this,a,i),c=l[0],f=function(e){var t,n={A:null,children:[e]},r=[n];for(;null!=(t=r.pop());)for(var a,i=t.children,o=0,s=i.length;o<s;++o)r.push((i[o]=a={_:i[o],parent:t,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return n.children[0]}(c);if(Ui(f,o),f.parent.m=-f.z,zi(f,s),r)zi(c,u);else{var h=c,p=c,d=c;zi(c,(function(e){e.x<h.x&&(h=e),e.x>p.x&&(p=e),e.depth>d.depth&&(d=e)}));var g=t(h,p)/2-h.x,v=n[0]/(p.x+t(p,h)/2+g),m=n[1]/(d.depth||1);zi(c,(function(e){e.x=(e.x+g)*v,e.y=e.depth*m}))}return l}function o(e){var n=e.children,r=e.parent.children,a=e.i?r[e.i-1]:null;if(n.length){!function(e){var t,n=0,r=0,a=e.children,i=a.length;for(;--i>=0;)(t=a[i]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var i=(n[0].z+n[n.length-1].z)/2;a?(e.z=a.z+t(e._,a._),e.m=e.z-i):e.z=i}else a&&(e.z=a.z+t(e._,a._));e.parent.A=function(e,n,r){if(n){for(var a,i=e,o=e,s=n,u=i.parent.children[0],l=i.m,c=o.m,f=s.m,h=u.m;s=yo(s),i=bo(i),s&&i;)u=bo(u),(o=yo(o)).a=e,(a=s.z+f-i.z-l+t(s._,i._))>0&&(xo(ko(s,e,r),e,a),l+=a,c+=a),f+=s.m,l+=i.m,h+=u.m,c+=o.m;s&&!yo(o)&&(o.t=s,o.m+=f-c),i&&!bo(u)&&(u.t=i,u.m+=l-h,r=e)}return r}(e,a,e.parent.A||r[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(e){e.x*=n[0],e.y=e.depth*n[1]}return a.separation=function(e){return arguments.length?(t=e,a):t},a.size=function(e){return arguments.length?(r=null==(n=e)?u:null,a):r?null:n},a.nodeSize=function(e){return arguments.length?(r=null==(n=e)?null:u,a):r?n:null},qi(a,e)},i.layout.cluster=function(){var e=i.layout.hierarchy().sort(null).value(null),t=mo,n=[1,1],r=!1;function a(a,o){var s,u=e.call(this,a,o),l=u[0],c=0;Ui(l,(function(e){var n=e.children;n&&n.length?(e.x=function(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}(n),e.y=function(e){return 1+i.max(e,(function(e){return e.y}))}(n)):(e.x=s?c+=t(e,s):0,e.y=0,s=e)}));var f=_o(l),h=wo(l),p=f.x-t(f,h)/2,d=h.x+t(h,f)/2;return Ui(l,r?function(e){e.x=(e.x-l.x)*n[0],e.y=(l.y-e.y)*n[1]}:function(e){e.x=(e.x-p)/(d-p)*n[0],e.y=(1-(l.y?e.y/l.y:1))*n[1]}),u}return a.separation=function(e){return arguments.length?(t=e,a):t},a.size=function(e){return arguments.length?(r=null==(n=e),a):r?null:n},a.nodeSize=function(e){return arguments.length?(r=null!=(n=e),a):r?n:null},qi(a,e)},i.layout.treemap=function(){var e,t=i.layout.hierarchy(),n=Math.round,r=[1,1],a=null,o=jo,s=!1,u="squarify",l=.5*(1+Math.sqrt(5));function c(e,t){for(var n,r,a=-1,i=e.length;++a<i;)r=(n=e[a]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function f(e){var t=e.children;if(t&&t.length){var n,r,a,i=o(e),s=[],l=t.slice(),h=1/0,g="slice"===u?i.dx:"dice"===u?i.dy:"slice-dice"===u?1&e.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(c(l,i.dx*i.dy/e.value),s.area=0;(a=l.length)>0;)s.push(n=l[a-1]),s.area+=n.area,"squarify"!==u||(r=p(s,g))<=h?(l.pop(),h=r):(s.area-=s.pop().area,d(s,g,i,!1),g=Math.min(i.dx,i.dy),s.length=s.area=0,h=1/0);s.length&&(d(s,g,i,!0),s.length=s.area=0),t.forEach(f)}}function h(e){var t=e.children;if(t&&t.length){var n,r=o(e),a=t.slice(),i=[];for(c(a,r.dx*r.dy/e.value),i.area=0;n=a.pop();)i.push(n),i.area+=n.area,null!=n.z&&(d(i,n.z?r.dx:r.dy,r,!a.length),i.length=i.area=0);t.forEach(h)}}function p(e,t){for(var n,r=e.area,a=0,i=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<i&&(i=n),n>a&&(a=n));return t*=t,(r*=r)?Math.max(t*a*l/r,r/(t*i*l)):1/0}function d(e,t,r,a){var i,o=-1,s=e.length,u=r.x,l=r.y,c=t?n(e.area/t):0;if(t==r.dx){for((a||c>r.dy)&&(c=r.dy);++o<s;)(i=e[o]).x=u,i.y=l,i.dy=c,u+=i.dx=Math.min(r.x+r.dx-u,c?n(i.area/c):0);i.z=!0,i.dx+=r.x+r.dx-u,r.y+=c,r.dy-=c}else{for((a||c>r.dx)&&(c=r.dx);++o<s;)(i=e[o]).x=u,i.y=l,i.dx=c,l+=i.dy=Math.min(r.y+r.dy-l,c?n(i.area/c):0);i.z=!1,i.dy+=r.y+r.dy-l,r.x+=c,r.dx-=c}}function g(n){var a=e||t(n),i=a[0];return i.x=i.y=0,i.value?(i.dx=r[0],i.dy=r[1]):i.dx=i.dy=0,e&&t.revalue(i),c([i],i.dx*i.dy/i.value),(e?h:f)(i),s&&(e=a),a}return g.size=function(e){return arguments.length?(r=e,g):r},g.padding=function(e){if(!arguments.length)return a;function t(t){var n=e.call(g,t,t.depth);return null==n?jo(t):Mo(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Mo(t,e)}var r;return o=null==(a=e)?jo:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,g},g.round=function(e){return arguments.length?(n=e?Math.round:Number,g):n!=Number},g.sticky=function(t){return arguments.length?(s=t,e=null,g):s},g.ratio=function(e){return arguments.length?(l=e,g):l},g.mode=function(e){return arguments.length?(u=e+"",g):u},qi(g,t)},i.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,a;do{a=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!a||a>1);return e+t*n*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var e=i.random.normal.apply(i,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=i.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},i.scale={};var To={floor:P,ceil:P};function Ao(e,t,n,r){var a=[],o=[],s=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=u;)a.push(n(e[s-1],e[s])),o.push(r(t[s-1],t[s]));return function(t){var n=i.bisect(e,t,1,u)-1;return o[n](a[n](t))}}function Lo(e,t,n,r){var a,i;function o(){var o=Math.min(e.length,t.length)>2?Ao:Eo,u=r?Ni:Ei;return a=o(e,t,u,n),i=o(t,e,u,oi),s}function s(e){return a(e)}return s.invert=function(e){return i(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},s.range=function(e){return arguments.length?(t=e,o()):t},s.rangeRound=function(e){return s.range(e).interpolate(ki)},s.clamp=function(e){return arguments.length?(r=e,o()):r},s.interpolate=function(e){return arguments.length?(n=e,o()):n},s.ticks=function(t){return Do(e,t)},s.tickFormat=function(t,n){return Ro(e,t,n)},s.nice=function(t){return Io(e,t),o()},s.copy=function(){return Lo(e,t,n,r)},o()}function Po(e,t){return i.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Io(e,t){return No(e,Co(Fo(e,t)[2])),No(e,Co(Fo(e,t)[2])),e}function Fo(e,t){null==t&&(t=10);var n=So(e),r=n[1]-n[0],a=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*a;return i<=.15?a*=10:i<=.35?a*=5:i<=.75&&(a*=2),n[0]=Math.ceil(n[0]/a)*a,n[1]=Math.floor(n[1]/a)*a+.5*a,n[2]=a,n}function Do(e,t){return i.range.apply(i,Fo(e,t))}function Ro(e,t,n){var r=Fo(e,t);if(n){var a=It.exec(n);if(a.shift(),"s"===a[8]){var o=i.formatPrefix(Math.max(_(r[0]),_(r[1])));return a[7]||(a[7]="."+qo(o.scale(r[2]))),a[8]="f",n=i.format(a.join("")),function(e){return n(o.scale(e))+o.symbol}}a[7]||(a[7]="."+function(e,t){var n=qo(t[2]);return e in Bo?Math.abs(n-qo(Math.max(_(t[0]),_(t[1]))))+ +("e"!==e):n-2*("%"===e)}(a[8],r)),n=a.join("")}else n=",."+qo(r[2])+"f";return i.format(n)}i.scale.linear=function(){return Lo([0,1],[0,1],oi,!1)};var Bo={s:1,g:1,p:1,r:1,e:1};function qo(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function zo(e,t,n,r){function a(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function s(t){return e(a(t))}return s.invert=function(t){return o(e.invert(t))},s.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(a)),s):r},s.base=function(n){return arguments.length?(t=+n,e.domain(r.map(a)),s):t},s.nice=function(){var t=No(r.map(a),n?Math:Ho);return e.domain(t),r=t.map(o),s},s.ticks=function(){var e=So(r),i=[],s=e[0],u=e[1],l=Math.floor(a(s)),c=Math.ceil(a(u)),f=t%1?2:t;if(isFinite(c-l)){if(n){for(;l<c;l++)for(var h=1;h<f;h++)i.push(o(l)*h);i.push(o(l))}else for(i.push(o(l));l++<c;)for(h=f-1;h>0;h--)i.push(o(l)*h);for(l=0;i[l]<s;l++);for(c=i.length;i[c-1]>u;c--);i=i.slice(l,c)}return i},s.tickFormat=function(e,n){if(!arguments.length)return Uo;arguments.length<2?n=Uo:"function"!=typeof n&&(n=i.format(n));var r=Math.max(1,t*e/s.ticks().length);return function(e){var i=e/o(Math.round(a(e)));return i*t<t-.5&&(i*=t),i<=r?n(e):""}},s.copy=function(){return zo(e.copy(),t,n,r)},Po(s,e)}i.scale.log=function(){return zo(i.scale.linear().domain([0,1]),10,!0,[1,10])};var Uo=i.format(".0e"),Ho={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Wo(e,t,n){var r=Go(t),a=Go(1/t);function i(t){return e(r(t))}return i.invert=function(t){return a(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),i):n},i.ticks=function(e){return Do(n,e)},i.tickFormat=function(e,t){return Ro(n,e,t)},i.nice=function(e){return i.domain(Io(n,e))},i.exponent=function(o){return arguments.length?(r=Go(t=o),a=Go(1/t),e.domain(n.map(r)),i):t},i.copy=function(){return Wo(e.copy(),t,n)},Po(i,e)}function Go(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Vo(e,t){var n,r,a;function o(a){return r[((n.get(a)||("range"===t.t?n.set(a,e.push(a)):NaN))-1)%r.length]}function s(t,n){return i.range(e.length).map((function(e){return t+n*e}))}return o.domain=function(r){if(!arguments.length)return e;e=[],n=new M;for(var a,i=-1,s=r.length;++i<s;)n.has(a=r[i])||n.set(a,e.push(a));return o[t.t].apply(o,t.a)},o.range=function(e){return arguments.length?(r=e,a=0,t={t:"range",a:arguments},o):r},o.rangePoints=function(n,i){arguments.length<2&&(i=0);var u=n[0],l=n[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+i);return r=s(u+c*i/2,c),a=0,t={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(n,i){arguments.length<2&&(i=0);var u=n[0],l=n[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+i)|0;return r=s(u+Math.round(c*i/2+(l-u-(e.length-1+i)*c)/2),c),a=0,t={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(n,i,u){arguments.length<2&&(i=0),arguments.length<3&&(u=i);var l=n[1]<n[0],c=n[l-0],f=n[1-l],h=(f-c)/(e.length-i+2*u);return r=s(c+h*u,h),l&&r.reverse(),a=h*(1-i),t={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(n,i,u){arguments.length<2&&(i=0),arguments.length<3&&(u=i);var l=n[1]<n[0],c=n[l-0],f=n[1-l],h=Math.floor((f-c)/(e.length-i+2*u));return r=s(c+Math.round((f-c-(e.length-i)*h)/2),h),l&&r.reverse(),a=Math.round(h*(1-i)),t={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return a},o.rangeExtent=function(){return So(t.a[0])},o.copy=function(){return Vo(e,t)},o.domain(e)}i.scale.pow=function(){return Wo(i.scale.linear(),1,[0,1])},i.scale.sqrt=function(){return i.scale.pow().exponent(.5)},i.scale.ordinal=function(){return Vo([],{t:"range",a:[[]]})},i.scale.category10=function(){return i.scale.ordinal().range(Ko)},i.scale.category20=function(){return i.scale.ordinal().range($o)},i.scale.category20b=function(){return i.scale.ordinal().range(Yo)},i.scale.category20c=function(){return i.scale.ordinal().range(Jo)};var Ko=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ft),$o=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ft),Yo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ft),Jo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ft);function Xo(e,t){var n;function r(){var r=0,o=t.length;for(n=[];++r<o;)n[r-1]=i.quantile(e,r/o);return a}function a(e){if(!isNaN(e=+e))return t[i.bisect(n,e)]}return a.domain=function(t){return arguments.length?(e=t.map(m).filter(b).sort(v),r()):e},a.range=function(e){return arguments.length?(t=e,r()):t},a.quantiles=function(){return n},a.invertExtent=function(r){return(r=t.indexOf(r))<0?[NaN,NaN]:[r>0?n[r-1]:e[0],r<n.length?n[r]:e[e.length-1]]},a.copy=function(){return Xo(e,t)},r()}function Qo(e,t,n){var r,a;function i(t){return n[Math.max(0,Math.min(a,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),a=n.length-1,i}return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},i.range=function(e){return arguments.length?(n=e,o()):n},i.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/r+e,t+1/r]},i.copy=function(){return Qo(e,t,n)},o()}function Zo(e,t){function n(n){if(n<=n)return t[i.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return Zo(e,t)},n}function es(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Do(e,t)},t.tickFormat=function(t,n){return Ro(e,t,n)},t.copy=function(){return es(e)},t}function ts(){return 0}i.scale.quantile=function(){return Xo([],[])},i.scale.quantize=function(){return Qo(0,1,[0,1])},i.scale.threshold=function(){return Zo([.5],[0,1])},i.scale.identity=function(){return es([0,1])},i.svg={},i.svg.arc=function(){var e=rs,t=as,n=ts,r=ns,a=is,i=os,o=ss;function s(){var s=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+t.apply(this,arguments)),c=a.apply(this,arguments)-Le,f=i.apply(this,arguments)-Le,h=Math.abs(f-c),p=c>f?0:1;if(l<s&&(d=l,l=s,s=d),h>=Ae)return u(l,p)+(s?u(s,1-p):"")+"Z";var d,g,v,m,b,y,x,k,_,w,j,M,S=0,O=0,E=[];if((m=(+o.apply(this,arguments)||0)/2)&&(v=r===ns?Math.sqrt(s*s+l*l):+r.apply(this,arguments),p||(O*=-1),l&&(O=Be(v/l*Math.sin(m))),s&&(S=Be(v/s*Math.sin(m)))),l){b=l*Math.cos(c+O),y=l*Math.sin(c+O),x=l*Math.cos(f-O),k=l*Math.sin(f-O);var N=Math.abs(f-c-2*O)<=Ce?0:1;if(O&&us(b,y,x,k)===p^N){var C=(c+f)/2;b=l*Math.cos(C),y=l*Math.sin(C),x=k=null}}else b=y=0;if(s){_=s*Math.cos(f-S),w=s*Math.sin(f-S),j=s*Math.cos(c+S),M=s*Math.sin(c+S);var T=Math.abs(c-f+2*S)<=Ce?0:1;if(S&&us(_,w,j,M)===1-p^T){var A=(c+f)/2;_=s*Math.cos(A),w=s*Math.sin(A),j=M=null}}else _=w=0;if(h>Ee&&(d=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){g=s<l^p?0:1;var L=d,P=d;if(h<Ce){var I=null==j?[_,w]:null==x?[b,y]:ga([b,y],[j,M],[x,k],[_,w]),F=b-I[0],D=y-I[1],R=x-I[0],B=k-I[1],q=1/Math.sin(Math.acos((F*R+D*B)/(Math.sqrt(F*F+D*D)*Math.sqrt(R*R+B*B)))/2),z=Math.sqrt(I[0]*I[0]+I[1]*I[1]);P=Math.min(d,(s-z)/(q-1)),L=Math.min(d,(l-z)/(q+1))}if(null!=x){var U=ls(null==j?[_,w]:[j,M],[b,y],l,L,p),H=ls([x,k],[_,w],l,L,p);d===L?E.push("M",U[0],"A",L,",",L," 0 0,",g," ",U[1],"A",l,",",l," 0 ",1-p^us(U[1][0],U[1][1],H[1][0],H[1][1]),",",p," ",H[1],"A",L,",",L," 0 0,",g," ",H[0]):E.push("M",U[0],"A",L,",",L," 0 1,",g," ",H[0])}else E.push("M",b,",",y);if(null!=j){var W=ls([b,y],[j,M],s,-P,p),G=ls([_,w],null==x?[b,y]:[x,k],s,-P,p);d===P?E.push("L",G[0],"A",P,",",P," 0 0,",g," ",G[1],"A",s,",",s," 0 ",p^us(G[1][0],G[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",P,",",P," 0 0,",g," ",W[0]):E.push("L",G[0],"A",P,",",P," 0 0,",g," ",W[0])}else E.push("L",_,",",w)}else E.push("M",b,",",y),null!=x&&E.push("A",l,",",l," 0 ",N,",",p," ",x,",",k),E.push("L",_,",",w),null!=j&&E.push("A",s,",",s," 0 ",T,",",1-p," ",j,",",M);return E.push("Z"),E.join("")}function u(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=xt(t),s):e},s.outerRadius=function(e){return arguments.length?(t=xt(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=xt(e),s):n},s.padRadius=function(e){return arguments.length?(r=e==ns?ns:xt(e),s):r},s.startAngle=function(e){return arguments.length?(a=xt(e),s):a},s.endAngle=function(e){return arguments.length?(i=xt(e),s):i},s.padAngle=function(e){return arguments.length?(o=xt(e),s):o},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-Le;return[Math.cos(r)*n,Math.sin(r)*n]},s};var ns="auto";function rs(e){return e.innerRadius}function as(e){return e.outerRadius}function is(e){return e.startAngle}function os(e){return e.endAngle}function ss(e){return e&&e.padAngle}function us(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function ls(e,t,n,r,a){var i=e[0]-t[0],o=e[1]-t[1],s=(a?r:-r)/Math.sqrt(i*i+o*o),u=s*o,l=-s*i,c=e[0]+u,f=e[1]+l,h=t[0]+u,p=t[1]+l,d=(c+h)/2,g=(f+p)/2,v=h-c,m=p-f,b=v*v+m*m,y=n-r,x=c*p-h*f,k=(m<0?-1:1)*Math.sqrt(Math.max(0,y*y*b-x*x)),_=(x*m-v*k)/b,w=(-x*v-m*k)/b,j=(x*m+v*k)/b,M=(-x*v+m*k)/b,S=_-d,O=w-g,E=j-d,N=M-g;return S*S+O*O>E*E+N*N&&(_=j,w=M),[[_-u,w-l],[_*n/y,w*n/y]]}function cs(e){var t=la,n=ca,r=Zn,a=hs,i=a.key,o=.7;function s(i){var s,u=[],l=[],c=-1,f=i.length,h=xt(t),p=xt(n);function d(){u.push("M",a(e(l),o))}for(;++c<f;)r.call(this,s=i[c],c)?l.push([+h.call(this,s,c),+p.call(this,s,c)]):l.length&&(d(),l=[]);return l.length&&d(),u.length?u.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(r=e,s):r},s.interpolate=function(e){return arguments.length?(i="function"==typeof e?a=e:(a=fs.get(e)||hs).key,s):i},s.tension=function(e){return arguments.length?(o=e,s):o},s}i.svg.line=function(){return cs(P)};var fs=i.map({linear:hs,"linear-closed":ps,step:function(e){var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];for(;++t<n;)a.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);n>1&&a.push("H",r[0]);return a.join("")},"step-before":ds,"step-after":gs,basis:bs,"basis-open":function(e){if(e.length<4)return hs(e);var t,n=[],r=-1,a=e.length,i=[0],o=[0];for(;++r<3;)t=e[r],i.push(t[0]),o.push(t[1]);n.push(ys(_s,i)+","+ys(_s,o)),--r;for(;++r<a;)t=e[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),ws(n,i,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,a=e.length,i=a+4,o=[],s=[];for(;++r<4;)n=e[r%a],o.push(n[0]),s.push(n[1]);t=[ys(_s,o),",",ys(_s,s)],--r;for(;++r<i;)n=e[r%a],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),ws(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,a,i=e[0][0],o=e[0][1],s=e[n][0]-i,u=e[n][1]-o,l=-1;++l<=n;)r=e[l],a=l/n,r[0]=t*r[0]+(1-t)*(i+a*s),r[1]=t*r[1]+(1-t)*(o+a*u);return bs(e)},cardinal:function(e,t){return e.length<3?hs(e):e[0]+vs(e,ms(e,t))},"cardinal-open":function(e,t){return e.length<4?hs(e):e[1]+vs(e.slice(1,-1),ms(e,t))},"cardinal-closed":function(e,t){return e.length<3?ps(e):e[0]+vs((e.push(e[0]),e),ms([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?hs(e):e[0]+vs(e,function(e){var t,n,r,a,i=[],o=function(e){var t=0,n=e.length-1,r=[],a=e[0],i=e[1],o=r[0]=js(a,i);for(;++t<n;)r[t]=(o+(o=js(a=i,i=e[t+1])))/2;return r[t]=o,r}(e),s=-1,u=e.length-1;for(;++s<u;)t=js(e[s],e[s+1]),_(t)<Ee?o[s]=o[s+1]=0:(a=(n=o[s]/t)*n+(r=o[s+1]/t)*r)>9&&(a=3*t/Math.sqrt(a),o[s]=a*n,o[s+1]=a*r);s=-1;for(;++s<=u;)a=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),i.push([a||0,o[s]*a||0]);return i}(e))}});function hs(e){return e.length>1?e.join("L"):e+"Z"}function ps(e){return e.join("L")+"Z"}function ds(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("V",(r=e[t])[1],"H",r[0]);return a.join("")}function gs(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("H",(r=e[t])[0],"V",r[1]);return a.join("")}function vs(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return hs(e);var n=e.length!=t.length,r="",a=e[0],i=e[1],o=t[0],s=o,u=1;if(n&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=e[1],u=2),t.length>1){s=t[1],i=e[u],u++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var l=2;l<t.length;l++,u++)i=e[u],s=t[l],r+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}if(n){var c=e[u];r+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function ms(e,t){for(var n,r=[],a=(1-t)/2,i=e[0],o=e[1],s=1,u=e.length;++s<u;)n=i,i=o,o=e[s],r.push([a*(o[0]-n[0]),a*(o[1]-n[1])]);return r}function bs(e){if(e.length<3)return hs(e);var t=1,n=e.length,r=e[0],a=r[0],i=r[1],o=[a,a,a,(r=e[1])[0]],s=[i,i,i,r[1]],u=[a,",",i,"L",ys(_s,o),",",ys(_s,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),ws(u,o,s);return e.pop(),u.push("L",r),u.join("")}function ys(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}fs.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var xs=[0,2/3,1/3,0],ks=[0,1/3,2/3,0],_s=[0,1/6,2/3,1/6];function ws(e,t,n){e.push("C",ys(xs,t),",",ys(xs,n),",",ys(ks,t),",",ys(ks,n),",",ys(_s,t),",",ys(_s,n))}function js(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Ms(e){for(var t,n,r,a=-1,i=e.length;++a<i;)n=(t=e[a])[0],r=t[1]-Le,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Ss(e){var t=la,n=la,r=0,a=ca,i=Zn,o=hs,s=o.key,u=o,l="L",c=.7;function f(s){var f,h,p,d=[],g=[],v=[],m=-1,b=s.length,y=xt(t),x=xt(r),k=t===n?function(){return h}:xt(n),_=r===a?function(){return p}:xt(a);function w(){d.push("M",o(e(v),c),l,u(e(g.reverse()),c),"Z")}for(;++m<b;)i.call(this,f=s[m],m)?(g.push([h=+y.call(this,f,m),p=+x.call(this,f,m)]),v.push([+k.call(this,f,m),+_.call(this,f,m)])):g.length&&(w(),g=[],v=[]);return g.length&&w(),d.length?d.join(""):null}return f.x=function(e){return arguments.length?(t=n=e,f):n},f.x0=function(e){return arguments.length?(t=e,f):t},f.x1=function(e){return arguments.length?(n=e,f):n},f.y=function(e){return arguments.length?(r=a=e,f):a},f.y0=function(e){return arguments.length?(r=e,f):r},f.y1=function(e){return arguments.length?(a=e,f):a},f.defined=function(e){return arguments.length?(i=e,f):i},f.interpolate=function(e){return arguments.length?(s="function"==typeof e?o=e:(o=fs.get(e)||hs).key,u=o.reverse||o,l=o.closed?"M":"L",f):s},f.tension=function(e){return arguments.length?(c=e,f):c},f}function Os(e){return e.radius}function Es(e){return[e.x,e.y]}function Ns(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Le;return[n*Math.cos(r),n*Math.sin(r)]}}function Cs(){return 64}function Ts(){return"circle"}function As(e){var t=Math.sqrt(e/Ce);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}i.svg.line.radial=function(){var e=cs(Ms);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},ds.reverse=gs,gs.reverse=ds,i.svg.area=function(){return Ss(P)},i.svg.area.radial=function(){var e=Ss(Ms);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},i.svg.chord=function(){var e=Yr,t=Jr,n=Os,r=is,a=os;function i(n,r){var a,i,l=o(this,e,n,r),c=o(this,t,n,r);return"M"+l.p0+s(l.r,l.p1,l.a1-l.a0)+(i=c,((a=l).a0==i.a0&&a.a1==i.a1?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z")}function o(e,t,i,o){var s=t.call(e,i,o),u=n.call(e,s,o),l=r.call(e,s,o)-Le,c=a.call(e,s,o)-Le;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ce)+",1 "+t}function u(e,t,n,r){return"Q 0,0 "+r}return i.radius=function(e){return arguments.length?(n=xt(e),i):n},i.source=function(t){return arguments.length?(e=xt(t),i):e},i.target=function(e){return arguments.length?(t=xt(e),i):t},i.startAngle=function(e){return arguments.length?(r=xt(e),i):r},i.endAngle=function(e){return arguments.length?(a=xt(e),i):a},i},i.svg.diagonal=function(){var e=Yr,t=Jr,n=Es;function r(r,a){var i=e.call(this,r,a),o=t.call(this,r,a),s=(i.y+o.y)/2,u=[i,{x:i.x,y:s},{x:o.x,y:s},o];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(t){return arguments.length?(e=xt(t),r):e},r.target=function(e){return arguments.length?(t=xt(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},i.svg.diagonal.radial=function(){var e=i.svg.diagonal(),t=Es,n=e.projection;return e.projection=function(e){return arguments.length?n(Ns(t=e)):t},e},i.svg.symbol=function(){var e=Ts,t=Cs;function n(n,r){return(Ls.get(e.call(this,n,r))||As)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=xt(t),n):e},n.size=function(e){return arguments.length?(t=xt(e),n):t},n};var Ls=i.map({circle:As,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Is)),n=t*Is;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ps),n=t*Ps/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ps),n=t*Ps/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});i.svg.symbolTypes=Ls.keys();var Ps=Math.sqrt(3),Is=Math.tan(30*Pe);J.transition=function(e){for(var t,n,r=Bs||++Us,a=Gs(e),i=[],o=qs||{time:Date.now(),ease:vi,delay:0,duration:250},s=-1,u=this.length;++s<u;){i.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&Vs(n,c,a,r,o),t.push(n)}return Rs(i,a,r)},J.interrupt=function(e){return this.each(null==e?Fs:Ds(Gs(e)))};var Fs=Ds(Gs());function Ds(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Rs(e,t,n){return G(e,zs),e.namespace=t,e.id=n,e}var Bs,qs,zs=[],Us=0;function Hs(e,t,n,r){var a=e.id,i=e.namespace;return de(e,"function"==typeof n?function(e,o,s){e[i][a].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[i][a].tween.set(t,n)}))}function Ws(e){return null==e&&(e=""),function(){this.textContent=e}}function Gs(e){return null==e?"__transition__":"__transition_"+e+"__"}function Vs(e,t,n,r,a){var i,o,s,u,l,c=e[n]||(e[n]={active:0,count:0}),f=c[r];function h(n){var a=c.active,h=c[a];for(var d in h&&(h.timer.c=null,h.timer.t=NaN,--c.count,delete c[a],h.event&&h.event.interrupt.call(e,e.__data__,h.index)),c)if(+d<r){var g=c[d];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[d]}o.c=p,Et((function(){return o.c&&p(n||1)&&(o.c=null,o.t=NaN),1}),0,i),c.active=r,f.event&&f.event.start.call(e,e.__data__,t),l=[],f.tween.forEach((function(n,r){(r=r.call(e,e.__data__,t))&&l.push(r)})),u=f.ease,s=f.duration}function p(a){for(var i=a/s,o=u(i),h=l.length;h>0;)l[--h].call(e,o);if(i>=1)return f.event&&f.event.end.call(e,e.__data__,t),--c.count?delete c[r]:delete e[n],1}f||(i=a.time,o=Et((function(e){var t=f.delay;if(o.t=t+i,t<=e)return h(e-t);o.c=h}),0,i),f=c[r]={tween:new M,time:i,timer:o,delay:a.delay,duration:a.duration,ease:a.ease,index:t},a=null,++c.count)}zs.call=J.call,zs.empty=J.empty,zs.node=J.node,zs.size=J.size,i.transition=function(e,t){return e&&e.transition?Bs?e.transition(t):e:i.selection().transition(e)},i.transition.prototype=zs,zs.select=function(e){var t,n,r,a=this.id,i=this.namespace,o=[];e=X(e);for(var s=-1,u=this.length;++s<u;){o.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Vs(n,c,i,a,r[i][a]),t.push(n)):t.push(null)}return Rs(o,i,a)},zs.selectAll=function(e){var t,n,r,a,i,o=this.id,s=this.namespace,u=[];e=Q(e);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],h=-1,p=f.length;++h<p;)if(r=f[h]){i=r[s][o],n=e.call(r,r.__data__,h,l),u.push(t=[]);for(var d=-1,g=n.length;++d<g;)(a=n[d])&&Vs(a,d,s,o,i),t.push(a)}return Rs(u,s,o)},zs.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=he(e));for(var a=0,i=this.length;a<i;a++){r.push(t=[]);for(var o,s=0,u=(o=this[a]).length;s<u;s++)(n=o[s])&&e.call(n,n.__data__,s,a)&&t.push(n)}return Rs(r,this.namespace,this.id)},zs.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):de(this,null==t?function(t){t[r][n].tween.remove(e)}:function(a){a[r][n].tween.set(e,t)})},zs.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n="transform"==e?Oi:oi,r=i.ns.qualify(e);function a(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}function s(e){return null==e?a:(e+="",function(){var t,a=this.getAttribute(r);return a!==e&&(t=n(a,e),function(e){this.setAttribute(r,t(e))})})}function u(e){return null==e?o:(e+="",function(){var t,a=this.getAttributeNS(r.space,r.local);return a!==e&&(t=n(a,e),function(e){this.setAttributeNS(r.space,r.local,t(e))})})}return Hs(this,"attr."+e,t,r.local?u:s)},zs.attrTween=function(e,t){var n=i.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,r){var a=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return a&&function(e){this.setAttributeNS(n.space,n.local,a(e))}}:function(e,r){var a=t.call(this,e,r,this.getAttribute(n));return a&&function(e){this.setAttribute(n,a(e))}})},zs.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function a(){this.style.removeProperty(e)}function i(t){return null==t?a:(t+="",function(){var r,a=c(this).getComputedStyle(this,null).getPropertyValue(e);return a!==t&&(r=oi(a,t),function(t){this.style.setProperty(e,r(t),n)})})}return Hs(this,"style."+e,t,i)},zs.styleTween=function(e,t,n){function r(r,a){var i=t.call(this,r,a,c(this).getComputedStyle(this,null).getPropertyValue(e));return i&&function(t){this.style.setProperty(e,i(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},zs.text=function(e){return Hs(this,"text",e,Ws)},zs.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)}))},zs.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=i.ease.apply(i,arguments)),de(this,(function(r){r[n][t].ease=e})))},zs.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:de(this,"function"==typeof e?function(r,a,i){r[n][t].delay=+e.call(r,r.__data__,a,i)}:(e=+e,function(r){r[n][t].delay=e}))},zs.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:de(this,"function"==typeof e?function(r,a,i){r[n][t].duration=Math.max(1,e.call(r,r.__data__,a,i))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},zs.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var a=qs,o=Bs;try{Bs=n,de(this,(function(t,a,i){qs=t[r][n],e.call(t,t.__data__,a,i)}))}finally{qs=a,Bs=o}}else de(this,(function(a){var o=a[r][n];(o.event||(o.event=i.dispatch("start","end","interrupt"))).on(e,t)}));return this},zs.transition=function(){for(var e,t,n,r=this.id,a=++Us,i=this.namespace,o=[],s=0,u=this.length;s<u;s++){o.push(e=[]);for(var l,c=0,f=(l=this[s]).length;c<f;c++)(t=l[c])&&Vs(t,c,i,a,{time:(n=t[i][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Rs(o,i,a)},i.svg.axis=function(){var e,t=i.scale.linear(),n=Ks,r=6,a=6,o=3,u=[10],l=null;function c(s){s.each((function(){var s,c=i.select(this),f=this.__chart__||t,h=this.__chart__=t.copy(),p=null==l?h.ticks?h.ticks.apply(h,u):h.domain():l,d=null==e?h.tickFormat?h.tickFormat.apply(h,u):P:e,g=c.selectAll(".tick").data(p,h),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Ee),m=i.transition(g.exit()).style("opacity",Ee).remove(),b=i.transition(g.order()).style("opacity",1),y=Math.max(r,0)+o,x=Oo(h),k=c.selectAll(".domain").data([0]),_=(k.enter().append("path").attr("class","domain"),i.transition(k));v.append("line"),v.append("text");var w,j,M,S,O=v.select("line"),E=b.select("line"),N=g.select("text").text(d),C=v.select("text"),T=b.select("text"),A="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=Ys,w="x",M="y",j="x2",S="y2",N.attr("dy",A<0?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+A*a+"V0H"+x[1]+"V"+A*a)):(s=Js,w="y",M="x",j="y2",S="x2",N.attr("dy",".32em").style("text-anchor",A<0?"end":"start"),_.attr("d","M"+A*a+","+x[0]+"H0V"+x[1]+"H"+A*a)),O.attr(S,A*r),C.attr(M,A*y),E.attr(j,0).attr(S,A*r),T.attr(w,0).attr(M,A*y),h.rangeBand){var L=h,I=L.rangeBand()/2;f=h=function(e){return L(e)+I}}else f.rangeBand?f=h:m.call(s,h,f);v.call(s,f,h),b.call(s,h,h)}))}return c.scale=function(e){return arguments.length?(t=e,c):t},c.orient=function(e){return arguments.length?(n=e in $s?e+"":Ks,c):n},c.ticks=function(){return arguments.length?(u=s(arguments),c):u},c.tickValues=function(e){return arguments.length?(l=e,c):l},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(e){var t=arguments.length;return t?(r=+e,a=+arguments[t-1],c):r},c.innerTickSize=function(e){return arguments.length?(r=+e,c):r},c.outerTickSize=function(e){return arguments.length?(a=+e,c):a},c.tickPadding=function(e){return arguments.length?(o=+e,c):o},c.tickSubdivide=function(){return arguments.length&&c},c};var Ks="bottom",$s={top:1,right:1,bottom:1,left:1};function Ys(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"}))}function Js(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"}))}i.svg.brush=function(){var e,t,n=H(h,"brushstart","brush","brushend"),r=null,a=null,o=[0,0],s=[0,0],u=!0,l=!0,f=Qs[0];function h(e){e.each((function(){var e=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(f,P);n.exit().remove(),n.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return Xs[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var o,s=i.transition(e),u=i.transition(t);r&&(o=Oo(r),u.attr("x",o[0]).attr("width",o[1]-o[0]),d(s)),a&&(o=Oo(a),u.attr("y",o[0]).attr("height",o[1]-o[0]),g(s)),p(s)}))}function p(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+o[+/e$/.test(e)]+","+s[+/^s/.test(e)]+")"}))}function d(e){e.select(".extent").attr("x",o[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function g(e){e.select(".extent").attr("y",s[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function v(){var f,v,m=this,b=i.select(i.event.target),y=n.of(m,arguments),x=i.select(m),k=b.datum(),_=!/^(n|s)$/.test(k)&&r,w=!/^(e|w)$/.test(k)&&a,j=b.classed("extent"),M=je(m),S=i.mouse(m),O=i.select(c(m)).on("keydown.brush",C).on("keyup.brush",T);if(i.event.changedTouches?O.on("touchmove.brush",A).on("touchend.brush",P):O.on("mousemove.brush",A).on("mouseup.brush",P),x.interrupt().selectAll("*").interrupt(),j)S[0]=o[0]-S[0],S[1]=s[0]-S[1];else if(k){var E=+/w$/.test(k),N=+/^n/.test(k);v=[o[1-E]-S[0],s[1-N]-S[1]],S[0]=o[E],S[1]=s[N]}else i.event.altKey&&(f=S.slice());function C(){32==i.event.keyCode&&(j||(f=null,S[0]-=o[1],S[1]-=s[1],j=2),z())}function T(){32==i.event.keyCode&&2==j&&(S[0]+=o[1],S[1]+=s[1],j=0,z())}function A(){var e=i.mouse(m),t=!1;v&&(e[0]+=v[0],e[1]+=v[1]),j||(i.event.altKey?(f||(f=[(o[0]+o[1])/2,(s[0]+s[1])/2]),S[0]=o[+(e[0]<f[0])],S[1]=s[+(e[1]<f[1])]):f=null),_&&L(e,r,0)&&(d(x),t=!0),w&&L(e,a,1)&&(g(x),t=!0),t&&(p(x),y({type:"brush",mode:j?"move":"resize"}))}function L(n,r,a){var i,c,h=Oo(r),p=h[0],d=h[1],g=S[a],v=a?s:o,m=v[1]-v[0];if(j&&(p-=g,d-=m+g),i=(a?l:u)?Math.max(p,Math.min(d,n[a])):n[a],j?c=(i+=g)+m:(f&&(g=Math.max(p,Math.min(d,2*f[a]-i))),g<i?(c=i,i=g):c=g),v[0]!=i||v[1]!=c)return a?t=null:e=null,v[0]=i,v[1]=c,!0}function P(){A(),x.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),i.select("body").style("cursor",null),O.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M(),y({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),i.select("body").style("cursor",b.style("cursor")),y({type:"brushstart"}),A()}return h.event=function(r){r.each((function(){var r=n.of(this,arguments),a={x:o,y:s,i:e,j:t},u=this.__chart__||a;this.__chart__=a,Bs?i.select(this).transition().each("start.brush",(function(){e=u.i,t=u.j,o=u.x,s=u.y,r({type:"brushstart"})})).tween("brush:brush",(function(){var n=si(o,a.x),i=si(s,a.y);return e=t=null,function(e){o=a.x=n(e),s=a.y=i(e),r({type:"brush",mode:"resize"})}})).each("end.brush",(function(){e=a.i,t=a.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})})):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))}))},h.x=function(e){return arguments.length?(f=Qs[!(r=e)<<1|!a],h):r},h.y=function(e){return arguments.length?(f=Qs[!r<<1|!(a=e)],h):a},h.clamp=function(e){return arguments.length?(r&&a?(u=!!e[0],l=!!e[1]):r?u=!!e:a&&(l=!!e),h):r&&a?[u,l]:r?u:a?l:null},h.extent=function(n){var i,u,l,c,f;return arguments.length?(r&&(i=n[0],u=n[1],a&&(i=i[0],u=u[0]),e=[i,u],r.invert&&(i=r(i),u=r(u)),u<i&&(f=i,i=u,u=f),i==o[0]&&u==o[1]||(o=[i,u])),a&&(l=n[0],c=n[1],r&&(l=l[1],c=c[1]),t=[l,c],a.invert&&(l=a(l),c=a(c)),c<l&&(f=l,l=c,c=f),l==s[0]&&c==s[1]||(s=[l,c])),h):(r&&(e?(i=e[0],u=e[1]):(i=o[0],u=o[1],r.invert&&(i=r.invert(i),u=r.invert(u)),u<i&&(f=i,i=u,u=f))),a&&(t?(l=t[0],c=t[1]):(l=s[0],c=s[1],a.invert&&(l=a.invert(l),c=a.invert(c)),c<l&&(f=l,l=c,c=f))),r&&a?[[i,l],[u,c]]:r?[i,u]:a&&[l,c])},h.clear=function(){return h.empty()||(o=[0,0],s=[0,0],e=t=null),h},h.empty=function(){return!!r&&o[0]==o[1]||!!a&&s[0]==s[1]},i.rebind(h,n,"on")};var Xs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Zs=Rt.format=dn.timeFormat,eu=Zs.utc,tu=eu("%Y-%m-%dT%H:%M:%S.%LZ");function nu(e){return e.toISOString()}function ru(e,t,n){function r(t){return e(t)}function a(e,n){var r=(e[1]-e[0])/n,a=i.bisect(iu,r);return a==iu.length?[t.year,Fo(e.map((function(e){return e/31536e6})),n)[2]]:a?t[r/iu[a-1]<iu[a]/r?a-1:a]:[uu,Fo(e,n)[2]]}return r.invert=function(t){return au(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(au)},r.nice=function(e,t){var n=r.domain(),i=So(n),o=null==e?a(i,10):"number"==typeof e&&a(i,e);function s(n){return!isNaN(n)&&!e.range(n,au(+n+1),t).length}return o&&(e=o[0],t=o[1]),r.domain(No(n,t>1?{floor:function(t){for(;s(t=e.floor(t));)t=au(t-1);return t},ceil:function(t){for(;s(t=e.ceil(t));)t=au(+t+1);return t}}:e))},r.ticks=function(e,t){var n=So(r.domain()),i=null==e?a(n,10):"number"==typeof e?a(n,e):!e.range&&[{range:e},t];return i&&(e=i[0],t=i[1]),e.range(n[0],au(+n[1]+1),t<1?1:t)},r.tickFormat=function(){return n},r.copy=function(){return ru(e.copy(),t,n)},Po(r,e)}function au(e){return new Date(e)}Zs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?nu:tu,nu.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},nu.toString=tu.toString,Rt.second=Ut((function(e){return new Bt(1e3*Math.floor(e/1e3))}),(function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))}),(function(e){return e.getSeconds()})),Rt.seconds=Rt.second.range,Rt.seconds.utc=Rt.second.utc.range,Rt.minute=Ut((function(e){return new Bt(6e4*Math.floor(e/6e4))}),(function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))}),(function(e){return e.getMinutes()})),Rt.minutes=Rt.minute.range,Rt.minutes.utc=Rt.minute.utc.range,Rt.hour=Ut((function(e){var t=e.getTimezoneOffset()/60;return new Bt(36e5*(Math.floor(e/36e5-t)+t))}),(function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))}),(function(e){return e.getHours()})),Rt.hours=Rt.hour.range,Rt.hours.utc=Rt.hour.utc.range,Rt.month=Ut((function(e){return(e=Rt.day(e)).setDate(1),e}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e){return e.getMonth()})),Rt.months=Rt.month.range,Rt.months.utc=Rt.month.utc.range;var iu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ou=[[Rt.second,1],[Rt.second,5],[Rt.second,15],[Rt.second,30],[Rt.minute,1],[Rt.minute,5],[Rt.minute,15],[Rt.minute,30],[Rt.hour,1],[Rt.hour,3],[Rt.hour,6],[Rt.hour,12],[Rt.day,1],[Rt.day,2],[Rt.week,1],[Rt.month,1],[Rt.month,3],[Rt.year,1]],su=Zs.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Zn]]),uu={range:function(e,t,n){return i.range(Math.ceil(e/n)*n,+t,n).map(au)},floor:P,ceil:P};ou.year=Rt.year,Rt.scale=function(){return ru(i.scale.linear(),ou,su)};var lu=ou.map((function(e){return[e[0].utc,e[1]]})),cu=eu.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Zn]]);function fu(e){return JSON.parse(e.responseText)}function hu(e){var t=u.createRange();return t.selectNode(u.body),t.createContextualFragment(e.responseText)}lu.year=Rt.year.utc,Rt.scale.utc=function(){return ru(i.scale.linear(),lu,cu)},i.text=kt((function(e){return e.responseText})),i.json=function(e,t){return _t(e,"application/json",fu,t)},i.html=function(e,t){return _t(e,"text/html",hu,t)},i.xml=kt((function(e){return e.responseXML})),this.d3=i,void 0===(a="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=a)}()},function(e,t,n){e.exports=n(7)(6)},function(e,t,n){!function(e){"use strict";var t="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),n.hasOwnProperty(t)?{space:n[t],local:e}:e}function a(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===t&&n.documentElement.namespaceURI===t?n.createElement(e):n.createElementNS(r,e)}}function i(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o(e){var t=r(e);return(t.local?i:a)(t)}function s(){}function u(e){return null==e?s:function(){return this.querySelector(e)}}function l(e){"function"!=typeof e&&(e=u(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,s=t[a],l=s.length,c=r[a]=new Array(l),f=0;f<l;++f)(i=s[f])&&(o=e.call(i,i.__data__,f,s))&&("__data__"in i&&(o.__data__=i.__data__),c[f]=o);return new ze(r,this._parents)}function c(){return[]}function f(e){return null==e?c:function(){return this.querySelectorAll(e)}}function h(e){"function"!=typeof e&&(e=f(e));for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,s=t[i],u=s.length,l=0;l<u;++l)(o=s[l])&&(r.push(e.call(o,o.__data__,l,s)),a.push(o));return new ze(r,a)}function p(e){return function(){return this.matches(e)}}function d(e){"function"!=typeof e&&(e=p(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,u=r[a]=[],l=0;l<s;++l)(i=o[l])&&e.call(i,i.__data__,l,o)&&u.push(i);return new ze(r,this._parents)}function g(e){return new Array(e.length)}function v(){return new ze(this._enter||this._groups.map(g),this._parents)}function m(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function b(e){return function(){return e}}m.prototype={constructor:m,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var y="$";function x(e,t,n,r,a,i){for(var o,s=0,u=t.length,l=i.length;s<l;++s)(o=t[s])?(o.__data__=i[s],r[s]=o):n[s]=new m(e,i[s]);for(;s<u;++s)(o=t[s])&&(a[s]=o)}function k(e,t,n,r,a,i,o){var s,u,l,c={},f=t.length,h=i.length,p=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(p[s]=l=y+o.call(u,u.__data__,s,t),l in c?a[s]=u:c[l]=u);for(s=0;s<h;++s)(u=c[l=y+o.call(e,i[s],s,i)])?(r[s]=u,u.__data__=i[s],c[l]=null):n[s]=new m(e,i[s]);for(s=0;s<f;++s)(u=t[s])&&c[p[s]]===u&&(a[s]=u)}function _(e,t){if(!e)return p=new Array(this.size()),l=-1,this.each((function(e){p[++l]=e})),p;var n=t?k:x,r=this._parents,a=this._groups;"function"!=typeof e&&(e=b(e));for(var i=a.length,o=new Array(i),s=new Array(i),u=new Array(i),l=0;l<i;++l){var c=r[l],f=a[l],h=f.length,p=e.call(c,c&&c.__data__,l,r),d=p.length,g=s[l]=new Array(d),v=o[l]=new Array(d);n(c,f,g,v,u[l]=new Array(h),p,t);for(var m,y,_=0,w=0;_<d;++_)if(m=g[_]){for(_>=w&&(w=_+1);!(y=v[w])&&++w<d;);m._next=y||null}}return(o=new ze(o,r))._enter=s,o._exit=u,o}function w(){return new ze(this._exit||this._groups.map(g),this._parents)}function j(e,t,n){var r=this.enter(),a=this,i=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(a=t(a)),null==n?i.remove():n(i),r&&a?r.merge(a).order():a}function M(e){for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var u,l=t[s],c=n[s],f=l.length,h=o[s]=new Array(f),p=0;p<f;++p)(u=l[p]||c[p])&&(h[p]=u);for(;s<r;++s)o[s]=t[s];return new ze(o,this._parents)}function S(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this}function O(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=E);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,s=n[i],u=s.length,l=a[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(t)}return new ze(a,this._parents).order()}function E(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function N(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function C(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e}function T(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null}function A(){var e=0;return this.each((function(){++e})),e}function L(){return!this.node()}function P(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,s=i.length;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function I(e){return function(){this.removeAttribute(e)}}function F(e){return function(){this.removeAttributeNS(e.space,e.local)}}function D(e,t){return function(){this.setAttribute(e,t)}}function R(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function B(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function q(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function z(e,t){var n=r(e);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((null==t?n.local?F:I:"function"==typeof t?n.local?q:B:n.local?R:D)(n,t))}function U(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function H(e){return function(){this.style.removeProperty(e)}}function W(e,t,n){return function(){this.style.setProperty(e,t,n)}}function G(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function V(e,t,n){return arguments.length>1?this.each((null==t?H:"function"==typeof t?G:W)(e,t,null==n?"":n)):K(this.node(),e)}function K(e,t){return e.style.getPropertyValue(t)||U(e).getComputedStyle(e,null).getPropertyValue(t)}function $(e){return function(){delete this[e]}}function Y(e,t){return function(){this[e]=t}}function J(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function X(e,t){return arguments.length>1?this.each((null==t?$:"function"==typeof t?J:Y)(e,t)):this.node()[e]}function Q(e){return e.trim().split(/^|\s+/)}function Z(e){return e.classList||new ee(e)}function ee(e){this._node=e,this._names=Q(e.getAttribute("class")||"")}function te(e,t){for(var n=Z(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function ne(e,t){for(var n=Z(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function re(e){return function(){te(this,e)}}function ae(e){return function(){ne(this,e)}}function ie(e,t){return function(){(t.apply(this,arguments)?te:ne)(this,e)}}function oe(e,t){var n=Q(e+"");if(arguments.length<2){for(var r=Z(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?ie:t?re:ae)(n,t))}function se(){this.textContent=""}function ue(e){return function(){this.textContent=e}}function le(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ce(e){return arguments.length?this.each(null==e?se:("function"==typeof e?le:ue)(e)):this.node().textContent}function fe(){this.innerHTML=""}function he(e){return function(){this.innerHTML=e}}function pe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function de(e){return arguments.length?this.each(null==e?fe:("function"==typeof e?pe:he)(e)):this.node().innerHTML}function ge(){this.nextSibling&&this.parentNode.appendChild(this)}function ve(){return this.each(ge)}function me(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function be(){return this.each(me)}function ye(e){var t="function"==typeof e?e:o(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))}function xe(){return null}function ke(e,t){var n="function"==typeof e?e:o(e),r=null==t?xe:"function"==typeof t?t:u(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))}function _e(){var e=this.parentNode;e&&e.removeChild(this)}function we(){return this.each(_e)}function je(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Me(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Se(e){return this.select(e?Me:je)}function Oe(e){return arguments.length?this.property("__data__",e):this.node().__data__}ee.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Ee={};function Ne(e,t,n){return e=Ce(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function Ce(t,n,r){return function(a){var i=e.event;e.event=a;try{t.call(this,this.__data__,n,r)}finally{e.event=i}}}function Te(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Ae(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.capture);++a?t.length=a:delete this.__on}}}function Le(e,t,n){var r=Ee.hasOwnProperty(e.type)?Ne:Ce;return function(a,i,o){var s,u=this.__on,l=r(t,i,o);if(u)for(var c=0,f=u.length;c<f;++c)if((s=u[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=t);this.addEventListener(e.type,l,n),s={type:e.type,name:e.name,value:t,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function Pe(e,t,n){var r,a,i=Te(e+""),o=i.length;if(!(arguments.length<2)){for(s=t?Le:Ae,null==n&&(n=!1),r=0;r<o;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}function Ie(t,n,r,a){var i=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(r,a)}finally{e.event=i}}function Fe(e,t,n){var r=U(e),a=r.CustomEvent;"function"==typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function De(e,t){return function(){return Fe(this,e,t)}}function Re(e,t){return function(){return Fe(this,e,t.apply(this,arguments))}}function Be(e,t){return this.each(("function"==typeof t?Re:De)(e,t))}e.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Ee={mouseenter:"mouseover",mouseleave:"mouseout"}));var qe=[null];function ze(e,t){this._groups=e,this._parents=t}function Ue(){return new ze([[document.documentElement]],qe)}function He(e){return"string"==typeof e?new ze([[document.querySelector(e)]],[document.documentElement]):new ze([[e]],qe)}function We(e){return He(o(e).call(document.documentElement))}ze.prototype=Ue.prototype={constructor:ze,select:l,selectAll:h,filter:d,data:_,enter:v,exit:w,join:j,merge:M,order:S,sort:O,call:N,nodes:C,node:T,size:A,empty:L,each:P,attr:z,style:V,property:X,classed:oe,text:ce,html:de,raise:ve,lower:be,append:ye,insert:ke,remove:we,clone:Se,datum:Oe,on:Pe,dispatch:Be};var Ge=0;function Ve(){return new Ke}function Ke(){this._="@"+(++Ge).toString(36)}function $e(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n}function Ye(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function Je(e){var t=$e();return t.changedTouches&&(t=t.changedTouches[0]),Ye(e,t)}function Xe(e){return"string"==typeof e?new ze([document.querySelectorAll(e)],[document.documentElement]):new ze([null==e?[]:e],qe)}function Qe(e,t,n){arguments.length<3&&(n=t,t=$e().changedTouches);for(var r,a=0,i=t?t.length:0;a<i;++a)if((r=t[a]).identifier===n)return Ye(e,r);return null}function Ze(e,t){null==t&&(t=$e().touches);for(var n=0,r=t?t.length:0,a=new Array(r);n<r;++n)a[n]=Ye(e,t[n]);return a}Ke.prototype=Ve.prototype={constructor:Ke,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}},e.clientPoint=Ye,e.create=We,e.creator=o,e.customEvent=Ie,e.local=Ve,e.matcher=p,e.mouse=Je,e.namespace=r,e.namespaces=n,e.select=He,e.selectAll=Xe,e.selection=Ue,e.selector=u,e.selectorAll=f,e.style=K,e.touch=Qe,e.touches=Ze,e.window=U,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){!function(e){"use strict";function t(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function n(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function r(){}var a=.7,i=1/a,o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,c=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),f=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),h=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),p=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),d=new RegExp("^hsl\\("+[s,u,u]+"\\)$"),g=new RegExp("^hsla\\("+[s,u,u,s]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function m(){return this.rgb().formatHex()}function b(){return C(this).formatHsl()}function y(){return this.rgb().formatRgb()}function x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=l.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?k(t):3===n?new M(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?_(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=c.exec(e))?new M(t[1],t[2],t[3],1):(t=f.exec(e))?new M(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=h.exec(e))?_(t[1],t[2],t[3],t[4]):(t=p.exec(e))?_(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=d.exec(e))?N(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?N(t[1],t[2]/100,t[3]/100,t[4]):v.hasOwnProperty(e)?k(v[e]):"transparent"===e?new M(NaN,NaN,NaN,0):null}function k(e){return new M(e>>16&255,e>>8&255,255&e,1)}function _(e,t,n,r){return r<=0&&(e=t=n=NaN),new M(e,t,n,r)}function w(e){return e instanceof r||(e=x(e)),e?new M((e=e.rgb()).r,e.g,e.b,e.opacity):new M}function j(e,t,n,r){return 1===arguments.length?w(e):new M(e,t,n,null==r?1:r)}function M(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function S(){return"#"+E(this.r)+E(this.g)+E(this.b)}function O(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function E(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function N(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new A(e,t,n,r)}function C(e){if(e instanceof A)return new A(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=x(e)),!e)return new A;if(e instanceof A)return e;var t=(e=e.rgb()).r/255,n=e.g/255,a=e.b/255,i=Math.min(t,n,a),o=Math.max(t,n,a),s=NaN,u=o-i,l=(o+i)/2;return u?(s=t===o?(n-a)/u+6*(n<a):n===o?(a-t)/u+2:(t-n)/u+4,u/=l<.5?o+i:2-o-i,s*=60):u=l>0&&l<1?0:s,new A(s,u,l,e.opacity)}function T(e,t,n,r){return 1===arguments.length?C(e):new A(e,t,n,null==r?1:r)}function A(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function L(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}t(r,x,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:m,formatHex:m,formatHsl:b,formatRgb:y,toString:y}),t(M,j,n(r,{brighter:function(e){return e=null==e?i:Math.pow(i,e),new M(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?a:Math.pow(a,e),new M(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:O,toString:O})),t(A,T,n(r,{brighter:function(e){return e=null==e?i:Math.pow(i,e),new A(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?a:Math.pow(a,e),new A(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new M(L(e>=240?e-240:e+120,a,r),L(e,a,r),L(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var P=Math.PI/180,I=180/Math.PI,F=18,D=.96422,R=1,B=.82521,q=4/29,z=6/29,U=3*z*z,H=z*z*z;function W(e){if(e instanceof K)return new K(e.l,e.a,e.b,e.opacity);if(e instanceof te)return ne(e);e instanceof M||(e=w(e));var t,n,r=X(e.r),a=X(e.g),i=X(e.b),o=$((.2225045*r+.7168786*a+.0606169*i)/R);return r===a&&a===i?t=n=o:(t=$((.4360747*r+.3850649*a+.1430804*i)/D),n=$((.0139322*r+.0971045*a+.7141733*i)/B)),new K(116*o-16,500*(t-o),200*(o-n),e.opacity)}function G(e,t){return new K(e,0,0,null==t?1:t)}function V(e,t,n,r){return 1===arguments.length?W(e):new K(e,t,n,null==r?1:r)}function K(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function $(e){return e>H?Math.pow(e,1/3):e/U+q}function Y(e){return e>z?e*e*e:U*(e-q)}function J(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function X(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Q(e){if(e instanceof te)return new te(e.h,e.c,e.l,e.opacity);if(e instanceof K||(e=W(e)),0===e.a&&0===e.b)return new te(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*I;return new te(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Z(e,t,n,r){return 1===arguments.length?Q(e):new te(n,t,e,null==r?1:r)}function ee(e,t,n,r){return 1===arguments.length?Q(e):new te(e,t,n,null==r?1:r)}function te(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ne(e){if(isNaN(e.h))return new K(e.l,0,0,e.opacity);var t=e.h*P;return new K(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}t(K,V,n(r,{brighter:function(e){return new K(this.l+F*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new K(this.l-F*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new M(J(3.1338561*(t=D*Y(t))-1.6168667*(e=R*Y(e))-.4906146*(n=B*Y(n))),J(-.9787684*t+1.9161415*e+.033454*n),J(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),t(te,ee,n(r,{brighter:function(e){return new te(this.h,this.c,this.l+F*(null==e?1:e),this.opacity)},darker:function(e){return new te(this.h,this.c,this.l-F*(null==e?1:e),this.opacity)},rgb:function(){return ne(this).rgb()}}));var re=-.14861,ae=1.78277,ie=-.29227,oe=-.90649,se=1.97294,ue=se*oe,le=se*ae,ce=ae*ie-oe*re;function fe(e){if(e instanceof pe)return new pe(e.h,e.s,e.l,e.opacity);e instanceof M||(e=w(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(ce*r+ue*t-le*n)/(ce+ue-le),i=r-a,o=(se*(n-a)-ie*i)/oe,s=Math.sqrt(o*o+i*i)/(se*a*(1-a)),u=s?Math.atan2(o,i)*I-120:NaN;return new pe(u<0?u+360:u,s,a,e.opacity)}function he(e,t,n,r){return 1===arguments.length?fe(e):new pe(e,t,n,null==r?1:r)}function pe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}t(pe,he,n(r,{brighter:function(e){return e=null==e?i:Math.pow(i,e),new pe(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?a:Math.pow(a,e),new pe(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*P,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new M(255*(t+n*(re*r+ae*a)),255*(t+n*(ie*r+oe*a)),255*(t+n*(se*r)),this.opacity)}})),e.color=x,e.cubehelix=he,e.gray=G,e.hcl=ee,e.hsl=T,e.lab=V,e.lch=Z,e.rgb=j,Object.defineProperty(e,"__esModule",{value:!0})}(t)},,,,,,,,function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(67);case"v8light":return n(69)}},function(e,t,n){var r=n(34),a=n(68);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};r(a,i);e.exports=a.locals||{}},function(e,t,n){(t=n(35)(!1)).push([e.i,'.gphFormGroup--small{margin-bottom:8px}.gphColorPicker__color{margin:4px;cursor:pointer}.gphColorPicker__color:hover,.gphColorPicker__color:focus{transform:scale(1.4)}.gphNoUserSelect{-webkit-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent}.gphAppWrapper{display:flex;flex-direction:column;flex-grow:1}.gphGraph__bar{margin:8px}.gphSearchBar__datasourceButton{height:100% !important}.gphSearchBar__datasourceButtonTooltip{padding:0}.gphSourceModal{width:720px;min-height:530px}.gphGuidancePanel{max-width:580px;margin:24px 0}.gphGuidancePanel__list{list-style:none;margin:0;padding:0}.gphGuidancePanel__item{display:block;max-width:420px;position:relative;padding-left:32px;margin-bottom:24px}.gphGuidancePanel__item--disabled{color:#98A2B3}.gphGuidancePanel__item--disabled button{color:#98A2B3 !important}.gphGuidancePanel__itemIcon{position:absolute;left:0;top:-2px;width:24px;height:24px;padding:4px}.gphGuidancePanel__itemIcon--done{background-color:#7DDED8;color:#1D1E24;border-radius:50%}.gphVisualization{flex:1;display:flex;flex-direction:column}.gphGraph{flex:1;overflow:hidden}.gphEdge{fill:#535966;stroke:#535966;stroke-width:2;stroke-opacity:.5}.gphEdge:hover{stroke-opacity:.95;cursor:pointer}.gphEdge--selected{stroke:#98A2B3;stroke-opacity:.95}.gphNode{cursor:pointer}.gphNode__label{font-family:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:8px;line-height:12px;fill:#98A2B3;color:#98A2B3;cursor:pointer}.gphNode__label--html{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;text-align:center}.gphNode__markerCircle{fill:#98A2B3;stroke:#1D1E24}.gphNode__markerText{font-family:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:8px;line-height:12px;fill:#98A2B3;color:#98A2B3;font-size:6px;fill:#1D1E24}.gphNode__circle{fill:#535966}.gphNode__circle--selected{stroke-width:4px;stroke:rgba(54,162,239,0.75)}.gphNode__text{fill:#000}.gphNode__text--inverse{fill:#fff}.gphVennDiagram__left{fill:#F86B63;fill-opacity:.5}.gphVennDiagram__right{fill:#36A2EF;fill-opacity:.5}.gphUrlTemplateList__accordion{border-top:1px solid #343741;border-bottom:1px solid #343741}.gphUrlTemplateList__accordion+.gphUrlTemplateList__accordion{margin-top:-1px}.gphUrlTemplateList__accordion--isOpen{background-color:#141519}.gphUrlTemplateList__accordionbutton{padding:12px}.gphLegacyIcon{width:16px}.gphLegacyIcon--list{margin-right:12px}.gphLegacyIcon--pickable{margin:4px;cursor:pointer;opacity:.7}.gphLegacyIcon--pickable:hover,.gphLegacyIcon--pickable:focus,.gphLegacyIcon--selected{transform:scale(1.4);opacity:1}.gphFieldEditor__badge{height:24px;line-height:22px}.gphFieldEditor__badge.gphFieldEditor__badge--disabled,.gphFieldEditor__badge.gphFieldEditor__badge--disabled:hover,.gphFieldEditor__badge.gphFieldEditor__badge--disabled:focus,.gphFieldEditor__badge.gphFieldEditor__badge--disabled:not(:disabled):hover .gphFieldEditor__badge.gphFieldEditor__badge--disabled:not(:disabled):focus{opacity:.7;text-decoration:line-through}.gphFieldEditor__badge.gphFieldEditor__badge--disabled:focus:not(:focus-visible),.gphFieldEditor__badge.gphFieldEditor__badge--disabled:hover:not(:focus-visible){opacity:.7;text-decoration:line-through}.gphFieldEditor__badgeIcon{width:auto;margin-right:4px}.gphFieldEditor__displayForm{padding:8px}.gphFieldPicker__popoverPanel{width:350px;padding:4px}.gphFieldPicker__selectableList{margin:0 -4px -4px}.gphFieldPicker__button{height:24px;line-height:22px;color:#36A2EF}.gphFieldPicker__button--disabled{color:#535966;cursor:not-allowed !important}.gphFieldPicker__button--disabled:hover,.gphFieldPicker__button--disabled:focus{text-decoration:none}#graphBasic{display:flex;flex-direction:column;flex:1;overflow:hidden}.gphGraph__container{display:flex;flex-direction:column;background:#1D1E24;position:relative;flex:1}.gphGraph__menus{margin:8px}.gphGraph__flexGroup{display:flex;width:100%}.gphGraph__flexGroupFiller{flex:1 1 auto}.gphSidebar{position:absolute;right:8px;top:8px;width:320px;z-index:1000;background-color:#1D1E24;border:1px solid #343741;padding:4px;border-radius:6px;opacity:.9;box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.2),0 2.6px 8px -1px rgba(0,0,0,0.15),0 5.7px 12px -1px rgba(0,0,0,0.125),0 15px 15px -1px rgba(0,0,0,0.1)}.gphSidebar .help-block{font-size:12px;color:#DFE5EF}.gphSidebar__header{margin-top:8px;color:#1D1E24;background-color:#98A2B3;padding:4px;border-radius:6px;margin-bottom:4px}.gphSidebar__header .kuiIcon{padding-right:4px}.gphSidebar__panel{max-height:240px;overflow-y:hidden auto}.vertexSelectionTypesBar{margin-top:0;margin-bottom:0}.gphSelectionList{height:240px;background-color:#25262E;overflow:auto;margin-bottom:0}.gphSelectionList__icon{font-size:12px}.gphSelectionList__field{line-height:1.5;margin:4px 0;cursor:pointer}.gphSelectionList__field>*{vertical-align:middle}.gphSelectionList__field--selected{background:#343741}.gphDrillDownIconLinks{margin-top:2px;margin-bottom:2px}.gphLinkSummary__term--1{color:#F86B63}.gphLinkSummary__term--2{color:#36A2EF}.gphLinkSummary__term--1-2{color:#9787a9}.gphSettings__jsonView{height:240px}\n',""]),e.exports=t},function(e,t,n){var r=n(34),a=n(70);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};r(a,i);e.exports=a.locals||{}},function(e,t,n){(t=n(35)(!1)).push([e.i,'.gphFormGroup--small{margin-bottom:8px}.gphColorPicker__color{margin:4px;cursor:pointer}.gphColorPicker__color:hover,.gphColorPicker__color:focus{transform:scale(1.4)}.gphNoUserSelect{-webkit-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent}.gphAppWrapper{display:flex;flex-direction:column;flex-grow:1}.gphGraph__bar{margin:8px}.gphSearchBar__datasourceButton{height:100% !important}.gphSearchBar__datasourceButtonTooltip{padding:0}.gphSourceModal{width:720px;min-height:530px}.gphGuidancePanel{max-width:580px;margin:24px 0}.gphGuidancePanel__list{list-style:none;margin:0;padding:0}.gphGuidancePanel__item{display:block;max-width:420px;position:relative;padding-left:32px;margin-bottom:24px}.gphGuidancePanel__item--disabled{color:#69707D}.gphGuidancePanel__item--disabled button{color:#69707D !important}.gphGuidancePanel__itemIcon{position:absolute;left:0;top:-2px;width:24px;height:24px;padding:4px}.gphGuidancePanel__itemIcon--done{background-color:#00BFB3;color:#fff;border-radius:50%}.gphVisualization{flex:1;display:flex;flex-direction:column}.gphGraph{flex:1;overflow:hidden}.gphEdge{fill:#98A2B3;stroke:#98A2B3;stroke-width:2;stroke-opacity:.5}.gphEdge:hover{stroke-opacity:.95;cursor:pointer}.gphEdge--selected{stroke:#69707D;stroke-opacity:.95}.gphNode{cursor:pointer}.gphNode__label{font-family:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:8px;line-height:12px;fill:#69707D;color:#69707D;cursor:pointer}.gphNode__label--html{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important;text-align:center}.gphNode__markerCircle{fill:#69707D;stroke:#fff}.gphNode__markerText{font-family:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:8px;line-height:12px;fill:#69707D;color:#69707D;font-size:6px;fill:#fff}.gphNode__circle{fill:#98A2B3}.gphNode__circle--selected{stroke-width:4px;stroke:rgba(0,119,204,0.75)}.gphNode__text{fill:#000}.gphNode__text--inverse{fill:#fff}.gphVennDiagram__left{fill:#BD271E;fill-opacity:.5}.gphVennDiagram__right{fill:#07C;fill-opacity:.5}.gphUrlTemplateList__accordion{border-top:1px solid #D3DAE6;border-bottom:1px solid #D3DAE6}.gphUrlTemplateList__accordion+.gphUrlTemplateList__accordion{margin-top:-1px}.gphUrlTemplateList__accordion--isOpen{background-color:#fafbfd}.gphUrlTemplateList__accordionbutton{padding:12px}.gphLegacyIcon{width:16px}.gphLegacyIcon--list{margin-right:12px}.gphLegacyIcon--pickable{margin:4px;cursor:pointer;opacity:.7}.gphLegacyIcon--pickable:hover,.gphLegacyIcon--pickable:focus,.gphLegacyIcon--selected{transform:scale(1.4);opacity:1}.gphFieldEditor__badge{height:24px;line-height:22px}.gphFieldEditor__badge.gphFieldEditor__badge--disabled,.gphFieldEditor__badge.gphFieldEditor__badge--disabled:hover,.gphFieldEditor__badge.gphFieldEditor__badge--disabled:focus,.gphFieldEditor__badge.gphFieldEditor__badge--disabled:not(:disabled):hover .gphFieldEditor__badge.gphFieldEditor__badge--disabled:not(:disabled):focus{opacity:.7;text-decoration:line-through}.gphFieldEditor__badge.gphFieldEditor__badge--disabled:focus:not(:focus-visible),.gphFieldEditor__badge.gphFieldEditor__badge--disabled:hover:not(:focus-visible){opacity:.7;text-decoration:line-through}.gphFieldEditor__badgeIcon{width:auto;margin-right:4px}.gphFieldEditor__displayForm{padding:8px}.gphFieldPicker__popoverPanel{width:350px;padding:4px}.gphFieldPicker__selectableList{margin:0 -4px -4px}.gphFieldPicker__button{height:24px;line-height:22px;color:#07C}.gphFieldPicker__button--disabled{color:#98A2B3;cursor:not-allowed !important}.gphFieldPicker__button--disabled:hover,.gphFieldPicker__button--disabled:focus{text-decoration:none}#graphBasic{display:flex;flex-direction:column;flex:1;overflow:hidden}.gphGraph__container{display:flex;flex-direction:column;background:#fff;position:relative;flex:1}.gphGraph__menus{margin:8px}.gphGraph__flexGroup{display:flex;width:100%}.gphGraph__flexGroupFiller{flex:1 1 auto}.gphSidebar{position:absolute;right:8px;top:8px;width:320px;z-index:1000;background-color:#fff;border:1px solid #D3DAE6;padding:4px;border-radius:6px;opacity:.9;box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.08),0 2.6px 8px -1px rgba(0,0,0,0.06),0 5.7px 12px -1px rgba(0,0,0,0.05),0 15px 15px -1px rgba(0,0,0,0.04)}.gphSidebar .help-block{font-size:12px;color:#343741}.gphSidebar__header{margin-top:8px;color:#fff;background-color:#69707D;padding:4px;border-radius:6px;margin-bottom:4px}.gphSidebar__header .kuiIcon{padding-right:4px}.gphSidebar__panel{max-height:240px;overflow-y:hidden auto}.vertexSelectionTypesBar{margin-top:0;margin-bottom:0}.gphSelectionList{height:240px;background-color:#F5F7FA;overflow:auto;margin-bottom:0}.gphSelectionList__icon{font-size:12px}.gphSelectionList__field{line-height:1.5;margin:4px 0;cursor:pointer}.gphSelectionList__field>*{vertical-align:middle}.gphSelectionList__field--selected{background:#D3DAE6}.gphDrillDownIconLinks{margin-top:2px;margin-bottom:2px}.gphLinkSummary__term--1{color:#BD271E}.gphLinkSummary__term--2{color:#07C}.gphLinkSummary__term--1-2{color:#5f4f75}.gphSettings__jsonView{height:240px}\n',""]),e.exports=t},function(e,t,n){"use strict";var r=n(28),a=n(44);t.__esModule=!0,t.default=void 0;var i=a(n(11)),o=(r(n(72)),n(32)),s=r(n(40));var u=function(e){var t=e.store,n=e.context,r=e.children,a=(0,i.useMemo)((function(){var e=new s.default(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),u=(0,i.useMemo)((function(){return t.getState()}),[t]);(0,i.useEffect)((function(){var e=a.subscription;return e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,u]);var l=n||o.ReactReduxContext;return i.default.createElement(l.Provider,{value:a},r)};t.default=u},function(e,t,n){e.exports=n(7)(7)},function(e,t,n){e.exports=n(7)(228)},function(e,t,n){e.exports=n(7)(376)},function(e,t,n){"use strict";var r=n(28);t.__esModule=!0,t.createConnect=d,t.default=void 0;var a=r(n(30)),i=r(n(39)),o=r(n(46)),s=r(n(48)),u=r(n(76)),l=r(n(79)),c=r(n(80)),f=r(n(81));function h(e,t,n){for(var r=t.length-1;r>=0;r--){var a=t[r](e);if(a)return a}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function p(e,t){return e===t}function d(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?o.default:n,d=t.mapStateToPropsFactories,g=void 0===d?l.default:d,v=t.mapDispatchToPropsFactories,m=void 0===v?u.default:v,b=t.mergePropsFactories,y=void 0===b?c.default:b,x=t.selectorFactory,k=void 0===x?f.default:x;return function(e,t,n,o){void 0===o&&(o={});var u=o,l=u.pure,c=void 0===l||l,f=u.areStatesEqual,d=void 0===f?p:f,v=u.areOwnPropsEqual,b=void 0===v?s.default:v,x=u.areStatePropsEqual,_=void 0===x?s.default:x,w=u.areMergedPropsEqual,j=void 0===w?s.default:w,M=(0,i.default)(u,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),S=h(e,g,"mapStateToProps"),O=h(t,m,"mapDispatchToProps"),E=h(n,y,"mergeProps");return r(k,(0,a.default)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:O,initMergeProps:E,pure:c,areStatesEqual:d,areOwnPropsEqual:b,areStatePropsEqual:_,areMergedPropsEqual:j},M))}}var g=d();t.default=g},function(e,t,n){"use strict";t.__esModule=!0,t.whenMapDispatchToPropsIsFunction=i,t.whenMapDispatchToPropsIsMissing=o,t.whenMapDispatchToPropsIsObject=s,t.default=void 0;var r=n(37),a=n(49);function i(e){return"function"==typeof e?(0,a.wrapMapToPropsFunc)(e,"mapDispatchToProps"):void 0}function o(e){return e?void 0:(0,a.wrapMapToPropsConstant)((function(e){return{dispatch:e}}))}function s(e){return e&&"object"==typeof e?(0,a.wrapMapToPropsConstant)((function(t){return(0,r.bindActionCreators)(e,t)})):void 0}var u=[i,o,s];t.default=u},function(e,t,n){e.exports=n(7)(2455)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}},function(e,t,n){"use strict";t.__esModule=!0,t.whenMapStateToPropsIsFunction=a,t.whenMapStateToPropsIsMissing=i,t.default=void 0;var r=n(49);function a(e){return"function"==typeof e?(0,r.wrapMapToPropsFunc)(e,"mapStateToProps"):void 0}function i(e){return e?void 0:(0,r.wrapMapToPropsConstant)((function(){return{}}))}var o=[a,i];t.default=o},function(e,t,n){"use strict";var r=n(28);t.__esModule=!0,t.defaultMergeProps=i,t.wrapMergePropsFunc=o,t.whenMergePropsIsFunction=s,t.whenMergePropsIsOmitted=u,t.default=void 0;var a=r(n(30));r(n(50));function i(e,t,n){return(0,a.default)({},n,{},e,{},t)}function o(e){return function(t,n){n.displayName;var r,a=n.pure,i=n.areMergedPropsEqual,o=!1;return function(t,n,s){var u=e(t,n,s);return o?a&&i(u,r)||(r=u):(o=!0,r=u),r}}}function s(e){return"function"==typeof e?o(e):void 0}function u(e){return e?void 0:function(){return i}}var l=[s,u];t.default=l},function(e,t,n){"use strict";var r=n(28);t.__esModule=!0,t.impureFinalPropsSelectorFactory=i,t.pureFinalPropsSelectorFactory=o,t.default=function(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,s=t.initMergeProps,u=(0,a.default)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),l=n(e,u),c=r(e,u),f=s(e,u);0;return(u.pure?o:i)(l,c,f,e,u)};var a=r(n(39));r(n(82));function i(e,t,n,r){return function(a,i){return n(e(a,i),t(r,i),i)}}function o(e,t,n,r,a){var i,o,s,u,l,c=a.areStatesEqual,f=a.areOwnPropsEqual,h=a.areStatePropsEqual,p=!1;function d(a,p){var d,g,v=!f(p,o),m=!c(a,i);return i=a,o=p,v&&m?(s=e(i,o),t.dependsOnOwnProps&&(u=t(r,o)),l=n(s,u,o)):v?(e.dependsOnOwnProps&&(s=e(i,o)),t.dependsOnOwnProps&&(u=t(r,o)),l=n(s,u,o)):m?(d=e(i,o),g=!h(d,s),s=d,g&&(l=n(s,u,o)),l):l}return function(a,c){return p?d(a,c):(s=e(i=a,o=c),u=t(r,o),l=n(s,u,o),p=!0,l)}}},function(e,t,n){"use strict";var r=n(28);t.__esModule=!0,t.default=function(e,t,n,r){i(e,"mapStateToProps",r),i(t,"mapDispatchToProps",r),i(n,"mergeProps",r)};var a=r(n(51));function i(e,t,n){if(!e)throw new Error("Unexpected value for "+t+" in "+n+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||Object.prototype.hasOwnProperty.call(e,"dependsOnOwnProps")||(0,a.default)("The selector for "+t+" of "+n+" did not specify a value for dependsOnOwnProps.")}},function(e,t,n){"use strict";t.__esModule=!0,t.createDispatchHook=i,t.useDispatch=void 0;var r=n(32),a=n(52);function i(e){void 0===e&&(e=r.ReactReduxContext);var t=e===r.ReactReduxContext?a.useStore:(0,a.createStoreHook)(e);return function(){return t().dispatch}}var o=i();t.useDispatch=o},function(e,t,n){"use strict";var r=n(28);t.__esModule=!0,t.createSelectorHook=c,t.useSelector=void 0;var a=n(11),i=n(53),o=r(n(40)),s=n(47),u=n(32),l=function(e,t){return e===t};function c(e){void 0===e&&(e=u.ReactReduxContext);var t=e===u.ReactReduxContext?i.useReduxContext:function(){return(0,a.useContext)(e)};return function(e,n){void 0===n&&(n=l);var r=t();return function(e,t,n,r){var i,u=(0,a.useReducer)((function(e){return e+1}),0)[1],l=(0,a.useMemo)((function(){return new o.default(n,r)}),[n,r]),c=(0,a.useRef)(),f=(0,a.useRef)(),h=(0,a.useRef)();try{i=e!==f.current||c.current?e(n.getState()):h.current}catch(e){throw c.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+c.current.stack+"\n\n"),e}return(0,s.useIsomorphicLayoutEffect)((function(){f.current=e,h.current=i,c.current=void 0})),(0,s.useIsomorphicLayoutEffect)((function(){function e(){try{var e=f.current(n.getState());if(t(e,h.current))return;h.current=e}catch(e){c.current=e}u({})}return l.onStateChange=e,l.trySubscribe(),e(),function(){return l.tryUnsubscribe()}}),[n,l]),i}(e,n,r.store,r.subscription)}}var f=c();t.useSelector=f},function(e,t,n){"use strict";t.__esModule=!0,t.unstable_batchedUpdates=void 0;var r=n(20);t.unstable_batchedUpdates=r.unstable_batchedUpdates},function(e,t,n){"use strict";e.exports=n(87)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(38),n(30);var r=n(42),a=n(54);n(43);var i=function(e){return{done:!0,value:e}},o={};function s(e){return r.channel(e)?"channel":r.stringableFunc(e)?String(e):r.func(e)?e.name:String(e)}function u(e,t,n){var r,s,u,l=t;function c(t,n){if(l===o)return i(t);if(n&&!s)throw l=o,n;r&&r(t);var a=n?e[s](n):e[l]();return l=a.nextState,u=a.effect,r=a.stateUpdater,s=a.errorState,l===o?i(t):u}return a.makeIterator(c,(function(e){return c(null,e)}),n)}function l(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o,l={done:!1,value:a.take(e)},c=function(e){return{done:!1,value:a.fork.apply(void 0,[t].concat(r,[e]))}},f=function(e){return o=e};return u({q1:function(){return{nextState:"q2",effect:l,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:c(o)}}},"q1","takeEvery("+s(e)+", "+t.name+")")}function c(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o,l,c={done:!1,value:a.take(e)},f=function(e){return{done:!1,value:a.fork.apply(void 0,[t].concat(r,[e]))}},h=function(e){return{done:!1,value:a.cancel(e)}},p=function(e){return o=e},d=function(e){return l=e};return u({q1:function(){return{nextState:"q2",effect:c,stateUpdater:d}},q2:function(){return o?{nextState:"q3",effect:h(o)}:{nextState:"q1",effect:f(l),stateUpdater:p}},q3:function(){return{nextState:"q1",effect:f(l),stateUpdater:p}}},"q1","takeLatest("+s(e)+", "+t.name+")")}function f(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o,l={done:!1,value:a.take(e)},c=function(e){return{done:!1,value:a.call.apply(void 0,[t].concat(r,[e]))}},f=function(e){return o=e};return u({q1:function(){return{nextState:"q2",effect:l,stateUpdater:f}},q2:function(){return{nextState:"q1",effect:c(o)}}},"q1","takeLeading("+s(e)+", "+t.name+")")}function h(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var l,c,f={done:!1,value:a.actionChannel(t,a.sliding(1))},h=function(){return{done:!1,value:a.take(c)}},p=function(e){return{done:!1,value:a.fork.apply(void 0,[n].concat(i,[e]))}},d={done:!1,value:a.delay(e)},g=function(e){return l=e},v=function(e){return c=e};return u({q1:function(){return{nextState:"q2",effect:f,stateUpdater:v}},q2:function(){return{nextState:"q3",effect:h(),stateUpdater:g}},q3:function(){return{nextState:"q4",effect:p(l)}},q4:function(){return{nextState:"q2",effect:d}}},"q1","throttle("+s(t)+", "+n.name+")")}function p(e,t,n){for(var r=e,i=arguments.length,s=new Array(i>3?i-3:0),l=3;l<i;l++)s[l-3]=arguments[l];var c={done:!1,value:a.call.apply(void 0,[n].concat(s))},f={done:!1,value:a.delay(t)};return u({q1:function(){return{nextState:"q2",effect:c,errorState:"q10"}},q2:function(){return{nextState:o}},q10:function(e){if((r-=1)<=0)throw e;return{nextState:"q1",effect:f}}},"q1","retry("+n.name+")")}function d(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var l,c,f={done:!1,value:a.take(t)},h={done:!1,value:a.race({action:a.take(t),debounce:a.delay(e)})},p=function(e){return{done:!1,value:a.fork.apply(void 0,[n].concat(i,[e]))}},d=function(e){return{done:!1,value:e}},g=function(e){return l=e},v=function(e){return c=e};return u({q1:function(){return{nextState:"q2",effect:f,stateUpdater:g}},q2:function(){return{nextState:"q3",effect:h,stateUpdater:v}},q3:function(){return c.debounce?{nextState:"q1",effect:p(l)}:{nextState:"q2",effect:d(c.action),stateUpdater:g}}},"q1","debounce("+s(t)+", "+n.name+")")}t.actionChannel=a.actionChannel,t.all=a.all,t.apply=a.apply,t.call=a.call,t.cancel=a.cancel,t.cancelled=a.cancelled,t.cps=a.cps,t.delay=a.delay,t.effectTypes=a.effectTypes,t.flush=a.flush,t.fork=a.fork,t.getContext=a.getContext,t.join=a.join,t.put=a.put,t.putResolve=a.putResolve,t.race=a.race,t.select=a.select,t.setContext=a.setContext,t.spawn=a.spawn,t.take=a.take,t.takeMaybe=a.takeMaybe,t.debounce=function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return a.fork.apply(void 0,[d,e,t,n].concat(i))},t.retry=function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return a.call.apply(void 0,[p,e,t,n].concat(i))},t.takeEvery=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return a.fork.apply(void 0,[l,e,t].concat(r))},t.takeLatest=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return a.fork.apply(void 0,[c,e,t].concat(r))},t.takeLeading=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return a.fork.apply(void 0,[f,e,t].concat(r))},t.throttle=function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return a.fork.apply(void 0,[h,e,t,n].concat(i))}},function(e,t,n){"use strict";var r=n(89),a=n(92);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){a.isString(e)&&(e=y(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),f=["%","/","?",";","#"].concat(c),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(93);function y(e,t,n){if(e&&a.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!a.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/");var y=e=l.join(s);if(y=y.trim(),!n&&1===e.split("#").length){var x=u.exec(y);if(x)return this.path=y,this.href=y,this.pathname=x[1],x[2]?(this.search=x[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var k=o.exec(y);if(k){var _=(k=k[0]).toLowerCase();this.protocol=_,y=y.substr(k.length)}if(n||k||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===y.substr(0,2);!w||k&&v[k]||(y=y.substr(2),this.slashes=!0)}if(!v[k]&&(w||k&&!m[k])){for(var j,M,S=-1,O=0;O<h.length;O++){-1!==(E=y.indexOf(h[O]))&&(-1===S||E<S)&&(S=E)}-1!==(M=-1===S?y.lastIndexOf("@"):y.lastIndexOf("@",S))&&(j=y.slice(0,M),y=y.slice(M+1),this.auth=decodeURIComponent(j)),S=-1;for(O=0;O<f.length;O++){var E;-1!==(E=y.indexOf(f[O]))&&(-1===S||E<S)&&(S=E)}-1===S&&(S=y.length),this.host=y.slice(0,S),y=y.slice(S),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var C=this.hostname.split(/\./),T=(O=0,C.length);O<T;O++){var A=C[O];if(A&&!A.match(p)){for(var L="",P=0,I=A.length;P<I;P++)A.charCodeAt(P)>127?L+="x":L+=A[P];if(!L.match(p)){var F=C.slice(0,O),D=C.slice(O+1),R=A.match(d);R&&(F.push(R[1]),D.unshift(R[2])),D.length&&(y="/"+D.join(".")+y),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+B,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!g[_])for(O=0,T=c.length;O<T;O++){var z=c[O];if(-1!==y.indexOf(z)){var U=encodeURIComponent(z);U===z&&(U=escape(z)),y=y.split(z).join(U)}}var H=y.indexOf("#");-1!==H&&(this.hash=y.substr(H),y=y.slice(0,H));var W=y.indexOf("?");if(-1!==W?(this.search=y.substr(W),this.query=y.substr(W+1),t&&(this.query=b.parse(this.query)),y=y.slice(0,W)):t&&(this.search="",this.query={}),y&&(this.pathname=y),m[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var G=this.search||"";this.path=B+G}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(a.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),l=0;l<u.length;l++){var c=u[l];"protocol"!==c&&(n[c]=e[c])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!m[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var p=f[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",b=n.search||"";n.path=g+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),x=e.host||e.pathname&&"/"===e.pathname.charAt(0),k=x||y||n.host&&e.pathname,_=k,w=n.pathname&&n.pathname.split("/")||[],j=(d=e.pathname&&e.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(j&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),k=k&&(""===d[0]||""===w[0])),x)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),n.search=e.search,n.query=e.query;else if(!a.isNullOrUndefined(e.search)){if(j)n.hostname=n.host=w.shift(),(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.host=n.hostname=N.shift());return n.search=e.search,n.query=e.query,a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var M=w.slice(-1)[0],S=(n.host||e.host||w.length>1)&&("."===M||".."===M)||""===M,O=0,E=w.length;E>=0;E--)"."===(M=w[E])?w.splice(E,1):".."===M?(w.splice(E,1),O++):O&&(w.splice(E,1),O--);if(!k&&!_)for(;O--;O)w.unshift("..");!k||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var N,C=""===w[0]||w[0]&&"/"===w[0].charAt(0);j&&(n.hostname=n.host=C?"":w.length?w.shift():"",(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.host=n.hostname=N.shift()));return(k=k||n.host&&w.length)&&!C&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),a.isNull(n.pathname)&&a.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){(function(e,r){var a;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof r&&r;o.global!==o&&o.window!==o&&o.self;var s,u=2147483647,l=36,c=/^xn--/,f=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,g=String.fromCharCode;function v(e){throw new RangeError(p[e])}function m(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function b(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+m((e=e.replace(h,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],a=0,i=e.length;a<i;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i?56320==(64512&(n=e.charCodeAt(a++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--):r.push(t);return r}function x(e){return m(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)})).join("")}function k(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function _(e,t,n){var r=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;r+=l)e=d(e/35);return d(r+36*e/(e+38))}function w(e){var t,n,r,a,i,o,s,c,f,h,p,g=[],m=e.length,b=0,y=128,k=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),g.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<m;){for(i=b,o=1,s=l;a>=m&&v("invalid-input"),((c=(p=e.charCodeAt(a++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:l)>=l||c>d((u-b)/o))&&v("overflow"),b+=c*o,!(c<(f=s<=k?1:s>=k+26?26:s-k));s+=l)o>d(u/(h=l-f))&&v("overflow"),o*=h;k=_(b-i,t=g.length+1,0==i),d(b/t)>u-y&&v("overflow"),y+=d(b/t),b%=t,g.splice(b++,0,y)}return x(g)}function j(e){var t,n,r,a,i,o,s,c,f,h,p,m,b,x,w,j=[];for(m=(e=y(e)).length,t=128,n=0,i=72,o=0;o<m;++o)(p=e[o])<128&&j.push(g(p));for(r=a=j.length,a&&j.push("-");r<m;){for(s=u,o=0;o<m;++o)(p=e[o])>=t&&p<s&&(s=p);for(s-t>d((u-n)/(b=r+1))&&v("overflow"),n+=(s-t)*b,t=s,o=0;o<m;++o)if((p=e[o])<t&&++n>u&&v("overflow"),p==t){for(c=n,f=l;!(c<(h=f<=i?1:f>=i+26?26:f-i));f+=l)w=c-h,x=l-h,j.push(g(k(h+w%x,0))),c=d(w/x);j.push(g(k(c,0))),i=_(n,b,r==a),n=0,++r}++n,++t}return j.join("")}s={version:"1.4.1",ucs2:{decode:y,encode:x},decode:w,encode:j,toASCII:function(e){return b(e,(function(e){return f.test(e)?"xn--"+j(e):e}))},toUnicode:function(e){return b(e,(function(e){return c.test(e)?w(e.slice(4).toLowerCase()):e}))}},void 0===(a=function(){return s}.call(t,n,t,e))||(e.exports=a)}()}).call(this,n(90)(e),n(91))},function(e,t,n){e.exports=n(7)(434)},function(e,t,n){e.exports=n(7)(158)},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(94),t.encode=t.stringify=n(95)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var f,h,p,d,g=e[c].replace(s,"%20"),v=g.indexOf(n);v>=0?(f=g.substr(0,v),h=g.substr(v+1)):(f=g,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),r(o,p)?a(o[p])?o[p].push(d):o[p]=[o[p],d]:o[p]=d}return o};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(o(e),(function(o){var s=encodeURIComponent(r(o))+n;return a(e[o])?i(e[o],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[o]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(97),i=(r=a)&&"object"==typeof r&&"default"in r?r.default:r;Object.keys(a).forEach((function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})),t.default=i},function(e,t,n){"use strict";e.exports=n(98)},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(38),i=r(n(30)),o=r(n(39)),s=n(42),u=n(54),l=n(37),c=r(n(99));n(43);var f=[],h=0;function p(e){try{v(),e()}finally{m()}}function d(e){f.push(e),h||(v(),b())}function g(e){try{return v(),e()}finally{b()}}function v(){h++}function m(){h--}function b(){var e;for(m();!h&&void 0!==(e=f.shift());)p(e)}var y=function(e){return function(t){return e.some((function(e){return j(e)(t)}))}},x=function(e){return function(t){return e(t)}},k=function(e){return function(t){return t.type===String(e)}},_=function(e){return function(t){return t.type===e}},w=function(){return u.kTrue};function j(e){var t="*"===e?w:s.string(e)?k:s.array(e)?y:s.stringableFunc(e)?k:s.func(e)?x:s.symbol(e)?_:null;if(null===t)throw new Error("invalid pattern: "+e);return t(e)}var M={type:a.CHANNEL_END_TYPE},S=function(e){return e&&e.type===a.CHANNEL_END_TYPE};function O(e){void 0===e&&(e=u.expanding());var t=!1,n=[];return{take:function(r){t&&e.isEmpty()?r(M):e.isEmpty()?(n.push(r),r.cancel=function(){u.remove(n,r)}):r(e.take())},put:function(r){if(!t){if(0===n.length)return e.put(r);n.shift()(r)}},flush:function(n){t&&e.isEmpty()?n(M):n(e.flush())},close:function(){if(!t){t=!0;var e=n;n=[];for(var r=0,a=e.length;r<a;r++){(0,e[r])(M)}}}}}function E(){var e,t=!1,n=[],r=n,i=function(){r===n&&(r=n.slice())},o=function(){t=!0;var e=n=r;r=[],e.forEach((function(e){e(M)}))};return(e={})[a.MULTICAST]=!0,e.put=function(e){if(!t)if(S(e))o();else for(var i=n=r,s=0,u=i.length;s<u;s++){var l=i[s];l[a.MATCH](e)&&(l.cancel(),l(e))}},e.take=function(e,n){void 0===n&&(n=w),t?e(M):(e[a.MATCH]=n,i(),r.push(e),e.cancel=u.once((function(){i(),u.remove(r,e)})))},e.close=o,e}function N(){var e=E(),t=e.put;return e.put=function(e){e[a.SAGA_ACTION]?t(e):d((function(){t(e)}))},e}function C(e,t){var n=e[a.CANCEL];s.func(n)&&(t.cancel=n),e.then(t,(function(e){t(e,!0)}))}var T,A=0,L=function(){return++A};function P(e){e.isRunning()&&e.cancel()}var I=((T={})[u.TAKE]=function(e,t,n){var r=t.channel,i=void 0===r?e.channel:r,o=t.pattern,u=t.maybe,l=function(e){e instanceof Error?n(e,!0):!S(e)||u?n(e):n(a.TERMINATE)};try{i.take(l,s.notUndef(o)?j(o):null)}catch(e){return void n(e,!0)}n.cancel=l.cancel},T[u.PUT]=function(e,t,n){var r=t.channel,a=t.action,i=t.resolve;d((function(){var t;try{t=(r?r.put:e.dispatch)(a)}catch(e){return void n(e,!0)}i&&s.promise(t)?C(t,n):n(t)}))},T[u.ALL]=function(e,t,n,r){var a=r.digestEffect,i=A,o=Object.keys(t);if(0!==o.length){var l=u.createAllStyleChildCallbacks(t,n);o.forEach((function(e){a(t[e],i,l[e],e)}))}else n(s.array(t)?[]:{})},T[u.RACE]=function(e,t,n,r){var a=r.digestEffect,i=A,o=Object.keys(t),l=s.array(t)?u.createEmptyArray(o.length):{},c={},f=!1;o.forEach((function(e){var t=function(t,r){f||(r||u.shouldComplete(t)?(n.cancel(),n(t,r)):(n.cancel(),f=!0,l[e]=t,n(l)))};t.cancel=u.noop,c[e]=t})),n.cancel=function(){f||(f=!0,o.forEach((function(e){return c[e].cancel()})))},o.forEach((function(e){f||a(t[e],i,c[e],e)}))},T[u.CALL]=function(e,t,n,r){var a=t.context,i=t.fn,o=t.args,l=r.task;try{var c=i.apply(a,o);if(s.promise(c))return void C(c,n);if(s.iterator(c))return void G(e,c,l.context,A,u.getMetaInfo(i),!1,n);n(c)}catch(e){n(e,!0)}},T[u.CPS]=function(e,t,n){var r=t.context,a=t.fn,i=t.args;try{var o=function(e,t){s.undef(e)?n(t):n(e,!0)};a.apply(r,i.concat(o)),o.cancel&&(n.cancel=o.cancel)}catch(e){n(e,!0)}},T[u.FORK]=function(e,t,n,r){var a=t.context,i=t.fn,o=t.args,l=t.detached,c=r.task,f=function(e){var t=e.context,n=e.fn,r=e.args;try{var a=n.apply(t,r);if(s.iterator(a))return a;var i=!1;return u.makeIterator((function(e){return i?{value:e,done:!0}:(i=!0,{value:a,done:!s.promise(a)})}))}catch(e){return u.makeIterator((function(){throw e}))}}({context:a,fn:i,args:o}),h=function(e,t){return e.isSagaIterator?{name:e.meta.name}:u.getMetaInfo(t)}(f,i);g((function(){var t=G(e,f,c.context,A,h,l,void 0);l?n(t):t.isRunning()?(c.queue.addTask(t),n(t)):t.isAborted()?c.queue.abort(t.error()):n(t)}))},T[u.JOIN]=function(e,t,n,r){var a=r.task,i=function(e,t){if(e.isRunning()){var n={task:a,cb:t};t.cancel=function(){e.isRunning()&&u.remove(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())};if(s.array(t)){if(0===t.length)return void n([]);var o=u.createAllStyleChildCallbacks(t,n);t.forEach((function(e,t){i(e,o[t])}))}else i(t,n)},T[u.CANCEL]=function(e,t,n,r){var i=r.task;t===a.SELF_CANCELLATION?P(i):s.array(t)?t.forEach(P):P(t),n()},T[u.SELECT]=function(e,t,n){var r=t.selector,a=t.args;try{n(r.apply(void 0,[e.getState()].concat(a)))}catch(e){n(e,!0)}},T[u.ACTION_CHANNEL]=function(e,t,n){var r=t.pattern,a=O(t.buffer),i=j(r),o=function t(n){S(n)||e.channel.take(t,i),a.put(n)},s=a.close;a.close=function(){o.cancel(),s()},e.channel.take(o,i),n(a)},T[u.CANCELLED]=function(e,t,n,r){n(r.task.isCancelled())},T[u.FLUSH]=function(e,t,n){t.flush(n)},T[u.GET_CONTEXT]=function(e,t,n,r){n(r.task.context[t])},T[u.SET_CONTEXT]=function(e,t,n,r){var a=r.task;u.assignWithSymbols(a.context,t),n()},T);function F(e,t){return e+"?"+t}function D(e){var t=e.name,n=e.location;return n?t+"  "+F(n.fileName,n.lineNumber):t}function R(e){var t=u.flatMap((function(e){return e.cancelledTasks}),e);return t.length?["Tasks cancelled due to error:"].concat(t).join("\n"):""}var B=null,q=[],z=function(e){e.crashedEffect=B,q.push(e)},U=function(){B=null,q.length=0},H=function(){var e,t,n=q[0],r=q.slice(1),a=n.crashedEffect?(e=n.crashedEffect,(t=u.getLocation(e))?t.code+"  "+F(t.fileName,t.lineNumber):""):null;return["The above error occurred in task "+D(n.meta)+(a?" \n when executing effect "+a:"")].concat(r.map((function(e){return"    created by "+D(e.meta)})),[R(q)]).join("\n")};function W(e,t,n,r,i,o,s){var l;void 0===s&&(s=u.noop);var f,h,p=0,d=null,g=[],v=Object.create(n),m=function(e,t,n){var r,a=[],i=!1;function o(e){t(),l(),n(e,!0)}function s(t){a.push(t),t.cont=function(s,l){i||(u.remove(a,t),t.cont=u.noop,l?o(s):(t===e&&(r=s),a.length||(i=!0,n(r))))}}function l(){i||(i=!0,a.forEach((function(e){e.cont=u.noop,e.cancel()})),a=[])}return s(e),{addTask:s,cancelAll:l,abort:o,getTasks:function(){return a}}}(t,(function(){g.push.apply(g,m.getTasks().map((function(e){return e.meta.name})))}),b);function b(t,n){if(n){if(p=2,z({meta:i,cancelledTasks:g}),y.isRoot){var r=H();U(),e.onError(t,{sagaStack:r})}h=t,d&&d.reject(t)}else t===a.TASK_CANCEL?p=1:1!==p&&(p=3),f=t,d&&d.resolve(t);y.cont(t,n),y.joiners.forEach((function(e){e.cb(t,n)})),y.joiners=null}var y=((l={})[a.TASK]=!0,l.id=r,l.meta=i,l.isRoot=o,l.context=v,l.joiners=[],l.queue=m,l.cancel=function(){0===p&&(p=1,m.cancelAll(),b(a.TASK_CANCEL,!1))},l.cont=s,l.end=b,l.setContext=function(e){u.assignWithSymbols(v,e)},l.toPromise=function(){return d||(d=c(),2===p?d.reject(h):0!==p&&d.resolve(f)),d.promise},l.isRunning=function(){return 0===p},l.isCancelled=function(){return 1===p||0===p&&1===t.status},l.isAborted=function(){return 2===p},l.result=function(){return f},l.error=function(){return h},l);return y}function G(e,t,n,r,i,o,l){var c=e.finalizeRunEffect((function(t,n,r){if(s.promise(t))C(t,r);else if(s.iterator(t))G(e,t,h.context,n,i,!1,r);else if(t&&t[a.IO]){(0,I[t.type])(e,t.payload,r,p)}else r(t)}));d.cancel=u.noop;var f={meta:i,cancel:function(){0===f.status&&(f.status=1,d(a.TASK_CANCEL))},status:0},h=W(e,f,n,r,i,o,l),p={task:h,digestEffect:g};return l&&(l.cancel=h.cancel),d(),h;function d(e,n){try{var i;n?(i=t.throw(e),U()):u.shouldCancel(e)?(f.status=1,d.cancel(),i=s.func(t.return)?t.return(a.TASK_CANCEL):{done:!0,value:a.TASK_CANCEL}):i=u.shouldTerminate(e)?s.func(t.return)?t.return():{done:!0}:t.next(e),i.done?(1!==f.status&&(f.status=3),f.cont(i.value)):g(i.value,r,d)}catch(e){if(1===f.status)throw e;f.status=2,f.cont(e,!0)}}function g(t,n,r,a){void 0===a&&(a="");var i,o=L();function s(n,a){i||(i=!0,r.cancel=u.noop,e.sagaMonitor&&(a?e.sagaMonitor.effectRejected(o,n):e.sagaMonitor.effectResolved(o,n)),a&&function(e){B=e}(t),r(n,a))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:n,label:a,effect:t}),s.cancel=u.noop,r.cancel=function(){i||(i=!0,s.cancel(),s.cancel=u.noop,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},c(t,o,s)}}function V(e,t){for(var n=e.channel,r=void 0===n?N():n,a=e.dispatch,i=e.getState,o=e.context,s=void 0===o?{}:o,c=e.sagaMonitor,f=e.effectMiddlewares,h=e.onError,p=void 0===h?u.logError:h,d=arguments.length,v=new Array(d>2?d-2:0),m=2;m<d;m++)v[m-2]=arguments[m];var b,y=t.apply(void 0,v),x=L();if(c&&(c.rootSagaStarted=c.rootSagaStarted||u.noop,c.effectTriggered=c.effectTriggered||u.noop,c.effectResolved=c.effectResolved||u.noop,c.effectRejected=c.effectRejected||u.noop,c.effectCancelled=c.effectCancelled||u.noop,c.actionDispatched=c.actionDispatched||u.noop,c.rootSagaStarted({effectId:x,saga:t,args:v})),f){var k=l.compose.apply(void 0,f);b=function(e){return function(t,n,r){return k((function(t){return e(t,n,r)}))(t)}}}else b=u.identity;var _={channel:r,dispatch:u.wrapSagaDispatch(a),getState:i,sagaMonitor:c,onError:p,finalizeRunEffect:b};return g((function(){var e=G(_,y,s,x,u.getMetaInfo(t),!0,void 0);return c&&c.effectResolved(x,e),e}))}Object.defineProperty(t,"CANCEL",{enumerable:!0,get:function(){return a.CANCEL}}),Object.defineProperty(t,"SAGA_LOCATION",{enumerable:!0,get:function(){return a.SAGA_LOCATION}}),t.buffers=u.buffers,t.detach=u.detach,t.END=M,t.channel=O,t.default=function(e){var t,n=void 0===e?{}:e,r=n.context,a=void 0===r?{}:r,s=n.channel,l=void 0===s?N():s,c=n.sagaMonitor,f=o(n,["context","channel","sagaMonitor"]);function h(e){var n=e.getState,r=e.dispatch;return t=V.bind(null,i({},f,{context:a,channel:l,dispatch:r,getState:n,sagaMonitor:c})),function(e){return function(t){c&&c.actionDispatched&&c.actionDispatched(t);var n=e(t);return l.put(t),n}}}return h.run=function(){return t.apply(void 0,arguments)},h.setContext=function(e){u.assignWithSymbols(a,e)},h},t.eventChannel=function(e,t){void 0===t&&(t=u.none());var n,r=!1,a=O(t),i=function(){r||(r=!0,s.func(n)&&n(),a.close())};return n=e((function(e){S(e)?i():a.put(e)})),n=u.once(n),r&&n(),{take:a.take,flush:a.flush,close:i}},t.isEnd=S,t.multicastChannel=E,t.runSaga=V,t.stdChannel=N},function(e,t,n){"use strict";function r(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}Object.defineProperty(t,"__esModule",{value:!0}),t.arrayOfDeferred=function(e){for(var t=[],n=0;n<e;n++)t.push(r());return t},t.default=r},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(101);case"v8light":return n(103)}},function(e,t,n){var r=n(34),a=n(102);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};r(a,i);e.exports=a.locals||{}},function(e,t,n){(t=n(35)(!1)).push([e.i,".kbnFieldButton{font-size:14px;font-size:1rem;line-height:1.71429rem;border-radius:6px;margin-bottom:4px;display:flex;align-items:center;transition:box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1),background-color 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.kbnFieldButton:focus-within,.kbnFieldButton-isActive{outline:2px solid currentColor}.kbnFieldButton:focus-within:focus-visible,.kbnFieldButton-isActive:focus-visible{outline-style:auto}.kbnFieldButton:focus-within:not(:focus-visible),.kbnFieldButton-isActive:not(:focus-visible){outline:none}.kbnFieldButton--isDraggable{background:#25262E}.kbnFieldButton--isDraggable:hover,.kbnFieldButton--isDraggable:focus,.kbnFieldButton--isDraggable:focus-within{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.2),0 2.6px 8px -1px rgba(0,0,0,0.15),0 5.7px 12px -1px rgba(0,0,0,0.125),0 15px 15px -1px rgba(0,0,0,0.1);border-radius:6px;z-index:2}.kbnFieldButton--isDraggable .kbnFieldButton__button:hover,.kbnFieldButton--isDraggable .kbnFieldButton__button:focus{cursor:grab}.kbnFieldButton__button{flex-grow:1;text-align:left;padding:8px;display:flex;align-items:flex-start;line-height:normal}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0;margin-right:8px}.kbnFieldButton__name{flex-grow:1;word-break:break-word}.kbnFieldButton__infoIcon{flex-shrink:0;margin-left:4px}.kbnFieldButton__fieldAction{margin-right:8px}.kbnFieldButton--small{font-size:12px}.kbnFieldButton--small .kbnFieldButton__button{padding:4px}.kbnFieldButton--small .kbnFieldButton__fieldIcon,.kbnFieldButton--small .kbnFieldButton__fieldAction{margin-right:4px}\n",""]),e.exports=t},function(e,t,n){var r=n(34),a=n(104);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};r(a,i);e.exports=a.locals||{}},function(e,t,n){(t=n(35)(!1)).push([e.i,".kbnFieldButton{font-size:14px;font-size:1rem;line-height:1.71429rem;border-radius:6px;margin-bottom:4px;display:flex;align-items:center;transition:box-shadow 150ms cubic-bezier(0.694, 0.0482, 0.335, 1),background-color 150ms cubic-bezier(0.694, 0.0482, 0.335, 1)}.kbnFieldButton:focus-within,.kbnFieldButton-isActive{outline:2px solid currentColor}.kbnFieldButton:focus-within:focus-visible,.kbnFieldButton-isActive:focus-visible{outline-style:auto}.kbnFieldButton:focus-within:not(:focus-visible),.kbnFieldButton-isActive:not(:focus-visible){outline:none}.kbnFieldButton--isDraggable{background:#fff}.kbnFieldButton--isDraggable:hover,.kbnFieldButton--isDraggable:focus,.kbnFieldButton--isDraggable:focus-within{box-shadow:0 0.9px 4px -1px rgba(0,0,0,0.08),0 2.6px 8px -1px rgba(0,0,0,0.06),0 5.7px 12px -1px rgba(0,0,0,0.05),0 15px 15px -1px rgba(0,0,0,0.04);border-radius:6px;z-index:2}.kbnFieldButton--isDraggable .kbnFieldButton__button:hover,.kbnFieldButton--isDraggable .kbnFieldButton__button:focus{cursor:grab}.kbnFieldButton__button{flex-grow:1;text-align:left;padding:8px;display:flex;align-items:flex-start;line-height:normal}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0;margin-right:8px}.kbnFieldButton__name{flex-grow:1;word-break:break-word}.kbnFieldButton__infoIcon{flex-shrink:0;margin-left:4px}.kbnFieldButton__fieldAction{margin-right:8px}.kbnFieldButton--small{font-size:12px}.kbnFieldButton--small .kbnFieldButton__button{padding:4px}.kbnFieldButton--small .kbnFieldButton__fieldIcon,.kbnFieldButton--small .kbnFieldButton__fieldAction{margin-right:4px}\n",""]),e.exports=t},function(e,t,n){!function(e,t,n){"use strict";var r=1e-10;function a(e,t){var n,a=o(e),l=a.filter((function(t){return i(t,e)})),c=0,h=0,p=[];if(l.length>1){var d=f(l);for(n=0;n<l.length;++n){var g=l[n];g.angle=Math.atan2(g.x-d.x,g.y-d.y)}l.sort((function(e,t){return t.angle-e.angle}));var v=l[l.length-1];for(n=0;n<l.length;++n){var m=l[n];h+=(v.x+m.x)*(m.y-v.y);for(var b={x:(m.x+v.x)/2,y:(m.y+v.y)/2},y=null,x=0;x<m.parentIndex.length;++x)if(v.parentIndex.indexOf(m.parentIndex[x])>-1){var k=e[m.parentIndex[x]],_=Math.atan2(m.x-k.x,m.y-k.y),w=Math.atan2(v.x-k.x,v.y-k.y),j=w-_;j<0&&(j+=2*Math.PI);var M=w-j/2,S=u(b,{x:k.x+k.radius*Math.sin(M),y:k.y+k.radius*Math.cos(M)});S>2*k.radius&&(S=2*k.radius),(null===y||y.width>S)&&(y={circle:k,width:S,p1:m,p2:v})}null!==y&&(p.push(y),c+=s(y.circle.radius,y.width),v=m)}}else{var O=e[0];for(n=1;n<e.length;++n)e[n].radius<O.radius&&(O=e[n]);var E=!1;for(n=0;n<e.length;++n)if(u(e[n],O)>Math.abs(O.radius-e[n].radius)){E=!0;break}E?c=h=0:(c=O.radius*O.radius*Math.PI,p.push({circle:O,p1:{x:O.x,y:O.y+O.radius},p2:{x:O.x-r,y:O.y+O.radius},width:2*O.radius}))}return h/=2,t&&(t.area=c+h,t.arcArea=c,t.polygonArea=h,t.arcs=p,t.innerPoints=l,t.intersectionPoints=a),c+h}function i(e,t){for(var n=0;n<t.length;++n)if(u(e,t[n])>t[n].radius+r)return!1;return!0}function o(e){for(var t=[],n=0;n<e.length;++n)for(var r=n+1;r<e.length;++r)for(var a=c(e[n],e[r]),i=0;i<a.length;++i){var o=a[i];o.parentIndex=[n,r],t.push(o)}return t}function s(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function u(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function l(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);var r=t-(n*n-e*e+t*t)/(2*n);return s(e,e-(n*n-t*t+e*e)/(2*n))+s(t,r)}function c(e,t){var n=u(e,t),r=e.radius,a=t.radius;if(n>=r+a||n<=Math.abs(r-a))return[];var i=(r*r-a*a+n*n)/(2*n),o=Math.sqrt(r*r-i*i),s=e.x+i*(t.x-e.x)/n,l=e.y+i*(t.y-e.y)/n,c=-(t.y-e.y)*(o/n),f=-(t.x-e.x)*(o/n);return[{x:s+c,y:l-f},{x:s-c,y:l+f}]}function f(e){for(var t={x:0,y:0},n=0;n<e.length;++n)t.x+=e[n].x,t.y+=e[n].y;return t.x/=e.length,t.y/=e.length,t}function h(e,t,n,r){var a=(r=r||{}).maxIterations||100,i=r.tolerance||1e-10,o=e(t),s=e(n),u=n-t;if(o*s>0)throw"Initial bisect points must have opposite signs";if(0===o)return t;if(0===s)return n;for(var l=0;l<a;++l){var c=t+(u/=2),f=e(c);if(f*o>=0&&(t=c),Math.abs(u)<i||0===f)return c}return t+u}function p(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function d(e,t){return p(e).map((function(){return p(t)}))}function g(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function v(e){return Math.sqrt(g(e,e))}function m(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function b(e,t,n,r,a){for(var i=0;i<e.length;++i)e[i]=t*n[i]+r*a[i]}function y(e,t,n){var r,a=(n=n||{}).maxIterations||200*t.length,i=n.nonZeroDelta||1.05,o=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,u=n.minErrorDelta||1e-5,l=void 0!==n.rho?n.rho:1,c=void 0!==n.chi?n.chi:2,f=void 0!==n.psi?n.psi:-.5,h=void 0!==n.sigma?n.sigma:.5,p=t.length,d=new Array(p+1);d[0]=t,d[0].fx=e(t),d[0].id=0;for(var g=0;g<p;++g){var v=t.slice();v[g]=v[g]?v[g]*i:o,d[g+1]=v,d[g+1].fx=e(v),d[g+1].id=g+1}function m(e){for(var t=0;t<e.length;t++)d[p][t]=e[t];d[p].fx=e.fx}for(var y=function(e,t){return e.fx-t.fx},x=t.slice(),k=t.slice(),_=t.slice(),w=t.slice(),j=0;j<a;++j){if(d.sort(y),n.history){var M=d.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));M.sort((function(e,t){return e.id-t.id})),n.history.push({x:d[0].slice(),fx:d[0].fx,simplex:M})}for(r=0,g=0;g<p;++g)r=Math.max(r,Math.abs(d[0][g]-d[1][g]));if(Math.abs(d[0].fx-d[p].fx)<s&&r<u)break;for(g=0;g<p;++g){x[g]=0;for(var S=0;S<p;++S)x[g]+=d[S][g];x[g]/=p}var O=d[p];if(b(k,1+l,x,-l,O),k.fx=e(k),k.fx<d[0].fx)b(w,1+c,x,-c,O),w.fx=e(w),w.fx<k.fx?m(w):m(k);else if(k.fx>=d[p-1].fx){var E=!1;if(k.fx>O.fx?(b(_,1+f,x,-f,O),_.fx=e(_),_.fx<O.fx?m(_):E=!0):(b(_,1-f*l,x,f*l,O),_.fx=e(_),_.fx<k.fx?m(_):E=!0),E){if(h>=1)break;for(g=1;g<d.length;++g)b(d[g],1-h,d[0],h,d[g]),d[g].fx=e(d[g])}}else m(k)}return d.sort(y),{fx:d[0].fx,x:d[0]}}function x(e,t,n,r,a,i,o){var s=n.fx,u=g(n.fxprime,t),l=s,c=s,f=u,h=0;function p(c,h,p){for(var d=0;d<16;++d)if(a=(c+h)/2,b(r.x,1,n.x,a,t),l=r.fx=e(r.x,r.fxprime),f=g(r.fxprime,t),l>s+i*a*u||l>=p)h=a;else{if(Math.abs(f)<=-o*u)return a;f*(h-c)>=0&&(h=c),c=a,p=l}return 0}a=a||1,i=i||1e-6,o=o||.1;for(var d=0;d<10;++d){if(b(r.x,1,n.x,a,t),l=r.fx=e(r.x,r.fxprime),f=g(r.fxprime,t),l>s+i*a*u||d&&l>=c)return p(h,a,c);if(Math.abs(f)<=-o*u)return a;if(f>=0)return p(a,h,l);c=l,h=a,a*=2}return a}function k(e,t,n){var r,a,i,o={x:t.slice(),fx:0,fxprime:t.slice()},s={x:t.slice(),fx:0,fxprime:t.slice()},u=t.slice(),l=1;i=(n=n||{}).maxIterations||20*t.length,o.fx=e(o.x,o.fxprime),m(r=o.fxprime.slice(),o.fxprime,-1);for(var c=0;c<i;++c){if(l=x(e,r,o,s,l),n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:l}),l){b(u,1,s.fxprime,-1,o.fxprime);var f=g(o.fxprime,o.fxprime);b(r,Math.max(0,g(u,s.fxprime)/f),r,-1,s.fxprime),a=o,o=s,s=a}else m(r,o.fxprime,-1);if(v(o.fxprime)<=1e-5)break}return n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:l}),o}function _(e,t){(t=t||{}).maxIterations=t.maxIterations||500;var n,r=t.initialLayout||E,a=t.lossFunction||T,i=r(e=M(e),t),o=[],s=[];for(n in i)i.hasOwnProperty(n)&&(o.push(i[n].x),o.push(i[n].y),s.push(n));for(var u=y((function(t){for(var n={},r=0;r<s.length;++r){var o=s[r];n[o]={x:t[2*r],y:t[2*r+1],radius:i[o].radius}}return a(n,e)}),o,t).x,l=0;l<s.length;++l)n=s[l],i[n].x=u[2*l],i[n].y=u[2*l+1];return i}var w=1e-10;function j(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+w?Math.abs(e-t):h((function(r){return l(e,t,r)-n}),0,e+t)}function M(e){e=e.slice();var t,n,r,a,i=[],o={};for(t=0;t<e.length;++t){var s=e[t];1==s.sets.length?i.push(s.sets[0]):2==s.sets.length&&(o[[r=s.sets[0],a=s.sets[1]]]=!0,o[[a,r]]=!0)}for(i.sort((function(e,t){return e>t})),t=0;t<i.length;++t)for(r=i[t],n=t+1;n<i.length;++n)[r,a=i[n]]in o||e.push({sets:[r,a],size:0});return e}function S(e,t,n){var r=d(t.length,t.length),a=d(t.length,t.length);return e.filter((function(e){return 2==e.sets.length})).map((function(e){var i=n[e.sets[0]],o=n[e.sets[1]],s=j(Math.sqrt(t[i].size/Math.PI),Math.sqrt(t[o].size/Math.PI),e.size);r[i][o]=r[o][i]=s;var u=0;e.size+1e-10>=Math.min(t[i].size,t[o].size)?u=1:e.size<=1e-10&&(u=-1),a[i][o]=a[o][i]=u})),{distances:r,constraints:a}}function O(e,t,n,r){var a,i=0;for(a=0;a<t.length;++a)t[a]=0;for(a=0;a<n.length;++a)for(var o=e[2*a],s=e[2*a+1],u=a+1;u<n.length;++u){var l=e[2*u],c=e[2*u+1],f=n[a][u],h=r[a][u],p=(l-o)*(l-o)+(c-s)*(c-s),d=Math.sqrt(p),g=p-f*f;h>0&&d<=f||h<0&&d>=f||(i+=2*g*g,t[2*a]+=4*g*(o-l),t[2*a+1]+=4*g*(s-c),t[2*u]+=4*g*(l-o),t[2*u+1]+=4*g*(c-s))}return i}function E(e,t){var n=C(e,t),r=t.lossFunction||T;if(e.length>=8){var a=N(e,t);r(a,e)+1e-8<r(n,e)&&(n=a)}return n}function N(e,t){var n,r=(t=t||{}).restarts||10,a=[],i={};for(n=0;n<e.length;++n){var o=e[n];1==o.sets.length&&(i[o.sets[0]]=a.length,a.push(o))}var s=S(e,a,i),u=s.distances,l=s.constraints,c=v(u.map(v))/u.length;u=u.map((function(e){return e.map((function(e){return e/c}))}));var f,h,d=function(e,t){return O(e,t,u,l)};for(n=0;n<r;++n)h=k(d,p(2*u.length).map(Math.random),t),(!f||h.fx<f.fx)&&(f=h);var g=f.x,b={};for(n=0;n<a.length;++n){var y=a[n];b[y.sets[0]]={x:g[2*n]*c,y:g[2*n+1]*c,radius:Math.sqrt(y.size/Math.PI)}}if(t.history)for(n=0;n<t.history.length;++n)m(t.history[n].x,c);return b}function C(e,t){for(var n,r=t&&t.lossFunction?t.lossFunction:T,a={},i={},o=0;o<e.length;++o){var s=e[o];1==s.sets.length&&(n=s.sets[0],a[n]={x:1e10,y:1e10,rowid:a.length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},i[n]=[])}for(e=e.filter((function(e){return 2==e.sets.length})),o=0;o<e.length;++o){var u=e[o],l=u.hasOwnProperty("weight")?u.weight:1,f=u.sets[0],h=u.sets[1];u.size+w>=Math.min(a[f].size,a[h].size)&&(l=0),i[f].push({set:h,size:u.size,weight:l}),i[h].push({set:f,size:u.size,weight:l})}var p=[];for(n in i)if(i.hasOwnProperty(n)){var d=0;for(o=0;o<i[n].length;++o)d+=i[n][o].size*i[n][o].weight;p.push({set:n,size:d})}function g(e,t){return t.size-e.size}p.sort(g);var v={};function m(e){return e.set in v}function b(e,t){a[t].x=e.x,a[t].y=e.y,v[t]=!0}for(b({x:0,y:0},p[0].set),o=1;o<p.length;++o){var y=p[o].set,x=i[y].filter(m);if(n=a[y],x.sort(g),0===x.length)throw"ERROR: missing pairwise overlap information";for(var k=[],_=0;_<x.length;++_){var M=a[x[_].set],S=j(n.radius,M.radius,x[_].size);k.push({x:M.x+S,y:M.y}),k.push({x:M.x-S,y:M.y}),k.push({y:M.y+S,x:M.x}),k.push({y:M.y-S,x:M.x});for(var O=_+1;O<x.length;++O)for(var E=a[x[O].set],N=j(n.radius,E.radius,x[O].size),C=c({x:M.x,y:M.y,radius:S},{x:E.x,y:E.y,radius:N}),A=0;A<C.length;++A)k.push(C[A])}var L=1e50,P=k[0];for(_=0;_<k.length;++_){a[y].x=k[_].x,a[y].y=k[_].y;var I=r(a,e);I<L&&(L=I,P=k[_])}b(P,y)}return a}function T(e,t){var n=0;function r(t){return t.map((function(t){return e[t]}))}for(var i=0;i<t.length;++i){var o,s=t[i];if(1!=s.sets.length){if(2==s.sets.length){var c=e[s.sets[0]],f=e[s.sets[1]];o=l(c.radius,f.radius,u(c,f))}else o=a(r(s.sets));n+=(s.hasOwnProperty("weight")?s.weight:1)*(o-s.size)*(o-s.size)}}return n}function A(e,t,n){var r;if(null===n?e.sort((function(e,t){return t.radius-e.radius})):e.sort(n),e.length>0){var a=e[0].x,i=e[0].y;for(r=0;r<e.length;++r)e[r].x-=a,e[r].y-=i}if(2==e.length&&u(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y),e.length>1){var o,s,l=Math.atan2(e[1].x,e[1].y)-t,c=Math.cos(l),f=Math.sin(l);for(r=0;r<e.length;++r)o=e[r].x,s=e[r].y,e[r].x=c*o-f*s,e[r].y=f*o+c*s}if(e.length>2){for(var h=Math.atan2(e[2].x,e[2].y)-t;h<0;)h+=2*Math.PI;for(;h>2*Math.PI;)h-=2*Math.PI;if(h>Math.PI){var p=e[1].y/(1e-10+e[1].x);for(r=0;r<e.length;++r){var d=(e[r].x+p*e[r].y)/(1+p*p);e[r].x=2*d-e[r].x,e[r].y=2*d*p-e[r].y}}}}function L(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}function n(e,n){var r=t(e),a=t(n);r.parent=a}e.map((function(e){e.parent=e}));for(var r=0;r<e.length;++r)for(var a=r+1;a<e.length;++a){var i=e[r].radius+e[a].radius;u(e[r],e[a])+1e-10<i&&n(e[a],e[r])}var o,s={};for(r=0;r<e.length;++r)(o=t(e[r]).parent.setid)in s||(s[o]=[]),s[o].push(e[r]);e.map((function(e){delete e.parent}));var l=[];for(o in s)s.hasOwnProperty(o)&&l.push(s[o]);return l}function P(e){var t=function(t){return{max:Math.max.apply(null,e.map((function(e){return e[t]+e.radius}))),min:Math.min.apply(null,e.map((function(e){return e[t]-e.radius})))}};return{xRange:t("x"),yRange:t("y")}}function I(e,t,n){null===t&&(t=Math.PI/2);var r,a,i=[];for(a in e)if(e.hasOwnProperty(a)){var o=e[a];i.push({x:o.x,y:o.y,radius:o.radius,setid:a})}var s=L(i);for(r=0;r<s.length;++r){A(s[r],t,n);var u=P(s[r]);s[r].size=(u.xRange.max-u.xRange.min)*(u.yRange.max-u.yRange.min),s[r].bounds=u}s.sort((function(e,t){return t.size-e.size}));var l=(i=s[0]).bounds,c=(l.xRange.max-l.xRange.min)/50;function f(e,t,n){if(e){var r,a,o,s=e.bounds;t?r=l.xRange.max-s.xRange.min+c:(r=l.xRange.max-s.xRange.max,(o=(s.xRange.max-s.xRange.min)/2-(l.xRange.max-l.xRange.min)/2)<0&&(r+=o)),n?a=l.yRange.max-s.yRange.min+c:(a=l.yRange.max-s.yRange.max,(o=(s.yRange.max-s.yRange.min)/2-(l.yRange.max-l.yRange.min)/2)<0&&(a+=o));for(var u=0;u<e.length;++u)e[u].x+=r,e[u].y+=a,i.push(e[u])}}for(var h=1;h<s.length;)f(s[h],!0,!1),f(s[h+1],!1,!0),f(s[h+2],!0,!0),h+=3,l=P(i);var p={};for(r=0;r<i.length;++r)p[i[r].setid]=i[r];return p}function F(e,t,n,r){var a=[],i=[];for(var o in e)e.hasOwnProperty(o)&&(i.push(o),a.push(e[o]));t-=2*r,n-=2*r;var s=P(a),u=s.xRange,l=s.yRange;if(u.max==u.min||l.max==l.min)return console.log("not scaling solution: zero size detected"),e;for(var c=t/(u.max-u.min),f=n/(l.max-l.min),h=Math.min(f,c),p=(t-(u.max-u.min)*h)/2,d=(n-(l.max-l.min)*h)/2,g={},v=0;v<a.length;++v){var m=a[v];g[i[v]]={radius:h*m.radius,x:r+p+(m.x-u.min)*h,y:r+d+(m.y-l.min)*h}}return g}function D(){var e=600,n=350,r=15,a=1e3,i=Math.PI/2,o=!0,s=!0,u=!0,l=null,c=null,f={},h=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],p=0,d=function(e){if(e in f)return f[e];var t=f[e]=h[p];return(p+=1)>=h.length&&(p=0),t},g=_,v=T;function m(f){var h=f.datum(),p={};h.forEach((function(e){0==e.size&&1==e.sets.length&&(p[e.sets[0]]=1)})),h=h.filter((function(e){return!e.sets.some((function(e){return e in p}))}));var m={},b={};if(h.length>0){var y=g(h,{lossFunction:v});o&&(y=I(y,i,c)),m=F(y,e,n,r),b=U(m,h)}var x={};function k(e){return e.sets in x?x[e.sets]:1==e.sets.length?""+e.sets[0]:void 0}h.forEach((function(e){e.label&&(x[e.sets]=e.label)})),f.selectAll("svg").data([m]).enter().append("svg");var _=f.select("svg").attr("width",e).attr("height",n),w={},j=!1;_.selectAll(".venn-area path").each((function(e){var n=t.select(this).attr("d");1==e.sets.length&&n&&(j=!0,w[e.sets[0]]=G(n))}));var M=function(t){return function(r){return V(t.sets.map((function(t){var a=w[t],i=m[t];return a||(a={x:e/2,y:n/2,radius:1}),i||(i={x:e/2,y:n/2,radius:1}),{x:a.x*(1-r)+i.x*r,y:a.y*(1-r)+i.y*r,radius:a.radius*(1-r)+i.radius*r}})))}},S=_.selectAll(".venn-area").data(h,(function(e){return e.sets})),O=S.enter().append("g").attr("class",(function(e){return"venn-area venn-"+(1==e.sets.length?"circle":"intersection")})).attr("data-venn-sets",(function(e){return e.sets.join("_")})),E=O.append("path"),N=O.append("text").attr("class","label").text((function(e){return k(e)})).attr("text-anchor","middle").attr("dy",".35em").attr("x",e/2).attr("y",n/2);u&&(E.style("fill-opacity","0").filter((function(e){return 1==e.sets.length})).style("fill",(function(e){return d(e.sets)})).style("fill-opacity",".25"),N.style("fill",(function(e){return 1==e.sets.length?d(e.sets):"#444"})));var C=f;j?(C=f.transition("venn").duration(a)).selectAll("path").attrTween("d",M):C.selectAll("path").attr("d",(function(e){return V(e.sets.map((function(e){return m[e]})))}));var T=C.selectAll("text").filter((function(e){return e.sets in b})).text((function(e){return k(e)})).attr("x",(function(e){return Math.floor(b[e.sets].x)})).attr("y",(function(e){return Math.floor(b[e.sets].y)}));s&&(j?"on"in T?T.on("end",R(m,k)):T.each("end",R(m,k)):T.each(R(m,k)));var A=S.exit().transition("venn").duration(a).remove();A.selectAll("path").attrTween("d",M);var L=A.selectAll("text").attr("x",e/2).attr("y",n/2);return null!==l&&(N.style("font-size","0px"),T.style("font-size",l),L.style("font-size","0px")),{circles:m,textCentres:b,nodes:S,enter:O,update:C,exit:A}}return m.wrap=function(e){return arguments.length?(s=e,m):s},m.width=function(t){return arguments.length?(e=t,m):e},m.height=function(e){return arguments.length?(n=e,m):n},m.padding=function(e){return arguments.length?(r=e,m):r},m.colours=function(e){return arguments.length?(d=e,m):d},m.fontSize=function(e){return arguments.length?(l=e,m):l},m.duration=function(e){return arguments.length?(a=e,m):a},m.layoutFunction=function(e){return arguments.length?(g=e,m):g},m.normalize=function(e){return arguments.length?(o=e,m):o},m.styled=function(e){return arguments.length?(u=e,m):u},m.orientation=function(e){return arguments.length?(i=e,m):i},m.orientationOrder=function(e){return arguments.length?(c=e,m):c},m.lossFunction=function(e){return arguments.length?(v=e,m):v},m}function R(e,n){return function(){for(var r,a=t.select(this),i=a.datum(),o=e[i.sets[0]].radius||50,s=n(i)||"",u=s.split(/\s+/).reverse(),l=3,c=(s.length+u.length)/l,f=u.pop(),h=[f],p=0,d=1.1,g=a.text(null).append("tspan").text(f);f=u.pop();)h.push(f),r=h.join(" "),g.text(r),r.length>c&&g.node().getComputedTextLength()>o&&(h.pop(),g.text(h.join(" ")),h=[f],g=a.append("tspan").text(f),p++);var v=.35-p*d/2,m=a.attr("x"),b=a.attr("y");a.selectAll("tspan").attr("x",m).attr("y",b).attr("dy",(function(e,t){return v+t*d+"em"}))}}function B(e,t,n){var r,a,i=t[0].radius-u(t[0],e);for(r=1;r<t.length;++r)(a=t[r].radius-u(t[r],e))<=i&&(i=a);for(r=0;r<n.length;++r)(a=u(n[r],e)-n[r].radius)<=i&&(i=a);return i}function q(e,t){var n,r=[];for(n=0;n<e.length;++n){var i=e[n];r.push({x:i.x,y:i.y}),r.push({x:i.x+i.radius/2,y:i.y}),r.push({x:i.x-i.radius/2,y:i.y}),r.push({x:i.x,y:i.y+i.radius/2}),r.push({x:i.x,y:i.y-i.radius/2})}var o=r[0],s=B(r[0],e,t);for(n=1;n<r.length;++n){var l=B(r[n],e,t);l>=s&&(o=r[n],s=l)}var c=y((function(n){return-1*B({x:n[0],y:n[1]},e,t)}),[o.x,o.y],{maxIterations:500,minErrorDelta:1e-10}).x,h={x:c[0],y:c[1]},p=!0;for(n=0;n<e.length;++n)if(u(h,e[n])>e[n].radius){p=!1;break}for(n=0;n<t.length;++n)if(u(h,t[n])<t[n].radius){p=!1;break}if(!p)if(1==e.length)h={x:e[0].x,y:e[0].y};else{var d={};a(e,d),h=0===d.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==d.arcs.length?{x:d.arcs[0].circle.x,y:d.arcs[0].circle.y}:t.length?q(e,[]):f(d.arcs.map((function(e){return e.p1})))}return h}function z(e){var t={},n=[];for(var r in e)n.push(r),t[r]=[];for(var a=0;a<n.length;a++)for(var i=e[n[a]],o=a+1;o<n.length;++o){var s=e[n[o]],l=u(i,s);l+s.radius<=i.radius+1e-10?t[n[o]].push(n[a]):l+i.radius<=s.radius+1e-10&&t[n[a]].push(n[o])}return t}function U(e,t){for(var n={},r=z(e),a=0;a<t.length;++a){for(var i=t[a].sets,o={},s={},u=0;u<i.length;++u){o[i[u]]=!0;for(var l=r[i[u]],c=0;c<l.length;++c)s[l[c]]=!0}var f=[],h=[];for(var p in e)p in o?f.push(e[p]):p in s||h.push(e[p]);var d=q(f,h);n[i]=d,d.disjoint&&t[a].size>0&&console.log("WARNING: area "+i+" not represented on screen")}return n}function H(e,t){for(var n=z(e.selectAll("svg").datum()),r={},a=0;a<t.sets.length;++a){var i=t.sets[a];for(var o in n)for(var s=n[o],u=0;u<s.length;++u)if(s[u]==i){r[o]=!0;break}}function l(e){for(var t=0;t<e.length;++t)if(!(e[t]in r))return!1;return!0}e.selectAll("g").sort((function(e,n){return e.sets.length!=n.sets.length?e.sets.length-n.sets.length:e==t?l(n.sets)?-1:1:n==t?l(e.sets)?1:-1:n.size-e.size}))}function W(e,t,n){var r=[];return r.push("\nM",e,t),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}function G(e){var t=e.split(" ");return{x:parseFloat(t[1]),y:parseFloat(t[2]),radius:-parseFloat(t[4])}}function V(e){var t={};a(e,t);var n=t.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return W(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],o=0;o<n.length;++o){var s=n[o],u=s.circle.radius,l=s.width>u;i.push("\nA",u,u,0,l?1:0,1,s.p1.x,s.p1.y)}return i.join(" ")}e.intersectionArea=a,e.circleCircleIntersection=c,e.circleOverlap=l,e.circleArea=s,e.distance=u,e.venn=_,e.greedyLayout=C,e.scaleSolution=F,e.normalizeSolution=I,e.bestInitialLayout=E,e.lossFunction=T,e.disjointCluster=L,e.distanceFromIntersectArea=j,e.VennDiagram=D,e.wrapText=R,e.computeTextCentres=U,e.computeTextCentre=q,e.sortAreas=H,e.circlePath=W,e.circleFromPath=G,e.intersectionAreaPath=V,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(57),n(106))},function(e,t,n){!function(e,t,n,r,a,i,o){"use strict";var s=n.dispatch("start","end","cancel","interrupt"),u=[],l=0,c=1,f=2,h=3,p=4,d=5,g=6;function v(e,t,n,r,a,i){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};x(e,n,{name:t,index:r,group:a,on:s,tween:u,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:l})}function m(e,t){var n=y(e,t);if(n.state>l)throw new Error("too late; already scheduled");return n}function b(e,t){var n=y(e,t);if(n.state>h)throw new Error("too late; already running");return n}function y(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function x(e,t,n){var a,i=e.__transition;function o(e){n.state=c,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}function s(o){var d,v,m,b;if(n.state!==c)return l();for(d in i)if((b=i[d]).name===n.name){if(b.state===h)return r.timeout(s);b.state===p?(b.state=g,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete i[d]):+d<t&&(b.state=g,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete i[d])}if(r.timeout((function(){n.state===h&&(n.state=p,n.timer.restart(u,n.delay,n.time),u(o))})),n.state=f,n.on.call("start",e,e.__data__,n.index,n.group),n.state===f){for(n.state=h,a=new Array(m=n.tween.length),d=0,v=-1;d<m;++d)(b=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=b);a.length=v+1}}function u(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=d,1),i=-1,o=a.length;++i<o;)a[i].call(e,r);n.state===d&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=g,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=r.timer(o,0,n.time)}function k(e,t){var n,r,a,i=e.__transition,o=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name===t?(r=n.state>f&&n.state<d,n.state=g,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]):o=!1;o&&delete e.__transition}}function _(e){return this.each((function(){k(this,e)}))}function w(e,t){var n,r;return function(){var a=b(this,e),i=a.tween;if(i!==n)for(var o=0,s=(r=n=i).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}a.tween=r}}function j(e,t,n){var r,a;if("function"!=typeof n)throw new Error;return function(){var i=b(this,e),o=i.tween;if(o!==r){a=(r=o).slice();for(var s={name:t,value:n},u=0,l=a.length;u<l;++u)if(a[u].name===t){a[u]=s;break}u===l&&a.push(s)}i.tween=a}}function M(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=y(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?w:j)(n,e,t))}function S(e,t,n){var r=e._id;return e.each((function(){var e=b(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return y(e,r).value[t]}}function O(e,t){var n;return("number"==typeof t?a.interpolateNumber:t instanceof i.color?a.interpolateRgb:(n=i.color(t))?(t=n,a.interpolateRgb):a.interpolateString)(e,t)}function E(e){return function(){this.removeAttribute(e)}}function N(e){return function(){this.removeAttributeNS(e.space,e.local)}}function C(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function T(e,t,n){var r,a,i=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function A(e,t,n){var r,a,i;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttribute(e))===(s=u+"")?null:o===r&&s===a?i:(a=s,i=t(r=o,u));this.removeAttribute(e)}}function L(e,t,n){var r,a,i;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:o===r&&s===a?i:(a=s,i=t(r=o,u));this.removeAttributeNS(e.space,e.local)}}function P(e,n){var r=t.namespace(e),i="transform"===r?a.interpolateTransformSvg:O;return this.attrTween(e,"function"==typeof n?(r.local?L:A)(r,i,S(this,"attr."+e,n)):null==n?(r.local?N:E)(r):(r.local?T:C)(r,i,n))}function I(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function F(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function D(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&F(e,a)),n}return a._value=t,a}function R(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&I(e,a)),n}return a._value=t,a}function B(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;var a=t.namespace(e);return this.tween(r,(a.local?D:R)(a,n))}function q(e,t){return function(){m(this,e).delay=+t.apply(this,arguments)}}function z(e,t){return t=+t,function(){m(this,e).delay=t}}function U(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?q:z)(t,e)):y(this.node(),t).delay}function H(e,t){return function(){b(this,e).duration=+t.apply(this,arguments)}}function W(e,t){return t=+t,function(){b(this,e).duration=t}}function G(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?H:W)(t,e)):y(this.node(),t).duration}function V(e,t){if("function"!=typeof t)throw new Error;return function(){b(this,e).ease=t}}function K(e){var t=this._id;return arguments.length?this.each(V(t,e)):y(this.node(),t).ease}function $(e){"function"!=typeof e&&(e=t.matcher(e));for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i)for(var o,s=n[i],u=s.length,l=a[i]=[],c=0;c<u;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new we(a,this._parents,this._name,this._id)}function Y(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var u,l=t[s],c=n[s],f=l.length,h=o[s]=new Array(f),p=0;p<f;++p)(u=l[p]||c[p])&&(h[p]=u);for(;s<r;++s)o[s]=t[s];return new we(o,this._parents,this._name,this._id)}function J(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}function X(e,t,n){var r,a,i=J(t)?m:b;return function(){var o=i(this,e),s=o.on;s!==r&&(a=(r=s).copy()).on(t,n),o.on=a}}function Q(e,t){var n=this._id;return arguments.length<2?y(this.node(),n).on.on(e):this.each(X(n,e,t))}function Z(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ee(){return this.on("end.remove",Z(this._id))}function te(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=t.selector(e));for(var a=this._groups,i=a.length,o=new Array(i),s=0;s<i;++s)for(var u,l,c=a[s],f=c.length,h=o[s]=new Array(f),p=0;p<f;++p)(u=c[p])&&(l=e.call(u,u.__data__,p,c))&&("__data__"in u&&(l.__data__=u.__data__),h[p]=l,v(h[p],n,r,p,h,y(u,r)));return new we(o,this._parents,n,r)}function ne(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=t.selectorAll(e));for(var a=this._groups,i=a.length,o=[],s=[],u=0;u<i;++u)for(var l,c=a[u],f=c.length,h=0;h<f;++h)if(l=c[h]){for(var p,d=e.call(l,l.__data__,h,c),g=y(l,r),m=0,b=d.length;m<b;++m)(p=d[m])&&v(p,n,r,m,d,g);o.push(d),s.push(l)}return new we(o,s,n,r)}var re=t.selection.prototype.constructor;function ae(){return new re(this._groups,this._parents)}function ie(e,n){var r,a,i;return function(){var o=t.style(this,e),s=(this.style.removeProperty(e),t.style(this,e));return o===s?null:o===r&&s===a?i:i=n(r=o,a=s)}}function oe(e){return function(){this.style.removeProperty(e)}}function se(e,n,r){var a,i,o=r+"";return function(){var s=t.style(this,e);return s===o?null:s===a?i:i=n(a=s,r)}}function ue(e,n,r){var a,i,o;return function(){var s=t.style(this,e),u=r(this),l=u+"";return null==u&&(this.style.removeProperty(e),l=u=t.style(this,e)),s===l?null:s===a&&l===i?o:(i=l,o=n(a=s,u))}}function le(e,t){var n,r,a,i,o="style."+t,s="end."+o;return function(){var u=b(this,e),l=u.on,c=null==u.value[o]?i||(i=oe(t)):void 0;l===n&&a===c||(r=(n=l).copy()).on(s,a=c),u.on=r}}function ce(e,t,n){var r="transform"==(e+="")?a.interpolateTransformCss:O;return null==t?this.styleTween(e,ie(e,r)).on("end.style."+e,oe(e)):"function"==typeof t?this.styleTween(e,ue(e,r,S(this,"style."+e,t))).each(le(this._id,e)):this.styleTween(e,se(e,r,t),n).on("end.style."+e,null)}function fe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function he(e,t,n){var r,a;function i(){var i=t.apply(this,arguments);return i!==a&&(r=(a=i)&&fe(e,i,n)),r}return i._value=t,i}function pe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,he(e,t,null==n?"":n))}function de(e){return function(){this.textContent=e}}function ge(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function ve(e){return this.tween("text","function"==typeof e?ge(S(this,"text",e)):de(null==e?"":e+""))}function me(e){return function(t){this.textContent=e.call(this,t)}}function be(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&me(r)),t}return r._value=e,r}function ye(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,be(e))}function xe(){for(var e=this._name,t=this._id,n=Me(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=y(o,t);v(o,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new we(r,this._parents,e,n)}function ke(){var e,t,n=this,r=n._id,a=n.size();return new Promise((function(i,o){var s={value:o},u={value:function(){0==--a&&i()}};n.each((function(){var n=b(this,r),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t}))}))}var _e=0;function we(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function je(e){return t.selection().transition(e)}function Me(){return++_e}var Se=t.selection.prototype;we.prototype=je.prototype={constructor:we,select:te,selectAll:ne,filter:$,merge:Y,selection:ae,transition:xe,call:Se.call,nodes:Se.nodes,node:Se.node,size:Se.size,empty:Se.empty,each:Se.each,on:Q,attr:P,attrTween:B,style:ce,styleTween:pe,text:ve,textTween:ye,remove:ee,tween:M,delay:U,duration:G,ease:K,end:ke};var Oe={time:null,delay:0,duration:250,ease:o.easeCubicInOut};function Ee(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return Oe.time=r.now(),Oe;return n}function Ne(e){var t,n;e instanceof we?(t=e._id,e=e._name):(t=Me(),(n=Oe).time=r.now(),e=null==e?null:e+"");for(var a=this._groups,i=a.length,o=0;o<i;++o)for(var s,u=a[o],l=u.length,c=0;c<l;++c)(s=u[c])&&v(s,e,t,c,u,n||Ee(s,t));return new we(a,this._parents,e,t)}t.selection.prototype.interrupt=_,t.selection.prototype.transition=Ne;var Ce=[null];function Te(e,t){var n,r,a=e.__transition;if(a)for(r in t=null==t?null:t+"",a)if((n=a[r]).state>c&&n.name===t)return new we([[e]],Ce,t,+r);return null}e.active=Te,e.interrupt=k,e.transition=je,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(57),n(107),n(108),n(109),n(58),n(110))},function(e,t,n){!function(e){"use strict";var t={value:function(){}};function n(){for(var e,t=0,n=arguments.length,a={};t<n;++t){if(!(e=arguments[t]+"")||e in a||/[\s.]/.test(e))throw new Error("illegal type: "+e);a[e]=[]}return new r(a)}function r(e){this._=e}function a(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function i(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}function o(e,n,r){for(var a=0,i=e.length;a<i;++a)if(e[a].name===n){e[a]=t,e=e.slice(0,a).concat(e.slice(a+1));break}return null!=r&&e.push({name:n,value:r}),e}r.prototype=n.prototype={constructor:r,on:function(e,t){var n,r=this._,s=a(e+"",r),u=-1,l=s.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++u<l;)if(n=(e=s[u]).type)r[n]=o(r[n],e.name,t);else if(null==t)for(n in r)r[n]=o(r[n],e.name,null);return this}for(;++u<l;)if((n=(e=s[u]).type)&&(n=i(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new r(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}},e.dispatch=n,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){!function(e){"use strict";var t,n,r=0,a=0,i=0,o=1e3,s=0,u=0,l=0,c="object"==typeof performance&&performance.now?performance:Date,f="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function h(){return u||(f(p),u=c.now()+l)}function p(){u=0}function d(){this._call=this._time=this._next=null}function g(e,t,n){var r=new d;return r.restart(e,t,n),r}function v(){h(),++r;for(var e,n=t;n;)(e=u-n._time)>=0&&n._call.call(null,e),n=n._next;--r}function m(){u=(s=c.now())+l,r=a=0;try{v()}finally{r=0,y(),u=0}}function b(){var e=c.now(),t=e-s;t>o&&(l-=t,s=e)}function y(){for(var e,r,a=t,i=1/0;a;)a._call?(i>a._time&&(i=a._time),e=a,a=a._next):(r=a._next,a._next=null,a=e?e._next=r:t=r);n=e,x(i)}function x(e){r||(a&&(a=clearTimeout(a)),e-u>24?(e<1/0&&(a=setTimeout(m,e-c.now()-l)),i&&(i=clearInterval(i))):(i||(s=c.now(),i=setInterval(b,o)),r=1,f(m)))}function k(e,t,n){var r=new d;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}function _(e,t,n){var r=new d,a=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?h():+n,r.restart((function i(o){o+=a,r.restart(i,a+=t,n),e(o)}),t,n),r)}d.prototype=g.prototype={constructor:d,restart:function(e,r,a){if("function"!=typeof e)throw new TypeError("callback is not a function");a=(null==a?h():+a)+(null==r?0:+r),this._next||n===this||(n?n._next=this:t=this,n=this),this._call=e,this._time=a,x()},stop:function(){this._call&&(this._call=null,this._time=1/0,x())}},e.interval=_,e.now=h,e.timeout=k,e.timer=g,e.timerFlush=v,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){!function(e,t){"use strict";function n(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}function r(e){var t=e.length-1;return function(r){var a=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[a],o=e[a+1],s=a>0?e[a-1]:2*i-o,u=a<t-1?e[a+2]:2*o-i;return n((r-a/t)*t,s,i,o,u)}}function a(e){var t=e.length;return function(r){var a=Math.floor(((r%=1)<0?++r:r)*t),i=e[(a+t-1)%t],o=e[a%t],s=e[(a+1)%t],u=e[(a+2)%t];return n((r-a/t)*t,i,o,s,u)}}function i(e){return function(){return e}}function o(e,t){return function(n){return e+n*t}}function s(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function u(e,t){var n=t-e;return n?o(e,n>180||n<-180?n-360*Math.round(n/360):n):i(isNaN(e)?t:e)}function l(e){return 1==(e=+e)?c:function(t,n){return n-t?s(t,n,e):i(isNaN(t)?n:t)}}function c(e,t){var n=t-e;return n?o(e,n):i(isNaN(e)?t:e)}var f=function e(n){var r=l(n);function a(e,n){var a=r((e=t.rgb(e)).r,(n=t.rgb(n)).r),i=r(e.g,n.g),o=r(e.b,n.b),s=c(e.opacity,n.opacity);return function(t){return e.r=a(t),e.g=i(t),e.b=o(t),e.opacity=s(t),e+""}}return a.gamma=e,a}(1);function h(e){return function(n){var r,a,i=n.length,o=new Array(i),s=new Array(i),u=new Array(i);for(r=0;r<i;++r)a=t.rgb(n[r]),o[r]=a.r||0,s[r]=a.g||0,u[r]=a.b||0;return o=e(o),s=e(s),u=e(u),a.opacity=1,function(e){return a.r=o(e),a.g=s(e),a.b=u(e),a+""}}}var p=h(r),d=h(a);function g(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(i){for(n=0;n<r;++n)a[n]=e[n]*(1-i)+t[n]*i;return a}}function v(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function m(e,t){return(v(t)?g:b)(e,t)}function b(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,i=new Array(a),o=new Array(r);for(n=0;n<a;++n)i[n]=O(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<a;++n)o[n]=i[n](e);return o}}function y(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function x(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function k(e,t){var n,r={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=O(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var _=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w=new RegExp(_.source,"g");function j(e){return function(){return e}}function M(e){return function(t){return e(t)+""}}function S(e,t){var n,r,a,i=_.lastIndex=w.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=_.exec(e))&&(r=w.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:x(n,r)})),i=w.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?M(u[0].x):j(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function O(e,n){var r,a=typeof n;return null==n||"boolean"===a?i(n):("number"===a?x:"string"===a?(r=t.color(n))?(n=r,f):S:n instanceof t.color?f:n instanceof Date?y:v(n)?g:Array.isArray(n)?b:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?k:x)(e,n)}function E(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function N(e,t){var n=u(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}function C(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var T,A,L,P,I=180/Math.PI,F={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function D(e,t,n,r,a,i){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*I,skewX:Math.atan(u)*I,scaleX:o,scaleY:s}}function R(e){return"none"===e?F:(T||(T=document.createElement("DIV"),A=document.documentElement,L=document.defaultView),T.style.transform=e,e=L.getComputedStyle(A.appendChild(T),null).getPropertyValue("transform"),A.removeChild(T),D(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function B(e){return null==e?F:(P||(P=document.createElementNS("http://www.w3.org/2000/svg","g")),P.setAttribute("transform",e),(e=P.transform.baseVal.consolidate())?D((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):F)}function q(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}function i(e,r,a,i,o,s){if(e!==a||r!==i){var u=o.push("translate(",null,t,null,n);s.push({i:u-4,x:x(e,a)},{i:u-2,x:x(r,i)})}else(a||i)&&o.push("translate("+a+t+i+n)}function o(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:x(e,t)})):t&&n.push(a(n)+"rotate("+t+r)}function s(e,t,n,i){e!==t?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:x(e,t)}):t&&n.push(a(n)+"skewX("+t+r)}function u(e,t,n,r,i,o){if(e!==n||t!==r){var s=i.push(a(i)+"scale(",null,",",null,")");o.push({i:s-4,x:x(e,n)},{i:s-2,x:x(t,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}return function(t,n){var r=[],a=[];return t=e(t),n=e(n),i(t.translateX,t.translateY,n.translateX,n.translateY,r,a),o(t.rotate,n.rotate,r,a),s(t.skewX,n.skewX,r,a),u(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,a),t=n=null,function(e){for(var t,n=-1,i=a.length;++n<i;)r[(t=a[n]).i]=t.x(e);return r.join("")}}}var z=q(R,"px, ","px)","deg)"),U=q(B,", ",")",")"),H=Math.SQRT2,W=2,G=4,V=1e-12;function K(e){return((e=Math.exp(e))+1/e)/2}function $(e){return((e=Math.exp(e))-1/e)/2}function Y(e){return((e=Math.exp(2*e))-1)/(e+1)}function J(e,t){var n,r,a=e[0],i=e[1],o=e[2],s=t[0],u=t[1],l=t[2],c=s-a,f=u-i,h=c*c+f*f;if(h<V)r=Math.log(l/o)/H,n=function(e){return[a+e*c,i+e*f,o*Math.exp(H*e*r)]};else{var p=Math.sqrt(h),d=(l*l-o*o+G*h)/(2*o*W*p),g=(l*l-o*o-G*h)/(2*l*W*p),v=Math.log(Math.sqrt(d*d+1)-d),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/H,n=function(e){var t=e*r,n=K(v),s=o/(W*p)*(n*Y(H*t+v)-$(v));return[a+s*c,i+s*f,o*n/K(H*t+v)]}}return n.duration=1e3*r,n}function X(e){return function(n,r){var a=e((n=t.hsl(n)).h,(r=t.hsl(r)).h),i=c(n.s,r.s),o=c(n.l,r.l),s=c(n.opacity,r.opacity);return function(e){return n.h=a(e),n.s=i(e),n.l=o(e),n.opacity=s(e),n+""}}}var Q=X(u),Z=X(c);function ee(e,n){var r=c((e=t.lab(e)).l,(n=t.lab(n)).l),a=c(e.a,n.a),i=c(e.b,n.b),o=c(e.opacity,n.opacity);return function(t){return e.l=r(t),e.a=a(t),e.b=i(t),e.opacity=o(t),e+""}}function te(e){return function(n,r){var a=e((n=t.hcl(n)).h,(r=t.hcl(r)).h),i=c(n.c,r.c),o=c(n.l,r.l),s=c(n.opacity,r.opacity);return function(e){return n.h=a(e),n.c=i(e),n.l=o(e),n.opacity=s(e),n+""}}}var ne=te(u),re=te(c);function ae(e){return function n(r){function a(n,a){var i=e((n=t.cubehelix(n)).h,(a=t.cubehelix(a)).h),o=c(n.s,a.s),s=c(n.l,a.l),u=c(n.opacity,a.opacity);return function(e){return n.h=i(e),n.s=o(e),n.l=s(Math.pow(e,r)),n.opacity=u(e),n+""}}return r=+r,a.gamma=n,a}(1)}var ie=ae(u),oe=ae(c);function se(e,t){for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return i[t](e-t)}}function ue(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}e.interpolate=O,e.interpolateArray=m,e.interpolateBasis=r,e.interpolateBasisClosed=a,e.interpolateCubehelix=ie,e.interpolateCubehelixLong=oe,e.interpolateDate=y,e.interpolateDiscrete=E,e.interpolateHcl=ne,e.interpolateHclLong=re,e.interpolateHsl=Q,e.interpolateHslLong=Z,e.interpolateHue=N,e.interpolateLab=ee,e.interpolateNumber=x,e.interpolateNumberArray=g,e.interpolateObject=k,e.interpolateRgb=f,e.interpolateRgbBasis=p,e.interpolateRgbBasisClosed=d,e.interpolateRound=C,e.interpolateString=S,e.interpolateTransformCss=z,e.interpolateTransformSvg=U,e.interpolateZoom=J,e.piecewise=se,e.quantize=ue,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(58))},function(e,t,n){!function(e){"use strict";function t(e){return+e}function n(e){return e*e}function r(e){return e*(2-e)}function a(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function i(e){return e*e*e}function o(e){return--e*e*e+1}function s(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var u=3,l=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(u),c=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(u),f=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(u),h=Math.PI,p=h/2;function d(e){return 1-Math.cos(e*p)}function g(e){return Math.sin(e*p)}function v(e){return(1-Math.cos(h*e))/2}function m(e){return Math.pow(2,10*e-10)}function b(e){return 1-Math.pow(2,-10*e)}function y(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function x(e){return 1-Math.sqrt(1-e*e)}function k(e){return Math.sqrt(1- --e*e)}function _(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var w=4/11,j=6/11,M=8/11,S=3/4,O=9/11,E=10/11,N=15/16,C=21/22,T=63/64,A=1/w/w;function L(e){return 1-P(1-e)}function P(e){return(e=+e)<w?A*e*e:e<M?A*(e-=j)*e+S:e<E?A*(e-=O)*e+N:A*(e-=C)*e+T}function I(e){return((e*=2)<=1?1-P(1-e):P(e-1)+1)/2}var F=1.70158,D=function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n}(F),R=function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(F),B=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(F),q=2*Math.PI,z=1,U=.3,H=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=q);function a(e){return t*Math.pow(2,10*--e)*Math.sin((r-e)/n)}return a.amplitude=function(t){return e(t,n*q)},a.period=function(n){return e(t,n)},a}(z,U),W=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=q);function a(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+r)/n)}return a.amplitude=function(t){return e(t,n*q)},a.period=function(n){return e(t,n)},a}(z,U),G=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=q);function a(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((r-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((r+e)/n))/2}return a.amplitude=function(t){return e(t,n*q)},a.period=function(n){return e(t,n)},a}(z,U);e.easeBack=B,e.easeBackIn=D,e.easeBackInOut=B,e.easeBackOut=R,e.easeBounce=P,e.easeBounceIn=L,e.easeBounceInOut=I,e.easeBounceOut=P,e.easeCircle=_,e.easeCircleIn=x,e.easeCircleInOut=_,e.easeCircleOut=k,e.easeCubic=s,e.easeCubicIn=i,e.easeCubicInOut=s,e.easeCubicOut=o,e.easeElastic=W,e.easeElasticIn=H,e.easeElasticInOut=G,e.easeElasticOut=W,e.easeExp=y,e.easeExpIn=m,e.easeExpInOut=y,e.easeExpOut=b,e.easeLinear=t,e.easePoly=f,e.easePolyIn=l,e.easePolyInOut=f,e.easePolyOut=c,e.easeQuad=a,e.easeQuadIn=n,e.easeQuadInOut=a,e.easeQuadOut=r,e.easeSin=v,e.easeSinIn=d,e.easeSinInOut=v,e.easeSinOut=g,Object.defineProperty(e,"__esModule",{value:!0})}(t)},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"renderApp",(function(){return En}));var r=n(0),a=n(20),i=n.n(a),o=n(11),s=n.n(o),u=n(4),l=(n(66),n(22)),c=n(17),f=n(15),h=n(13),p=n(16),d=n(23),g=n(18);var v=n(3);const m="graph-workspace",b={title:"text",description:"text",numLinks:"integer",numVertices:"integer",version:"integer",wsState:"json"},y={title:r.i18n.translate("xpack.graph.savedWorkspace.workspaceNameTitle",{defaultMessage:"New Graph Workspace"}),numLinks:0,numVertices:0,wsState:"{}",version:1};function x({savedObjectsClient:e,basePath:t},n,r=100){return e.find({type:m,search:n?`${n}*`:void 0,perPage:r,searchFields:["title^3","description"]}).then((e=>({total:e.total,hits:e.savedObjects.map((e=>function(e,t){const n=e.attributes;return n.id=e.id,n.url=t,n.icon="fa-share-alt",n}(e,((e,t)=>e.prepend(`/app/graph#/workspace/${encodeURIComponent(t)}`))(t,e.id))))})))}async function k(e,t){const n=await e.resolve(m,t),r=n.saved_object;if(!r._version)throw new v.SavedObjectNotFound(m,t||"");const a={id:t,displayName:"graph workspace",getEsType:()=>m,_source:Object(d.cloneDeep)(r.attributes)};Object(d.defaults)(a._source,y),a._source.wsState&&(a._source.wsState=JSON.parse(a._source.wsState)),Object(d.assign)(a,a._source),a.lastSavedTitle=a.title,r.references&&r.references.length>0&&function(e,t){if("string"!=typeof e.wsState)return;const n=JSON.parse(e.wsState);if(!n.indexPatternRefName)return;const r=t.find((e=>e.name===n.indexPatternRefName));if(!r)throw new Error(`Could not find reference "${n.indexPatternRefName}"`);n.indexPattern=r.id,delete n.indexPatternRefName,e.wsState=JSON.stringify(n)}(a,r.references);return{savedObject:a,sharingSavedObjectProps:{outcome:n.outcome,aliasTargetId:n.alias_target_id}}}async function _(e,{confirmOverwrite:t=!1,isTitleDuplicateConfirmed:n=!1,onTitleDuplicate:r}={},a){const i=e.id;e.copyOnSave&&delete e.id;let o={};Object(d.forOwn)(b,((t,n)=>{const r=e[n];null!=r&&(o[n]="wsState"===n?JSON.stringify(r):r)}));const s=function({attributes:e,references:t=[]}){const n=JSON.parse(JSON.parse(String(e.wsState))),{indexPattern:r}=n;if(!r)throw new Error('indexPattern attribute is missing in "wsState"');return n.indexPatternRefName="indexPattern_0",delete n.indexPattern,{references:[...t,{name:"indexPattern_0",type:"index-pattern",id:r}],attributes:{...e,wsState:JSON.stringify(JSON.stringify(n))}}}({attributes:o,references:[]}),u=s.references;if(o=s.attributes,!u)throw new Error("References not returned from extractReferences");try{await Object(g.checkForDuplicateTitle)(e,n,r,a),e.isSaving=!0;const i={id:e.id,migrationVersion:e.migrationVersion,references:u},s=t?await Object(g.saveWithConfirmation)(o,e,i,a):await a.savedObjectsClient.create(e.getEsType(),o,{...i,overwrite:!0});return e.id=s.id,e.isSaving=!1,e.lastSavedTitle=e.title,e.id}catch(t){return e.isSaving=!1,e.id=i,Object(g.isErrorNonFatal)(t)?"":Promise.reject(t)}}function w({id:e}){return`/workspace/${e}`}function j(e,t){return e(`#${w(t)}`)}function M(e){"metaData"in e?e.chrome.setBreadcrumbs([{text:r.i18n.translate("xpack.graph.home.breadcrumb",{defaultMessage:"Graph"}),onClick:()=>{e.navigateTo("/home")},"data-test-subj":"graphHomeBreadcrumb"},{text:e.metaData.title,"data-test-subj":"graphCurrentGraphBreadcrumb"}]):e.chrome.setBreadcrumbs([{text:r.i18n.translate("xpack.graph.home.breadcrumb",{defaultMessage:"Graph"}),href:"#/home","data-test-subj":"graphHomeBreadcrumb"}])}var S=n(12);function O({deps:{chrome:e,savedObjects:t,savedObjectsClient:n,coreStart:a,capabilities:i,addBasePath:s}}){const u=t.settings.getListingLimit(),l=t.settings.getPerPage(),h=Object(c.useHistory)(),d=new URLSearchParams(Object(c.useLocation)().search).get("filter")||"";Object(o.useEffect)((()=>{M({chrome:e})}),[e]);const g=Object(o.useCallback)((()=>{h.push("/workspace")}),[h]),v=Object(o.useCallback)((e=>x({savedObjectsClient:n,basePath:a.http.basePath},e,u)),[a.http.basePath,u,n]),b=Object(o.useCallback)((e=>{h.push(w(e))}),[h]),y=Object(o.useCallback)((e=>j(s,e)),[s]),k=Object(o.useCallback)((async e=>{await function(e,t){return Promise.all(t.map((t=>e.delete(m,t))))}(n,e.map((e=>e.id)))}),[n]);return Object(S.jsx)(f.I18nProvider,null,Object(S.jsx)(p.TableListView,{tableCaption:r.i18n.translate("xpack.graph.listing.graphsTitle",{defaultMessage:"Graphs"}),headingId:"graphListingHeading",rowHeader:"title",createItem:i.graph.save?g:void 0,findItems:v,deleteItems:i.graph.delete?k:void 0,editItem:i.graph.save?b:void 0,tableColumns:N(y),listingLimit:u,initialFilter:d,initialPageSize:l,emptyPrompt:E(!1===i.graph.save,g,a.application),toastNotifications:a.notifications.toasts,entityName:r.i18n.translate("xpack.graph.listing.table.entityName",{defaultMessage:"graph"}),entityNamePlural:r.i18n.translate("xpack.graph.listing.table.entityNamePlural",{defaultMessage:"graphs"}),tableListTitle:r.i18n.translate("xpack.graph.listing.graphsTitle",{defaultMessage:"Graphs"}),theme:a.theme}))}function E(e,t,n){if(e)return Object(S.jsx)(h.EuiEmptyPrompt,{iconType:"graphApp",title:Object(S.jsx)("h1",{id:"graphListingHeading"},Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.listing.noItemsMessage",defaultMessage:"Looks like you don't have any graphs."}))});const r=`${n.getUrlForApp("home")}#/tutorial_directory/sampleData`;return Object(S.jsx)(h.EuiEmptyPrompt,{iconType:"graphApp",title:Object(S.jsx)("h1",{id:"graphListingHeading"},Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.listing.createNewGraph.title",defaultMessage:"Create your first graph"})),body:Object(S.jsx)(o.Fragment,null,Object(S.jsx)("p",null,Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.listing.createNewGraph.combineDataViewFromKibanaAppDescription",defaultMessage:"Discover patterns and relationships in your Elasticsearch indices."})),Object(S.jsx)("p",null,Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.listing.createNewGraph.newToKibanaDescription",defaultMessage:"New to Kibana? Get started with {sampleDataInstallLink}.",values:{sampleDataInstallLink:Object(S.jsx)(h.EuiLink,{href:r},Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.listing.createNewGraph.sampleDataInstallLinkText",defaultMessage:"sample data"}))}}))),actions:Object(S.jsx)(h.EuiButton,{onClick:t,fill:!0,iconType:"plusInCircle","data-test-subj":"graphCreateGraphPromptButton"},Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.listing.createNewGraph.createButtonLabel",defaultMessage:"Create graph"}))})}function N(e){return[{field:"title",name:r.i18n.translate("xpack.graph.listing.table.titleColumnName",{defaultMessage:"Title"}),sortable:!0,render:(t,n)=>Object(S.jsx)(h.EuiLink,{href:e(n),"data-test-subj":`graphListingTitleLink-${n.title.split(" ").join("-")}`},t)},{field:"description",name:r.i18n.translate("xpack.graph.listing.table.descriptionColumnName",{defaultMessage:"Description"}),dataType:"string",sortable:!0}]}var C=n(29),T=n(31),A=n.n(T),L=n(36),P=n(41),I=n(33);const F=A()("x-pack/graph")("RESET"),D=A()("x-pack/graph/datasource"),R=D("SET_DATASOURCE"),B=D("SET_DATASOURCE_REQUEST"),q=D("SET_DATASOURCE_SUCCESS"),z={current:{type:"none"},loading:!1},U=Object(L.reducerWithInitialState)(z).case(F,(()=>z)).case(R,((e,t)=>({current:t,loading:!1}))).case(B,((e,t)=>({current:t,loading:!0}))).case(q,(e=>({...e,loading:!1}))).build(),H=e=>e.datasource,W=Object(P.createSelector)(H,(e=>"none"!==e.current.type)),G=(...e)=>t=>e.some((e=>e.match(t))),V=A()("x-pack/graph/fields"),K=V("LOAD_FIELDS"),$=V("UPDATE_FIELD_PROPERTIES"),Y=V("SELECT_FIELD"),J=V("DESELECT_FIELD"),X={},Q=Object(L.reducerWithInitialState)(X).case(F,(()=>X)).case(R,(()=>X)).case(K,((e,t)=>{const n={};return t.forEach((e=>{n[e.name]=e})),n})).case($,((e,{fieldName:t,fieldProperties:n})=>({...e,[t]:{...e[t],...n}}))).case(Y,((e,t)=>({...e,[t]:{...e[t],selected:!0}}))).case(J,((e,t)=>({...e,[t]:{...e[t],selected:!1}}))).build(),Z=e=>e.fields,ee=Object(P.createSelector)(Z,(e=>Object.values(e))),te=Object(P.createSelector)(ee,(e=>e.filter((e=>e.selected)))),ne=Object(P.createSelector)(te,(e=>e.filter((e=>e.hopSize&&e.hopSize>0)))),re=Object(P.createSelector)(te,(e=>e.length>0));var ae=n(24),ie=n(19),oe=n.n(ie),se=n(88);function ue(e){return e.replace(/"/g,'\\"')}function le(e,t){const n=e.returnUnpackedGroupeds(e.getSelectedOrAllNodes()).map((e=>`"${ue(e.data.field)}" : "${ue(e.data.term)}"`)).join(` ${t} `);return encodeURIComponent(oe.a.encode(n))}const ce=[{id:"kql-loose",title:r.i18n.translate("xpack.graph.outlinkEncoders.kqlLooseTitle",{defaultMessage:"KQL OR query"}),description:r.i18n.translate("xpack.graph.outlinkEncoders.kqlLooseDescription",{defaultMessage:"KQL query, compatible with Discover, Visualize, and Dashboards"}),encode:e=>le(e,"or"),type:"kql"},{id:"kql",title:r.i18n.translate("xpack.graph.outlinkEncoders.kqlTitle",{defaultMessage:"KQL AND query"}),description:r.i18n.translate("xpack.graph.outlinkEncoders.kqlLooseDescription",{defaultMessage:"KQL query, compatible with Discover, Visualize, and Dashboards"}),encode:e=>le(e,"and"),type:"kql"},{id:"esq-rison-loose",title:r.i18n.translate("xpack.graph.outlinkEncoders.esqRisonLooseTitle",{defaultMessage:"elasticsearch OR query (rison encoded)"}),description:r.i18n.translate("xpack.graph.outlinkEncoders.esqRisonLooseDescription",{defaultMessage:"rison-encoded JSON, minimum_should_match=1, compatible with most Kibana URLs"}),encode:e=>encodeURIComponent(oe.a.encode(e.getQuery(e.getSelectedOrAllNodes(),!0))),type:"esq"},{id:"esq-rison",title:r.i18n.translate("xpack.graph.outlinkEncoders.esqRisonTitle",{defaultMessage:"elasticsearch AND query (rison encoded)"}),description:r.i18n.translate("xpack.graph.outlinkEncoders.esqRisonDescription",{defaultMessage:"rison-encoded JSON, minimum_should_match=2, compatible with most Kibana URLs"}),encode:e=>encodeURIComponent(oe.a.encode(e.getQuery(e.getSelectedOrAllNodes()))),type:"esq"},{id:"esq-similar-rison",title:r.i18n.translate("xpack.graph.outlinkEncoders.esqSimilarRisonTitle",{defaultMessage:"elasticsearch more like this query (rison encoded)"}),description:r.i18n.translate("xpack.graph.outlinkEncoders.esqSimilarRisonDescription",{defaultMessage:'rison-encoded JSON, "like this but not this" type query to find missing docs'}),encode:e=>encodeURIComponent(oe.a.encode(e.getLikeThisButNotThisQuery(e.getSelectedOrAllNodes()))),type:"esq"},{id:"esq-plain",title:r.i18n.translate("xpack.graph.outlinkEncoders.esqPlainTitle",{defaultMessage:"elasticsearch query (plain encoding)"}),description:r.i18n.translate("xpack.graph.outlinkEncoders.esqPlainDescription",{defaultMessage:"JSON encoded using standard url encoding"}),encode:e=>encodeURIComponent(JSON.stringify(e.getQuery(e.getSelectedOrAllNodes()))),type:"esq"},{id:"text-plain",title:r.i18n.translate("xpack.graph.outlinkEncoders.textPlainTitle",{defaultMessage:"plain text"}),description:r.i18n.translate("xpack.graph.outlinkEncoders.textPlainDescription",{defaultMessage:"Text of selected vertex labels as a plain url-encoded string"}),encode(e){let t="";const n=e.getSelectedOrAllNodes();for(let e=0;e<n.length;e++){e>0&&(t+=" "),t+=n[e].label}return encodeURIComponent(t)},type:"plain"},{id:"text-lucene",title:r.i18n.translate("xpack.graph.outlinkEncoders.textLuceneTitle",{defaultMessage:"Lucene-escaped text"}),description:r.i18n.translate("xpack.graph.outlinkEncoders.textLuceneDescription",{defaultMessage:"Text of selected vertex labels with any Lucene special characters encoded"}),encode(e){let t="";const n=e.getSelectedOrAllNodes();for(let e=0;e<n.length;e++){e>0&&(t+=" "),t+=n[e].label}return t=t.split("").map((e=>'+-&|!(){}[]^"~*?:\\'.includes(e)?`\\${e}`:e)).join(""),encodeURIComponent(t)},type:"lucene"}],fe="{{gquery}}",he=/\{\{gquery\}\}/g,pe=/,query:\(language:kuery,query:'.*?'\)/g;function de(e){return e.search(pe)>-1}const ge=A()("x-pack/graph/urlTemplates"),ve=ge("LOAD_TEMPLATES"),me=ge("SAVE_TEMPLATE"),be=ge("REMOVE_TEMPLATE"),ye=[];function xe(e,t){const n=Object(ae.modifyUrl)("/",(t=>{t.query._a=oe.a.encode({columns:["_source"],index:e.id,interval:"auto",query:{language:"kuery",query:fe},sort:["_score","desc"]})})),a=Object(se.parse)(`/app/discover#${n}`,!0,!0);return{url:t(Object(se.format)({protocol:a.protocol,host:a.host,pathname:a.pathname,query:a.query,hash:a.hash})).replace(encodeURIComponent(fe),fe),description:r.i18n.translate("xpack.graph.settings.drillDowns.defaultUrlTemplateTitle",{defaultMessage:"Raw documents"}),encoder:ce[0],isDefault:!0,icon:null}}const ke=e=>Object(L.reducerWithInitialState)(ye).case(F,(()=>ye)).cases([B,R],((t,n)=>{if("none"===n.type)return ye;return[...t.filter((e=>!e.isDefault)),xe(n,e)]})).case(ve,((e,t)=>t)).case(me,((e,{index:t,template:n})=>{const r={...n,isDefault:!1};return-1===t?[...e,r]:e.map(((e,n)=>n===t?r:e))})).case(be,((e,t)=>e.filter((e=>e!==t)))).build(),_e=e=>e.urlTemplates,we=A()("x-pack/graph/advancedSettings")("UPDATE_SETTINGS"),je={useSignificance:!0,sampleSize:2e3,timeoutMillis:5e3,sampleDiversityField:void 0,maxValuesPerDoc:1,minDocCount:3},Me=Object(L.reducerWithInitialState)(je).case(F,(()=>je)).cases([B,R],(({sampleDiversityField:e,...t})=>({...t}))).case(we,((e,t)=>t)).build(),Se=e=>e.advancedSettings;function Oe({data:e,scaledSize:t,parent:n,x:r,y:a,label:i,color:o},s=[]){return{x:r,y:a,label:i,color:o,field:e.field,term:e.term,parent:n?s.indexOf(n):null,size:t}}function Ee({encoder:e,icon:t,url:n,description:r,isDefault:a}){const i={url:n,description:r,isDefault:a,encoderID:e.id};return t&&(i.iconClass=t.class),i}function Ne({name:e,icon:t,hopSize:n,lastValidHopSize:r,color:a,selected:i}){return{name:e,hopSize:n,lastValidHopSize:r,color:a,selected:i,iconClass:t.class}}var Ce=n(25);const Te=[{class:"fa-folder-open-o",code:"",patterns:[/category/i,/folder/i,/group/i],label:r.i18n.translate("xpack.graph.icon.folderOpen",{defaultMessage:"Folder open"})},{class:"fa-cube",code:"",patterns:[/prod/i,/sku/i],label:r.i18n.translate("xpack.graph.icon.cube",{defaultMessage:"Cube"})},{class:"fa-key",code:"",patterns:[/key/i],label:r.i18n.translate("xpack.graph.icon.key",{defaultMessage:"Key"})},{class:"fa-bank",code:"",patterns:[/bank/i,/account/i],label:r.i18n.translate("xpack.graph.icon.bank",{defaultMessage:"Bank"})},{class:"fa-automobile",code:"",patterns:[/car/i,/veh/i],label:r.i18n.translate("xpack.graph.icon.automobile",{defaultMessage:"Automobile"})},{class:"fa-home",code:"",patterns:[/address/i,/home/i],label:r.i18n.translate("xpack.graph.icon.home",{defaultMessage:"Home"})},{class:"fa-question",code:"",patterns:[/query/i,/search/i],label:r.i18n.translate("xpack.graph.icon.question",{defaultMessage:"Question"})},{class:"fa-plane",code:"",patterns:[/flight/i,/plane/i],label:r.i18n.translate("xpack.graph.icon.plane",{defaultMessage:"Plane"})},{class:"fa-file-o",code:"",patterns:[/file/i,/doc/i],label:r.i18n.translate("xpack.graph.icon.file",{defaultMessage:"File open"})},{class:"fa-user",code:"",patterns:[/user/i,/person/i,/people/i,/owner/i,/cust/i,/participant/i,/party/i,/member/i],label:r.i18n.translate("xpack.graph.icon.user",{defaultMessage:"User"})},{class:"fa-users",code:"",patterns:[/group/i,/team/i,/meeting/i],label:r.i18n.translate("xpack.graph.icon.users",{defaultMessage:"Users"})},{class:"fa-music",code:"",patterns:[/artist/i,/sound/i,/music/i],label:r.i18n.translate("xpack.graph.icon.music",{defaultMessage:"Music"})},{class:"fa-flag",code:"",patterns:[/country/i,/warn/i,/flag/i],label:r.i18n.translate("xpack.graph.icon.flag",{defaultMessage:"Flag"})},{class:"fa-tag",code:"",patterns:[/tag/i,/label/i],label:"Tag"},{class:"fa-phone",code:"",patterns:[/phone/i],label:r.i18n.translate("xpack.graph.icon.phone",{defaultMessage:"Phone"})},{class:"fa-desktop",code:"",patterns:[/host/i,/server/i],label:r.i18n.translate("xpack.graph.icon.desktop",{defaultMessage:"Desktop"})},{class:"fa-font",code:"",patterns:[/text/i,/title/i,/body/i,/desc/i],label:r.i18n.translate("xpack.graph.icon.font",{defaultMessage:"Font"})},{class:"fa-at",code:"",patterns:[/account/i,/email/i],label:r.i18n.translate("xpack.graph.icon.at",{defaultMessage:"At"})},{class:"fa-heart",code:"",patterns:[/like/i,/favourite/i,/favorite/i],label:r.i18n.translate("xpack.graph.icon.heart",{defaultMessage:"Heart"})},{class:"fa-bolt",code:"",patterns:[/action/i],label:r.i18n.translate("xpack.graph.icon.bolt",{defaultMessage:"Bolt"})},{class:"fa-map-marker",code:"",patterns:[/location/i,/geo/i,/position/i],label:r.i18n.translate("xpack.graph.icon.mapMarker",{defaultMessage:"Map marker"})},{class:"fa-exclamation",code:"",patterns:[/risk/i,/error/i,/warn/i],label:r.i18n.translate("xpack.graph.icon.exclamation",{defaultMessage:"Exclamation"})},{class:"fa-industry",code:"",patterns:[/business/i,/company/i,/industry/i,/organisation/i],label:r.i18n.translate("xpack.graph.icon.industry",{defaultMessage:"Industry"})}],Ae={};Te.forEach((e=>{Ae[e.class]=e}));const Le=[{class:"fa-line-chart",code:"",label:r.i18n.translate("xpack.graph.icon.lineChart",{defaultMessage:"Line chart"})},{class:"fa-pie-chart",code:"",label:r.i18n.translate("xpack.graph.icon.pieChart",{defaultMessage:"Pie chart"})},{class:"fa-area-chart",code:"",label:r.i18n.translate("xpack.graph.icon.areaChart",{defaultMessage:"Area chart"})},{class:"fa-bar-chart",code:"",label:r.i18n.translate("xpack.graph.icon.barChart",{defaultMessage:"Bar chart"})},{class:"fa-globe",code:"",label:r.i18n.translate("xpack.graph.icon.globe",{defaultMessage:"Globe"})},{class:"fa-file-text-o",code:"",label:r.i18n.translate("xpack.graph.icon.fileText",{defaultMessage:"File"})},{class:"fa-google",code:"",label:r.i18n.translate("xpack.graph.icon.google",{defaultMessage:"Google"})},{class:"fa-eye",code:"",label:r.i18n.translate("xpack.graph.icon.eye",{defaultMessage:"Eye"})},{class:"fa-tachometer",code:"",label:r.i18n.translate("xpack.graph.icon.tachometer",{defaultMessage:"Tachometer"})},{class:"fa-info",code:"",label:r.i18n.translate("xpack.graph.icon.info",{defaultMessage:"Info"})},{class:"fa-external-link",code:"",label:r.i18n.translate("xpack.graph.icon.externalLink",{defaultMessage:"External link"})},{class:"fa-table",code:"",label:r.i18n.translate("xpack.graph.icon.table",{defaultMessage:"Table"})},{class:"fa-list",code:"",label:r.i18n.translate("xpack.graph.icon.list",{defaultMessage:"List"})},{class:"fa-share-alt",code:"",label:r.i18n.translate("xpack.graph.icon.shareAlt",{defaultMessage:"Share alt"})}],Pe={};Le.forEach((e=>{Pe[e.class]=e}));const Ie=Object(Ce.euiPaletteColorBlind)();var Fe=n(21);const De={useSignificance:!0,sampleSize:2e3,timeoutMillis:5e3,maxValuesPerDoc:1,minDocCount:3};function Re({encoderID:e,iconClass:t,...n}){const r=ce.find((t=>t.id===e));if(!r)return;const a={...n,encoder:r,icon:null};if(t){const e=Pe[t];a.icon=e||null}return a}function Be(e){const t=["_id","_index","_score","_source","_type"];return e.getNonScriptedFields().filter((e=>e.isMapped&&!t.includes(e.name)&&!Fe.indexPatterns.isNestedField(e))).map(((e,t)=>{return{name:e.name,hopSize:5,lastValidHopSize:5,icon:(n=e.name,Te.find((e=>e.patterns.some((e=>e.test(n)))))||Te[0]),color:Ie[t%Ie.length],selected:!1,type:e.type,aggregatable:Boolean(e.aggregatable)};var n})).sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0))}function qe(e,t){return e+".."+t}function ze(e,t,n){const r=JSON.parse(e.wsState),a=r.urlTemplates.map(Re).filter((e=>Boolean(e))),i=function(e,t){const n=Be(e);return t.forEach((e=>{const t=n.find((t=>t.name===e.name));t&&(t.hopSize=e.hopSize,t.lastValidHopSize=e.lastValidHopSize,t.color=e.color,t.icon=Ae[e.iconClass],t.selected=!0)})),n}(t,r.selectedFields),o=i.filter((e=>e.selected));n.options.vertex_fields=o;const s=Object.assign({},De,r.exploreControls);if(s.sampleDiversityField){const e=s.sampleDiversityField;s.sampleDiversityField=i.find((t=>t.name===e.name))}n.options.exploreControls=s;const u=function(e,t){return{nodes:e.vertices.map((e=>({...e,id:"",icon:t.find((t=>t.name===e.field)).icon,data:{field:e.field,term:e.term}}))),edges:e.links.map((e=>({...e,id:""})))}}(r,i);n.mergeGraph(u),function(e,t){e.forEach((({field:n,term:r,x:a,y:i,parent:o})=>{const s=qe(n,r),u=t.nodesMap[s];if(u.x=a,u.y=i,null!==o){const{field:n,term:r}=e[o],a=qe(n,r);u.parent=t.nodesMap[a]}}))}(r.vertices,n);const l=function(e,t){return e.blocklist.map((e=>{const n=t.find((t=>t.name===e.field));return{x:0,y:0,label:e.label,color:e.color,icon:n.icon,parent:null,scaledSize:0,data:{field:e.field,term:e.term}}}))}(r,i);return n.blocklistedNodes.push(...l),{urlTemplates:a,advancedSettings:s,allFields:i}}const Ue=A()("x-pack/graph/metaData")("UPDATE_META_DATA"),He={title:r.i18n.translate("xpack.graph.newGraphTitle",{defaultMessage:"Unsaved graph"}),description:""},We=Object(L.reducerWithInitialState)(He).case(F,(()=>He)).case(Ue,((e,t)=>({...e,...t}))).build(),Ge=e=>e.metaData;function Ve({onSave:e,onClose:t,title:n,description:a,showCopyOnSave:i,savePolicy:u,hasData:l}){const[c,f]=Object(o.useState)(a),[p,d]=Object(o.useState)(!1);return Object(S.jsx)(g.SavedObjectSaveModal,{onSave:t=>{e({...t,newDescription:c,dataConsent:p})},onClose:t,title:n,showCopyOnSave:i,objectType:r.i18n.translate("xpack.graph.topNavMenu.save.objectType",{defaultMessage:"graph"}),showDescription:!1,options:Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,label:r.i18n.translate("xpack.graph.topNavMenu.save.descriptionInputLabel",{defaultMessage:"Description"})},Object(S.jsx)(h.EuiTextArea,{"data-test-subj":"dashboardDescription",value:c,onChange:e=>{f(e.target.value)},fullWidth:!0,rows:5})),"configAndDataWithConsent"===u&&l&&Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,label:"",helpText:r.i18n.translate("xpack.graph.topNavMenu.save.saveConfigurationOnlyWarning",{defaultMessage:"Without this setting, the data in this workspace will be cleared and only the configuration will be saved."})},Object(S.jsx)(h.EuiSwitch,{id:"graphDataConsent",label:r.i18n.translate("xpack.graph.topNavMenu.save.saveGraphContentCheckboxLabel",{defaultMessage:"Save graph content"}),checked:p,onChange:e=>{d(e.target.checked)}})),"config"===u&&l&&Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(h.EuiSpacer,null),Object(S.jsx)(h.EuiCallOut,{"data-test-subj":"graphNoDataSavedMsg"},Object(S.jsx)("p",null,r.i18n.translate("xpack.graph.topNavMenu.save.saveConfigurationOnlyText",{defaultMessage:"The data in this workspace will be cleared and only the configuration will be saved."}))),Object(S.jsx)(h.EuiSpacer,null)))})}const Ke=A()("x-pack/graph"),$e=Ke("LOAD_WORKSPACE"),Ye=Ke("SAVE_WORKSPACE"),Je=Ke("FILL_WORKSPACE"),Xe=({createWorkspace:e,notifications:t,indexPatternProvider:n})=>{function*a(a){const{indexPatterns:i,savedWorkspace:o,urlQuery:s}=a.payload,u=function(e,t){var n;const r=e.legacyIndexPatternRef;if(!r)return{success:!0};const a=null===(n=t.find((e=>e.attributes.title===r)))||void 0===n?void 0:n.id;if(!a)return{success:!1,missingIndexPattern:r};const i=JSON.parse(e.wsState);return i.indexPattern=a,e.wsState=JSON.stringify(i),delete e.legacyIndexPatternRef,{success:!0}}(o,i);if(!u.success)return void t.toasts.addDanger(r.i18n.translate("xpack.graph.loadWorkspace.missingDataViewErrorMessage",{defaultMessage:'Data view "{name}" not found',values:{name:u.missingIndexPattern}}));const l=function(e){return JSON.parse(e.wsState).indexPattern}(o),c=yield Object(I.call)(n.get,l),f=Se(yield Object(I.select)()),h=e(c.title,f),{urlTemplates:p,advancedSettings:d,allFields:g}=ze(o,c,h);yield Object(I.put)(Ue({title:o.title,description:o.description,savedObjectId:o.id})),yield Object(I.put)(R({type:"indexpattern",id:c.id,title:c.title})),yield Object(I.put)(K(g)),yield Object(I.put)(we(d)),yield Object(I.put)(ve(p)),s&&(yield Object(I.put)(rt(s))),h.runLayout()}return function*(){yield Object(I.takeLatest)($e.match,a)}};function Qe({deps:e,workspace:t,savedWorkspace:n,state:a,selectedDatasource:i},o){!function({savePolicy:e,hasData:t,workspace:n,saveWorkspace:r,showSaveModal:a,I18nContext:i,services:o}){const s=n.title,u=n.description;a(Object(S.jsx)(Ve,{savePolicy:e,hasData:t,onSave:({newTitle:e,newDescription:t,newCopyOnSave:a,isTitleDuplicateConfirmed:i,onTitleDuplicate:l,dataConsent:c})=>(n.title=e,n.description=t,n.copyOnSave=a,r({confirmOverwrite:!1,isTitleDuplicateConfirmed:i,onTitleDuplicate:l},c,o).then((e=>("id"in e&&Boolean(e.id)||(n.title=s,n.description=u),e)))),onClose:()=>{},title:n.title,description:n.description,showCopyOnSave:Boolean(n.id)}),i)}({savePolicy:e.savePolicy,hasData:t.nodes.length>0||t.blocklistedNodes.length>0,workspace:n,showSaveModal:e.showSaveModal,saveWorkspace:async(s,u,l)=>{const c="configAndData"===e.savePolicy||"configAndDataWithConsent"===e.savePolicy&&u;!function(e,{workspace:t,urlTemplates:n,advancedSettings:r,selectedIndex:a,selectedFields:i},o){const s=o?t.blocklistedNodes.map((e=>Oe(e))):[],u=o?t.nodes.map((e=>Oe(e,t.nodes))):[],l=o?t.edges.map((e=>function({source:e,target:t,weight:n,width:r,label:a},i=[]){return{weight:n,width:r,label:a,source:i.indexOf(e),target:i.indexOf(t)}}(e,t.nodes))):[],c=n.map(Ee),f={indexPattern:a.id,selectedFields:i.map(Ne),blocklist:s,vertices:u,links:l,urlTemplates:c,exploreControls:r};e.wsState=JSON.stringify(f),e.numVertices=u.length,e.numLinks=l.length}(n,{workspace:t,urlTemplates:_e(a),advancedSettings:Se(a),selectedIndex:i,selectedFields:te(a)},c);try{const i=await _(n,s,l);if(i){const i=r.i18n.translate("xpack.graph.saveWorkspace.successNotificationTitle",{defaultMessage:'Saved "{workspaceTitle}"',values:{workspaceTitle:n.title}});let o;!c&&t.nodes.length>0&&(o=r.i18n.translate("xpack.graph.saveWorkspace.successNotification.noDataSavedText",{defaultMessage:"The configuration was saved, but the data was not saved"})),e.notifications.toasts.addSuccess({title:i,text:o,"data-test-subj":"saveGraphSuccess"}),n.id!==Ge(a).savedObjectId&&e.changeUrl(w(n))}return o(null,i),{id:i}}catch(t){return e.notifications.toasts.addDanger(r.i18n.translate("xpack.graph.saveWorkspace.savingErrorMessage",{defaultMessage:"Failed to save workspace: {message}",values:{message:t}})),{error:t}}},I18nContext:e.I18nContext,services:{savedObjectsClient:e.savedObjectsClient,overlays:e.overlays}})}function Ze(e){return`top_values_${e}`}async function et(e,t,n){const r=function(e,t=5e3){return{size:0,aggs:{sample:{sampler:{shard_size:t},aggs:e}}}}(n.map((({name:e})=>e)).map((e=>function(e,t=10){return{[Ze(e)]:{terms:{field:e,size:t}}}}(e))).reduce(((e,t)=>({...e,...t})))),a=(await e("../api/graph/searchProxy",{body:JSON.stringify({index:t,body:r})})).resp,i=[];return n.forEach((({name:e})=>{const t=function(e,t){return e.aggregations?e.aggregations.sample[Ze(t)].buckets.map((e=>e.key)):[]}(a,e).map((t=>function(e,t,n){const r=n.find((({name:t})=>t===e));if(!r)throw new Error("Invariant error: field not found");return{field:e,term:t,id:"",color:r.color,icon:r.icon,data:{field:e,term:t},label:t}}(e,t,n)));i.push(...t)})),i}const tt=A()("x-pack/graph/workspace"),nt=tt("INITIALIZE_WORKSPACE"),rt=tt("SUBMIT_SEARCH"),at=Object(L.reducerWithInitialState)({isInitialized:!1}).case(F,(()=>({isInitialized:!1}))).case(nt,(()=>({isInitialized:!0}))).build(),it=Object(P.createSelector)((e=>e.workspace),(e=>e.isInitialized));var ot=n(96),st=n.n(ot),ut=n(37);function lt(e,t){e.run((({indexPatternProvider:e,notifications:t,createWorkspace:n,notifyReact:a})=>{function*i(i){try{const t=yield Object(I.call)(e.get,i.payload.id);yield Object(I.put)(K(Be(t))),yield Object(I.put)(q());const r=Se(yield Object(I.select)());n(t.title,r),a()}catch(e){yield Object(I.put)(R({type:"none"})),t.toasts.addDanger(r.i18n.translate("xpack.graph.loadWorkspace.missingDataViewErrorMessage",{defaultMessage:'Data view "{name}" not found',values:{name:i.payload.title}}))}}return function*(){yield Object(I.takeLatest)(B.match,i)}})(t)),e.run(Xe(t)),e.run((e=>{function*t(t){const n=t.payload,r=yield Object(I.select)(),a=e.getWorkspace(),i=H(r).current;if(!a||"none"===i.type)return;const o=yield Object(I.cps)(Qe,{deps:e,workspace:a,savedWorkspace:n,state:r,selectedDatasource:i});o&&(yield Object(I.put)(Ue({savedObjectId:o})))}return function*(){yield Object(I.takeLatest)(Ye.match,t)}})(t)),e.run((({getWorkspace:e})=>{function*t(){const t=e();if(!t)return;const n=yield Object(I.select)();t.options.vertex_fields=te(n)}return function*(){yield Object(I.takeEvery)(G(K,Y,J,$),t)}})(t)),e.run((({getWorkspace:e,notifyReact:t})=>{function*n(n){const r=e();if(!r)return;const a=n.payload.fieldProperties.color;a&&r.nodes.forEach((function(e){e.data.field===n.payload.fieldName&&(e.color=a)}));const i=n.payload.fieldProperties.icon;i&&r.nodes.forEach((function(e){e.data.field===n.payload.fieldName&&(e.icon=i)})),t();const o=te(yield Object(I.select)());r.options.vertex_fields=o}return function*(){yield Object(I.takeLatest)($.match,n)}})(t)),e.run((({getWorkspace:e,notifyReact:t})=>{function*n(n){const r=e();r&&(r.options.exploreControls=n.payload,t())}return function*(){yield Object(I.takeLatest)(we.match,n)}})(t)),e.run((({notifyReact:e})=>{function*t(){e()}return function*(){yield Object(I.takeLatest)(G(Y,J),t)}})(t)),e.run((({chrome:e,changeUrl:t})=>{function*n(){const n=Ge(yield Object(I.select)());M({chrome:e,metaData:n,navigateTo:e=>{t(e)}})}return function*(){yield Object(I.call)(n),yield Object(I.takeLatest)(Ue.match,n)}})(t)),e.run((({notifyReact:e})=>{function*t(){e()}return function*(){yield Object(I.takeEvery)(G(ve,me,be,B,R),t)}})(t)),e.run((({getWorkspace:e,notifyReact:t,http:n,notifications:a})=>{function*i(){try{const r=e();if(!r)return;const a=yield Object(I.select)(),i=te(a),o=H(a).current;if("none"===o.type)return;const s=yield Object(I.call)(et,n.post,o.title,i);r.mergeGraph({nodes:s,edges:[]}),yield Object(I.put)(nt()),t(),r.fillInGraph(10*i.length)}catch(e){const t="body"in e?e.body.message:e.message;a.toasts.addDanger({title:r.i18n.translate("xpack.graph.fillWorkspaceError",{defaultMessage:"Fetching top terms failed: {message}",values:{message:t}})})}}return function*(){yield Object(I.takeLatest)(Je.match,i)}})(t)),e.run((({getWorkspace:e,handleSearchQueryError:t})=>{function*n(n){const r=n.payload;yield Object(I.put)(nt());const a=e(),i=ne(yield Object(I.select)());if(r.startsWith("{"))try{const e=JSON.parse(r);e.vertices?a.callElasticsearch(e):a.search(e,i,2)}catch(e){t(e)}else a.simpleSearch(r,i,2)}return function*(){yield Object(I.takeLatest)(rt.match,n)}})(t))}const ct=e=>{const t=st()(),n=(r=e.addBasePath,Object(ut.combineReducers)({fields:Q,urlTemplates:ke(r),advancedSettings:Me,datasource:U,metaData:We,workspace:at}));var r;const a=Object(ut.createStore)(n,Object(ut.applyMiddleware)(t));return lt(t,e),a};var ft=n(26),ht=n.n(ft),pt=n(55),dt=n.n(pt);let gt=function(e,t,n,r){const a=JSON.stringify(n);ht.a.ajax({type:"POST",url:"http://localhost:9200/"+e+"/_graph/explore",dataType:"json",contentType:"application/json;charset=utf-8",async:!0,data:a,success:function(e){r(e)}})},vt=function(e,t,n){const r=JSON.stringify(t);ht.a.ajax({type:"POST",url:"http://localhost:9200/"+e+"/_search?rest_total_hits_as_int=true",dataType:"json",contentType:"application/json;charset=utf-8",async:!0,data:r,success:function(e){n(e)}})};function mt(e,t){const n=this,r=t;n.node=e,n.undo=function(){r.arrRemove(r.nodes,n.node),r.arrRemove(r.selectedNodes,n.node),n.node.isSelected=!1,delete r.nodesMap[n.node.id]},n.redo=function(){r.nodes.push(n.node),r.nodesMap[n.node.id]=n.node}}function bt(e,t){const n=this,r=t;n.edge=e,n.undo=function(){r.arrRemove(r.edges,n.edge),delete r.edgesMap[n.edge.id]},n.redo=function(){r.edges.push(n.edge),r.edgesMap[n.edge.id]=n.edge}}function yt(e){const t=e;this.undo=t.redo,this.redo=t.undo}function xt(e,t){const n=this;n.receiver=e,n.orphan=t,n.undo=function(){n.orphan.parent=void 0},n.redo=function(){n.orphan.parent=n.receiver}}function kt(e,t){const n=this;n.parent=e,n.child=t,n.undo=function(){n.child.parent=n.parent},n.redo=function(){n.child.parent=void 0}}function _t(e){const t=this;function n(e,t,n){let r=e[t];r||(r=[],e[t]=r),r.push(n)}this.blocklistedNodes=[],this.options=e,this.undoLog=[],this.redoLog=[],this.selectedNodes=[],e||(this.options={}),this.nodesMap={},this.edgesMap={},this.searchTerm="",this.seqNumber=0,this.nodes=[],this.edges=[],this.lastRequest=null,this.lastResponse=null,this.changeHandler=e.changeHandler,e.graphExploreProxy&&(gt=e.graphExploreProxy),e.searchProxy&&(vt=e.searchProxy),this.addUndoLogEntry=function(e){t.undoLog.push(e),t.undoLog.length>50&&t.undoLog.splice(0,1),t.redoLog=[]},this.undo=function(){const e=this.undoLog.pop();e&&(this.stopLayout(),this.redoLog.push(e),e.forEach((e=>e.undo())),this.runLayout())},this.redo=function(){const e=this.redoLog.pop();e&&(this.stopLayout(),this.undoLog.push(e),e.forEach((e=>e.redo())),this.runLayout())},this.areLinked=function(e,t){return e===t||(this.edges.forEach((n=>n.source===e&&n.target===t||(n.source===t&&n.target===e||void 0))),!1)},this.selectAll=function(){t.selectedNodes=[],t.nodes.forEach((e=>{void 0===e.parent?(e.isSelected=!0,t.selectedNodes.push(e)):e.isSelected=!1}))},this.selectNone=function(){t.selectedNodes=[],t.nodes.forEach((e=>{e.isSelected=!1}))},this.selectInvert=function(){t.selectedNodes=[],t.nodes.forEach((e=>{void 0===e.parent&&(e.isSelected=!e.isSelected,e.isSelected&&t.selectedNodes.push(e))}))},this.selectNodes=function(e){e.forEach((e=>{e.isSelected=!0,t.selectedNodes.indexOf(e)<0&&t.selectedNodes.push(e)}))},this.selectNode=function(e){e.isSelected=!0,t.selectedNodes.indexOf(e)<0&&t.selectedNodes.push(e)},this.deleteSelection=function(){let e=t.returnUnpackedGroupeds(t.selectedNodes);0===e.length&&(e=t.nodes.slice(0));const n=[];e.forEach((e=>{e.isSelected=!1,delete t.nodesMap[e.id],n.push(new yt(new mt(e,t)))})),t.arrRemoveAll(t.nodes,e),t.arrRemoveAll(t.selectedNodes,e);const r=t.edges.filter((function(e){return t.nodes.indexOf(e.source)<0||t.nodes.indexOf(e.target)<0}));r.forEach((e=>{delete t.edgesMap[e.id],n.push(new yt(new bt(e,t)))})),t.addUndoLogEntry(n),t.arrRemoveAll(t.edges,r),t.runLayout()},this.selectNeighbours=function(){const e=[];t.edges.forEach((n=>{n.topSrc.isSelected||t.selectedNodes.indexOf(n.topTarget)>=0&&e.indexOf(n.topSrc)<0&&e.push(n.topSrc),n.topTarget.isSelected||t.selectedNodes.indexOf(n.topSrc)>=0&&e.indexOf(n.topTarget)<0&&e.push(n.topTarget)})),e.forEach((e=>{t.selectedNodes.push(e),e.isSelected=!0}))},this.selectNone=function(){t.selectedNodes.forEach((e=>{e.isSelected=!1})),t.selectedNodes=[]},this.deselectNode=function(e){e.isSelected=!1,t.arrRemove(t.selectedNodes,e)},this.getAllSelectedNodes=function(){return this.returnUnpackedGroupeds(t.selectedNodes)},this.colorSelected=function(e){t.getAllSelectedNodes().forEach((t=>{t.color=e}))},this.getSelectionsThatAreGrouped=function(){const e=[];return t.selectedNodes.forEach((t=>{t.numChildren>0&&e.push(t)})),e},this.ungroupSelection=function(){t.getSelectionsThatAreGrouped().forEach((e=>{t.ungroup(e)}))},this.toggleNodeSelection=function(e){return e.isSelected?t.deselectNode(e):(e.isSelected=!0,t.selectedNodes.push(e)),e.isSelected},this.returnUnpackedGroupeds=function(e){const t=e.slice(),n=this.edges;for(let e=0;e<n.length;e++){const r=n[e],a=r.topSrc,i=r.topTarget;if(t.indexOf(i)>=0){let e=r.target;for(;void 0!==e.parent;)t.indexOf(e)<0&&t.push(e),e=e.parent}if(t.indexOf(a)>=0){let e=r.source;for(;void 0!==e.parent;)t.indexOf(e)<0&&t.push(e),e=e.parent}}return t},this.clearGraph=function(){this.stopLayout(),this.nodes=[],this.edges=[],this.undoLog=[],this.redoLog=[],this.nodesMap={},this.edgesMap={},this.blocklistedNodes=[],this.selectedNodes=[],this.lastResponse=null},this.arrRemoveAll=function(e,n){for(let r=n.length;r--;)t.arrRemove(e,n[r])},this.arrRemove=function(e,t){for(let n=e.length;n--;)e[n]===t&&e.splice(n,1)},this.getNeighbours=function(e){const n=[];return t.edges.forEach((t=>{t.topSrc!==t.topTarget&&(t.topSrc===e&&n.indexOf(t.topTarget)<0&&n.push(t.topTarget),t.topTarget===e&&n.indexOf(t.topSrc)<0&&n.push(t.topSrc))})),n},this.buildNodeQuery=function(e){let n=[e];if(n=t.returnUnpackedGroupeds(n),1===n.length){const t={};return t[e.data.field]=e.data.term,{term:t}}const r={};if(n.forEach((e=>{let t=r[e.data.field];t||(t=[],r[e.data.field]=t),t.push(e.data.term)})),1===Object.keys(r).length)return{terms:r};const a={bool:{should:[]}};for(const e in r)if(r.hasOwnProperty(e)){const t={};t[e]=r[e],a.bool.should.push({terms:t})}return a},this.stopLayout=function(){this.force&&this.force.stop(),this.force=null},this.runLayout=function(){this.stopLayout();const e=[];t.edges.forEach((t=>{let n=t.source,r=t.target;for(;void 0!==n.parent;)n=n.parent;for(;void 0!==r.parent;)r=r.parent;t.topSrc=n,t.topTarget=r,n!==r&&e.push({source:n,target:r})}));const n=t.nodes.filter((function(e){return void 0===e.parent})),r=t.nodes;r.forEach((e=>{e.numChildren=0}));for(const e in r){if(!r.hasOwnProperty(e))continue;let t=r[e];for(;void 0!==t.parent;)t=t.parent,t.numChildren=t.numChildren+1}this.force=dt.a.layout.force().nodes(n).links(e).friction(.8).linkDistance(100).charge(-1500).gravity(.15).theta(.99).alpha(.5).size([800,600]).on("tick",(function(){const e=t.nodes;let n=!1;e.forEach((e=>{void 0===e.parent?(e.kx=e.x,e.ky=e.y):n=!0})),n&&e.forEach((e=>{if(void 0!==e.parent){let t=e.parent;for(;void 0!==t.parent;)t=t.parent;e.kx=t.x,e.ky=t.y}})),t.changeHandler&&t.changeHandler()})),this.force.start()},this.groupSelections=function(e){const n=[];t.nodes.forEach((function(r){r!==e&&r.isSelected&&void 0===r.parent&&(r.parent=e,r.isSelected=!1,t.arrRemove(t.selectedNodes,r),n.push(new xt(e,r)))})),t.selectNone(),t.selectNode(e),t.addUndoLogEntry(n),t.runLayout()},this.mergeNeighbours=function(e){const n=t.getNeighbours(e),r=[];n.forEach((function(n){n!==e&&void 0===n.parent&&(n.parent=e,n.isSelected=!1,t.arrRemove(t.selectedNodes,n),r.push(new xt(e,n)))})),t.addUndoLogEntry(r),t.runLayout()},this.mergeSelections=function(e){if(!e)return void console.log("Error - merge called on undefined target");const n=t.selectedNodes.slice(),r=[];n.forEach((function(n){n!==e&&void 0===n.parent&&(n.parent=e,n.isSelected=!1,t.arrRemove(t.selectedNodes,n),r.push(new xt(e,n)))})),t.addUndoLogEntry(r),t.runLayout()},this.ungroup=function(e){const n=[];t.nodes.forEach((function(t){t.parent===e&&(t.parent=void 0,n.push(new kt(e,t)))})),t.addUndoLogEntry(n),t.runLayout()},this.unblockNode=function(e){t.arrRemove(t.blocklistedNodes,e)},this.unblockAll=function(){t.arrRemoveAll(t.blocklistedNodes,t.blocklistedNodes)},this.blocklistSelection=function(){const e=t.getAllSelectedNodes(),n=[];t.edges.forEach((function(r){(e.indexOf(r.source)>=0||e.indexOf(r.target)>=0)&&(delete t.edgesMap[r.id],n.push(r))})),e.forEach((e=>{delete t.nodesMap[e.id],t.blocklistedNodes.push(e),e.isSelected=!1})),t.arrRemoveAll(t.nodes,e),t.arrRemoveAll(t.edges,n),t.selectedNodes=[],t.runLayout()},this.simpleSearch=function(e,t,n){const r={query_string:{query:e}};return this.search(r,t,n)},this.search=function(e,n,r){n||(n=t.options.vertex_fields);let a={};const i={},o=[],s=this.blocklistedNodes;for(let e=0;e<s.length;e++){const t=s[e];let n=i[t.data.field];n||(n=[],i[t.data.field]=n),n.push(t.data.term);const r={};r[t.data.field]=t.data.term,o.push({term:r})}const u=a;for(let e=0;e<r;e++){const o=[];if(n.forEach((({name:e,hopSize:n})=>{const r=i[e],a={field:e,size:n,min_doc_count:parseInt(t.options.exploreControls.minDocCount)};r&&(a.exclude=r),o.push(a)})),a.vertices=o,e<r-1){const e={};a.connections=e,a=e}}o.length>0&&(e={bool:{must:[e],must_not:o}});const l={query:e,controls:t.buildControls(),connections:u.connections,vertices:u.vertices};t.callElasticsearch(l)},this.buildControls=function(){const e=t.options.exploreControls,n={use_significance:e.useSignificance,sample_size:e.sampleSize,timeout:parseInt(e.timeoutMillis)};return null!=e.sampleDiversityField&&(n.sample_diversity={field:e.sampleDiversityField.name,max_docs_per_value:e.maxValuesPerDoc}),n},this.makeNodeId=function(e,t){return e+".."+t},this.makeEdgeId=function(e,t){let n=e+"->"+t;return e>t&&(n=t+"->"+e),n},this.mergeGraph=function(e){this.stopLayout(),e.nodes||(e.nodes=[]);const n=[],r=[];e.nodes.forEach((e=>{e.id=t.makeNodeId(e.field,e.term),this.nodesMap[e.id]||(e.label||(e.label=e.term),r.push(e))})),r.length>0&&this.options.nodeLabeller&&this.options.nodeLabeller(r),r.forEach((e=>{let r=e.term;e.label&&(r=e.label);const a={x:1,y:1,numChildren:0,parent:void 0,isSelected:!1,id:e.id,label:r,color:e.color,icon:e.icon,data:e,scaledSize:15};a.seqNumber=this.seqNumber++,this.nodes.push(a),n.push(new mt(a,t)),this.nodesMap[a.id]=a})),e.edges.forEach((r=>{const a=e.nodes[r.source],i=e.nodes[r.target];r.id=this.makeEdgeId(a.id,i.id);const o=this.nodesMap[a.id],s=this.nodesMap[i.id],u=this.edgesMap[r.id];if(u)return u.weight=Math.max(u.weight,r.weight),void(u.doc_count=Math.max(u.doc_count,r.doc_count));const l={source:o,target:s,weight:r.weight,width:r.width,id:r.id,doc_count:r.doc_count};r.label&&(l.label=r.label),this.edgesMap[l.id]=l,this.edges.push(l),n.push(new bt(l,t))})),n.length>0&&t.addUndoLogEntry(n),this.runLayout()},this.mergeIds=function(e,n){const r=t.getNode(e),a=t.getNode(n);a.isSelected&&(a.isSelected=!1,t.arrRemove(t.selectedNodes,a)),a.parent=r,t.addUndoLogEntry([new xt(r,a)]),t.runLayout()},this.getNode=function(e){return this.nodesMap[e]},this.getEdge=function(e){return this.edgesMap[e]},this.expandSelecteds=function(e={}){let n=t.getAllSelectedNodes();0===n.length&&(n=t.nodes);const r=n.slice();t.expand(r,e)},this.expandGraph=function(){t.expandSelecteds()},this.expandNode=function(e){t.expand(t.returnUnpackedGroupeds([e]),{})},this.expand=function(e,n){const r={},a={},i=this.blocklistedNodes;for(let e=0;e<i.length;e++){const t=i[e];let n=a[t.data.field];n||(n=[],a[t.data.field]=n),n.indexOf(t.data.term)<0&&n.push(t.data.term)}const o=this.nodes;for(let e=0;e<o.length;e++){const t=o[e];let n=a[t.data.field];n||(n=[],a[t.data.field]=n),n.push(t.data.term)}for(let t=0;t<e.length;t++){const n=e[t];let i=r[n.data.field];i||(i=[],r[n.data.field]=i),i.push({term:n.data.term,boost:n.data.weight}),i=a[n.data.field],i||(i=[],a[n.data.field]=i),i.indexOf(n.data.term)<0&&i.push(n.data.term)}const s=[],u=[];for(const e in r)r.hasOwnProperty(e)&&s.push({field:e,include:r[e],min_doc_count:parseInt(t.options.exploreControls.minDocCount)});let l=this.options.vertex_fields;n.toFields&&(l=n.toFields),l.forEach((e=>{const n=e.name,r={field:n,size:e.hopSize>0?e.hopSize:e.lastValidHopSize,min_doc_count:parseInt(t.options.exploreControls.minDocCount)};r.exclude=a[n],u.push(r)}));const c={controls:t.buildControls(),vertices:s,connections:{vertices:u}};t.lastRequest=JSON.stringify(c,null,"\t"),gt(t.options.indexName,c,(function(e){t.lastResponse=JSON.stringify(e,null,"\t");const n=[];e.vertices.forEach((e=>{l.some((t=>e.field===t.name&&(e.color=t.color,e.icon=t.icon,e.fieldDef=t,!0)))}));let r=1e-8;e.connections.forEach((e=>{r=Math.max(r,e.weight),n.push({source:e.source,target:e.target,doc_count:e.doc_count,weight:e.weight,width:Math.max(2,e.weight/r*10)})})),t.mergeGraph({nodes:e.vertices,edges:n})}))},this.trimExcessNewEdges=function(e,n){let r=[];return n.forEach((n=>{const a=e[n.source],i=e[n.target],o=a.field+".."+a.term,s=i.field+".."+i.term,u=this.makeEdgeId(o,s),l=t.nodesMap[o],c=t.nodesMap[s];if(null==l||null==c)return void console.log("Error? Missing nodes "+o+" or "+s,t.nodesMap);if(void 0!==l.parent&&void 0!==c.parent)return;const f=t.edgesMap[u];if(f)return f.weight=Math.max(f.weight,n.weight),void(f.doc_count=Math.max(f.doc_count,n.doc_count));r.push(n)})),r.length>5&&(r.sort((function(e,t){return t.weight-e.weight})),r=r.splice(0,5)),r},this.getQuery=function(e,n){const r=[];let a=e;return e||(a=t.nodes),a.forEach((e=>{void 0===e.parent&&r.push(t.buildNodeQuery(e))})),{bool:{should:r,minimum_should_match:Math.min(r.length,n?1:2)}}},this.getSelectedOrAllNodes=function(){let e=t.getAllSelectedNodes();return 0===e.length&&(e=t.nodes),e},this.getSelectedOrAllTopNodes=function(){return t.getSelectedOrAllNodes().filter((function(e){return void 0===e.parent}))},this.fillInGraph=function(e=10){let n=t.getSelectedOrAllTopNodes();if(n.length>100){for(let e=0;e<100;e++){const t=n[e],r=Math.floor(Math.random()*(n.length-e))+e;n[e]=n[r],n[r]=t}n=n.slice(0,99)}const r=[],a={};n.forEach((function(e,n){const i=t.buildNodeQuery(e);r.push(i),a[n]=i}));const i={size:0,query:{bool:{minimum_should_match:2,should:r}},aggs:{matrix:{adjacency_matrix:{separator:"|",filters:a}}}};vt(t.options.indexName,i,(function(r){const a=r.hits.total.value,i=r.aggregations.matrix.buckets,o=n.map((function(e){return{field:e.data.field,term:e.data.term,weight:1,depth:0}}));let s=[],u=0;const l={};i.forEach((function(e){l[e.key]=e})),i.forEach((function(e){const n=e.key.split("|");if(2===n.length){if(t.options.exploreControls.useSignificance){const r=l[n[0]].doc_count,i=l[n[1]].doc_count,o=e.doc_count;e.weight=t.jLHScore(o,Math.max(r,i),Math.min(r,i),a)}else e.weight=e.doc_count;u=Math.max(u,e.weight)}}));i.forEach((function(e){if(e.doc_count<parseInt(t.options.exploreControls.minDocCount))return;const r=e.key.split("|");if(2===r.length){const a=n[r[0]],i=n[r[1]],o=t.makeEdgeId(a.id,i.id),l=t.edgesMap[o];l?l.doc_count=Math.max(l.doc_count,e.doc_count):s.push({source:parseInt(r[0]),target:parseInt(r[1]),weight:e.weight,width:Math.max(2,e.weight/u*5),doc_count:e.doc_count})}})),s.length>e&&(s=s.sort((function(e,t){return t.weight-e.weight})),s=s.slice(0,e)),t.mergeGraph({nodes:o,edges:s})}))},this.getLikeThisButNotThisQuery=function(e){const r=[],a={};e.forEach((e=>{let t=a[e.data.field];t=t?t+" "+e.label:e.label,a[e.data.field]=t}));for(const e in a)a.hasOwnProperty(e)&&r.push({more_like_this:{like:a[e],min_term_freq:1,minimum_should_match:"20%",min_doc_freq:1,boost_terms:2,max_query_terms:25}});const i={};t.nodes.forEach((e=>{n(i,e.data.field,e.data.term)}));t.blocklistedNodes.forEach((e=>{n(i,e.data.field,e.data.term)}));const o=[];Object.keys(i).forEach((e=>{const t={};t[e]=i[e],o.push({terms:t})}));return{boosting:{negative_boost:1e-4,negative:{bool:{should:o}},positive:{bool:{should:r}}}}},this.getSelectedIntersections=function(e){if(0===t.selectedNodes.length)return t.getAllIntersections(e,t.nodes);if(1===t.selectedNodes.length){const n=t.selectedNodes[0],r=t.getNeighbours(n);return r.push(n),t.getAllIntersections(e,r)}return t.getAllIntersections(e,t.getAllSelectedNodes())},this.jLHScore=function(e,t,n,r){const a=e/t,i=n/r,o=a-i;if(o<=0)return 0;return o*(a/i)},this.getAllIntersections=function(e,n){const r=(n=n.filter((function(e){return void 0===e.parent}))).map((function(e){return t.buildNodeQuery(e)})),a={query:{bool:{should:r}},size:0,aggs:{all:{global:{}},sources:{filters:{filters:{}},aggs:{targets:{filters:{filters:{}}}}}}};r.forEach(((e,t)=>{a.aggs.sources.filters.filters["bg"+t]=e,a.aggs.sources.aggs.targets.filters.filters["fg"+t]=e})),vt(t.options.indexName,a,(function(r){const a=[],i=[],o=r.aggregations.all.doc_count;n.forEach(((e,t)=>{i.push(r.aggregations.sources.buckets["bg"+t].doc_count)})),n.forEach(((e,s)=>{const u=i[s],l=r.aggregations.sources.buckets["bg"+s].targets.buckets;n.forEach(((r,c)=>{const f=i[c];if(c===s)return;if(u>f)return;if(u===f&&e.id>r.id)return;const h=l["fg"+c].doc_count;if(0===h)return;const p=n[c];let d=e.data.label;e.numChildren>0&&(d+="(+"+e.numChildren+")");let g=p.data.label;p.numChildren>0&&(g+="(+"+p.numChildren+")");const v=t.jLHScore(h,f,u,o),m={id1:e.id,id2:p.id,term1:d,term2:g,v1:u,v2:f,mergeLeftConfidence:h/u,mergeRightConfidence:h/f,mergeConfidence:v,overlap:h};a.push(m)}))})),a.sort((function(e,t){return t.mergeConfidence!==e.mergeConfidence?t.mergeConfidence-e.mergeConfidence:t.overlap!==e.overlap?t.overlap-e.overlap:e.v2-t.v2})),e&&e(a)}))},this.callElasticsearch=function(e){t.lastRequest=JSON.stringify(e,null,"\t"),gt(t.options.indexName,e,(function(e){t.lastResponse=JSON.stringify(e,null,"\t");const n=[];e.vertices.forEach((e=>{t.options.vertex_fields.some((t=>e.field===t.name&&(e.color=t.color,e.icon=t.icon,e.fieldDef=t,!0)))}));let r=1e-8;e.connections.forEach((e=>{r=Math.max(r,e.weight)})),e.connections.forEach((e=>{n.push({source:e.source,target:e.target,doc_count:e.doc_count,weight:e.weight,width:Math.max(2,e.weight/r*10)})})),t.mergeGraph({nodes:e.vertices,edges:n},{labeller:t.options.labeller})}))}}function wt({savedObjects:e,uiSettings:t,onIndexPatternSelected:n}){return Object(S.jsx)(g.SavedObjectFinderUi,{savedObjects:e,uiSettings:t,onChoose:(e,t,r,a)=>{n(a)},showFilter:!1,noItemsMessage:r.i18n.translate("xpack.graph.sourceModal.notFoundLabel",{defaultMessage:"No data sources found."}),savedObjectMetaData:[{type:"index-pattern",getIconForSavedObject:()=>"indexPatternApp",name:r.i18n.translate("xpack.graph.sourceModal.savedObjectType.dataView",{defaultMessage:"Data view"}),showSavedObject:e=>!e.attributes.type,includeFields:["type"]}],fixedPageSize:8})}function jt(e){return Object(S.jsx)("div",{className:"gphSourceModal"},Object(S.jsx)(h.EuiModalHeader,null,Object(S.jsx)(h.EuiModalHeaderTitle,null,Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.sourceModal.title",defaultMessage:"Select a data source"}))),Object(S.jsx)(h.EuiModalBody,null,Object(S.jsx)(wt,e)))}function Mt({overlays:e,savedObjects:t,uiSettings:n},r){const a=e.openModal(Object(S.jsx)(jt,{uiSettings:n,savedObjects:t,onIndexPatternSelected:e=>{r(e),a.close()}}))}const St=Object(C.connect)((e=>{const t=H(e);return{currentDatasource:"indexpattern"===t.current.type?t.current:void 0}}),(e=>({onIndexPatternSelected:t=>{e(B({type:"indexpattern",id:t.id,title:t.attributes.title}))},submit:t=>{e(rt(t))}})))((function(e){const{isLoading:t,urlQuery:n,currentIndexPattern:a,currentDatasource:i,indexPatternProvider:s,submit:u,onIndexPatternSelected:l,confirmWipeWorkspace:c,onIndexPatternChange:f}=e,[d,g]=Object(o.useState)({language:"kuery",query:n||""});Object(o.useEffect)((()=>g((e=>({language:e.language,query:n||""})))),[n]),Object(o.useEffect)((()=>{!async function(){f(i?await s.get(i.id):void 0)}()}),[i,s,f]);const v=Object(p.useKibana)(),{services:m,overlays:b}=v,{savedObjects:y,uiSettings:x}=m;return b?Object(S.jsx)("form",{onSubmit:e=>{e.preventDefault(),!t&&a&&u(function(e,t){if("kuery"===e.language&&"string"==typeof e.query){const n=Fe.esKuery.toElasticsearchQuery(Fe.esKuery.fromKueryExpression(e.query),t);return JSON.stringify(n)}return"string"==typeof e.query?e.query:JSON.stringify(e.query)}(d,a))}},Object(S.jsx)(h.EuiFlexGroup,{gutterSize:"m"},Object(S.jsx)(h.EuiFlexItem,null,Object(S.jsx)(Fe.QueryStringInput,{disableAutoFocus:!0,bubbleSubmitEvent:!0,indexPatterns:a?[a]:[],placeholder:r.i18n.translate("xpack.graph.bar.searchFieldPlaceholder",{defaultMessage:"Search your data and add to graph"}),query:d,prepend:Object(S.jsx)(h.EuiToolTip,{content:r.i18n.translate("xpack.graph.bar.pickSourceTooltip",{defaultMessage:"Select a data source to begin graphing relationships."})},Object(S.jsx)(h.EuiButtonEmpty,{size:"xs",className:"gphSearchBar__datasourceButton","data-test-subj":"graphDatasourceButton",onClick:()=>{c((()=>Mt({overlays:b,savedObjects:y,uiSettings:x},l)),r.i18n.translate("xpack.graph.clearWorkspace.confirmText",{defaultMessage:"If you change data sources, your current fields and vertices will be reset."}),{confirmButtonText:r.i18n.translate("xpack.graph.clearWorkspace.confirmButtonLabel",{defaultMessage:"Change data source"}),title:r.i18n.translate("xpack.graph.clearWorkspace.modalTitle",{defaultMessage:"Unsaved changes"})})}},a?a.title:r.i18n.translate("xpack.graph.bar.pickSourceLabel",{defaultMessage:"Select a data source"}))),onChange:g})),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiButton,{fill:!0,type:"submit",disabled:t||!a,"data-test-subj":"graph-explore-button"},r.i18n.translate("xpack.graph.bar.exploreLabel",{defaultMessage:"Graph"}))))):null}));var Ot=n(30),Et=n.n(Ot),Nt=n(14),Ct=n.n(Nt),Tt=n(56),At=n.n(Tt),Lt=["type","label","size","scripted","className"],Pt={iconType:"questionInCircle",color:"gray"},It={boolean:{iconType:"tokenBoolean"},conflict:{iconType:"alert",color:"euiColorVis9",shape:"square"},date:{iconType:"tokenDate"},date_range:{iconType:"tokenDate"},geo_point:{iconType:"tokenGeo"},geo_shape:{iconType:"tokenGeo"},ip:{iconType:"tokenIP"},ip_range:{iconType:"tokenIP"},murmur3:{iconType:"tokenFile"},number:{iconType:"tokenNumber"},number_range:{iconType:"tokenNumber"},histogram:{iconType:"tokenHistogram"},_source:{iconType:"editorCodeBlock",color:"gray"},string:{iconType:"tokenString"},text:{iconType:"tokenString"},keyword:{iconType:"tokenKeyword"},nested:{iconType:"tokenNested"},version:{iconType:"tokenTag"}};function Ft(e){var t=e.type,n=e.label,r=e.size,a=void 0===r?"s":r,i=e.scripted,o=e.className,s=At()(e,Lt),u=It[t]||Pt;return Object(S.jsx)(h.EuiToken,Et()({},u,{className:Ct()("kbnFieldIcon",o),"aria-label":n||t,title:n||t,size:a,fill:i?"dark":void 0},s))}n(100);var Dt={s:"kbnFieldButton--small",m:null};Object.keys(Dt);function Rt({fieldMap:e,selectField:t,deselectField:n,open:a,setOpen:i}){const u=Object.values(e),l=u.length>0,[c,f]=Object(o.useState)(Bt(u));Object(o.useEffect)((()=>{a||f(Bt(Object.values(e)))}),[e,a]);const p=r.i18n.translate("xpack.graph.bar.pickFieldsLabel",{defaultMessage:"Add fields"});return Object(S.jsx)(h.EuiPopover,{id:"graphFieldPicker",anchorPosition:"downLeft",ownFocus:!0,panelPaddingSize:"none",button:Object(S.jsx)(h.EuiBadge,{"data-test-subj":"graph-add-field-button",className:Ct()("gphFieldPicker__button",{"gphFieldPicker__button--disabled":!l}),color:"hollow",iconType:"plusInCircleFilled","aria-disabled":!l,onClick:()=>{l&&i(!0)},onClickAriaLabel:p},p),isOpen:a,closePopover:()=>i(!1),panelClassName:"gphFieldPicker__popoverPanel"},a&&Object(S.jsx)(h.EuiSelectable,{searchProps:{placeholder:r.i18n.translate("xpack.graph.fieldManager.fieldSearchPlaceholder",{defaultMessage:"Filter by"}),compressed:!0,"data-test-subj":"graph-field-search"},listProps:{className:"gphFieldPicker__selectableList"},searchable:!0,options:c,onChange:r=>{r.forEach((r=>{"on"!==r.checked||e[r.label].selected?"on"!==r.checked&&e[r.label].selected&&n(r.label):t(r.label)})),f(r)}},((e,t)=>Object(S.jsx)(s.a.Fragment,null,t,e))))}function Bt(e){return e.filter((e=>function(e){if(!e.aggregatable)return!1;return qt.includes(e.type)}(e)||e.selected)).map((e=>({label:e.name,prepend:Object(S.jsx)(Ft,{className:"eui-alignMiddle",type:e.type,fill:"none"}),checked:e.selected?"on":void 0})))}const qt=["string","number","date","ip","boolean"];function zt(e){const t=Object(S.jsx)("i",{className:Ct()("fa",e.className,"gphLegacyIcon",{"gphLegacyIcon--selected":e.selected,"gphLegacyIcon--pickable":!!e.onClick,"gphLegacyIcon--list":e.asListIcon}),"aria-label":e.icon.label},e.icon.code);return e.onClick?Object(S.jsx)(h.EuiButtonEmpty,{role:"option","aria-selected":e.selected,color:e.selected?"primary":"text",onClick:e.onClick},t):t}function Ut(e,t){return Object.keys(e).every((n=>e[n]===t[n]))}function Ht({field:e,updateFieldProperties:t,selectField:n,deselectField:a,allFields:i}){const[u,l]=Object(o.useState)(!1),[c,f]=Object(o.useState)(e),{color:p,hopSize:d,lastValidHopSize:g,icon:v,name:m}=c,b=0===e.hopSize;function y(e,t){f({...c,[e]:t})}function x(){t({fieldName:e.name,fieldProperties:{hopSize:b?e.lastValidHopSize:0,lastValidHopSize:b?0:e.hopSize}}),l(!1)}Object(o.useEffect)((()=>{c!==e&&f(e)}),[e]),Object(o.useEffect)((()=>{u||f(e)}),[u]);const k=b?r.i18n.translate("xpack.graph.fieldManager.disabledFieldBadgeDescription",{defaultMessage:"Disabled field {field}: Click to configure. Shift+click to enable",values:{field:m}}):r.i18n.translate("xpack.graph.fieldManager.fieldBadgeDescription",{defaultMessage:"Field {field}: Click to configure. Shift+click to disable",values:{field:m}});return Object(S.jsx)(h.EuiPopover,{id:`graphFieldEditor-${e.name}`,anchorPosition:"downLeft",ownFocus:!0,panelPaddingSize:"none",button:Object(S.jsx)(h.EuiBadge,{color:e.color,iconSide:"right",className:Ct()("gphFieldEditor__badge",{"gphFieldEditor__badge--disabled":b}),onClickAriaLabel:k,title:"",onClick:e=>{e.shiftKey?x():l(!0)}},Object(S.jsx)(zt,{className:"gphFieldEditor__badgeIcon",icon:e.icon}),e.name),isOpen:u,closePopover:()=>l(!1)},Object(S.jsx)(h.EuiContextMenu,{initialPanelId:"root",panels:[{id:"root",items:[{name:r.i18n.translate("xpack.graph.fieldManager.settingsLabel",{defaultMessage:"Edit settings"}),icon:Object(S.jsx)(h.EuiIcon,{type:"pencil",size:"m"}),panel:"settings"},{name:b?r.i18n.translate("xpack.graph.fieldManager.enableFieldLabel",{defaultMessage:"Enable field"}):r.i18n.translate("xpack.graph.fieldManager.disableFieldLabel",{defaultMessage:"Disable field"}),icon:Object(S.jsx)(h.EuiIcon,{type:b?"eye":"eyeClosed",size:"m"}),onClick:x,toolTipContent:b?r.i18n.translate("xpack.graph.fieldManager.enableFieldTooltipContent",{defaultMessage:"Turn on discovery of vertices for this field. You can also Shift+click the field to enable it."}):r.i18n.translate("xpack.graph.fieldManager.disableFieldTooltipContent",{defaultMessage:"Turn off discovery of vertices for this field. You can also Shift+click the field to disable it."})},{name:r.i18n.translate("xpack.graph.fieldManager.deleteFieldLabel",{defaultMessage:"Deselect field"}),toolTipContent:r.i18n.translate("xpack.graph.fieldManager.deleteFieldTooltipContent",{defaultMessage:"No new vertices for this field will be discovered.  Existing vertices remain in the graph."}),icon:Object(S.jsx)(h.EuiIcon,{type:"trash",size:"m"}),onClick:()=>{a(e.name),l(!1)}}]},{id:"settings",title:r.i18n.translate("xpack.graph.fieldManager.settingsFormTitle",{defaultMessage:"Edit"}),width:380,initialFocusedItemIndex:-1,content:Object(S.jsx)(h.EuiForm,{className:"gphFieldEditor__displayForm"},Object(S.jsx)(h.EuiFormRow,{display:"columnCompressed",label:r.i18n.translate("xpack.graph.fieldManager.fieldLabel",{defaultMessage:"Field"})},Object(S.jsx)(h.EuiComboBox,{onChange:e=>{y("name",e.length?e[0].value:"")},singleSelection:{asPlainText:!0},isClearable:!1,options:Wt(i,e),selectedOptions:[{value:c.name,label:c.name,type:c.type}],renderOption:(e,t,n)=>{const{type:r,label:a}=e;return Object(S.jsx)(h.EuiFlexGroup,{className:n,gutterSize:"s",alignItems:"center"},Object(S.jsx)(h.EuiFlexItem,{grow:null},Object(S.jsx)(Ft,{type:r,fill:"none"})),Object(S.jsx)(h.EuiFlexItem,null,Object(S.jsx)(h.EuiHighlight,{search:t},a)))},compressed:!0})),Object(S.jsx)(h.EuiFormRow,{display:"columnCompressed",label:r.i18n.translate("xpack.graph.fieldManager.colorLabel",{defaultMessage:"Color"})},Object(S.jsx)(h.EuiColorPicker,{color:p,onChange:e=>{y("color",e)},compressed:!0})),Object(S.jsx)(h.EuiFormRow,{display:"columnCompressed",label:r.i18n.translate("xpack.graph.fieldManager.iconLabel",{defaultMessage:"Icon"})},Object(S.jsx)(h.EuiComboBox,{fullWidth:!0,singleSelection:{asPlainText:!0},isClearable:!1,renderOption:(e,t,n)=>{const{label:r,value:a}=e;return Object(S.jsx)("span",{className:n},Object(S.jsx)(zt,{icon:a})," ",Object(S.jsx)(h.EuiHighlight,{search:t},r))},options:Te.map((e=>({label:e.label,value:e}))),selectedOptions:[{label:v.label,value:v}],onChange:e=>{y("icon",e[0].value)},compressed:!0})),Object(S.jsx)(h.EuiFormRow,{display:"columnCompressed",label:Object(S.jsx)(s.a.Fragment,null,r.i18n.translate("xpack.graph.fieldManager.maxTermsPerHopLabel",{defaultMessage:"Terms per hop"})," ",Object(S.jsx)(h.EuiIconTip,{content:r.i18n.translate("xpack.graph.fieldManager.maxTermsPerHopDescription",{defaultMessage:"Controls the maximum number of terms to return for each search step."}),position:"right"}))},Object(S.jsx)(h.EuiFieldNumber,{step:1,min:1,value:b?g:d,onChange:({target:{valueAsNumber:e}})=>{const t=Number.isNaN(e)?1:e;y(b?"lastValidHopSize":"hopSize",t)},compressed:!0})),Object(S.jsx)(h.EuiSpacer,{size:"s"}),Object(S.jsx)(h.EuiFlexGroup,{direction:"row",justifyContent:"flexEnd"},Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiButtonEmpty,{size:"s",onClick:()=>{f(e),l(!1)}},r.i18n.translate("xpack.graph.fieldManager.cancelLabel",{defaultMessage:"Cancel"}))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiButton,{size:"s",fill:!0,disabled:Ut(e,c)||""===c.name,onClick:function(){const{name:r,selected:i,type:o,...s}=c;m!==e.name&&(a(e.name),n(m)),t({fieldName:m,fieldProperties:s}),l(!1)}},r.i18n.translate("xpack.graph.fieldManager.updateLabel",{defaultMessage:"Save changes"})))))}]}))}function Wt(e,t){return e.filter((e=>!e.selected||e===t)).map((({name:e,type:t})=>({label:e,value:e,type:t})))}const Gt=Object(C.connect)((e=>({fieldMap:Z(e),allFields:ee(e),selectedFields:te(e)})),(e=>Object(ut.bindActionCreators)({updateFieldProperties:$,selectField:Y,deselectField:J},e)))((function(e){return Object(S.jsx)(h.EuiFlexGroup,{gutterSize:"s",className:"gphFieldManager",alignItems:"center"},e.selectedFields.map((t=>Object(S.jsx)(h.EuiFlexItem,{key:t.name,grow:!1},Object(S.jsx)(Ht,Et()({},e,{field:t}))))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(Rt,Et()({},e,{open:e.pickerOpen,setOpen:e.setPickerOpen}))))}));const Vt=Object(h.htmlIdGenerator)();function Kt(e){const t=Object(o.useRef)(new Map),n=Object(o.useMemo)((()=>{const n=new Map;return e.forEach((e=>{if(t.current.has(e))n.set(e,t.current.get(e));else{const t=Vt();n.set(e,t)}})),t.current=n,t.current}),[e]);return Object(o.useCallback)((e=>{const t=n.get(e);if(t)return t;throw new Error("Object not found. Make sure to pass the whole list to the hook and don't mutate the list with functions like push")}),[n])}function $t(e){return"initialTemplate"in e}function Yt(e){const{onSubmit:t}=e,n=()=>$t(e)?e.initialTemplate:{encoder:ce[0],icon:null,description:"",url:""},[a,i]=Object(o.useState)(n),u=$t(e)&&e.initialTemplate;Object(o.useEffect)((()=>{$t(e)&&a!==e.initialTemplate&&i(e.initialTemplate)}),[u]);const[l,c]=Object(o.useState)({description:!1,url:!1}),[f,p]=Object(o.useState)(!$t(e)),[d,g]=Object(o.useState)(!1);function v(e,t){i({...a,[e]:t})}function m(){c({description:!1,url:!1}),i(n()),g(!1)}const b=Boolean(a.url&&!(a.url.search(he)>-1));const y=!Boolean(a.description&&a.url),x=Ut(a,n());return Object(S.jsx)(h.EuiAccordion,{id:e.id,initialIsOpen:!$t(e),buttonContent:$t(e)?e.initialTemplate.description:r.i18n.translate("xpack.graph.templates.addLabel",{defaultMessage:"New drilldown"}),extraAction:$t(e)&&e.initialTemplate.icon&&Object(S.jsx)(zt,{asListIcon:!0,icon:e.initialTemplate.icon}),className:Ct()("gphUrlTemplateList__accordion",{"gphUrlTemplateList__accordion--isOpen":f}),buttonClassName:"gphUrlTemplateList__accordionbutton",onToggle:e=>{p(e)},paddingSize:"m"},Object(S.jsx)("form",{onSubmit:n=>{n.preventDefault(),t(a),$t(e)||m()}},Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,label:r.i18n.translate("xpack.graph.settings.drillDowns.urlDescriptionInputLabel",{defaultMessage:"Title"}),isInvalid:l.description&&!a.description,onBlur:()=>c({...l,description:!0})},Object(S.jsx)(h.EuiFieldText,{fullWidth:!0,value:a.description,isInvalid:l.description&&!a.description,onChange:e=>v("description",e.target.value),placeholder:r.i18n.translate("xpack.graph.settings.drillDowns.urlDescriptionInputPlaceholder",{defaultMessage:"Search on Google"})})),Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,label:r.i18n.translate("xpack.graph.settings.drillDowns.urlInputLabel",{defaultMessage:"URL"}),helpText:Object(S.jsx)(s.a.Fragment,null,d&&Object(S.jsx)("p",null,Object(S.jsx)("strong",null,r.i18n.translate("xpack.graph.settings.drillDowns.kibanaUrlWarningText",{defaultMessage:"Possible Kibana URL pasted, "}),Object(S.jsx)(h.EuiLink,{onClick:function(){var e;i({...a,url:(e=a.url,e.replace(pe,",query:(language:kuery,query:{{{{gquery}}}})")),encoder:"kql"===a.encoder.type?a.encoder:ce.find((e=>"kql"===e.type))}),g(!1)}},Object(S.jsx)("strong",null,r.i18n.translate("xpack.graph.settings.drillDowns.kibanaUrlWarningConvertOptionLinkText",{defaultMessage:"convert it."}))))),r.i18n.translate("xpack.graph.settings.drillDowns.urlInputHelpText",{defaultMessage:"Define template URLs using {gquery} where the selected vertex terms are inserted.",values:{gquery:"{{gquery}}"}})),onBlur:()=>c({...l,url:!0}),isInvalid:b||l.url&&!a.url,error:b?[r.i18n.translate("xpack.graph.settings.drillDowns.invalidUrlWarningText",{defaultMessage:"The URL must contain a {placeholder} string.",values:{placeholder:"{{gquery}}"}})]:[]},Object(S.jsx)(h.EuiFieldText,{fullWidth:!0,placeholder:"https://www.google.co.uk/#q={{gquery}}",value:a.url,onChange:e=>{var t;v("url",e.target.value),"insertFromPaste"===(null===(t=e.nativeEvent)||void 0===t?void 0:t.inputType)&&de(e.target.value)||g(!1)},onPaste:e=>{de(e.clipboardData.getData("text/plain"))&&g(!0)},isInvalid:b||l.url&&!a.url})),Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,helpText:a.encoder.description,label:r.i18n.translate("xpack.graph.settings.drillDowns.urlEncoderInputLabel",{defaultMessage:"URL parameter type"})},Object(S.jsx)(h.EuiComboBox,{fullWidth:!0,singleSelection:{asPlainText:!0},isClearable:!1,options:ce.map((e=>({label:e.title,value:e}))),selectedOptions:[{label:a.encoder.title,value:a.encoder}],onChange:e=>{v("encoder",e[0].value)}})),Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,label:r.i18n.translate("xpack.graph.settings.drillDowns.toolbarIconPickerLabel",{defaultMessage:"Toolbar icon"})},Object(S.jsx)("div",{role:"listbox"},Le.map((e=>Object(S.jsx)(zt,{key:e.class,selected:e===a.icon,icon:e,onClick:()=>{a.icon===e?v("icon",null):v("icon",e)}}))))),Object(S.jsx)(h.EuiFlexGroup,{justifyContent:"flexEnd",responsive:!1},Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiButtonEmpty,{color:"danger",onClick:()=>{e.onRemove()},"data-test-subj":"graphRemoveUrlTemplate"},$t(e)?r.i18n.translate("xpack.graph.settings.drillDowns.removeButtonLabel",{defaultMessage:"Remove"}):r.i18n.translate("xpack.graph.settings.drillDowns.cancelButtonLabel",{defaultMessage:"Cancel"}))),Object(S.jsx)(h.EuiFlexItem,null),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiButtonEmpty,{onClick:m,disabled:x},r.i18n.translate("xpack.graph.settings.drillDowns.resetButtonLabel",{defaultMessage:"Reset"}))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiButton,{type:"submit",fill:!0,isDisabled:b||y},$t(e)?r.i18n.translate("xpack.graph.settings.drillDowns.updateSaveButtonLabel",{defaultMessage:"Update drilldown"}):r.i18n.translate("xpack.graph.settings.drillDowns.newSaveButtonLabel",{defaultMessage:"Save drilldown"}))))))}const Jt=Object(h.htmlIdGenerator)();const Xt=[{id:"advancedSettings",title:r.i18n.translate("xpack.graph.settings.advancedSettingsTitle",{defaultMessage:"Advanced settings"}),component:function({advancedSettings:e,updateSettings:t,allFields:n}){const[a,i]=Object(o.useState)({...e});function u(n,r){t({...e,[n]:r})}function l(e){return function({target:{valueAsNumber:t,value:n}}){if(Number.isNaN(t))return i({...a,[e]:n});u(e,t)}}return Object(o.useEffect)((()=>{i(e)}),[i,e]),Object(S.jsx)("form",null,Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,helpText:r.i18n.translate("xpack.graph.settings.advancedSettings.sampleSizeInputHelpText",{defaultMessage:"Terms are identified from samples of the most relevant documents. Bigger samples are not necessarily better—they can be slower and less relevant."}),label:r.i18n.translate("xpack.graph.settings.advancedSettings.sampleSizeInputLabel",{defaultMessage:"Sample size"})},Object(S.jsx)(h.EuiFieldNumber,{fullWidth:!0,min:1,step:1,value:a.sampleSize,onChange:l("sampleSize")})),Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,helpText:r.i18n.translate("xpack.graph.settings.advancedSettings.significantLinksCheckboxHelpText",{defaultMessage:"Identify terms that are significant rather than popular."}),label:""},Object(S.jsx)(h.EuiSwitch,{label:r.i18n.translate("xpack.graph.settings.advancedSettings.significantLinksCheckboxLabel",{defaultMessage:"Significant links"}),id:"graphSignificance",checked:a.useSignificance,onChange:({target:{checked:e}})=>u("useSignificance",e)})),Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,helpText:r.i18n.translate("xpack.graph.settings.advancedSettings.certaintyInputHelpText",{defaultMessage:"The minimum number of documents before introducing a related term."}),label:r.i18n.translate("xpack.graph.settings.advancedSettings.certaintyInputLabel",{defaultMessage:"Certainty"})},Object(S.jsx)(h.EuiFieldNumber,{fullWidth:!0,min:1,step:1,value:a.minDocCount,onChange:l("minDocCount")})),Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,helpText:Object(S.jsx)(s.a.Fragment,null,r.i18n.translate("xpack.graph.settings.advancedSettings.diversityFieldInputHelpText1",{defaultMessage:"To avoid dominating samples with a single voice, select a field to help identify the source of bias."})," ",Object(S.jsx)("em",null,r.i18n.translate("xpack.graph.settings.advancedSettings.diversityFieldInputHelpText2",{defaultMessage:"This must be a single-term field, or searches will be rejected."}))),label:r.i18n.translate("xpack.graph.settings.advancedSettings.diversityFieldInputLabel",{defaultMessage:"Diversity field"})},Object(S.jsx)(h.EuiComboBox,{fullWidth:!0,placeholder:r.i18n.translate("xpack.graph.settings.advancedSettings.diversityFieldInputOptionLabel",{defaultMessage:"No diversification"}),singleSelection:{asPlainText:!0},options:n.map((e=>({label:e.name,value:e}))),selectedOptions:a.sampleDiversityField?[{label:a.sampleDiversityField.name,value:a.sampleDiversityField}]:[],onChange:e=>{u("sampleDiversityField",1===e.length?e[0].value:void 0)}})),a.sampleDiversityField&&Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,helpText:Object(S.jsx)(s.a.Fragment,null,r.i18n.translate("xpack.graph.settings.advancedSettings.maxValuesInputHelpText",{defaultMessage:"Max number of documents in a sample that can contain the same value for the"})," ",Object(S.jsx)("em",null,a.sampleDiversityField.name)," ",r.i18n.translate("xpack.graph.settings.advancedSettings.maxValuesInputHelpText.fieldText",{defaultMessage:"field"})),label:r.i18n.translate("xpack.graph.settings.advancedSettings.maxValuesInputLabel",{defaultMessage:"Max docs per field"})},Object(S.jsx)(h.EuiFieldNumber,{fullWidth:!0,min:1,step:1,value:a.maxValuesPerDoc,onChange:l("maxValuesPerDoc")})),Object(S.jsx)(h.EuiFormRow,{fullWidth:!0,helpText:r.i18n.translate("xpack.graph.settings.advancedSettings.timeoutInputHelpText",{defaultMessage:"The maximum number of milliseconds that a request can run."}),label:r.i18n.translate("xpack.graph.settings.advancedSettings.timeoutInputLabel",{defaultMessage:"Timeout"})},Object(S.jsx)(h.EuiFieldNumber,{fullWidth:!0,min:1,step:1,value:a.timeoutMillis,onChange:l("timeoutMillis"),append:Object(S.jsx)(h.EuiText,{size:"xs"},Object(S.jsx)("strong",null,r.i18n.translate("xpack.graph.settings.advancedSettings.timeoutUnit",{defaultMessage:"ms"})))})))}},{id:"blocklist",title:r.i18n.translate("xpack.graph.settings.blocklistTitle",{defaultMessage:"Block list"}),component:function({blocklistedNodes:e,unblockNode:t,unblockAll:n}){const a=Kt(e||[]);return Object(S.jsx)(s.a.Fragment,null,e&&e.length>0?Object(S.jsx)(h.EuiText,{size:"s"},r.i18n.translate("xpack.graph.settings.blocklist.blocklistHelpText",{defaultMessage:"These terms are not allowed in the graph."})):Object(S.jsx)(h.EuiCallOut,{title:Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.blocklist.noEntriesDescription",defaultMessage:"You don't have any blocked terms. Select vertices and click {stopSign} in the control panel on the right to block them. Documents that match blocked terms are no longer explored and relationships to them are hidden.",values:{stopSign:Object(S.jsx)("span",{className:"kuiIcon fa-ban"})}})}),Object(S.jsx)(h.EuiSpacer,null),e&&e.length>0&&Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(h.EuiListGroup,{bordered:!0,maxWidth:!1},e.map((e=>Object(S.jsx)(h.EuiListGroupItem,{icon:Object(S.jsx)(zt,{icon:e.icon,asListIcon:!0}),key:a(e),label:e.label,extraAction:{iconType:"trash","aria-label":r.i18n.translate("xpack.graph.blocklist.removeButtonAriaLabel",{defaultMessage:"Delete"}),title:r.i18n.translate("xpack.graph.blocklist.removeButtonAriaLabel",{defaultMessage:"Delete"}),color:"danger",onClick:()=>t(e)}})))),Object(S.jsx)(h.EuiSpacer,null),Object(S.jsx)(h.EuiButton,{"data-test-subj":"graphUnblocklistAll",color:"danger",iconType:"trash",size:"s",fill:!0,onClick:()=>n()},r.i18n.translate("xpack.graph.settings.blocklist.clearButtonLabel",{defaultMessage:"Delete all"}))))}},{id:"drillDowns",title:r.i18n.translate("xpack.graph.settings.drillDownsTitle",{defaultMessage:"Drilldowns"}),component:function({removeTemplate:e,saveTemplate:t,urlTemplates:n}){const[a,i]=Object(o.useState)([]),u=Kt(n);function l(e){i(a.filter((t=>t!==e)))}return Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(h.EuiText,{size:"s"},r.i18n.translate("xpack.graph.drilldowns.description",{defaultMessage:"Use drilldowns to link to other applications. The selected vertices become part of the URL."})),Object(S.jsx)(h.EuiSpacer,null),n.map(((n,r)=>Object(S.jsx)(Yt,{key:u(n),id:u(n),initialTemplate:n,onSubmit:e=>{t({index:r,template:e})},onRemove:()=>{e(n)}}))),a.map((e=>Object(S.jsx)(Yt,{id:`accordion-new-${e}`,key:e,onSubmit:n=>{t({index:-1,template:n}),l(e)},onRemove:l.bind(void 0,e)}))),Object(S.jsx)(h.EuiSpacer,null),Object(S.jsx)(h.EuiTextAlign,{textAlign:"center"},Object(S.jsx)(h.EuiButton,{size:"s",fill:!0,iconType:"plusInCircle","data-test-subj":"graphAddNewTemplate",onClick:()=>{i([...a,Jt()])}},r.i18n.translate("xpack.graph.templates.newTemplateFormLabel",{defaultMessage:"Add drilldown"}))))}}];const Qt=Object(C.connect)((e=>({advancedSettings:Se(e),urlTemplates:_e(e),allFields:ee(e)})),(e=>Object(ut.bindActionCreators)({updateSettings:we,saveTemplate:me,removeTemplate:be},e)))((function({observable:e,advancedSettings:t,urlTemplates:n,allFields:a,saveTemplate:i,updateSettings:u,removeTemplate:l}){const[c,f]=Object(o.useState)(void 0),[p,d]=Object(o.useState)(0);if(Object(o.useEffect)((()=>{e.subscribe(f)}),[e]),!c)return null;const g=Xt[p].component;return Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(h.EuiFlyoutHeader,{hasBorder:!0},Object(S.jsx)(h.EuiTitle,{size:"m"},Object(S.jsx)("h2",null,r.i18n.translate("xpack.graph.settings.title",{defaultMessage:"Settings"}))),Object(S.jsx)(h.EuiTabs,{style:{margin:"0 -16px -25px"}},Xt.filter((({id:e})=>"drillDowns"!==e||c.canEditDrillDownUrls)).map((({title:e},t)=>Object(S.jsx)(h.EuiTab,{key:e,isSelected:p===t,onClick:()=>{d(t)}},e))))),Object(S.jsx)(h.EuiFlyoutBody,null,Object(S.jsx)(g,{blocklistedNodes:c.blocklistedNodes,unblockNode:c.unblockNode,unblockAll:c.unblockAll,advancedSettings:t,urlTemplates:n,allFields:a,updateSettings:u,removeTemplate:l,saveTemplate:i})))}));var Zt=n(2);const en=e=>{const t=Object(C.useStore)(),n=Object(c.useLocation)(),a=Object(c.useHistory)(),i="none"===e.graphSavePolicy,{TopNavMenu:o}=e.navigation.ui,s=[];return s.push({key:"new",label:r.i18n.translate("xpack.graph.topNavMenu.newWorkspaceLabel",{defaultMessage:"New"}),description:r.i18n.translate("xpack.graph.topNavMenu.newWorkspaceAriaLabel",{defaultMessage:"New Workspace"}),tooltip:r.i18n.translate("xpack.graph.topNavMenu.newWorkspaceTooltip",{defaultMessage:"Create a new workspace"}),disableButton:()=>!e.isInitialized,run(){e.confirmWipeWorkspace((()=>{"/workspace/"===n.pathname?a.go(0):a.push("/workspace/")}))},testId:"graphNewButton"}),e.capabilities.graph.save&&s.push({key:"save",label:r.i18n.translate("xpack.graph.topNavMenu.saveWorkspace.enabledLabel",{defaultMessage:"Save"}),description:r.i18n.translate("xpack.graph.topNavMenu.saveWorkspace.enabledAriaLabel",{defaultMessage:"Save workspace"}),tooltip:()=>i?r.i18n.translate("xpack.graph.topNavMenu.saveWorkspace.disabledTooltip",{defaultMessage:"No changes to saved workspaces are permitted by the current save policy"}):r.i18n.translate("xpack.graph.topNavMenu.saveWorkspace.enabledTooltip",{defaultMessage:"Save this workspace"}),disableButton:()=>i||!re(t.getState()),run:()=>{t.dispatch({type:"x-pack/graph/SAVE_WORKSPACE",payload:e.savedWorkspace})},testId:"graphSaveButton"}),s.push({key:"inspect",disableButton:()=>null===e.workspace,label:r.i18n.translate("xpack.graph.topNavMenu.inspectLabel",{defaultMessage:"Inspect"}),description:r.i18n.translate("xpack.graph.topNavMenu.inspectAriaLabel",{defaultMessage:"Inspect"}),run:()=>{e.setShowInspect((e=>!e))}}),s.push({key:"settings",disableButton:()=>"none"===H(t.getState()).current.type,label:r.i18n.translate("xpack.graph.topNavMenu.settingsLabel",{defaultMessage:"Settings"}),description:r.i18n.translate("xpack.graph.topNavMenu.settingsAriaLabel",{defaultMessage:"Settings"}),run:()=>{const n=e.workspace,a=function(e){const t=()=>{const r=e();return Object.keys(r).forEach((e=>{const a=r[e];"function"==typeof a&&(r[e]=(...e)=>{a(...e),n.next(t())})})),r},n=new Zt.BehaviorSubject(t());return n.asObservable()}((()=>({blocklistedNodes:n.blocklistedNodes,unblockNode:n.unblockNode,unblockAll:n.unblockAll,canEditDrillDownUrls:e.canEditDrillDownUrls})));e.coreStart.overlays.openFlyout(Object(p.toMountPoint)(Object(p.wrapWithTheme)(Object(S.jsx)(C.Provider,{store:t},Object(S.jsx)(Qt,{observable:a})),e.coreStart.theme.theme$)),{size:"m",closeButtonAriaLabel:r.i18n.translate("xpack.graph.settings.closeLabel",{defaultMessage:"Close"}),"data-test-subj":"graphSettingsFlyout",ownFocus:!0,className:"gphSettingsFlyout",maxWidth:520})}}),Object(S.jsx)(o,{appName:"workspacesTopNav",config:s,setMenuMountPoint:e.setHeaderActionMenu})};var tn=n(27);const nn={automaticLayout:!0,fontSize:12,lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,readOnly:!0,scrollbar:{alwaysConsumeMouseWheel:!1},scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent"},rn=()=>{},an=({showInspect:e,lastRequest:t,lastResponse:n,indexPattern:r})=>{const[a,i]=Object(o.useState)("request"),s=()=>i("request"),u=()=>i("response"),l=Object(o.useMemo)((()=>"request"===a?t:n),[t,n,a]);return e?Object(S.jsx)("div",{className:"gphGraph__menus"},Object(S.jsx)("div",null,Object(S.jsx)("div",{className:"kuiLocalDropdownTitle"},Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.inspect.title",defaultMessage:"Inspect"})),Object(S.jsx)("div",{className:"list-group-item"},Object(S.jsx)(h.EuiText,{size:"xs",className:"help-block"},Object(S.jsx)("span",null,"http://host:port/",null==r?void 0:r.id,"/_graph/explore")),Object(S.jsx)(h.EuiTabs,null,Object(S.jsx)(h.EuiTab,{onClick:s,isSelected:"request"===a},Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.inspect.requestTabTitle",defaultMessage:"Request"})),Object(S.jsx)(h.EuiTab,{onClick:u,isSelected:"response"===a},Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.inspect.responseTabTitle",defaultMessage:"Response"}))),Object(S.jsx)(p.CodeEditor,{languageId:tn.XJsonLang.ID,height:240,value:l||"",onChange:rn,editorDidMount:rn,options:nn})))):null};function on({children:e,state:t}){return Object(S.jsx)("li",{className:Ct()("gphGuidancePanel__item",{"gphGuidancePanel__item--disabled":"disabled"===t}),"aria-disabled":"disabled"===t,"aria-current":"active"===t?"step":void 0},"disabled"!==t&&Object(S.jsx)("span",{className:Ct()("gphGuidancePanel__itemIcon",{"gphGuidancePanel__itemIcon--done":"done"===t}),"aria-hidden":!0},Object(S.jsx)(h.EuiIcon,{type:"active"===t?"sortRight":"check"})),Object(S.jsx)(h.EuiText,null,e))}const sn=Object(C.connect)((e=>({hasDatasource:W(e),hasFields:re(e)})),(e=>({onIndexPatternSelected:t=>{e(B({type:"indexpattern",id:t.id,title:t.attributes.title}))},onFillWorkspace:()=>{e(Je())}})))((function(e){const{onFillWorkspace:t,onOpenFieldPicker:n,onIndexPatternSelected:a,hasDatasource:i,hasFields:o,noIndexPatterns:s}=e,u=Object(p.useKibana)(),{services:l,overlays:c}=u,{savedObjects:d,uiSettings:g,application:v}=l;if(!c||!v)return null;let m=Object(S.jsx)(h.EuiPanel,{"data-test-subj":"graphGuidancePanel"},Object(S.jsx)(h.EuiFlexGroup,{direction:"column",alignItems:"center"},Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiIcon,{type:"graphApp",size:"xxl"})),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiText,null,Object(S.jsx)("h1",{id:"graphHeading"},r.i18n.translate("xpack.graph.guidancePanel.title",{defaultMessage:"Three steps to your graph"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)("ol",{className:"gphGuidancePanel__list","aria-labelledby":"graphHeading"},Object(S.jsx)(on,{state:i?"done":"active"},Object(S.jsx)(h.EuiLink,{onClick:()=>{Mt({overlays:c,savedObjects:d,uiSettings:g},a)}},r.i18n.translate("xpack.graph.guidancePanel.datasourceItem.indexPatternButtonLabel",{defaultMessage:"Select a data source."}))),Object(S.jsx)(on,{state:o?"done":i?"active":"disabled"},Object(S.jsx)(h.EuiLink,{onClick:n,disabled:!o&&!i},r.i18n.translate("xpack.graph.guidancePanel.fieldsItem.fieldsButtonLabel",{defaultMessage:"Add fields."}))),Object(S.jsx)(on,{state:o?"active":"disabled"},Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.guidancePanel.nodesItem.description",defaultMessage:"Enter a query in the search bar to start exploring. Don't know where to start? {topTerms}.",values:{topTerms:Object(S.jsx)(h.EuiLink,{onClick:t,disabled:!o},r.i18n.translate("xpack.graph.guidancePanel.nodesItem.topTermsButtonLabel",{defaultMessage:"Graph the top terms"}))}}))))));if(s){const e=v.getUrlForApp("management",{path:"/kibana/indexPatterns"}),t=`${v.getUrlForApp("home")}#/tutorial_directory/sampleData`;m=Object(S.jsx)(h.EuiPanel,{paddingSize:"none"},Object(S.jsx)(h.EuiCallOut,{color:"warning",iconType:"help",title:r.i18n.translate("xpack.graph.noDataSourceNotificationMessageTitle",{defaultMessage:"No data source"}),heading:"h1"},Object(S.jsx)(h.EuiScreenReaderOnly,null,Object(S.jsx)("p",{id:"graphHeading"},r.i18n.translate("xpack.graph.noDataSourceNotificationMessageTitle",{defaultMessage:"No data source"}))),Object(S.jsx)("p",null,Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.noDataSourceNotificationMessageText",defaultMessage:"No data sources found. Go to {managementIndexPatternsLink} and create a data view for your Elasticsearch indices.",values:{managementIndexPatternsLink:Object(S.jsx)("a",{href:e},Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.noDataSourceNotificationMessageText.managementDataViewLinkText",defaultMessage:"Management > Data views"}))}})),Object(S.jsx)("p",null,Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.listing.noDataSource.newToKibanaDescription",defaultMessage:"New to Kibana? You can also use our {sampleDataInstallLink}.",values:{sampleDataInstallLink:Object(S.jsx)(h.EuiLink,{href:t},Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.listing.noDataSource.sampleDataInstallLinkText",defaultMessage:"sample data"}))}}))))}return Object(S.jsx)(h.EuiFlexGroup,{justifyContent:"center"},Object(S.jsx)(h.EuiFlexItem,{className:"gphGuidancePanel"},m))})),un=Object(C.connect)((e=>({title:Ge(e).title})))((({title:e})=>Object(S.jsx)(h.EuiScreenReaderOnly,null,Object(S.jsx)("h1",{id:"graphHeading"},e)))),ln=({workspace:e,onSetControl:t})=>{const n=0===e.nodes.length,a=r.i18n.translate("xpack.graph.sidebar.selections.selectAllButtonTooltip",{defaultMessage:"Select all"}),i=r.i18n.translate("xpack.graph.sidebar.selections.selectNoneButtonTooltip",{defaultMessage:"Select none"}),o=r.i18n.translate("xpack.graph.sidebar.selections.invertSelectionButtonTooltip",{defaultMessage:"Invert selection"}),s=r.i18n.translate("xpack.graph.sidebar.selections.selectNeighboursButtonTooltip",{defaultMessage:"Select neighbours"});return Object(S.jsx)(h.EuiFlexGroup,{className:"vertexSelectionTypesBar",justifyContent:"flexStart",gutterSize:"s",alignItems:"center",responsive:!1},Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:a},Object(S.jsx)("button",{"data-test-subj":"graphSelectAll",type:"button",className:"kuiButton kuiButton--basic kuiButton--small",disabled:n,onClick:()=>{t("none"),e.selectAll(),e.changeHandler()}},r.i18n.translate("xpack.graph.sidebar.selections.selectAllButtonLabel",{defaultMessage:"all"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:i},Object(S.jsx)("button",{type:"button",className:"kuiButton kuiButton--basic kuiButton--small",disabled:n,onClick:()=>{t("none"),e.selectNone(),e.changeHandler()}},r.i18n.translate("xpack.graph.sidebar.selections.selectNoneButtonLabel",{defaultMessage:"none"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:o},Object(S.jsx)("button",{"data-test-subj":"graphInvertSelection",type:"button",className:"kuiButton kuiButton--basic kuiButton--small",disabled:n,onClick:()=>{t("none"),e.selectInvert(),e.changeHandler()}},r.i18n.translate("xpack.graph.sidebar.selections.invertSelectionButtonLabel",{defaultMessage:"invert"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:s},Object(S.jsx)("button",{type:"button",className:"kuiButton kuiButton--basic kuiButton--small",disabled:0===e.selectedNodes.length,onClick:()=>{t("none"),e.selectNeighbours(),e.changeHandler()},"data-test-subj":"graphLinkedSelection"},r.i18n.translate("xpack.graph.sidebar.selections.selectNeighboursButtonLabel",{defaultMessage:"linked"})))))},cn=({workspace:e,onSetControl:t,liveResponseFields:n})=>{const a=0===e.nodes.length,i=r.i18n.translate("xpack.graph.sidebar.topMenu.undoButtonTooltip",{defaultMessage:"Undo"}),o=r.i18n.translate("xpack.graph.sidebar.topMenu.redoButtonTooltip",{defaultMessage:"Redo"}),s=r.i18n.translate("xpack.graph.sidebar.topMenu.expandSelectionButtonTooltip",{defaultMessage:"Expand selection"}),u=r.i18n.translate("xpack.graph.sidebar.topMenu.addLinksButtonTooltip",{defaultMessage:"Add links between existing terms"}),l=r.i18n.translate("xpack.graph.sidebar.topMenu.removeVerticesButtonTooltip",{defaultMessage:"Remove vertices from workspace"}),c=r.i18n.translate("xpack.graph.sidebar.topMenu.blocklistButtonTooltip",{defaultMessage:"Block selection from appearing in workspace"}),f=r.i18n.translate("xpack.graph.sidebar.topMenu.customStyleButtonTooltip",{defaultMessage:"Custom style selected vertices"}),p=r.i18n.translate("xpack.graph.sidebar.topMenu.drillDownButtonTooltip",{defaultMessage:"Drill down"}),d=r.i18n.translate("xpack.graph.sidebar.topMenu.runLayoutButtonTooltip",{defaultMessage:"Run layout"}),g=r.i18n.translate("xpack.graph.sidebar.topMenu.pauseLayoutButtonTooltip",{defaultMessage:"Pause layout"});return Object(S.jsx)(h.EuiFlexGroup,{gutterSize:"xs",responsive:!1},Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:i},Object(S.jsx)("button",{className:"kuiButton kuiButton--basic kuiButton--small","aria-label":i,type:"button",onClick:()=>e.undo(),disabled:e.undoLog.length<1},Object(S.jsx)("span",{className:"kuiIcon fa-history"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:o},Object(S.jsx)("button",{className:"kuiButton kuiButton--basic kuiButton--small","aria-label":o,type:"button",onClick:()=>e.redo(),disabled:0===e.redoLog.length},Object(S.jsx)("span",{className:"kuiIcon fa-repeat"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:s},Object(S.jsx)("button",{className:"kuiButton kuiButton--basic kuiButton--small","aria-label":s,disabled:0===n.length||0===e.nodes.length,onClick:()=>{t("none"),e.expandSelecteds({toFields:n})}},Object(S.jsx)("span",{className:"kuiIcon fa-plus"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:u},Object(S.jsx)("button",{className:"kuiButton kuiButton--basic kuiButton--small","aria-label":u,disabled:a,onClick:()=>e.fillInGraph()},Object(S.jsx)("span",{className:"kuiIcon fa-link"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:l},Object(S.jsx)("button",{"data-test-subj":"graphRemoveSelection",className:"kuiButton kuiButton--basic kuiButton--small",disabled:a,"aria-label":l,onClick:()=>{t("none"),e.deleteSelection()}},Object(S.jsx)("span",{className:"kuiIcon fa-trash"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:c},Object(S.jsx)("button",{className:"kuiButton kuiButton--basic kuiButton--small",disabled:0===e.selectedNodes.length,"aria-label":c,onClick:()=>e.blocklistSelection()},Object(S.jsx)("span",{className:"kuiIcon fa-ban"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:f},Object(S.jsx)("button",{className:"kuiButton kuiButton--basic kuiButton--small",disabled:0===e.selectedNodes.length,"aria-label":f,onClick:()=>t("style")},Object(S.jsx)("span",{className:"kuiIcon fa-paint-brush"})))),Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:p},Object(S.jsx)("button",{className:"kuiButton kuiButton--basic kuiButton--small",disabled:a,"aria-label":p,onClick:()=>t("drillDowns")},Object(S.jsx)("span",{className:"kuiIcon fa-info"})))),(0===e.nodes.length||null===e.force)&&Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:d},Object(S.jsx)("button",{"data-test-subj":"graphResumeLayout",className:"kuiButton kuiButton--basic kuiButton--small",disabled:0===e.nodes.length,"aria-label":d,onClick:()=>e.runLayout()},Object(S.jsx)("span",{className:"kuiIcon fa-play"})))),null!==e.force&&e.nodes.length>0&&Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:g},Object(S.jsx)("button",{"data-test-subj":"graphPauseLayout",className:"kuiButton kuiButton--basic kuiButton--small","aria-label":g,onClick:()=>{e.stopLayout(),e.changeHandler()}},Object(S.jsx)("span",{className:"kuiIcon fa-pause"})))))},fn=({colors:e,workspace:t})=>Object(S.jsx)("div",{className:"gphSidebar__panel"},Object(S.jsx)("div",{className:"gphSidebar__header"},Object(S.jsx)("span",{className:"kuiIcon fa-paint-brush"}),r.i18n.translate("xpack.graph.sidebar.styleVerticesTitle",{defaultMessage:"Style selected vertices"})),Object(S.jsx)("div",{className:"form-group form-group-sm gphFormGroup--small"},e.map((e=>Object(S.jsx)("span",{"aria-hidden":"true",onClick:()=>{t.colorSelected(e),t.changeHandler()},style:{color:e},className:"kuiIcon gphColorPicker__color fa-circle"}))))),hn=({workspace:e,selectedNode:t})=>{const n=r.i18n.translate("xpack.graph.sidebar.groupButtonTooltip",{defaultMessage:"group the currently selected items into {latestSelectionLabel}",values:{latestSelectionLabel:t.label}}),a=r.i18n.translate("xpack.graph.sidebar.ungroupButtonTooltip",{defaultMessage:"ungroup {latestSelectionLabel}",values:{latestSelectionLabel:t.label}});return Object(S.jsx)("div",{className:"gphSidebar__panel"},Object(S.jsx)("div",{className:"gphSidebar__header"},t.icon&&Object(S.jsx)("span",{className:`kuiIcon ${t.icon.class}`}),t.data.field," ",t.data.term),(e.selectedNodes.length>1||e.selectedNodes.length>0&&e.selectedNodes[0]!==t)&&Object(S.jsx)(h.EuiToolTip,{content:n},Object(S.jsx)("button",{className:"kuiButton kuiButton--basic kuiButton--iconText kuiButton--small",onClick:()=>{e.groupSelections(t)}},Object(S.jsx)("span",{className:"kuiButton__icon kuiIcon fa-object-group"}),Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.sidebar.groupButtonLabel",defaultMessage:"group"}))),t.numChildren>0&&Object(S.jsx)(h.EuiToolTip,{content:a},Object(S.jsx)("button",{className:"kuiButton kuiButton--basic kuiButton--iconText kuiButton--small",onClick:()=>{e.ungroup(t)}},Object(S.jsx)("span",{className:"kuiIcon fa-object-ungroup"}),Object(S.jsx)(f.FormattedMessage,{id:"xpack.graph.sidebar.ungroupButtonLabel",defaultMessage:"ungroup"}))),Object(S.jsx)("form",{className:"form-horizontal"},Object(S.jsx)("div",{className:"form-group form-group-sm gphFormGroup--small"},Object(S.jsx)("label",{htmlFor:"labelEdit",className:"col-sm-3 control-label"},r.i18n.translate("xpack.graph.sidebar.displayLabelLabel",{defaultMessage:"Display label"})),Object(S.jsx)("div",{className:"col-sm-9"},Object(S.jsx)("input",{ref:e=>e&&(e.value=t.label),type:"text",id:"labelEdit",className:"form-control input-sm",onChange:n=>{t.label=n.target.value,e.changeHandler()}}),Object(S.jsx)("div",{className:"help-block"},r.i18n.translate("xpack.graph.sidebar.displayLabelHelpText",{defaultMessage:"Change the label for this vertex."}))))))};var pn=n(105);function dn(e){return Math.sqrt(e/Math.PI)}function gn({leftValue:e,rightValue:t,overlap:n}){const r=dn(e),a=dn(t),i=Math.max(r,a),o=2*i,s=4*i,u=r,l=u+Object(pn.distanceFromIntersectArea)(r,a,n),c=(s-(l+a))/2,f=`0 0 ${s} ${o}`;return Object(S.jsx)("div",null,Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:100,height:60,viewBox:f},Object(S.jsx)("g",null,Object(S.jsx)("circle",{cx:u+c,cy:i,r:r,className:"gphVennDiagram__left"}),Object(S.jsx)("circle",{cx:l+c,cy:i,r:a,className:"gphVennDiagram__right"}))))}const vn=({workspace:e,mergeCandidates:t,onSetControl:n})=>{const a=(r,a)=>{const i=[...t];let o=!0;for(;o;){o=!1;for(let e=0;e<i.length;e++){const t=i[e];if(t.id1===a||t.id2===a){i.splice(e,1),o=!0;break}}}e.mergeIds(r,a),n("none")};return Object(S.jsx)("div",{className:"gphSidebar__panel"},Object(S.jsx)("div",{className:"gphSidebar__header"},Object(S.jsx)("span",{className:"kuiIcon fa-link"}),r.i18n.translate("xpack.graph.sidebar.linkSummaryTitle",{defaultMessage:"Link summary"})),t.map((e=>{const t=r.i18n.translate("xpack.graph.sidebar.linkSummary.mergeTerm1ToTerm2ButtonTooltip",{defaultMessage:"Merge {term1} into {term2}",values:{term1:e.term1,term2:e.term2}}),n=r.i18n.translate("xpack.graph.sidebar.linkSummary.mergeTerm2ToTerm1ButtonTooltip",{defaultMessage:"Merge {term2} into {term1}",values:{term1:e.term1,term2:e.term2}}),i=r.i18n.translate("xpack.graph.sidebar.linkSummary.leftTermCountTooltip",{defaultMessage:"{count} documents have term {term}",values:{count:e.v1,term:e.term1}}),o=r.i18n.translate("xpack.graph.sidebar.linkSummary.bothTermsCountTooltip",{defaultMessage:"{count} documents have both terms",values:{count:e.overlap}}),s=r.i18n.translate("xpack.graph.sidebar.linkSummary.rightTermCountTooltip",{defaultMessage:"{count} documents have term {term}",values:{count:e.v2,term:e.term2}});return Object(S.jsx)("div",null,Object(S.jsx)("span",null,Object(S.jsx)(h.EuiToolTip,{content:t},Object(S.jsx)("button",{type:"button",style:{opacity:.2+e.overlap/e.v1},className:"kuiButton kuiButton--basic kuiButton--small",onClick:()=>a(e.id2,e.id1)},Object(S.jsx)("span",{className:"kuiIcon fa-chevron-circle-right"}))),Object(S.jsx)("span",{className:"gphLinkSummary__term--1"},e.term1),Object(S.jsx)("span",{className:"gphLinkSummary__term--2"},e.term2),Object(S.jsx)(h.EuiToolTip,{content:n},Object(S.jsx)("button",{type:"button",className:"kuiButton kuiButton--basic kuiButton--small",style:{opacity:.2+e.overlap/e.v2},onClick:()=>a(e.id1,e.id2)},Object(S.jsx)("span",{className:"kuiIcon fa-chevron-circle-left"})))),Object(S.jsx)(gn,{leftValue:e.v1,rightValue:e.v2,overlap:e.overlap}),Object(S.jsx)(h.EuiToolTip,{content:i},Object(S.jsx)("small",{className:"gphLinkSummary__term--1"},e.v1)),Object(S.jsx)(h.EuiToolTip,{content:o},Object(S.jsx)("small",{className:"gphLinkSummary__term--1-2"}," (",e.overlap,") ")),Object(S.jsx)(h.EuiToolTip,{content:s},Object(S.jsx)("small",{className:"gphLinkSummary__term--2"},e.v2)))})))},mn=({urlTemplates:e,openUrlTemplate:t})=>Object(S.jsx)("div",null,Object(S.jsx)("div",{className:"gphSidebar__header"},Object(S.jsx)("span",{className:"kuiIcon fa-info"}),r.i18n.translate("xpack.graph.sidebar.drillDownsTitle",{defaultMessage:"Drill-downs"})),Object(S.jsx)("div",{className:"gphSidebar__panel"},0===e.length&&Object(S.jsx)("p",{className:"help-block"},r.i18n.translate("xpack.graph.sidebar.drillDowns.noDrillDownsHelpText",{defaultMessage:"Configure drill-downs from the settings menu"})),Object(S.jsx)("ul",{className:"list-group"},e.map((e=>{var n;return Object(S.jsx)("li",{className:"list-group-item"},e.icon&&Object(S.jsx)("span",{className:"kuiIcon gphNoUserSelect"},null===(n=e.icon)||void 0===n?void 0:n.code),Object(S.jsx)("a",{"aria-hidden":"true",onClick:()=>t(e)},e.description))}))))),bn=({hasNodes:e,urlTemplates:t,openUrlTemplate:n})=>{const r=t.filter((({icon:e})=>e&&""!==e.class));if(0===r.length)return null;const a=r.map((t=>{var r;return Object(S.jsx)(h.EuiFlexItem,{grow:!1},Object(S.jsx)(h.EuiToolTip,{content:t.description},Object(S.jsx)("button",{className:"kuiButton kuiButton--basic kuiButton--small",type:"button",disabled:e,onClick:()=>n(t)},Object(S.jsx)("span",{className:`kuiIcon ${(null===(r=t.icon)||void 0===r?void 0:r.class)||""}`}))))}));return Object(S.jsx)(h.EuiFlexGroup,{className:"gphDrillDownIconLinks",justifyContent:"flexStart",alignItems:"center",gutterSize:"xs",responsive:!1},a)},yn=({node:e,isHighlighted:t,onSelectedFieldClick:n,onDeselectNode:r})=>{const a=Ct()("gphSelectionList__field",{"gphSelectionList__field--selected":t}),i=Ct()("fa","gphNode__text","gphSelectionList__icon",{"gphNode__text--inverse":(o=e.color,Object(h.isColorDark)(...Object(h.hexToRgb)(o)))});var o;return Object(S.jsx)("div",{"aria-hidden":"true",className:a,onClick:()=>n(e)},Object(S.jsx)("svg",{width:"24",height:"24"},Object(S.jsx)("circle",{className:"gphNode__circle",r:"10",cx:"12",cy:"12",style:{fill:e.color},onClick:()=>r(e)}),e.icon&&Object(S.jsx)("text",{className:i,textAnchor:"middle",x:"12",y:"16",onClick:()=>r(e)},e.icon.code)),Object(S.jsx)("span",null,e.label),e.numChildren>0&&Object(S.jsx)("span",null," (+",e.numChildren,")"))},xn=Object(C.connect)((e=>({urlTemplates:_e(e),liveResponseFields:ne(e)})))((({workspace:e,liveResponseFields:t,urlTemplates:n,control:a,selectedNode:i,colors:o,mergeCandidates:s,onSetControl:u,selectSelected:l})=>{const c=0===e.nodes.length,f=t=>{const n=t.url.replace(he,t.encoder.encode(e));window.open(n,"_blank")},h=t=>{l(t),e.changeHandler()},p=t=>{e.deselectNode(t),e.changeHandler(),u("none")};return Object(S.jsx)("div",{id:"sidebar",className:"gphSidebar"},Object(S.jsx)(cn,{workspace:e,liveResponseFields:t,onSetControl:u}),Object(S.jsx)("div",null,Object(S.jsx)("div",{className:"gphSidebar__header"},r.i18n.translate("xpack.graph.sidebar.selectionsTitle",{defaultMessage:"Selections"})),Object(S.jsx)(ln,{workspace:e,onSetControl:u}),Object(S.jsx)("div",{className:"gphSelectionList"},0===e.selectedNodes.length&&Object(S.jsx)("p",{className:"help-block"},r.i18n.translate("xpack.graph.sidebar.selections.noSelectionsHelpText",{defaultMessage:"No selections. Click on vertices to add."})),e.selectedNodes.map((e=>Object(S.jsx)(yn,{key:e.id,node:e,isHighlighted:i===e,onSelectedFieldClick:h,onDeselectNode:p}))))),Object(S.jsx)(bn,{urlTemplates:n,hasNodes:c,openUrlTemplate:f}),"drillDowns"===a&&Object(S.jsx)(mn,{urlTemplates:n,openUrlTemplate:f}),"style"===a&&e.selectedNodes.length>0&&Object(S.jsx)(fn,{workspace:e,colors:o}),"editLabel"===a&&i&&Object(S.jsx)(hn,{workspace:e,selectedNode:i}),"mergeTerms"===a&&s.length>0&&Object(S.jsx)(vn,{workspace:e,mergeCandidates:s,onSetControl:u}))}));function kn({workspace:e,selectSelected:t,onSetControl:n,onSetMergeCandidates:r}){const a=Object(o.useRef)(null),i=e=>{const t=[...e];r(t),n("mergeTerms")};return Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"gphGraph",width:"100%",height:"100%",pointerEvents:"all",id:"graphSvg",ref:e=>{e&&a.current!==e&&(a.current=e,function(e){const t=function(){dt.a.event.preventDefault()};dt.a.select(e).on("mousewheel",t).on("DOMMouseScroll",t).call(dt.a.behavior.zoom().on("zoom",(()=>{const t=dt.a.event;dt.a.select(e).select("g").attr("transform","translate("+t.translate+")scale("+t.scale+")").attr("style","stroke-width: "+1/t.scale)})))}(e))}},Object(S.jsx)("g",null,Object(S.jsx)("g",null,e.edges&&e.edges.map((t=>Object(S.jsx)("line",{key:`${qe(t.source.data.field,t.source.data.term)}-${qe(t.target.data.field,t.target.data.term)}`,x1:t.topSrc.kx,y1:t.topSrc.ky,x2:t.topTarget.kx,y2:t.topTarget.ky,onClick:()=>{(t=>{e.getAllIntersections(i,[t.topSrc,t.topTarget])})(t)},className:Ct()("gphEdge",{"gphEdge--selected":t.isSelected}),style:{strokeWidth:t.width},strokeLinecap:"round"})))),e.nodes&&e.nodes.filter((e=>!e.parent)).map((r=>Object(S.jsx)("g",{key:qe(r.data.field,r.data.term),onClick:a=>{((r,a)=>{if(!a.shiftKey){const t=r.isSelected;e.selectNone(),r.isSelected=t}e.toggleNodeSelection(r)?t(r):n("none"),e.changeHandler()})(r,a)},onMouseDown:e=>{(e.ctrlKey||e.shiftKey)&&e.preventDefault()},className:"gphNode"},Object(S.jsx)("circle",{cx:r.kx,cy:r.ky,r:r.scaledSize,className:Ct()("gphNode__circle",{"gphNode__circle--selected":r.isSelected}),style:{fill:r.color}}),r.icon&&Object(S.jsx)("text",{className:Ct()("fa gphNode__text",{"gphNode__text--inverse":Object(h.isColorDark)(...Object(h.hexToRgb)(r.color))}),transform:"translate(0,5)",textAnchor:"middle",x:r.kx,y:r.ky},r.icon.code),r.label.length<30&&Object(S.jsx)("text",{className:"gphNode__label",textAnchor:"middle",transform:"translate(0,22)",x:r.kx,y:r.ky},r.label),r.label.length>=30&&Object(S.jsx)("foreignObject",{width:"100",height:"20",transform:"translate(-50,15)",x:r.kx,y:r.ky},Object(S.jsx)("p",{className:"gphNode__label gphNode__label--html gphNoUserSelect"},r.label)),r.numChildren>0&&Object(S.jsx)("g",null,Object(S.jsx)("circle",{r:"5",className:"gphNode__markerCircle",transform:"translate(10,10)",cx:r.kx,cy:r.ky}),Object(S.jsx)("text",{className:"gphNode__markerText",textAnchor:"middle",transform:"translate(10,12)",x:r.kx,y:r.ky},r.numChildren)))))))}const _n=Object(o.memo)(Gt),wn=Object(o.memo)(sn),jn=Object(C.connect)((e=>({workspaceInitialized:it(e),hasFields:re(e)})))((({renderCounter:e,workspace:t,loading:n,savedWorkspace:a,hasFields:i,overlays:s,workspaceInitialized:u,indexPatterns:l,indexPatternProvider:f,capabilities:p,coreStart:d,graphSavePolicy:g,navigation:v,canEditDrillDownUrls:m,setHeaderActionMenu:b,sharingSavedObjectProps:y,spaces:x})=>{const[k,_]=Object(o.useState)(),[w,M]=Object(o.useState)(!1),[O,E]=Object(o.useState)(!1),[N,C]=Object(o.useState)([]),[T,A]=Object(o.useState)("none"),L=Object(o.useRef)(void 0),P=Object(c.useLocation)().search,I=new URLSearchParams(P).get("query"),F=Boolean(u||a.id),D=Object(o.useCallback)((e=>{L.current=e,A("editLabel")}),[]),R=Object(o.useCallback)((e=>{L.current=void 0,A(e)}),[]),B=Object(o.useCallback)((e=>_(e)),[]),q=Object(o.useCallback)((()=>{E(!0)}),[]),z=Object(o.useCallback)(((e,t,n)=>{if(!i)return void e();const a={confirmButtonText:r.i18n.translate("xpack.graph.leaveWorkspace.confirmButtonLabel",{defaultMessage:"Leave anyway"}),title:r.i18n.translate("xpack.graph.leaveWorkspace.modalTitle",{defaultMessage:"Unsaved changes"}),"data-test-subj":"confirmModal",...n};s.openConfirm(t||r.i18n.translate("xpack.graph.leaveWorkspace.confirmText",{defaultMessage:"If you leave now, you will lose unsaved changes."}),a).then((t=>{t&&e()}))}),[i,s]),U=Object(o.useCallback)((e=>C(e)),[]),H=Object(o.useCallback)((()=>{const e=a.id;if(x&&"conflict"===(null==y?void 0:y.outcome)&&e){const t=null==y?void 0:y.aliasTargetId,n=j(d.http.basePath.prepend,{id:t})+P;return x.ui.components.getLegacyUrlConflict({objectNoun:r.i18n.translate("xpack.graph.legacyUrlConflict.objectNoun",{defaultMessage:"Graph"}),currentObjectId:e,otherObjectId:t,otherObjectPath:n})}return null}),[a.id,y,x,d.http,P]);return Object(S.jsx)(o.Fragment,null,Object(S.jsx)(en,{workspace:t,savedWorkspace:a,graphSavePolicy:g,navigation:v,capabilities:p,coreStart:d,canEditDrillDownUrls:m,setShowInspect:M,confirmWipeWorkspace:z,setHeaderActionMenu:b,isInitialized:F}),Object(S.jsx)(an,{showInspect:w,lastRequest:null==t?void 0:t.lastRequest,lastResponse:null==t?void 0:t.lastResponse,indexPattern:k}),F&&Object(S.jsx)(un,null),Object(S.jsx)("div",{className:"gphGraph__bar"},Object(S.jsx)(St,{isLoading:n,urlQuery:I,currentIndexPattern:k,indexPatternProvider:f,confirmWipeWorkspace:z,onIndexPatternChange:B}),Object(S.jsx)(h.EuiSpacer,{size:"s"}),Object(S.jsx)(_n,{pickerOpen:O,setPickerOpen:E})),H(),!F&&Object(S.jsx)("div",null,Object(S.jsx)(wn,{noIndexPatterns:0===l.length,onOpenFieldPicker:q})),F&&t&&Object(S.jsx)("div",{className:"gphGraph__container",id:"GraphSvgContainer"},Object(S.jsx)("div",{className:"gphVisualization"},Object(S.jsx)(kn,{workspace:t,selectSelected:D,onSetControl:R,onSetMergeCandidates:U})),Object(S.jsx)(xn,{renderCounter:e,workspace:t,control:T,selectedNode:L.current,colors:Ie,mergeCandidates:N,selectSelected:D,onSetControl:R})))})),Mn=({coreStart:e,spaces:t,workspaceRef:n,store:a,savedObjectsClient:i})=>{const[s,u]=Object(o.useState)(),{replace:l}=Object(c.useHistory)(),{search:f}=Object(c.useLocation)(),{id:h}=Object(c.useParams)();return Object(o.useEffect)((()=>{const o=new URLSearchParams(f).get("query");async function s(){const e=async function*(){let e=1e3,t=0,n=[];yield*async function*r(a){await i.find({type:"index-pattern",fields:["title","type"],perPage:e,page:a}).then((r=>{e=r.perPage,t=r.total,n=r.savedObjects})),yield n,t>a*e&&(yield*r(++a))}(1)}();let t=[];for await(const n of e)t=t.concat(n);return t}async function c(){return h?await k(i,h).catch((function(t){return e.notifications.toasts.addError(t,{title:r.i18n.translate("xpack.graph.missingWorkspaceErrorMessage",{defaultMessage:"Couldn't load graph with ID"})}),l("/home"),new Promise((()=>{}))})):{savedObject:{displayName:"graph workspace",getEsType:()=>m,...y}}}!async function(){const i=await s(),{savedObject:l,sharingSavedObjectProps:h}=await c();if(t&&"aliasMatch"===(null==h?void 0:h.outcome)){const n=null==h?void 0:h.aliasTargetId,a=j(e.http.basePath.prepend,{id:n})+f;return t.ui.redirectLegacyUrl(a,r.i18n.translate("xpack.graph.legacyUrlConflict.objectNoun",{defaultMessage:"Graph"})),null}l.id?function(e,t){a.dispatch({type:"x-pack/graph/LOAD_WORKSPACE",payload:{savedWorkspace:e,indexPatterns:t,urlQuery:o}})}(l,i):n.current&&a.dispatch({type:"x-pack/graph/RESET"}),u({savedWorkspace:l,indexPatterns:i,sharingSavedObjectProps:h})}()}),[h,f,a,l,i,u,e,n,t]),s};const Sn=({toastNotifications:e,coreStart:t})=>{const[n,a]=Object(o.useState)(!1),i=Object(o.useCallback)((t=>{e.addDanger(function(e){var t,n,a;return e.response?r.i18n.translate("xpack.graph.fatalError.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:null===(t=e.body)||void 0===t?void 0:t.status,errStatusText:null===(n=e.body)||void 0===n?void 0:n.statusText,errMessage:null===(a=e.body)||void 0===a?void 0:a.message}}):r.i18n.translate("xpack.graph.fatalError.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. Please check if the Kibana server is running and that your browser has a working connection, or contact your system administrator."})}(t))}),[e]),s=Object(o.useCallback)((t=>{const n=r.i18n.translate("xpack.graph.errorToastTitle",{defaultMessage:"Graph Error",description:'"Graph" is a product name and should not be translated.'});t instanceof Error?e.addError(t,{title:n}):e.addDanger({title:n,text:String(t)})}),[e]);return{loading:n,callNodeProxy:Object(o.useCallback)(((n,o,s)=>{const u={body:JSON.stringify({index:n,query:o})};return a(!0),t.http.post("../api/graph/graphExplore",u).then((function(t){const n=t.resp;null!=n&&n.timed_out&&e.addWarning(r.i18n.translate("xpack.graph.exploreGraph.timedOutWarningText",{defaultMessage:"Exploration timed out"})),s(n)})).catch(i).finally((()=>a(!1)))}),[t.http,i,e]),callSearchNodeProxy:Object(o.useCallback)(((e,n,r)=>{const o={body:JSON.stringify({index:e,body:n})};a(!0),t.http.post("../api/graph/searchProxy",o).then((function(e){const t=e.resp;r(t)})).catch(i).finally((()=>a(!1)))}),[t.http,i]),handleSearchQueryError:s}};const On=({deps:{toastNotifications:e,coreStart:t,savedObjectsClient:n,graphSavePolicy:r,chrome:a,canEditDrillDownUrls:i,overlays:s,navigation:u,capabilities:l,storage:h,data:d,getBasePath:v,addBasePath:m,setHeaderActionMenu:b,spaces:y,indexPatterns:x}})=>{const k=Object(o.useRef)(),[_,w]=Object(o.useState)(0),j=Object(c.useHistory)(),M=Object(o.useMemo)((()=>function(e){const t=new Map;return{get:async n=>(t.has(n)||t.set(n,await e(n)),Promise.resolve(t.get(n)))}}(x.get)),[x.get]),{loading:O,callNodeProxy:E,callSearchNodeProxy:N,handleSearchQueryError:T}=Sn({toastNotifications:e,coreStart:t}),A=Object(o.useMemo)((()=>({appName:"graph",storage:h,data:d,...t})),[t,d,h]),[L]=Object(o.useState)((()=>ct({basePath:v(),addBasePath:m,indexPatternProvider:M,createWorkspace:(e,t)=>{const n={indexName:e,vertex_fields:[],nodeLabeller(){},changeHandler:()=>w((e=>e+1)),graphExploreProxy:E,searchProxy:N,exploreControls:t};return k.current=function(e){return new _t(e)}(n)},getWorkspace:()=>k.current,notifications:t.notifications,http:t.http,overlays:t.overlays,savedObjectsClient:n,showSaveModal:g.showSaveModal,savePolicy:r,changeUrl:e=>j.push(e),notifyReact:()=>w((e=>e+1)),chrome:a,I18nContext:t.i18n.Context,handleSearchQueryError:T}))),P=Mn({workspaceRef:k,store:L,savedObjectsClient:n,spaces:y,coreStart:t});if(!P)return null;const{savedWorkspace:I,indexPatterns:F,sharingSavedObjectProps:D}=P;return Object(S.jsx)(f.I18nProvider,null,Object(S.jsx)(p.KibanaContextProvider,{services:A},Object(S.jsx)(C.Provider,{store:L},Object(S.jsx)(jn,{spaces:y,sharingSavedObjectProps:D,renderCounter:_,workspace:k.current,loading:O,setHeaderActionMenu:b,graphSavePolicy:r,navigation:u,capabilities:l,coreStart:t,canEditDrillDownUrls:i,overlays:s,indexPatterns:F,savedWorkspace:I,indexPatternProvider:M}))))};n.e(2).then(n.bind(null,116));const En=({history:e,element:t,...n})=>{const{chrome:a,capabilities:o,core:s}=n,{theme$:f}=s.theme;o.graph.save||a.setBadge({text:r.i18n.translate("xpack.graph.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:r.i18n.translate("xpack.graph.badge.readOnly.tooltip",{defaultMessage:"Unable to save Graph workspaces"}),iconType:"glasses"});const h=n.licensing.license$.subscribe((e=>{const t=Object(u.a)(e);t.showAppLink&&t.enableAppLink||(t.message&&n.core.notifications.toasts.addDanger(t.message),setTimeout((()=>{n.core.application.navigateToApp("home")}),0))})),d=e.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))})),g=Object(S.jsx)(p.KibanaThemeProvider,{theme$:f},(e=>{const t=Object(l.createHashHistory)();return Object(S.jsx)(c.Router,{history:t},Object(S.jsx)(c.Switch,null,Object(S.jsx)(c.Route,{exact:!0,path:"/home"},Object(S.jsx)(O,{deps:e})),Object(S.jsx)(c.Route,{path:"/workspace/:id?"},Object(S.jsx)(On,{deps:e})),Object(S.jsx)(c.Route,null,Object(S.jsx)(c.Redirect,{exact:!0,to:"/home"}))))})(n));return i.a.render(g,t),t.setAttribute("class","gphAppWrapper"),()=>{h.unsubscribe(),d(),i.a.unmountComponentAtNode(t)}}}])]);