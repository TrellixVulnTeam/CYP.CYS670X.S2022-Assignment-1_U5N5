/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var n,i,a=t[0],o=t[1],u=0,c=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&c.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(s&&s(t);c.length;)c.shift()()}var n={},r={0:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=a);var o,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=function(e){return i.p+"maps.chunk."+e+".js"}(e);var s=new Error;o=function(t){u.onerror=u.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,n[1](s)}r[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:u})}),12e4);u.onerror=u.onload=o,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var a=window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var s=o;i(i.s=49)}([function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,n){"use strict";n.d(t,"X",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"M",(function(){return c})),n.d(t,"W",(function(){return d})),n.d(t,"H",(function(){return f})),n.d(t,"K",(function(){return p})),n.d(t,"B",(function(){return g})),n.d(t,"L",(function(){return m})),n.d(t,"J",(function(){return b})),n.d(t,"G",(function(){return _})),n.d(t,"h",(function(){return y})),n.d(t,"fb",(function(){return h})),n.d(t,"eb",(function(){return v})),n.d(t,"P",(function(){return E})),n.d(t,"yb",(function(){return O})),n.d(t,"xb",(function(){return S})),n.d(t,"T",(function(){return T})),n.d(t,"ob",(function(){return A})),n.d(t,"A",(function(){return I})),n.d(t,"O",(function(){return L})),n.d(t,"bb",(function(){return N})),n.d(t,"C",(function(){return x})),n.d(t,"lb",(function(){return C})),n.d(t,"nb",(function(){return P})),n.d(t,"mb",(function(){return M})),n.d(t,"kb",(function(){return R})),n.d(t,"cb",(function(){return j})),n.d(t,"Y",(function(){return w})),n.d(t,"m",(function(){return D})),n.d(t,"vb",(function(){return k})),n.d(t,"q",(function(){return F})),n.d(t,"p",(function(){return G})),n.d(t,"o",(function(){return U})),n.d(t,"z",(function(){return B})),n.d(t,"ab",(function(){return q})),n.d(t,"w",(function(){return V})),n.d(t,"x",(function(){return z})),n.d(t,"y",(function(){return $})),n.d(t,"F",(function(){return H})),n.d(t,"hb",(function(){return Y})),n.d(t,"V",(function(){return J})),n.d(t,"R",(function(){return W})),n.d(t,"v",(function(){return Q})),n.d(t,"t",(function(){return Z})),n.d(t,"u",(function(){return X})),n.d(t,"a",(function(){return K})),n.d(t,"b",(function(){return ee})),n.d(t,"ib",(function(){return te})),n.d(t,"I",(function(){return ne})),n.d(t,"E",(function(){return re})),n.d(t,"D",(function(){return ie})),n.d(t,"sb",(function(){return ae})),n.d(t,"r",(function(){return oe})),n.d(t,"j",(function(){return ue})),n.d(t,"k",(function(){return se})),n.d(t,"qb",(function(){return ce})),n.d(t,"S",(function(){return le})),n.d(t,"i",(function(){return de})),n.d(t,"g",(function(){return fe})),n.d(t,"gb",(function(){return pe})),n.d(t,"rb",(function(){return ge})),n.d(t,"Q",(function(){return me})),n.d(t,"n",(function(){return be})),n.d(t,"ub",(function(){return _e})),n.d(t,"jb",(function(){return ye})),n.d(t,"db",(function(){return he})),n.d(t,"pb",(function(){return ve})),n.d(t,"N",(function(){return Ee})),n.d(t,"U",(function(){return Oe})),n.d(t,"tb",(function(){return Se})),n.d(t,"Z",(function(){return Te})),n.d(t,"l",(function(){return Ae})),n.d(t,"s",(function(){return Ie})),n.d(t,"wb",(function(){return Le}));var r=n(2);const i="map",a="maps",o="gisApp",u="logoKibana",s=r.i18n.translate("xpack.maps.visTypeAlias.title",{defaultMessage:"Maps"}),c="initialLayers",l=`app/${a}`,d="map",f=`api/${a}`,p=`${f}/indexSettings`,g=`${f}/fonts`,m=`${f}/docSource`,b=`/${f}/feature`,_=`/${f}/getMatchingIndexes`,y=`/${f}/checkIsDrawingIndex`,h="mvt/getTile",v="mvt/getGridTile",E="__kbn_is_centroid_feature__";function O(e){return`/${l}${S(e)}`}function S(e){return e?`/${d}/${e}`:`/${d}`}let T,A,I;!function(e){e.RASTER_TILE="RASTER_TILE",e.GEOJSON_VECTOR="GEOJSON_VECTOR",e.EMS_VECTOR_TILE="EMS_VECTOR_TILE",e.HEATMAP="HEATMAP",e.BLENDED_VECTOR="BLENDED_VECTOR",e.MVT_VECTOR="MVT_VECTOR"}(T||(T={})),function(e){e.EMS_TMS="EMS_TMS",e.EMS_FILE="EMS_FILE",e.ES_GEO_GRID="ES_GEO_GRID",e.ES_GEO_LINE="ES_GEO_LINE",e.ES_SEARCH="ES_SEARCH",e.ES_PEW_PEW="ES_PEW_PEW",e.ES_TERM_SOURCE="ES_TERM_SOURCE",e.EMS_XYZ="EMS_XYZ",e.WMS="WMS",e.KIBANA_TILEMAP="KIBANA_TILEMAP",e.GEOJSON_FILE="GEOJSON_FILE",e.MVT_SINGLE_LAYER="MVT_SINGLE_LAYER",e.TABLE_SOURCE="TABLE_SOURCE"}(A||(A={})),function(e){e.SOURCE="source",e.JOIN="join"}(I||(I={}));const L="__kbnjoin__",N="meta",x="formatters",C="source",P=`${C}_${N}`,M=`${C}_${x}`,R=`${C}_bounds`,j=0,w=24,D=5,k=2,F=1e4,G=100,U=65535,B="__kbn_isvisibleduetojoin__",q="_";let V;!function(e){e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape"}(V||(V={}));const z=["geo_point","geo_shape"];let $,H;!function(e){e.INTERSECTS="INTERSECTS",e.DISJOINT="DISJOINT",e.WITHIN="WITHIN"}($||($={})),function(e){e.POINT="Point",e.MULTI_POINT="MultiPoint",e.LINE_STRING="LineString",e.MULTI_LINE_STRING="MultiLineString",e.POLYGON="Polygon",e.MULTI_POLYGON="MultiPolygon",e.GEOMETRY_COLLECTION="GeometryCollection"}(H||(H={}));const Y=0,J=0,W=1,Q={type:"FeatureCollection",features:[]};let Z,X;!function(e){e.DRAW_SHAPES="DRAW_SHAPES",e.DRAW_POINTS="DRAW_POINTS",e.DRAW_FILTERS="DRAW_FILTERS",e.NONE="NONE"}(Z||(Z={})),function(e){e.BOUNDS="BOUNDS",e.DISTANCE="DISTANCE",e.POLYGON="POLYGON",e.POINT="POINT",e.LINE="LINE",e.SIMPLE_SELECT="SIMPLE_SELECT",e.DELETE="DELETE"}(X||(X={}));const K="_of_";let ee,te,ne;!function(e){e.AVG="avg",e.COUNT="count",e.MAX="max",e.MIN="min",e.SUM="sum",e.TERMS="terms",e.PERCENTILE="percentile",e.UNIQUE_COUNT="cardinality"}(ee||(ee={})),function(e){e.HEATMAP="heatmap",e.POINT="point",e.GRID="grid"}(te||(te={})),function(e){e.COARSE="COARSE",e.FINE="FINE",e.MOST_FINE="MOST_FINE",e.SUPER_FINE="SUPER_FINE"}(ne||(ne={}));const re="gridSplit",ie="gridCentroid",ae="__percentage",oe=50,ue=r.i18n.translate("xpack.maps.aggs.defaultCountLabel",{defaultMessage:"count"}),se="doc_count";let ce,le,de;!function(e){e.STATIC="STATIC",e.DYNAMIC="DYNAMIC"}(ce||(ce={})),function(e){e.VECTOR="VECTOR",e.HEATMAP="HEATMAP",e.TILE="TILE"}(le||(le={})),function(e){e.CATEGORICAL="CATEGORICAL",e.ORDINAL="ORDINAL"}(de||(de={}));const fe=["string","ip","boolean"],pe=["number","date"];let ge,me;!function(e){e.CIRCLE="circle",e.ICON="icon"}(ge||(ge={})),function(e){e.NONE="NONE",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE"}(me||(me={}));const be="marker";let _e,ye,he;!function(e){e.SYMBOLIZE_AS="symbolizeAs",e.FILL_COLOR="fillColor",e.LINE_COLOR="lineColor",e.LINE_WIDTH="lineWidth",e.ICON="icon",e.ICON_SIZE="iconSize",e.ICON_ORIENTATION="iconOrientation",e.LABEL_TEXT="labelText",e.LABEL_COLOR="labelColor",e.LABEL_SIZE="labelSize",e.LABEL_BORDER_COLOR="labelBorderColor",e.LABEL_BORDER_SIZE="labelBorderSize"}(_e||(_e={})),function(e){e.LIMIT="LIMIT",e.CLUSTERS="CLUSTERS",e.TOP_HITS="TOP_HITS",e.MVT="MVT"}(ye||(ye={})),function(e){e.STRING="String",e.NUMBER="Number"}(he||(he={}));const ve="SPATIAL_FILTERS_LAYER_ID";let Ee,Oe,Se,Te,Ae;!function(e){e.LAST_SAVED_LOCATION="LAST_SAVED_LOCATION",e.FIXED_LOCATION="FIXED_LOCATION",e.BROWSER_LOCATION="BROWSER_LOCATION",e.AUTO_FIT_TO_BOUNDS="AUTO_FIT_TO_BOUNDS"}(Ee||(Ee={})),function(e){e.ELASTICSEARCH="ELASTICSEARCH",e.REFERENCE="REFERENCE",e.SOLUTIONS="SOLUTIONS"}(Oe||(Oe={})),function(e){e.POINT="POINT",e.LINE="LINE",e.POLYGON="POLYGON"}(Se||(Se={})),function(e){e.GET="get",e.FEATURE_STATE="feature-state"}(Te||(Te={})),function(e){e.INTERPOLATE="INTERPOLATE",e.PERCENTILES="PERCENTILES"}(Ae||(Ae={}));const Ie=[50,75,90,95,99],Le="world_countries"},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){e.exports=n(10)(2455)},function(e,t,n){e.exports=n(10)(2)},function(e,t,n){e.exports=n(10)(21)},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,n){"use strict";let r;async function i(){return void 0!==r||(r=new Promise((async(e,t)=>{try{const{MapEmbeddable:t,getIndexPatternService:r,getMapsCapabilities:i,renderApp:a,createSecurityLayerDescriptors:o,createTileMapLayerDescriptor:u,createRegionMapLayerDescriptor:s,createBasemapLayerDescriptor:c,createESSearchSourceLayerDescriptor:l,suggestEMSTermJoinConfig:d}=await n.e(1).then(n.bind(null,69));e({MapEmbeddable:t,getIndexPatternService:r,getMapsCapabilities:i,renderApp:a,createSecurityLayerDescriptors:o,createTileMapLayerDescriptor:u,createRegionMapLayerDescriptor:s,createBasemapLayerDescriptor:c,createESSearchSourceLayerDescriptor:l,suggestEMSTermJoinConfig:d})}catch(e){t(e)}}))),r}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";let r,i,a,o;function u(e,t){r=e,i=t,a=t.mapsEms,o=a.createEMSSettings()}n.d(t,"S",(function(){return u})),n.d(t,"p",(function(){return s})),n.d(t,"n",(function(){return c})),n.d(t,"r",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"s",(function(){return f})),n.d(t,"m",(function(){return p})),n.d(t,"P",(function(){return g})),n.d(t,"u",(function(){return m})),n.d(t,"q",(function(){return b})),n.d(t,"o",(function(){return _})),n.d(t,"l",(function(){return y})),n.d(t,"M",(function(){return h})),n.d(t,"N",(function(){return v})),n.d(t,"D",(function(){return E})),n.d(t,"d",(function(){return O})),n.d(t,"w",(function(){return S})),n.d(t,"Q",(function(){return T})),n.d(t,"h",(function(){return A})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return L})),n.d(t,"C",(function(){return N})),n.d(t,"O",(function(){return x})),n.d(t,"c",(function(){return C})),n.d(t,"z",(function(){return P})),n.d(t,"e",(function(){return M})),n.d(t,"F",(function(){return R})),n.d(t,"j",(function(){return j})),n.d(t,"y",(function(){return w})),n.d(t,"E",(function(){return D})),n.d(t,"A",(function(){return k})),n.d(t,"G",(function(){return F})),n.d(t,"J",(function(){return G})),n.d(t,"K",(function(){return U})),n.d(t,"R",(function(){return q})),n.d(t,"v",(function(){return V})),n.d(t,"I",(function(){return z})),n.d(t,"B",(function(){return $})),n.d(t,"x",(function(){return H})),n.d(t,"i",(function(){return Y})),n.d(t,"k",(function(){return J})),n.d(t,"L",(function(){return W})),n.d(t,"H",(function(){return Q})),n.d(t,"t",(function(){return Z})),n.d(t,"b",(function(){return X}));const s=()=>i.fileUpload.IndexNameFormComponent,c=()=>i.fileUpload.FileUploadComponent,l=()=>i.data.indexPatterns,d=()=>i.data.autocomplete,f=()=>i.inspector,p=()=>i.fileUpload,g=()=>r.uiSettings,m=()=>g().get("theme:darkMode",!1),b=()=>i.data.ui.IndexPatternSelect,_=()=>r.http,y=()=>r.executionContext,h=()=>i.data.query.timefilter.timefilter,v=()=>r.notifications.toasts,E=()=>r.savedObjects.client,O=()=>r.chrome,S=()=>r.application.capabilities.maps,T=()=>r.application.capabilities.visualize,A=()=>r.docLinks,I=()=>r.overlays,L=()=>i.data,N=()=>i.savedObjects,x=()=>i.uiActions,C=()=>r,P=()=>i.navigation,M=()=>r.i18n,R=()=>i.data.search,j=()=>i.embeddable,w=()=>r.application.navigateToApp,D=()=>i.savedObjectsTagging,k=()=>i.presentationUtil.ContextProvider,F=()=>i.security,G=()=>i.spaces,U=()=>r.theme;let B;const q=e=>B=e,V=()=>B,z=()=>V().showMapsInspectorAdapter,$=()=>V().preserveDrawingBuffer,H=()=>a,Y=()=>o,J=()=>a.config.emsTileLayerId,W=()=>a.config.tilemap?a.config.tilemap:{},Q=()=>i.share,Z=()=>i.dashboard.dashboardFeatureFlagConfig.allowByValueEmbeddables;async function X(){const e=i.charts?await i.charts.palettes.getPalettes():null;if(!e)return null;const t=e.get("default"),n={syncColors:!0};return e=>{const r=[{name:e,rankAtDepth:0,totalSeriesAtDepth:1}],i=t.getCategoricalColor(r,n);return i||"#3d3d3d"}}},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){e.exports=n(10)(8)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),i=n(21),a=n(6);const o=()=>Object(a.jsx)(i.EuiDelayRender,null,Object(a.jsx)(i.EuiLoadingContent,{lines:3}));function u({getLazyComponent:e,lazyComponentProps:t}){const n=e();return Object(a.jsx)(i.EuiErrorBoundary,null,Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)(o,null)},Object(a.jsx)(n,t)))}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));const r="tile_map_vis",i="tile_map";let a;!function(e){e.ScaledCircleMarkers="Scaled Circle Markers",e.Heatmap="Heatmap"}(a||(a={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const r="region_map_vis",i="region_map"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return f}));var r=n(2),i=n(1);function a(){return r.i18n.translate("xpack.maps.appTitle",{defaultMessage:"Maps"})}function o(){return r.i18n.translate("xpack.maps.embeddableDisplayName",{defaultMessage:"map"})}function u(){return r.i18n.translate("xpack.maps.source.dataSourceLabel",{defaultMessage:"Data source"})}function s(){return r.i18n.translate("xpack.maps.source.urlLabel",{defaultMessage:"Url"})}function c(e){switch(e){case i.y.INTERSECTS:return r.i18n.translate("xpack.maps.common.esSpatialRelation.intersectsLabel",{defaultMessage:"intersects"});case i.y.DISJOINT:return r.i18n.translate("xpack.maps.common.esSpatialRelation.disjointLabel",{defaultMessage:"disjoint"});case i.y.WITHIN:return r.i18n.translate("xpack.maps.common.esSpatialRelation.withinLabel",{defaultMessage:"within"});case i.y.CONTAINS:return r.i18n.translate("xpack.maps.common.esSpatialRelation.containsLabel",{defaultMessage:"contains"});default:return e}}function l(){return r.i18n.translate("xpack.maps.dataView.label",{defaultMessage:"Data view"})}function d(){return r.i18n.translate("xpack.maps.dataView.selectPlacholder",{defaultMessage:"Select data view"})}function f(e){return r.i18n.translate("xpack.maps.dataView.notFoundMessage",{defaultMessage:"Unable to find data view '{id}'",values:{id:e}})}},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";function r({attributes:e,references:t=[]}){if(!e.layerListJSON)return{attributes:e,references:t};const n=[];let r=[];try{r=JSON.parse(e.layerListJSON)}catch(e){throw new Error("Unable to parse attribute layerListJSON")}return r.forEach(((e,t)=>{if(e.sourceDescriptor&&"indexPatternId"in e.sourceDescriptor){const r=e.sourceDescriptor,i=`layer_${t}_source_index_pattern`;n.push({name:i,type:"index-pattern",id:r.indexPatternId}),delete r.indexPatternId,r.indexPatternRefName=i}if("joins"in e){const r=e;(r.joins?r.joins:[]).forEach(((e,r)=>{if("indexPatternId"in e.right){const i=e.right,a=`layer_${t}_join_${r}_index_pattern`;n.push({name:a,type:"index-pattern",id:i.indexPatternId}),delete i.indexPatternId,i.indexPatternRefName=a}}))}})),{attributes:{...e,layerListJSON:JSON.stringify(r)},references:t.concat(n)}}function i(e,t){const n=t.find((({name:t})=>t===e));if(!n)throw new Error(`Could not find reference "${e}"`);return n}function a({attributes:e,references:t}){if(!e.layerListJSON)return{attributes:e};let n=[];try{n=JSON.parse(e.layerListJSON)}catch(e){throw new Error("Unable to parse attribute layerListJSON")}return n.forEach((e=>{if(e.sourceDescriptor&&"indexPatternRefName"in e.sourceDescriptor){const n=e.sourceDescriptor,r=i(n.indexPatternRefName,t);n.indexPatternId=r.id,delete n.indexPatternRefName}if("joins"in e){const n=e;(n.joins?n.joins:[]).forEach((e=>{if("indexPatternRefName"in e.right){const n=e.right,r=i(n.indexPatternRefName,t);n.indexPatternId=r.id,delete n.indexPatternRefName}}))}})),{attributes:{...e,layerListJSON:JSON.stringify(n)}}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},function(e,t,n){e.exports=n(10)(43)},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(7),i=n(2),a=n(18),o=n(41);var u=n(15),s=n(12),c=n(6);const l=i.i18n.translate("xpack.maps.regionMapMap.vis.title",{defaultMessage:"Region Map"}),d={name:u.b,title:l,icon:"visMapRegion",description:i.i18n.translate("xpack.maps.regionMap.vis.description",{defaultMessage:"Show metrics on a thematic map."}),editorConfig:{optionTabs:[{name:"",title:"",editor:function(e){return Object(c.jsx)(s.a,{getLazyComponent:()=>Object(r.lazy)((()=>n.e(4).then(n.bind(null,343)))),lazyComponentProps:e})}}]},visConfig:{defaults:{colorSchema:"Yellow to Red",mapZoom:2,mapCenter:[0,0]}},toExpressionAst:e=>{const t=Object(a.buildExpressionFunction)("regionmap",{visConfig:JSON.stringify({...e.params,mapCenter:e.uiState.get("mapCenter",[0,0]),mapZoom:parseInt(e.uiState.get("mapZoom",2),10),layerDescriptorParams:Object(o.a)(e)})});return Object(a.buildExpression)([t]).toAst()},requiresSearch:!0}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(7),i=n(2),a=n(18),o=n(42);var u=n(14),s=n(12),c=n(6);const l=i.i18n.translate("xpack.maps.tileMap.vis.title",{defaultMessage:"Coordinate Map"}),d={name:u.c,title:l,icon:"visMapCoordinate",description:i.i18n.translate("xpack.maps.tileMap.vis.description",{defaultMessage:"Plot latitude and longitude coordinates on a map"}),editorConfig:{optionTabs:[{name:"",title:"",editor:function(e){return Object(c.jsx)(s.a,{getLazyComponent:()=>Object(r.lazy)((()=>n.e(5).then(n.bind(null,345)))),lazyComponentProps:e})}}]},visConfig:{defaults:{colorSchema:"Yellow to Red",mapType:u.a.ScaledCircleMarkers,mapZoom:2,mapCenter:[0,0]}},toExpressionAst:e=>{const t=Object(a.buildExpressionFunction)("tilemap",{visConfig:JSON.stringify({...e.params,mapCenter:e.uiState.get("mapCenter",[0,0]),mapZoom:parseInt(e.uiState.get("mapZoom",2),10),layerDescriptorParams:Object(o.a)(e)})});return Object(a.buildExpression)([t]).toAst()},requiresSearch:!0}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){var r=n(47),i=n(48);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var u=0;u<16;++u)t[a+u]=o[u];return t||i(o)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return _}));var r=n(1);let i;!function(e){e.GEO_LINE_AGG="GEO_LINE_AGG",e.GEO_SHAPE_AGGS_GEO_TILE="GEO_SHAPE_AGGS_GEO_TILE",e.ON_PREM_EMS="ON_PREM_EMS"}(i||(i={}));const a={[i.GEO_LINE_AGG]:{name:"geo_line aggregation",license:"gold"},[i.GEO_SHAPE_AGGS_GEO_TILE]:{name:"geo_tile aggregation on geo_shape field-type",license:"gold"},[i.ON_PREM_EMS]:{name:"layer from local Elastic Maps Server",license:"enterprise"}};let o,u=!1;const s=()=>o,c=()=>u;let l,d;const f=new Promise((e=>{d=e})),p=async()=>{await f};async function g(e){m(await e.refresh()),l=e,l.license$.subscribe(m),d(void 0)}function m(e){const t=e.check(r.e,"gold");u="valid"===t.state,o=e.uid}function b(e){for(const t of Object.values(i))e.featureUsage.register(a[t].name,a[t].license)}function _(e){l?l.featureUsage.notifyUsage(a[i[e]].name):console.error("May not call notifyLicensedFeatureUsage before plugin start")}},function(e,t,n){"use strict";n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return R})),n.d(t,"d",(function(){return A})),n.d(t,"c",(function(){return M})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return p}));var r={};n.r(r),n.d(r,"buildNode",(function(){return F})),n.d(r,"toElasticsearchQuery",(function(){return G}));var i={};n.r(i),n.d(i,"wildcardSymbol",(function(){return U})),n.d(i,"buildNode",(function(){return V})),n.d(i,"test",(function(){return z})),n.d(i,"toElasticsearchQuery",(function(){return $})),n.d(i,"toQueryStringQuery",(function(){return H})),n.d(i,"hasLeadingWildcard",(function(){return Y}));var a={};n.r(a),n.d(a,"buildNodeParams",(function(){return ee})),n.d(a,"toElasticsearchQuery",(function(){return te}));var o={};n.r(o),n.d(o,"buildNodeParams",(function(){return ne})),n.d(o,"toElasticsearchQuery",(function(){return re}));var u={};n.r(u),n.d(u,"buildNodeParams",(function(){return ie})),n.d(u,"toElasticsearchQuery",(function(){return ae}));var s={};n.r(s),n.d(s,"buildNodeParams",(function(){return oe})),n.d(s,"toElasticsearchQuery",(function(){return ue}));var c={};n.r(c),n.d(c,"buildNodeParams",(function(){return se})),n.d(c,"toElasticsearchQuery",(function(){return ce}));var l={};n.r(l),n.d(l,"buildNodeParams",(function(){return le})),n.d(l,"toElasticsearchQuery",(function(){return de}));var d={};n.r(d),n.d(d,"buildNodeParams",(function(){return fe})),n.d(d,"toElasticsearchQuery",(function(){return pe}));var f={};n.r(f),n.d(f,"buildNode",(function(){return me})),n.d(f,"buildNodeWithArgumentNodes",(function(){return be})),n.d(f,"toElasticsearchQuery",(function(){return _e}));var p,g,m=n(4),b=n.n(m),_=n(3),y=n.n(_),h=n(0),v=n.n(h),E=function(e,t,n){var r,i,a=Object(h.omit)(e,n);return t.index&&(a.index=null===(r=e.meta)||void 0===r?void 0:r.index),t.negate&&(a.negate=e.meta&&Boolean(e.meta.negate)),t.disabled&&(a.disabled=e.meta&&Boolean(e.meta.disabled)),t.alias&&(a.alias=null===(i=e.meta)||void 0===i?void 0:i.alias),a},O=function(e,t,n){return Object(h.map)(e,(function(e){return E(e,t,n)}))},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return!1;var r={},i=["$$hashKey","meta"];return(r=Object(h.defaults)(n||{},{index:!1,state:!1,negate:!1,disabled:!1,alias:!1})).state||i.push("$state"),Array.isArray(e)&&Array.isArray(t)?Object(h.isEqual)(O(e,r,i),O(t,r,i)):!Array.isArray(e)&&!Array.isArray(t)&&Object(h.isEqual)(E(e,r,i),E(t,r,i))},T=(n(20),function(e,t){if("boolean"!=typeof t&&"boolean"===e.type){if([1,"true"].includes(t))return!0;if([0,"false"].includes(t))return!1;throw new Error("".concat(t," is not a valid boolean value for boolean field ").concat(e.name))}return"number"!=typeof t&&"number"===e.type?Number(t):t}),A=function(e,t,n){var r=T(e,t);return e.scripted?{meta:{index:n.id,field:e.name},query:{script:I(e,t)}}:{meta:{index:n.id},query:{match_phrase:b()({},e.name,r)}}},I=function(e,t){var n=T(e,t);return{script:{source:L(e),lang:e.lang,params:{value:n}}}},L=function(e){return"painless"===e.lang?"boolean compare(Supplier s, def v) {return s.get() == v;}"+"compare(() -> { ".concat(e.script," }, params.value);"):"(".concat(e.script,") == value")};!function(e){e.CUSTOM="custom",e.PHRASES="phrases",e.PHRASE="phrase",e.EXISTS="exists",e.MATCH_ALL="match_all",e.QUERY_STRING="query_string",e.RANGE="range",e.RANGE_FROM_VALUE="range_from_value",e.SPATIAL_FILTER="spatial_filter"}(p||(p={})),function(e){e.APP_STATE="appState",e.GLOBAL_STATE="globalState"}(g||(g={}));var N={gt:">",gte:">=",lte:"<=",lt:"<"},x={gt:"boolean gt(Supplier s, def v) {return s.get() > v}",gte:"boolean gte(Supplier s, def v) {return s.get() >= v}",lte:"boolean lte(Supplier s, def v) {return s.get() <= v}",lt:"boolean lt(Supplier s, def v) {return s.get() < v}"},C={gt:"boolean gt(Supplier s, def v) {return s.get().toInstant().isAfter(Instant.parse(v))}",gte:"boolean gte(Supplier s, def v) {return !s.get().toInstant().isBefore(Instant.parse(v))}",lte:"boolean lte(Supplier s, def v) {return !s.get().toInstant().isAfter(Instant.parse(v))}",lt:"boolean lt(Supplier s, def v) {return s.get().toInstant().isBefore(Instant.parse(v))}"},P=function(e,t){var n=Object(h.mapValues)(Object(h.pickBy)(t,(function(e,t){return t in N})),(function(t){return"number"===e.type&&"string"==typeof t?parseFloat(t):t})),r=Object(h.map)(n,(function(t,n){return"("+e.script+")"+Object(h.get)(N,n)+n})).join(" && ");if("painless"===e.lang){var i="date"===e.type?C:x,a=Object(h.reduce)(n,(function(e,t,n){return e.concat(Object(h.get)(i,n))}),[]).join(" "),o=Object(h.map)(n,(function(t,n){return"".concat(n,"(() -> { ").concat(e.script," }, params.").concat(n,")")})).join(" && ");r="".concat(a).concat(o)}return{script:{source:r,params:n,lang:e.lang}}},M=function(e,t){return{meta:{index:t.id},query:{exists:{field:e.name}}}};var R=function(e){return e.$state&&e.$state.store===g.GLOBAL_STATE};var j=n(5),w=n.n(j),D=n(11),k=n.n(D);function F(e){return{type:"literal",value:e}}function G(e){return e.value}var U="@kuery-wildcard@";function B(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(e){return e.replace(/[+-=&|><!(){}[\]^"~*?:\\/]/g,"\\$&")}function V(e){return e.includes(U)?{type:"wildcard",value:e}:De(e)}function z(e,t){var n=e.value.split(U).map(B).join("[\\s\\S]*");return new RegExp("^".concat(n,"$")).test(t)}function $(e){return e.value.split(U).join("*")}function H(e){return e.value.split(U).map(q).join("*")}function Y(e){var t=e.value;return t.startsWith(U)&&t.replace(U,"").length>0}function J(e,t){if(!t)return[];if("literal"===e.type){var n=G(e),r=t.fields.find((function(e){return e.name===n}));return r?[r]:[]}return"wildcard"===e.type?t.fields.filter((function(t){return z(e,t.name)})):void 0}var W=n(35),Q=n.n(W);function Z(e){var t=Q.a.tz.guess();return"Browser"===e?t:e}function X(e){return function(e){var t,n=null==e?void 0:e.subType;return!(null==n||null===(t=n.nested)||void 0===t||!t.path)}(e)?e.subType:void 0}function K(e,t,n){var r=y()(y()({},e),{},{value:n?"".concat(n,".").concat(e.value):e.value});if(!t||"wildcard"===r.type&&!n)return r;var i=J(r,t).reduce((function(e,t){var r=X(t),i=null==r?void 0:r.nested.path;return n&&!i?[].concat(w()(e),["".concat(t.name,' is not a nested field but is in nested group "').concat(n,'" in the KQL expression.')]):i&&!n?[].concat(w()(e),["".concat(t.name," is a nested field, but is not in a nested group in the KQL expression.")]):i!==n?[].concat(w()(e),["Nested field ".concat(t.name," is being queried with the incorrect nested path. The correct path is ").concat(null==r?void 0:r.nested.path,".")]):e}),[]);if(i.length>0)throw new Error(i.join("\n"));return r}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(h.isUndefined)(e))throw new Error("fieldName is a required argument");if(Object(h.isUndefined)(t))throw new Error("value is a required argument");var r="string"==typeof e?De(e):F(e),i="string"==typeof t?De(t):F(t),a=F(n);return{arguments:[r,i,a]}}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=k()(e.arguments,3),a=i[0],o=i[1],u=i[2],s="wildcard"===o.type&&o.value===U,c="wildcard"===a.type&&a.value===U,l=s&&c;if(l)return{match_all:{}};var d=K(a,t,null!=r&&r.nested?r.nested.path:void 0),f=Object(h.isUndefined)(o)?o:ke(o),p=u.value?"phrase":"best_fields";if(null===d.value)return"wildcard"===o.type?{query_string:{query:H(o)}}:{multi_match:{type:p,query:f,lenient:!0}};var g=t?J(d,t):[];if(g&&0===g.length&&g.push({name:ke(d),scripted:!1,type:""}),s&&(null==g||!g.length||(null==g?void 0:g.length)===(null==t?void 0:t.fields.length)))return{match_all:{}};var m=g.reduce((function(e,t){var i=function(e){var n=X(t);return"wildcard"!==d.type||null==n||!n.nested||null!=r&&r.nested?e:{nested:{path:n.nested.path,query:e,score_mode:"none"}}};if(!t.scripted){if(s)return[].concat(w()(e),[i({exists:{field:t.name}})]);if("wildcard"===o.type)return[].concat(w()(e),[i({query_string:{fields:[t.name],query:H(o)}})]);if("date"===t.type){var a=n.dateFormatTZ?{time_zone:Z(n.dateFormatTZ)}:{};return[].concat(w()(e),[i({range:b()({},t.name,y()({gte:f,lte:f},a))})])}var u="phrase"===p?"match_phrase":"match";return[].concat(w()(e),[i(b()({},u,b()({},t.name,f)))])}if(!s)return[].concat(w()(e),[{script:y()({},I(t,f))}])}),[]);return{bool:{should:m||[],minimum_should_match:1}}}function ne(e){return{arguments:e}}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.filtersInMustClause,a=e.arguments||[],o=i?"must":"filter";return{bool:b()({},o,a.map((function(e){return ke(e,t,n,r)})))}}function ie(e){return{arguments:e}}function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.arguments||[];return{bool:{should:i.map((function(e){return ke(e,t,n,r)})),minimum_should_match:1}}}function oe(e){return{arguments:[e]}}function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=k()(e.arguments,1),a=i[0];return{bool:{must_not:ke(a,t,n,r)}}}function se(e,t,n){return{arguments:[De(e),t,ye.literal.buildNode(n)]}}function ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=k()(e.arguments,3),a=i[0],o=i[1],u=i[2],s=K(a,t,null!=r&&r.nested?r.nested.path:void 0),c=t?J(s,t):[];c&&0===c.length&&c.push({name:ke(s),scripted:!1,type:""});var l=c.map((function(e){var t=function(t){var n=X(e);return"wildcard"!==s.type||null==n||!n.nested||r.nested?t:{nested:{path:n.nested.path,query:t,score_mode:"none"}}},i=b()({},o,ke(u));if(e.scripted)return{script:P(e,i)};if("date"===e.type){var a=n.dateFormatTZ?{time_zone:Z(n.dateFormatTZ)}:{};return t({range:b()({},e.name,y()(y()({},i),a))})}return t({range:b()({},e.name,i)})}));return{bool:{should:l,minimum_should_match:1}}}function le(e){return{arguments:[F(e)]}}function de(e,t){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=k()(e.arguments,1),a=i[0],o=y()(y()({},a),{},{value:null!=r&&r.nested?"".concat(r.nested.path,".").concat(a.value):a.value}),u=G(o),s=null==t||null===(n=t.fields)||void 0===n?void 0:n.find((function(e){return e.name===u}));if(null!=s&&s.scripted)throw new Error("Exists query does not support scripted fields");return{exists:{field:u}}}function fe(e,t){return{arguments:["string"==typeof e?De(e):F(e),t]}}function pe(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=k()(e.arguments,2),o=a[0],u=a[1],s=ke(o),c=null!=i&&null!==(n=i.nested)&&void 0!==n&&n.path?"".concat(i.nested.path,".").concat(s):s;return{nested:{path:c,query:ke(u,t,r,y()(y()({},i),{},{nested:{path:c}})),score_mode:"none"}}}var ge={is:a,and:o,or:u,not:s,range:c,exists:l,nested:d};function me(e){var t=ge[e];if(v.a.isUndefined(t))throw new Error('Unknown function "'.concat(e,'"'));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return y()({type:"function",function:e},t.buildNodeParams.apply(t,r))}function be(e,t){if(v.a.isUndefined(ge[e]))throw new Error('Unknown function "'.concat(e,'"'));return{type:"function",function:e,arguments:t}}function _e(e,t,n,r){return ge[e.function].toElasticsearchQuery(e,t,n,r)}var ye={function:f,literal:r,wildcard:i},he=n(36),ve=n.n(he),Ee=n(37),Oe=n.n(Ee),Se=n(38),Te=n.n(Se),Ae=n(39),Ie=n.n(Ae),Le=n(45),Ne=n.n(Le),xe=n(46),Ce=n.n(xe),Pe=n(2),Me=Pe.i18n.translate("esQuery.kql.errors.endOfInputText",{defaultMessage:"end of input"}),Re={fieldName:Pe.i18n.translate("esQuery.kql.errors.fieldNameText",{defaultMessage:"field name"}),value:Pe.i18n.translate("esQuery.kql.errors.valueText",{defaultMessage:"value"}),literal:Pe.i18n.translate("esQuery.kql.errors.literalText",{defaultMessage:"literal"}),whitespace:Pe.i18n.translate("esQuery.kql.errors.whitespaceText",{defaultMessage:"whitespace"})},je=(Error,n(40)),we=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:je.parse;if(void 0===e)throw new Error("expression must be a string, got undefined instead");return n(e,y()(y()({},t),{},{helpers:{nodeTypes:ye}}))},De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return we(e,y()(y()({},t),{},{startRule:"Literal"}),je.parse)},ke=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!t||!t.type||!ye[t.type])return e(ye.function.buildNode("and",[]),n);var a=ye[t.type];return a.toElasticsearchQuery(t,n,r,i)}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));const r=[];function i(e){r.push({checkVisibility:async()=>!0,getIsDisabled:async()=>!1,isBeta:!1,...e})}function a(e){if(e.order<100)throw new Error("layerWizard.order should be greater than or equal to '100'");i(e)}async function o(){const e=r.map((async e=>({...e,isVisible:await e.checkVisibility(),isDisabled:await e.getIsDisabled()})));return(await Promise.all(e)).filter((({isVisible:e})=>e)).sort(((e,t)=>e.order-t.order))}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));const r=[];function i(e){if(r.some((({type:t})=>e.type===t)))throw new Error(`Unable to register source type ${e.type}. ${e.type} has already been registered`);r.push(e)}function a(e){return r.find((t=>t.type===e))}},function(e,t){e.exports=__kbnSharedDeps__.RisonNode},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(0),i=n.n(r);const a="__kbn__feature_id__";let o=0;function u(){const e=o<Number.MAX_SAFE_INTEGER?o:0;return o=e+1,e}function s(e){const t=[];for(let n=0;n<e.features.length;n++){const e=u();t.push(e)}const n=i.a.shuffle(t),r=[];for(let t=0;t<e.features.length;t++){const i=n[t],o=e.features[t];r.push({type:"Feature",geometry:o.geometry,properties:{[a]:null==o.id?i:o.id,...o.properties},id:i})}return{type:"FeatureCollection",features:r}}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t,n){e.exports=n(10)(14)},function(e,t,n){e.exports=n(10)(13)},function(e,t,n){e.exports=n(10)(4)},function(e,t,n){e.exports=n(10)(19)},function(e,t,n){"use strict";function r(e,t,n,i){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,r.prototype),a.expected=t,a.found=n,a.location=i,a.name="SyntaxError",a}function i(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,o=this.location.source+":"+a.line+":"+a.column;if(r){var u=this.location.end,s=i("",a.line.toString().length),c=r[a.line-1],l=a.line===u.line?u.column:c.length+1;t+="\n --\x3e "+o+"\n"+s+" |\n"+a.line+" | "+c+"\n"+s+" | "+i("",a.column-1)+i("",l-a.column,"^")}else t+="\n at "+o}return t},r.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?a(e[0])+"-"+a(e[1]):a(e)}));return"["+(e.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(o);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){var n,i={},a=(t=void 0!==t?t:{}).grammarSource,o={start:he,Literal:Me},u=he,s=":",c="or",l="and",d="not",f='"',p="\\",g="<=",m=">=",b="@kuery-cursor@",_=/^[\\"]/,y=/^[^"]/,h=/^[\\():<>"*{}]/,v=/^[0-9a-f]/i,E=/^[ \t\r\n\xA0]/,O=fe("(",!1),S=fe(")",!1),T=fe(":",!1),A=fe("{",!1),I=fe("}",!1),L=ge("fieldName"),N=ge("value"),x=ge("OR"),C=fe("or",!0),P=ge("AND"),M=fe("and",!0),R=ge("NOT"),j=fe("not",!0),w=ge("literal"),D=fe('"',!1),k=fe("\\",!1),F=pe(["\\",'"'],!1,!1),G=pe(['"'],!0,!1),U={type:"any"},B=fe("*",!1),q=fe("\\t",!1),V=fe("\\r",!1),z=fe("\\n",!1),$=pe(["\\","(",")",":","<",">",'"',"*","{","}"],!1,!1),H=fe("u",!1),Y=pe([["0","9"],["a","f"]],!1,!0),J=fe("<=",!1),W=fe(">=",!1),Q=fe("<",!1),Z=fe(">",!1),X=ge("whitespace"),K=pe([" ","\t","\r","\n"," "],!1,!1),ee=fe("@kuery-cursor@",!1),te=function(e,t){return t},ne=function(e,t){return t},re=function(e){if("cursor"===e.type)return e;!He&&"wildcard"===e.type&&Ye.wildcard.hasLeadingWildcard(e)&&function(e,t){throw t=void 0!==t?t:be(ue,oe),function(e,t){return new r(e,null,null,t)}(e,t)}("Leading wildcards are disabled. See query:allowLeadingWildcards in Advanced Settings.");const t=We(!1);return n=>Je("is",[n,e,t])},ie=function(){return ze},ae=function(t,n,r){const{start:i,end:a}=be(ue,oe);return{type:"cursor",start:i.offset,end:a.offset-n.length,prefix:t.join(""),suffix:r.join(""),text:e.substring(ue,oe).replace(n,"")}},oe=0,ue=0,se=[{line:1,column:1}],ce=0,le=[],de=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');u=o[t.startRule]}function fe(e,t){return{type:"literal",text:e,ignoreCase:t}}function pe(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function ge(e){return{type:"other",description:e}}function me(t){var n,r=se[t];if(r)return r;for(n=t-1;!se[n];)n--;for(r={line:(r=se[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return se[t]=r,r}function be(e,t){var n=me(e),r=me(t);return{source:a,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function _e(e){oe<ce||(oe>ce&&(ce=oe,le=[]),le.push(e))}function ye(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function he(){var e,t,n,r,a,o;for(e=oe,t=[],n=qe();n!==i;)t.push(n),n=qe();return(n=ve())===i&&(n=null),(r=ke())!==i?(ue=e,a=n,e="cursor"===(o=r).type?{...o,suggestionTypes:["conjunction"]}:null!==a?a:Ye.function.buildNode("is","*","*")):(oe=e,e=i),e}function ve(){var e,t,n,r,a;if(e=oe,(t=Ee())!==i){if(n=[],r=oe,xe()!==i&&(a=Ee())!==i?(ue=r,r=te(0,a)):(oe=r,r=i),r!==i)for(;r!==i;)n.push(r),r=oe,xe()!==i&&(a=Ee())!==i?(ue=r,r=te(0,a)):(oe=r,r=i);else n=i;n!==i?(ue=e,e=function(e,t){const n=[e,...t];return ze&&n.find((e=>"cursor"===e.type))||Je("or",n)}(t,n)):(oe=e,e=i)}else oe=e,e=i;return e===i&&(e=Ee()),e}function Ee(){var e,t,n,r,a;if(e=oe,(t=Oe())!==i){if(n=[],r=oe,Ce()!==i&&(a=Oe())!==i?(ue=r,r=te(0,a)):(oe=r,r=i),r!==i)for(;r!==i;)n.push(r),r=oe,Ce()!==i&&(a=Oe())!==i?(ue=r,r=te(0,a)):(oe=r,r=i);else n=i;n!==i?(ue=e,e=function(e,t){const n=[e,...t];return ze&&n.find((e=>"cursor"===e.type))||Je("and",n)}(t,n)):(oe=e,e=i)}else oe=e,e=i;return e===i&&(e=Oe()),e}function Oe(){var e,t,n;return e=oe,Pe()!==i&&(t=Se())!==i?(ue=e,e="cursor"===(n=t).type?n:Je("not",[n])):(oe=e,e=i),e===i&&(e=Se()),e}function Se(){var t,n,r,a,o,u,c,l;if(t=oe,40===e.charCodeAt(oe)?(n="(",oe++):(n=i,0===de&&_e(O)),n!==i){for(r=[],a=qe();a!==i;)r.push(a),a=qe();(a=ve())!==i&&(o=ke())!==i?(41===e.charCodeAt(oe)?(u=")",oe++):(u=i,0===de&&_e(S)),u!==i?(ue=t,c=a,t="cursor"===(l=o).type?{...l,suggestionTypes:["conjunction"]}:c):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i;return t===i&&(t=function(){var t,n,r,a,o,u,c,l,d,f;if(t=oe,(n=Te())!==i){for(r=[],a=qe();a!==i;)r.push(a),a=qe();if(58===e.charCodeAt(oe)?(a=":",oe++):(a=i,0===de&&_e(T)),a!==i){for(o=[],u=qe();u!==i;)o.push(u),u=qe();if(123===e.charCodeAt(oe)?(u="{",oe++):(u=i,0===de&&_e(A)),u!==i){for(c=[],l=qe();l!==i;)c.push(l),l=qe();(l=ve())!==i&&(d=ke())!==i?(125===e.charCodeAt(oe)?(f="}",oe++):(f=i,0===de&&_e(I)),f!==i?(ue=t,t=function(e,t,n){return"cursor"===t.type?{...t,nestedPath:t.nestedPath?`${e.value}.${t.nestedPath}`:e.value}:"cursor"===n.type?{...n,suggestionTypes:["conjunction"]}:Je("nested",[e,t])}(n,l,d)):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i}else oe=t,t=i}else oe=t,t=i;t===i&&(t=function(){var t;(t=function(){var t,n,r,a,o,u;if(t=oe,(n=Te())!==i){for(r=[],a=qe();a!==i;)r.push(a),a=qe();if((a=function(){var t,n;t=oe,e.substr(oe,2)===g?(n=g,oe+=2):(n=i,0===de&&_e(J));n!==i&&(ue=t,n="lte");(t=n)===i&&(t=oe,e.substr(oe,2)===m?(n=m,oe+=2):(n=i,0===de&&_e(W)),n!==i&&(ue=t,n="gte"),(t=n)===i&&(t=oe,60===e.charCodeAt(oe)?(n="<",oe++):(n=i,0===de&&_e(Q)),n!==i&&(ue=t,n="lt"),(t=n)===i&&(t=oe,62===e.charCodeAt(oe)?(n=">",oe++):(n=i,0===de&&_e(Z)),n!==i&&(ue=t,n="gt"),t=n)));return t}())!==i){for(o=[],u=qe();u!==i;)o.push(u),u=qe();(u=Me())!==i?(ue=t,s=n,c=a,t="cursor"===(l=u).type?{...l,suggestionTypes:["conjunction"]}:Je("range",[s,c,l])):(oe=t,t=i)}else oe=t,t=i}else oe=t,t=i;var s,c,l;return t}())===i&&(t=function(){var t,n,r,a,o,u;if(t=oe,(n=Te())!==i){for(r=[],a=qe();a!==i;)r.push(a),a=qe();if(58===e.charCodeAt(oe)?(a=s,oe++):(a=i,0===de&&_e(T)),a!==i){for(o=[],u=qe();u!==i;)o.push(u),u=qe();(u=Ae())!==i?(ue=t,c=n,t="cursor"===(l=u).type?{...l,fieldName:c.value,suggestionTypes:["value","conjunction"]}:l(c)):(oe=t,t=i)}else oe=t,t=i}else oe=t,t=i;var c,l;return t}())===i&&(t=function(){var e,t;e=oe,(t=Ne())!==i&&(ue=e,t=function(e){if("cursor"===e.type){const t=`${e.prefix}${e.suffix}`.trim();return{...e,fieldName:t,suggestionTypes:["field","operator","conjunction"]}}return e(We(null))}(t));return e=t}());return t}());return t}()),t}function Te(){var e;return de++,e=Me(),de--,e===i&&(i,0===de&&_e(L)),e}function Ae(){var t,n,r,a,o,u,s,c;if(t=oe,40===e.charCodeAt(oe)?(n="(",oe++):(n=i,0===de&&_e(O)),n!==i){for(r=[],a=qe();a!==i;)r.push(a),a=qe();(a=function(){var e,t,n,r,a;if(e=oe,(t=Ie())!==i){if(n=[],r=oe,xe()!==i&&(a=Ie())!==i?(ue=r,r=ne(0,a)):(oe=r,r=i),r!==i)for(;r!==i;)n.push(r),r=oe,xe()!==i&&(a=Ie())!==i?(ue=r,r=ne(0,a)):(oe=r,r=i);else n=i;n!==i?(ue=e,e=function(e,t){const n=[e,...t],r=ze&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Je("or",n.map((t=>t(e))))}(t,n)):(oe=e,e=i)}else oe=e,e=i;e===i&&(e=Ie());return e}())!==i&&(o=ke())!==i?(41===e.charCodeAt(oe)?(u=")",oe++):(u=i,0===de&&_e(S)),u!==i?(ue=t,s=a,t="cursor"===(c=o).type?{...c,suggestionTypes:["conjunction"]}:s):(oe=t,t=i)):(oe=t,t=i)}else oe=t,t=i;return t===i&&(t=Ne()),t}function Ie(){var e,t,n,r,a;if(e=oe,(t=Le())!==i){if(n=[],r=oe,Ce()!==i&&(a=Le())!==i?(ue=r,r=ne(0,a)):(oe=r,r=i),r!==i)for(;r!==i;)n.push(r),r=oe,Ce()!==i&&(a=Le())!==i?(ue=r,r=ne(0,a)):(oe=r,r=i);else n=i;n!==i?(ue=e,e=function(e,t){const n=[e,...t],r=ze&&n.find((e=>"cursor"===e.type));return r?{...r,suggestionTypes:["value"]}:e=>Je("and",n.map((t=>t(e))))}(t,n)):(oe=e,e=i)}else oe=e,e=i;return e===i&&(e=Le()),e}function Le(){var e,t,n;return e=oe,Pe()!==i&&(t=Ae())!==i?(ue=e,e="cursor"===(n=t).type?{...list,suggestionTypes:["value"]}:e=>Je("not",[n(e)])):(oe=e,e=i),e===i&&(e=Ae()),e}function Ne(){var e,t;return de++,e=oe,(t=Re())!==i&&(ue=e,t=function(e){if("cursor"===e.type)return e;const t=We(!0);return n=>Je("is",[n,e,t])}(t)),(e=t)===i&&(e=oe,(t=we())!==i&&(ue=e,t=re(t)),e=t),de--,e===i&&(t=i,0===de&&_e(N)),e}function xe(){var t,n,r,a,o;if(de++,t=oe,n=[],(r=qe())!==i)for(;r!==i;)n.push(r),r=qe();else n=i;if(n!==i)if("or"===e.substr(oe,2).toLowerCase()?(r=e.substr(oe,2),oe+=2):(r=i,0===de&&_e(C)),r!==i){if(a=[],(o=qe())!==i)for(;o!==i;)a.push(o),o=qe();else a=i;a!==i?t=n=[n,r,a]:(oe=t,t=i)}else oe=t,t=i;else oe=t,t=i;return de--,t===i&&(n=i,0===de&&_e(x)),t}function Ce(){var t,n,r,a,o;if(de++,t=oe,n=[],(r=qe())!==i)for(;r!==i;)n.push(r),r=qe();else n=i;if(n!==i)if("and"===e.substr(oe,3).toLowerCase()?(r=e.substr(oe,3),oe+=3):(r=i,0===de&&_e(M)),r!==i){if(a=[],(o=qe())!==i)for(;o!==i;)a.push(o),o=qe();else a=i;a!==i?t=n=[n,r,a]:(oe=t,t=i)}else oe=t,t=i;else oe=t,t=i;return de--,t===i&&(n=i,0===de&&_e(P)),t}function Pe(){var t,n,r,a;if(de++,t=oe,"not"===e.substr(oe,3).toLowerCase()?(n=e.substr(oe,3),oe+=3):(n=i,0===de&&_e(j)),n!==i){if(r=[],(a=qe())!==i)for(;a!==i;)r.push(a),a=qe();else r=i;r!==i?t=n=[n,r]:(oe=t,t=i)}else oe=t,t=i;return de--,t===i&&(n=i,0===de&&_e(R)),t}function Me(){var e;return de++,(e=Re())===i&&(e=we()),de--,e===i&&(i,0===de&&_e(w)),e}function Re(){var t,n,r,a,o,u,s;if(t=oe,ue=oe,(n=(n=ie())?void 0:i)!==i)if(34===e.charCodeAt(oe)?(r=f,oe++):(r=i,0===de&&_e(D)),r!==i){for(a=[],o=je();o!==i;)a.push(o),o=je();if((o=Ve())!==i){for(u=[],s=je();s!==i;)u.push(s),s=je();34===e.charCodeAt(oe)?(s=f,oe++):(s=i,0===de&&_e(D)),s!==i?(ue=t,t=ae(a,o,u)):(oe=t,t=i)}else oe=t,t=i}else oe=t,t=i;else oe=t,t=i;if(t===i)if(t=oe,34===e.charCodeAt(oe)?(n=f,oe++):(n=i,0===de&&_e(D)),n!==i){for(r=[],a=je();a!==i;)r.push(a),a=je();34===e.charCodeAt(oe)?(a=f,oe++):(a=i,0===de&&_e(D)),a!==i?(ue=t,t=We(r.join(""))):(oe=t,t=i)}else oe=t,t=i;return t}function je(){var t,n,r;return(t=Fe())===i&&(t=Ue())===i&&(t=oe,92===e.charCodeAt(oe)?(n=p,oe++):(n=i,0===de&&_e(k)),n!==i?(_.test(e.charAt(oe))?(r=e.charAt(oe),oe++):(r=i,0===de&&_e(F)),r!==i?(ue=t,t=r):(oe=t,t=i)):(oe=t,t=i),t===i&&(t=oe,n=oe,de++,r=Ve(),de--,r===i?n=void 0:(oe=n,n=i),n!==i?(y.test(e.charAt(oe))?(r=e.charAt(oe),oe++):(r=i,0===de&&_e(G)),r!==i?(ue=t,t=r):(oe=t,t=i)):(oe=t,t=i))),t}function we(){var e,t,n,r,a,o;if(e=oe,ue=oe,(t=(t=ie())?void 0:i)!==i){for(n=[],r=De();r!==i;)n.push(r),r=De();if((r=Ve())!==i){for(a=[],o=De();o!==i;)a.push(o),o=De();ue=e,e=ae(n,r,a)}else oe=e,e=i}else oe=e,e=i;if(e===i){if(e=oe,t=[],(n=De())!==i)for(;n!==i;)t.push(n),n=De();else t=i;t!==i&&(ue=e,t=function(e){const t=e.join("").trim();return"null"===t?We(null):"true"===t?We(!0):"false"===t?We(!1):e.includes(Ze)?Qe(t):We(t)}(t)),e=t}return e}function De(){var t,n,r,a,o;return(t=Fe())===i&&(t=function(){var t,n,r;t=oe,92===e.charCodeAt(oe)?(n=p,oe++):(n=i,0===de&&_e(k));n!==i&&(r=Ge())!==i?(ue=t,t=r):(oe=t,t=i);return t}())===i&&(t=Ue())===i&&(t=function(){var t,n,r;t=oe,92===e.charCodeAt(oe)?(n=p,oe++):(n=i,0===de&&_e(k));n!==i?(e.substr(oe,2).toLowerCase()===c?(r=e.substr(oe,2),oe+=2):(r=i,0===de&&_e(C)),r===i&&(e.substr(oe,3).toLowerCase()===l?(r=e.substr(oe,3),oe+=3):(r=i,0===de&&_e(M)),r===i&&(e.substr(oe,3).toLowerCase()===d?(r=e.substr(oe,3),oe+=3):(r=i,0===de&&_e(j)))),r!==i?(ue=t,t=r):(oe=t,t=i)):(oe=t,t=i);return t}())===i&&(t=function(){var t,n;t=oe,42===e.charCodeAt(oe)?(n="*",oe++):(n=i,0===de&&_e(B));n!==i&&(ue=t,n=Ze);return t=n}())===i&&(t=oe,n=oe,de++,r=Ge(),de--,r===i?n=void 0:(oe=n,n=i),n!==i?(r=oe,de++,a=function(){var e;(e=xe())===i&&(e=Ce())===i&&(e=Pe());return e}(),de--,a===i?r=void 0:(oe=r,r=i),r!==i?(a=oe,de++,o=Ve(),de--,o===i?a=void 0:(oe=a,a=i),a!==i?(e.length>oe?(o=e.charAt(oe),oe++):(o=i,0===de&&_e(U)),o!==i?(ue=t,t=o):(oe=t,t=i)):(oe=t,t=i)):(oe=t,t=i)):(oe=t,t=i)),t}function ke(){var e,t,n,r,a,o;if(e=oe,ue=oe,(t=(t=ie())?void 0:i)!==i){for(n=[],r=qe();r!==i;)n.push(r),r=qe();if((r=Ve())!==i){for(a=[],o=qe();o!==i;)a.push(o),o=qe();ue=e,e=ae(n,r,a)}else oe=e,e=i}else oe=e,e=i;if(e===i)for(e=[],t=qe();t!==i;)e.push(t),t=qe();return e}function Fe(){var t,n;return t=oe,"\\t"===e.substr(oe,2)?(n="\\t",oe+=2):(n=i,0===de&&_e(q)),n!==i&&(ue=t,n="\t"),(t=n)===i&&(t=oe,"\\r"===e.substr(oe,2)?(n="\\r",oe+=2):(n=i,0===de&&_e(V)),n!==i&&(ue=t,n="\r"),(t=n)===i&&(t=oe,"\\n"===e.substr(oe,2)?(n="\\n",oe+=2):(n=i,0===de&&_e(z)),n!==i&&(ue=t,n="\n"),t=n)),t}function Ge(){var t;return h.test(e.charAt(oe))?(t=e.charAt(oe),oe++):(t=i,0===de&&_e($)),t}function Ue(){var t,n,r;return t=oe,92===e.charCodeAt(oe)?(n=p,oe++):(n=i,0===de&&_e(k)),n!==i&&(r=function(){var t,n,r,a,o,u,s,c;t=oe,117===e.charCodeAt(oe)?(n="u",oe++):(n=i,0===de&&_e(H));n!==i?(r=oe,a=oe,(o=Be())!==i&&(u=Be())!==i&&(s=Be())!==i&&(c=Be())!==i?a=o=[o,u,s,c]:(oe=a,a=i),(r=a!==i?e.substring(r,oe):a)!==i?(ue=t,l=r,t=String.fromCharCode(parseInt(l,16))):(oe=t,t=i)):(oe=t,t=i);var l;return t}())!==i?(ue=t,t=r):(oe=t,t=i),t}function Be(){var t;return v.test(e.charAt(oe))?(t=e.charAt(oe),oe++):(t=i,0===de&&_e(Y)),t}function qe(){var t;return de++,E.test(e.charAt(oe))?(t=e.charAt(oe),oe++):(t=i,0===de&&_e(K)),de--,t===i&&(i,0===de&&_e(X)),t}function Ve(){var t,n;return t=oe,ue=oe,(ie()?void 0:i)!==i?(e.substr(oe,14)===b?(n=b,oe+=14):(n=i,0===de&&_e(ee)),n!==i?(ue=t,t=$e):(oe=t,t=i)):(oe=t,t=i),t}const{parseCursor:ze,cursorSymbol:$e,allowLeadingWildcards:He=!0,helpers:{nodeTypes:Ye}}=t,Je=Ye.function.buildNodeWithArgumentNodes,We=Ye.literal.buildNode,Qe=Ye.wildcard.buildNode,{wildcardSymbol:Ze}=Ye.wildcard;if((n=u())!==i&&oe===e.length)return n;throw n!==i&&oe<e.length&&_e({type:"end"}),ye(le,ce<e.length?e.charAt(ce):null,ce<e.length?be(ce,ce+1):be(ce,ce))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(22);function i(e,t){if("string"==typeof e)return e;const n=t.split(".");return 2===n.length?n[1]:void 0}function a(e){var t,n,a,o,u,s;const c={label:e.title?e.title:r.b,emsLayerId:e.params.selectedLayer.isEMS?i(e.params.selectedLayer.id,e.params.selectedLayer.layerId):void 0,leftFieldName:e.params.selectedLayer.isEMS?e.params.selectedJoinField.name:void 0,colorSchema:e.params.colorSchema,indexPatternId:null===(t=e.data.indexPattern)||void 0===t?void 0:t.id,indexPatternTitle:null===(n=e.data.indexPattern)||void 0===n?void 0:n.title,metricAgg:"count"},l=null===(a=e.data)||void 0===a||null===(o=a.aggs)||void 0===o?void 0:o.byType("buckets");var d;null!=l&&l.length&&"terms"===l[0].type.dslName&&(c.termsFieldName=null===(d=l[0].getField())||void 0===d?void 0:d.name,c.termsSize=l[0].getParam("size"));const f=null===(u=e.data)||void 0===u||null===(s=u.aggs)||void 0===s?void 0:s.byType("metrics");var p;null!=f&&f.length&&(c.metricAgg=f[0].type.dslName,c.metricFieldName=null===(p=f[0].getField())||void 0===p?void 0:p.name);return c}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(30),i=n(23);function a(e){var t,n,a,o,u;const s={label:e.title?e.title:i.b,mapType:e.params.mapType,colorSchema:e.params.colorSchema,indexPatternId:null===(t=e.data.indexPattern)||void 0===t?void 0:t.id,metricAgg:"count"},c=null===(n=e.data)||void 0===n||null===(a=n.aggs)||void 0===a?void 0:a.byType("buckets");var l;if(null!=c&&c.length&&"geohash_grid"===c[0].type.dslName)s.geoFieldName=null===(l=c[0].getField())||void 0===l?void 0:l.name;else if(e.data.indexPattern){const t=e.data.indexPattern.fields.find((e=>!r.indexPatterns.isNestedField(e)&&e.aggregatable&&"geo_point"===e.type));t&&(s.geoFieldName=t.name)}const d=null===(o=e.data)||void 0===o||null===(u=o.aggs)||void 0===u?void 0:u.byType("metrics");var f;null!=d&&d.length&&(s.metricAgg=d[0].type.dslName,s.metricFieldName=null===(f=d[0].getField())||void 0===f?void 0:f.name);return s}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b}));var r=n(29)},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/home/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){e.exports=n(10)(2453)},function(e,t,n){e.exports=n(10)(2460)},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){n(50),__kbnBundles__.define("plugin/maps/public",n,52),__kbnBundles__.define("plugin/maps/common",n,51)},function(e,t,n){n.p=window.__kbnPublicPath__.maps},function(e,t,n){"use strict";n.r(t);var r=n(1);n.d(t,"AGG_TYPE",(function(){return r.b})),n.d(t,"COLOR_MAP_TYPE",(function(){return r.i})),n.d(t,"ES_GEO_FIELD_TYPE",(function(){return r.w})),n.d(t,"FIELD_ORIGIN",(function(){return r.A})),n.d(t,"INITIAL_LOCATION",(function(){return r.N})),n.d(t,"LABEL_BORDER_SIZES",(function(){return r.Q})),n.d(t,"LAYER_TYPE",(function(){return r.T})),n.d(t,"MAP_SAVED_OBJECT_TYPE",(function(){return r.X})),n.d(t,"SCALING_TYPES",(function(){return r.jb})),n.d(t,"SOURCE_TYPES",(function(){return r.ob})),n.d(t,"STYLE_TYPE",(function(){return r.qb})),n.d(t,"SYMBOLIZE_AS_TYPES",(function(){return r.rb})),n.d(t,"LAYER_WIZARD_CATEGORY",(function(){return r.U})),n.d(t,"MAX_ZOOM",(function(){return r.Y})),n.d(t,"MIN_ZOOM",(function(){return r.cb})),n.d(t,"VECTOR_SHAPE_TYPE",(function(){return r.tb}))},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return X})),n.d(t,"MAP_SAVED_OBJECT_TYPE",(function(){return g.X})),n.d(t,"GEOJSON_FEATURE_ID_PROPERTY_NAME",(function(){return Z.a}));var r=n(4),i=n.n(r),a=n(7),o=n.n(a),u=n(34),s=n(2),c=n(12),l=n(6);const d=()=>Object(a.lazy)((()=>n.e(6).then(n.bind(null,347)))),f={title:s.i18n.translate("xpack.maps.inspector.mapDetailsViewTitle",{defaultMessage:"Map details"}),order:30,help:s.i18n.translate("xpack.maps.inspector.mapDetailsViewHelpText",{defaultMessage:"View the map state"}),shouldShow:e=>Boolean(e.map),component:e=>Object(l.jsx)(c.a,{getLazyComponent:d,lazyComponentProps:e})};var p=n(9),g=n(1),m=n(16),b=n(44);const _={id:g.e,title:Object(m.a)(),subtitle:s.i18n.translate("xpack.maps.featureCatalogue.mapsSubtitle",{defaultMessage:"Plot geographic data."}),description:s.i18n.translate("xpack.maps.feature.appDescription",{defaultMessage:"Explore geospatial data from Elasticsearch and the Elastic Maps Service."}),icon:g.c,path:"/app/maps",showOnHomePage:!1,category:b.FeatureCatalogueCategory.DATA,solutionId:"kibana",order:400};var y=n(13),h=n(25),v=n.n(h),E=n(32),O=n.n(E),S=n(27),T=n(28),A=n(8);const I="MAPS_APP_LOCATOR";class locators_MapsAppLocatorDefinition{constructor(e){i()(this,"id",I),i()(this,"getLocation",(async e=>{const{mapId:t,filters:n,query:r,refreshInterval:i,timeRange:a,initialLayers:o,hash:u}=e,s=null!=u?u:this.deps.useHash,c={},l={};r&&(c.query=r),n&&n.length&&(c.filters=null==n?void 0:n.filter((e=>!Object(S.f)(e)))),a&&(l.time=a),n&&n.length&&(l.filters=null==n?void 0:n.filter((e=>Object(S.f)(e)))),i&&(l.refreshInterval=i);let d=`/map#/${t||""}`;if(d=Object(T.setStateToKbnUrl)("_g",l,{useHash:s},d),d=Object(T.setStateToKbnUrl)("_a",c,{useHash:s},d),o&&o.length){const e=O.a.encode_array(o);d=`${d}&${g.M}=${encodeURIComponent(e)}`}return{app:g.e,path:d,state:{}}})),this.deps=e}}class locators_MapsAppTileMapLocatorDefinition{constructor(e){i()(this,"id","MAPS_APP_TILE_MAP_LOCATOR"),i()(this,"getLocation",(async e=>{const{label:t,mapType:n,colorSchema:r,indexPatternId:i,geoFieldName:a,metricAgg:o,metricFieldName:u,filters:s,query:c,timeRange:l,hash:d=!0}=e,f=[],p=(await Object(A.a)()).createTileMapLayerDescriptor({label:t,mapType:n,colorSchema:r,indexPatternId:i,geoFieldName:a,metricAgg:o,metricFieldName:u});return p&&f.push(p),await this.deps.locator.getLocation({initialLayers:f,filters:s,query:c,timeRange:l,hash:d})})),this.deps=e}}class locators_MapsAppRegionMapLocatorDefinition{constructor(e){i()(this,"id","MAPS_APP_REGION_MAP_LOCATOR"),i()(this,"getLocation",(async e=>{const{label:t,emsLayerId:n,leftFieldName:r,termsFieldName:i,termsSize:a,colorSchema:o,indexPatternId:u,indexPatternTitle:s,metricAgg:c,metricFieldName:l,filters:d,query:f,timeRange:p,hash:g=!0}=e,m=[],b=(await Object(A.a)()).createRegionMapLayerDescriptor({label:t,emsLayerId:n,leftFieldName:r,termsFieldName:i,termsSize:a,colorSchema:o,indexPatternId:u,indexPatternTitle:s,metricAgg:c,metricFieldName:l});return b&&m.push(b),await this.deps.locator.getLocation({initialLayers:m,filters:d,query:f,timeRange:p,hash:g})})),this.deps=e}}const L=Object(y.createAction)({id:y.ACTION_VISUALIZE_GEO_FIELD,type:y.ACTION_VISUALIZE_GEO_FIELD,getDisplayName:()=>s.i18n.translate("xpack.maps.discover.visualizeFieldLabel",{defaultMessage:"Visualize in Maps"}),isCompatible:async()=>!!Object(p.Q)().show,getHref:async e=>{const{app:t,path:n}=await N(e);return Object(p.c)().application.getUrlForApp(t,{path:n,absolute:!1})},execute:async e=>{const{app:t,path:n,state:r}=await N(e);Object(p.c)().application.navigateToApp(t,{path:n,state:r})}}),N=async e=>{var t;const n=await Object(p.r)().get(e.indexPatternId),r=(null==e||null===(t=e.contextualFields)||void 0===t?void 0:t.length)&&"_source"!==(null==e?void 0:e.contextualFields[0]),i=[{id:v()(),visible:!0,type:g.T.MVT_VECTOR,sourceDescriptor:{id:v()(),type:g.ob.ES_SEARCH,tooltipProperties:r?e.contextualFields:[],label:n.title,indexPatternId:e.indexPatternId,geoField:e.fieldName,scalingType:g.jb.MVT}}],a=Object(p.H)().url.locators.get(I);return await a.getLocation({filters:Object(p.g)().query.filterManager.getFilters(),query:Object(p.g)().query.queryString.getQuery(),initialLayers:i,timeRange:Object(p.g)().query.timefilter.timefilter.getTime()})};var x=n(24);const C="FILTER_BY_MAP_EXTENT",P=Object(y.createAction)({id:C,type:C,order:20,getDisplayName:({embeddable:e})=>e.getInput().filterByMapExtent?s.i18n.translate("xpack.maps.filterByMapExtentMenuItem.disableDisplayName",{defaultMessage:"Disable filter by map extent"}):s.i18n.translate("xpack.maps.filterByMapExtentMenuItem.enableDisplayName",{defaultMessage:"Enable filter by map extent"}),getIconType:()=>"filter",isCompatible:async({embeddable:e})=>e.type===g.X&&e.getInput().viewMode===x.ViewMode.EDIT,execute:async({embeddable:e})=>{e.updateInput({filterByMapExtent:!e.getInput().filterByMapExtent})}});var M=n(19);const R=e=>{const t=e;if(!("attributes"in t)||void 0===t.attributes)return{state:e,references:[]};const{attributes:n,references:r}=Object(M.a)({attributes:t.attributes});return{state:{...e,attributes:n},references:r}},j=(e,t)=>{const n=e;if(!("attributes"in n)||void 0===n.attributes)return n;try{const{attributes:e}=Object(M.a)({attributes:n.attributes}),{attributes:r}=Object(M.b)({attributes:e,references:t});return{...n,attributes:r}}catch(e){return n}};class map_embeddable_factory_MapEmbeddableFactory{constructor(){i()(this,"type",g.X),i()(this,"savedObjectMetaData",{name:s.i18n.translate("xpack.maps.mapSavedObjectLabel",{defaultMessage:"Map"}),type:g.X,getIconForSavedObject:()=>g.c}),i()(this,"createFromSavedObject",(async(e,t,n)=>(t.savedObjectId||(t.savedObjectId=e),this.create(t,n)))),i()(this,"create",(async(e,t)=>{const{MapEmbeddable:n}=await Object(A.a)();return new n({editable:await this.isEditable()},e,t)})),i()(this,"inject",j),i()(this,"extract",R)}async isEditable(){const{getMapsCapabilities:e}=await Object(A.a)();return e().save}canCreateNew(){return!1}getDisplayName(){return Object(m.g)()}}const w={createSecurityLayerDescriptors:async(e,t)=>(await Object(A.a)()).createSecurityLayerDescriptors(e,t),createBasemapLayerDescriptor:async()=>(await Object(A.a)()).createBasemapLayerDescriptor(),createESSearchSourceLayerDescriptor:async e=>(await Object(A.a)()).createESSearchSourceLayerDescriptor(e)};async function D(e){const t=await Object(A.a)();return await t.suggestEMSTermJoinConfig(e)}var k=n(43),F=n(31),G=n(26),U=n(22),B=n(15);const q=()=>({name:"regionmap",type:"render",help:s.i18n.translate("xpack.maps.regionMap.function.help",{defaultMessage:"Regionmap visualization"}),args:{visConfig:{types:["string"],default:'"{}"',help:""}},fn:async(e,t)=>({type:"render",as:B.a,value:{visType:B.b,visConfig:JSON.parse(t.visConfig),filters:e.filters,query:Array.isArray(e.query)?e.query[0]:e.query,timeRange:e.timeRange}})});var V=n(17);const z=()=>Object(a.lazy)((()=>n.e(2).then(n.bind(null,344)))),$={name:B.a,reuseDomNode:!0,render:async(e,{filters:t,query:n,timeRange:r,visConfig:i},a)=>{a.onDestroy((()=>{Object(V.unmountComponentAtNode)(e)}));const o={onInitialRenderComplete:()=>{a.done()},filters:t,query:n,timeRange:r,visConfig:i};Object(V.render)(Object(l.jsx)(c.a,{getLazyComponent:z,lazyComponentProps:o}),e)}};var H=n(23),Y=n(14);const J=()=>({name:"tilemap",type:"render",help:s.i18n.translate("xpack.maps.tileMap.function.help",{defaultMessage:"Tilemap visualization"}),args:{visConfig:{types:["string"],default:'"{}"',help:""}},fn:async(e,t)=>({type:"render",as:Y.b,value:{visType:Y.c,visConfig:JSON.parse(t.visConfig),filters:e.filters,query:Array.isArray(e.query)?e.query[0]:e.query,timeRange:e.timeRange}})}),W=()=>Object(a.lazy)((()=>n.e(3).then(n.bind(null,346)))),Q={name:Y.b,reuseDomNode:!0,render:async(e,{filters:t,query:n,timeRange:r,visConfig:i},a)=>{a.onDestroy((()=>{Object(V.unmountComponentAtNode)(e)}));const o={onInitialRenderComplete:()=>{a.done()},filters:t,query:n,timeRange:r,visConfig:i};Object(V.render)(Object(l.jsx)(c.a,{getLazyComponent:W,lazyComponentProps:o}),e)}};class plugin_MapsPlugin{constructor(e){i()(this,"_initializerContext",void 0),this._initializerContext=e}setup(e,t){Object(G.e)(t.licensing);const n=this._initializerContext.config.get();Object(p.R)(n);const r=t.share.url.locators.create(new locators_MapsAppLocatorDefinition({useHash:e.uiSettings.get("state:storeInSessionStorage")}));return t.share.url.locators.create(new locators_MapsAppTileMapLocatorDefinition({locator:r})),t.share.url.locators.create(new locators_MapsAppRegionMapLocatorDefinition({locator:r})),t.inspector.registerView(f),t.home&&t.home.featureCatalogue.register(_),t.visualizations.registerAlias(function(e){e.hideTypes(["region_map","tile_map"]);const t=s.i18n.translate("xpack.maps.visTypeAlias.description",{defaultMessage:"Create and style maps with multiple layers and indices."});return{aliasApp:g.e,aliasPath:`/${g.W}`,name:g.e,title:g.f,description:t,icon:g.c,stage:"production",appExtensions:{visualizations:{docTypes:[g.X],searchFields:["title^3"],toListItem(e){const{id:t,type:n,attributes:r}=e,{title:i,description:a}=r;return{id:t,title:i,description:a,editUrl:Object(g.xb)(t),editApp:g.e,icon:g.c,stage:"production",savedObjectType:n,typeTitle:g.f}}}}}}(t.visualizations)),t.embeddable.registerEmbeddableFactory(g.X,new map_embeddable_factory_MapEmbeddableFactory),e.application.register({id:g.e,title:Object(m.a)(),order:4e3,icon:`plugins/${g.e}/icon.svg`,euiIconType:g.d,category:u.DEFAULT_APP_CATEGORIES.kibana,async mount(e){var n,r;const i=null!==(n=null===(r=t.usageCollection)||void 0===r?void 0:r.components.ApplicationUsageTrackingProvider)&&void 0!==n?n:o.a.Fragment,{renderApp:a}=await Object(A.a)();return a(e,i)}}),t.expressions.registerFunction(q),t.expressions.registerRenderer($),t.visualizations.createBaseVisualization(U.a),t.expressions.registerFunction(J),t.expressions.registerRenderer(Q),t.visualizations.createBaseVisualization(H.a),{registerLayerWizard:k.b,registerSource:F.b}}start(e,t){return Object(G.f)(t.licensing),Object(p.S)(e,t),e.application.capabilities.maps.show&&t.uiActions.addTriggerAction(y.VISUALIZE_GEO_FIELD_TRIGGER,L),t.uiActions.addTriggerAction(x.CONTEXT_MENU_TRIGGER,P),e.application.capabilities.maps.save||t.visualizations.unRegisterAlias(g.e),{createLayerDescriptors:w,suggestEMSTermJoinConfig:D}}}var Z=n(33);const X=e=>new plugin_MapsPlugin(e)},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibServices},function(e,t){e.exports=__kbnSharedDeps__.KbnStd},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/inspector/common/adapters/request");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/usageCollection/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}]);