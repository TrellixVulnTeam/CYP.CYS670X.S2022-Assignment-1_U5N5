/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.infra_bundle_jsonpfunction=window.infra_bundle_jsonpfunction||[]).push([[6],{113:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var s=a(2),n=a.n(s),i=a(13),l=a(150),r=a(1),o=a(17),c=a(120);const u={name:r.i18n.translate("xpack.infra.waffle.sortNameLabel",{defaultMessage:"Name"}),value:r.i18n.translate("xpack.infra.waffle.sort.valueLabel",{defaultMessage:"Metric value"})},d=({sort:e,onChange:t})=>{const[a,l]=Object(s.useState)(!1),o=Object(s.useCallback)((()=>{l(!0)}),[l]),d=Object(s.useCallback)((()=>{l(!1)}),[l]),f=u[e.by],p=n.a.createElement(c.a,{label:r.i18n.translate("xpack.infra.waffle.sortLabel",{defaultMessage:"Sort by"}),onClick:o,"data-test-subj":"waffleSortByDropdown"},f),g=Object(s.useCallback)((()=>{t({...e,by:"name"}),d()}),[d,t,e]),b=Object(s.useCallback)((()=>{t({...e,by:"value"}),d()}),[d,t,e]),y=Object(s.useCallback)((()=>{t({...e,direction:"asc"===e.direction?"desc":"asc"}),d()}),[d,e,t]),x=Object(s.useMemo)((()=>[{id:0,title:"",items:[{name:u.name,icon:"name"===e.by?"check":"empty",onClick:g,"data-test-subj":"waffleSortByName"},{name:u.value,icon:"value"===e.by?"check":"empty",onClick:b,"data-test-subj":"waffleSortByValue"}]}]),[e.by,g,b]);return n.a.createElement(i.EuiPopover,{isOpen:a,id:"sortPopover",button:p,anchorPosition:"downLeft",panelPaddingSize:"none",closePopover:d},n.a.createElement(i.EuiContextMenu,{initialPanelId:0,panels:x}),n.a.createElement(m,null,n.a.createElement(i.EuiSwitch,{compressed:!0,label:r.i18n.translate("xpack.infra.waffle.sortDirectionLabel",{defaultMessage:"Reverse direction"}),checked:"desc"===e.direction,onChange:y,"data-test-subj":"waffleSortByDirection"})))},m=Object(o.withTheme)((({children:e,theme:t})=>n.a.createElement("div",{style:{padding:null==t?void 0:t.eui.paddingSizes.m,borderTop:`1px solid ${null==t?void 0:t.eui.euiBorderColor}`}},e)));var f=a(119),p=a(92),g=a(41),b=a.n(g),y=a(18);const x={avg:r.i18n.translate("xpack.infra.waffle.customMetrics.aggregationLables.avg",{defaultMessage:"Average"}),max:r.i18n.translate("xpack.infra.waffle.customMetrics.aggregationLables.max",{defaultMessage:"Max"}),min:r.i18n.translate("xpack.infra.waffle.customMetrics.aggregationLables.min",{defaultMessage:"Min"}),rate:r.i18n.translate("xpack.infra.waffle.customMetrics.aggregationLables.rate",{defaultMessage:"Rate"})},h=Object(o.withTheme)((({theme:e,onCancel:t,fields:a,onChange:l,metric:o})=>{const[c,u]=Object(s.useState)(o?o.label:void 0),[d,m]=Object(s.useState)(o?o.aggregation:"avg"),[f,g]=Object(s.useState)(o?o.field:void 0),h=Object(s.useCallback)((()=>{if(o&&d&&f)l({...o,label:c,aggregation:d,field:f});else if(d&&f){const e={type:"custom",id:b.a.v1(),label:c,aggregation:d,field:f};l(e)}}),[o,d,f,l,c]),O=Object(s.useCallback)((e=>{u(e.target.value)}),[u]),v=Object(s.useCallback)((e=>{g(e[0].label)}),[g]),k=Object(s.useCallback)((e=>{const t=e.target.value,a=p.c.is(t)?t:"avg";m(a)}),[m]),C=a.filter((e=>e.aggregatable&&"number"===e.type&&!(f&&f===e.name))).map((e=>({label:e.name}))),M=p.b.map((e=>({text:x[e],value:e}))),E=!f||!d,w=o?r.i18n.translate("xpack.infra.waffle.customMetricPanelLabel.edit",{defaultMessage:"Edit custom metric"}):r.i18n.translate("xpack.infra.waffle.customMetricPanelLabel.add",{defaultMessage:"Add custom metric"}),j=o?r.i18n.translate("xpack.infra.waffle.customMetricPanelLabel.editAriaLabel",{defaultMessage:"Back to custom metrics edit mode"}):r.i18n.translate("xpack.infra.waffle.customMetricPanelLabel.addAriaLabel",{defaultMessage:"Back to metric picker"});return n.a.createElement("div",{style:{width:685}},n.a.createElement(i.EuiForm,null,n.a.createElement(i.EuiPopoverTitle,null,n.a.createElement(i.EuiButtonEmpty,{iconType:"arrowLeft",onClick:t,color:"text",size:"xs",flush:"left",style:{fontWeight:700,textTransform:"uppercase"},"aria-label":j},w)),n.a.createElement("div",{style:{padding:null==e?void 0:e.eui.paddingSizes.m,borderBottom:`${null==e?void 0:e.eui.euiBorderWidthThin} solid ${null==e?void 0:e.eui.euiBorderColor}`}},n.a.createElement(i.EuiFormRow,{label:r.i18n.translate("xpack.infra.waffle.customMetrics.metricLabel",{defaultMessage:"Metric"}),display:"rowCompressed",fullWidth:!0},n.a.createElement(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(i.EuiSelect,{onChange:k,value:d,options:M,fullWidth:!0})),n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(i.EuiText,{color:"subdued"},n.a.createElement("span",null,"of"))),n.a.createElement(i.EuiFlexItem,null,n.a.createElement(i.EuiComboBox,{fullWidth:!0,placeholder:r.i18n.translate("xpack.infra.waffle.customMetrics.fieldPlaceholder",{defaultMessage:"Select a field"}),singleSelection:{asPlainText:!0},selectedOptions:f?[{label:f}]:[],options:C,onChange:v,isClearable:!1})))),n.a.createElement(i.EuiFormRow,{label:r.i18n.translate("xpack.infra.waffle.customMetrics.labelLabel",{defaultMessage:"Label (optional)"}),display:"rowCompressed",fullWidth:!0},n.a.createElement(i.EuiFieldText,{name:"label",placeholder:r.i18n.translate("xpack.infra.waffle.customMetrics.labelPlaceholder",{defaultMessage:'Choose a name to appear in the "Metric" dropdown'}),value:c,fullWidth:!0,onChange:O}))),n.a.createElement("div",{style:{padding:null==e?void 0:e.eui.paddingSizes.m,textAlign:"right"}},n.a.createElement(i.EuiButtonEmpty,{onClick:t,size:"s",style:{paddingRight:null==e?void 0:e.eui.paddingSizes.xl}},n.a.createElement(y.FormattedMessage,{id:"xpack.infra.waffle.customMetrics.cancelLabel",defaultMessage:"Cancel"})),n.a.createElement(i.EuiButton,{type:"submit",size:"s",fill:!0,onClick:h,disabled:E},n.a.createElement(y.FormattedMessage,{id:"xpack.infra.waffle.customMetrics.submitLabel",defaultMessage:"Save"})))))}));var O=a(89);const v=({onClose:e,onChange:t,metric:a,options:l,customMetrics:r})=>{const o=p.d.is(a)&&a.id?a.id:a.type,c=Object(s.useCallback)((a=>{if(O.f.is(a))t({type:a});else{const e=r.find((e=>e.id===a));e&&t(e)}e()}),[r,t,e]),u=[{id:0,title:"",items:[...l.map((e=>{const t=e.value===o?"check":"empty";return{name:e.text,onClick:()=>c(e.value),icon:t}})),...r.map((e=>{const t=e.id===o?"check":"empty";return{name:Object(f.a)(e),onClick:()=>c(e.id),icon:t}}))]}];return n.a.createElement(i.EuiContextMenu,{initialPanelId:0,panels:u})},k=Object(o.withTheme)((({onSave:e,onEditCancel:t,onEdit:a,onAdd:s,mode:l,customMetrics:o,theme:c})=>["editMetric","addMetric"].includes(l)?null:n.a.createElement("div",{style:{borderTop:`${null==c?void 0:c.eui.euiBorderWidthThin} solid ${null==c?void 0:c.eui.euiBorderColor}`,padding:12}},n.a.createElement(i.EuiFlexGroup,{justifyContent:"spaceBetween"},"edit"===l?n.a.createElement(n.a.Fragment,null,n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(i.EuiButtonEmpty,{size:"s",flush:"left",onClick:t,"aria-label":r.i18n.translate("xpack.infra.waffle.customMetrics.modeSwitcher.cancelAriaLabel",{defaultMessage:"Cancel edit mode"})},n.a.createElement(y.FormattedMessage,{id:"xpack.infra.waffle.customMetrics.modeSwitcher.cancel",defaultMessage:"Cancel"}))),n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(i.EuiButton,{onClick:e,size:"s",fill:!0,"aria-label":r.i18n.translate("xpack.infra.waffle.customMetrics.modeSwitcher.saveButtonAriaLabel",{defaultMessage:"Save changes to custom metrics"})},n.a.createElement(y.FormattedMessage,{id:"xpack.infra.waffle.customMetrics.modeSwitcher.saveButton",defaultMessage:"Save"})))):n.a.createElement(n.a.Fragment,null,n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(i.EuiButtonEmpty,{size:"s",flush:"left",onClick:a,disabled:0===o.length,"aria-label":r.i18n.translate("xpack.infra.waffle.customMetrics.modeSwitcher.editAriaLabel",{defaultMessage:"Edit custom metrics"})},n.a.createElement(y.FormattedMessage,{id:"xpack.infra.waffle.customMetrics.modeSwitcher.edit",defaultMessage:"Edit"}))),n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(i.EuiButtonEmpty,{onClick:s,size:"s",flush:"right","aria-label":r.i18n.translate("xpack.infra.waffle.customMetrics.modeSwitcher.addMetricAriaLabel",{defaultMessage:"Add custom metric"})},n.a.createElement(y.FormattedMessage,{id:"xpack.infra.waffle.customMetrics.modeSwitcher.addMetric",defaultMessage:"Add metric"})))))))),C=Object(o.withTheme)((({theme:e,customMetrics:t,options:a,onEdit:s,onDelete:l})=>n.a.createElement("div",{style:{width:256}},a.map((t=>n.a.createElement("div",{key:t.value,style:{padding:"14px 14px 13px 36px"}},n.a.createElement("span",{style:{color:null==e?void 0:e.eui.euiButtonColorDisabled}},t.text)))),t.map((e=>n.a.createElement(i.EuiFlexGroup,{key:e.id,alignItems:"center",gutterSize:"none",style:{padding:"10px 0px 9px"}},n.a.createElement(i.EuiFlexItem,{grow:!1,style:{width:36}},n.a.createElement(i.EuiButtonIcon,{iconType:"pencil",onClick:()=>s(e),"aria-label":r.i18n.translate("xpack.infra.waffle.customMetrics.editMode.editButtonAriaLabel",{defaultMessage:"Edit custom metric for {name}",values:{name:Object(f.a)(e)}})})),n.a.createElement(i.EuiFlexItem,{grow:1,style:{overflow:"hidden"}},Object(f.a)(e)),n.a.createElement(i.EuiFlexItem,{grow:!1,style:{width:36,textAlign:"right"}},n.a.createElement(i.EuiButtonIcon,{iconType:"trash",color:"danger",onClick:()=>l(e),"aria-label":r.i18n.translate("xpack.infra.waffle.customMetrics.editMode.deleteAriaLabel",{defaultMessage:"Delete custom metric for {name}",values:{name:Object(f.a)(e)}})})))))))),M=({fields:e,onChange:t,onChangeCustomMetrics:a,metric:l,options:o,customMetrics:u})=>{var d;const[m,g]=Object(s.useState)(!1),[b,y]=Object(s.useState)("pick"),[x,O]=Object(s.useState)([]),[M,E]=Object(s.useState)(),w=Object(s.useCallback)((()=>{g(!1)}),[g]),j=Object(s.useCallback)((()=>{g(!m)}),[m]),B=Object(s.useCallback)((e=>{a([...u,e]),t(e),y("pick")}),[u,t,a,y]),S=Object(s.useCallback)((()=>{y("edit"),O(u)}),[u]),T=Object(s.useCallback)((()=>{y("addMetric")}),[y]),P=Object(s.useCallback)((()=>{y("pick"),O([])}),[y]),L=Object(s.useCallback)((e=>{p.d.is(l)&&e.id===l.id&&t({type:o[0].value});const a=x.filter((t=>t.id!==e.id));O(a)}),[x,l,t,o]),I=Object(s.useCallback)((e=>{const t=u.map((t=>t.id===e.id&&e||t));a(t),P(),E(void 0),O([])}),[u,a,P]),F=Object(s.useCallback)((e=>{E(e),y("editMetric")}),[y,E]),D=Object(s.useCallback)((()=>{a(x),y("pick")}),[x,a]);if(!o.length||!l.type)throw Error(r.i18n.translate("xpack.infra.waffle.unableToSelectMetricErrorTitle",{defaultMessage:"Unable to select options or value for metric."}));const A=p.d.is(l)&&l.id?l.id:l.type,N=p.d.is(l)?Object(f.a)(l):null===(d=o.find((e=>e.value===A)))||void 0===d?void 0:d.text;if(!N)return null;const R=n.a.createElement(c.a,{onClick:j,label:r.i18n.translate("xpack.infra.waffle.metriclabel",{defaultMessage:"Metric"})},N);return n.a.createElement(n.a.Fragment,null,n.a.createElement(i.EuiPopover,{isOpen:m,id:"metricsPanel",button:R,anchorPosition:"downLeft",panelPaddingSize:"none",closePopover:w},"pick"===b?n.a.createElement(v,{onChange:t,onClose:w,metric:l,customMetrics:u,options:o}):null,"addMetric"===b?n.a.createElement(h,{fields:e,customMetrics:u,onChange:B,onCancel:P}):null,"editMetric"===b?n.a.createElement(h,{metric:M,fields:e,customMetrics:u,onChange:I,onCancel:S}):null,"edit"===b?n.a.createElement(C,{customMetrics:x,options:o,onEdit:F,onDelete:L}):null,n.a.createElement(k,{onEditCancel:P,onEdit:S,onAdd:T,mode:b,onSave:D,customMetrics:u})))};var E=a(14),w=a.n(E);const j={selectedOptions:[]};class custom_field_panel_CustomFieldPanel extends n.a.PureComponent{constructor(...e){super(...e),w()(this,"state",j),w()(this,"handleSubmit",(()=>{this.props.onSubmit(this.state.selectedOptions[0].label)})),w()(this,"handleFieldSelection",(e=>{this.setState({selectedOptions:e})}))}render(){const{fields:e,currentOptions:t}=this.props,a=e.filter((e=>e.aggregatable&&"string"===e.type&&!(t&&t.some((t=>t.field===e.name))))).map((e=>({label:e.name}))),s=!this.state.selectedOptions.length;return n.a.createElement("div",{style:{padding:16}},n.a.createElement(i.EuiForm,null,n.a.createElement(i.EuiFormRow,{label:r.i18n.translate("xpack.infra.waffle.customGroupByFieldLabel",{defaultMessage:"Field"}),helpText:r.i18n.translate("xpack.infra.waffle.customGroupByHelpText",{defaultMessage:"This is the field used for the terms aggregation"}),display:"rowCompressed",fullWidth:!0},n.a.createElement(i.EuiComboBox,{"data-test-subj":"groupByCustomField",placeholder:r.i18n.translate("xpack.infra.waffle.customGroupByDropdownPlacehoder",{defaultMessage:"Select one"}),singleSelection:{asPlainText:!0},selectedOptions:this.state.selectedOptions,options:a,onChange:this.handleFieldSelection,fullWidth:!0,isClearable:!1})),n.a.createElement(i.EuiButton,{"data-test-subj":"groupByCustomFieldAddButton",disabled:s,type:"submit",size:"s",fill:!0,onClick:this.handleSubmit},"Add")))}}w()(custom_field_panel_CustomFieldPanel,"displayName","CustomFieldPanel");const B={isPopoverOpen:!1};class waffle_group_by_controls_WaffleGroupByControls extends n.a.PureComponent{constructor(...e){super(...e),w()(this,"state",B),w()(this,"handleRemove",(e=>()=>{const{groupBy:t}=this.props;this.props.onChange(t.filter((t=>t.field!==e)));const a=this.props.customOptions.filter((t=>t.field!==e));this.props.onChangeCustomOptions(a),setTimeout((()=>this.handleClose()))})),w()(this,"handleClose",(()=>{this.setState({isPopoverOpen:!1})})),w()(this,"handleToggle",(()=>{this.setState((e=>({isPopoverOpen:!e.isPopoverOpen})))})),w()(this,"handleCustomField",(e=>{const t=[...this.props.customOptions,{text:e,field:e}];this.props.onChangeCustomOptions(t);this.handleClick(e)()})),w()(this,"handleClick",(e=>()=>{const{groupBy:t}=this.props;t.some((t=>t.field===e))?this.handleRemove(e)():this.props.groupBy.length<2&&this.props.onChange([...t,{field:e}]),this.handleClose()}))}render(){const{nodeType:e,groupBy:t}=this.props,a=this.props.customOptions.map((e=>({...e,toolTipContent:e.text}))),s=this.props.options.concat(a);if(!s.length)throw Error(r.i18n.translate("xpack.infra.waffle.unableToSelectGroupErrorMessage",{defaultMessage:"Unable to select group by options for {nodeType}",values:{nodeType:e}}));const l=t.length>=2,o=r.i18n.translate("xpack.infra.waffle.maxGroupByTooltip",{defaultMessage:"Only two groupings can be selected at a time"}),u=[{id:"firstPanel",title:r.i18n.translate("xpack.infra.waffle.selectTwoGroupingsTitle",{defaultMessage:"Select up to two groupings"}),items:[{name:r.i18n.translate("xpack.infra.waffle.customGroupByOptionName",{defaultMessage:"Custom field"}),disabled:l,toolTipContent:l?o:null,icon:"empty",panel:"customPanel"},...s.map((e=>{const a=t.some((t=>t.field===e.field))?"check":"empty",s={name:e.text,onClick:this.handleClick(e.field),icon:a};return e.toolTipContent&&(s.toolTipContent=e.toolTipContent),l&&"empty"===a&&(s.toolTipContent=o,s.disabled=!0),s}))]},{id:"customPanel",title:r.i18n.translate("xpack.infra.waffle.customGroupByPanelTitle",{defaultMessage:"Group By Custom Field"}),width:685,content:n.a.createElement(custom_field_panel_CustomFieldPanel,{currentOptions:this.props.customOptions,onSubmit:this.handleCustomField,fields:this.props.fields})}],d=t.length>0?t.map((e=>s.find((t=>t.field===e.field)))).filter((e=>null!=e)).map((e=>n.a.createElement(i.EuiBadge,{color:"hollow",key:e&&e.field},e&&e.text))):n.a.createElement(y.FormattedMessage,{id:"xpack.infra.waffle.groupByAllTitle",defaultMessage:"All"}),m=n.a.createElement(c.a,{label:r.i18n.translate("xpack.infra.waffle.groupByLabel",{defaultMessage:"Group by"}),onClick:this.handleToggle,"data-test-subj":"waffleGroupByDropdown"},d);return n.a.createElement(i.EuiPopover,{isOpen:this.state.isPopoverOpen,id:"groupByPanel",button:m,panelPaddingSize:"none",closePopover:this.handleClose},n.a.createElement(S,{initialPanelId:"firstPanel",panels:u,"data-test-subj":"groupByContextMenu"}))}}w()(waffle_group_by_controls_WaffleGroupByControls,"displayName","WaffleGroupByControls");const S=Object(o.euiStyled)(i.EuiContextMenu)`
  width: 320px;
  & .euiContextMenuItem__text {
    overflow: hidden;
    text-overflow: ellipsis;
  }
`;var T=a(233);const P=e=>{const t=Object(s.useMemo)((()=>e.metricTypes.map(l.a).filter((e=>e))),[e.metricTypes]),a=Object(s.useMemo)((()=>e.groupByFields.map(T.b)),[e.groupByFields]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(M,{fields:e.createDerivedIndexPattern().fields,options:t,metric:e.metric,onChange:e.changeMetric,onChangeCustomMetrics:e.changeCustomMetrics,customMetrics:e.customMetrics})),n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(waffle_group_by_controls_WaffleGroupByControls,{options:a,groupBy:e.groupBy,nodeType:e.nodeType,onChange:e.changeGroupBy,fields:e.createDerivedIndexPattern().fields,onChangeCustomOptions:e.changeCustomOptions,customOptions:e.customOptions})),"map"===e.view&&n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(d,{sort:e.sort,onChange:e.changeSort})))}},119:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(1);const n=e=>{const t={avg:s.i18n.translate("xpack.infra.waffle.aggregationNames.avg",{defaultMessage:"Avg of {field}",values:{field:e.field}}),max:s.i18n.translate("xpack.infra.waffle.aggregationNames.max",{defaultMessage:"Max of {field}",values:{field:e.field}}),min:s.i18n.translate("xpack.infra.waffle.aggregationNames.min",{defaultMessage:"Min of {field}",values:{field:e.field}}),rate:s.i18n.translate("xpack.infra.waffle.aggregationNames.rate",{defaultMessage:"Rate of {field}",values:{field:e.field}})};return e.label?e.label:t[e.aggregation]}},120:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(13),n=a(2),i=a.n(n),l=a(17);const r=Object(l.withTheme)((e=>{const{onClick:t,label:a,theme:n,children:l}=e;return i.a.createElement(s.EuiFlexGroup,{alignItems:"center",gutterSize:"none",style:{border:null==n?void 0:n.eui.euiFormInputGroupBorder,boxShadow:`0px 3px 2px ${null==n?void 0:n.eui.euiTableActionsBorderColor}, 0px 1px 1px ${null==n?void 0:n.eui.euiTableActionsBorderColor}`}},i.a.createElement(s.EuiFlexItem,{grow:!1,style:{padding:12,background:null==n?void 0:n.eui.euiFormInputGroupLabelBackground,fontSize:"0.75em",fontWeight:600,color:null==n?void 0:n.eui.euiTitleColor}},a),i.a.createElement(s.EuiFlexItem,{grow:!1},i.a.createElement(s.EuiButtonEmpty,{"data-test-subj":e["data-test-subj"],color:"text",iconType:"arrowDown",onClick:t,iconSide:"right",size:"xs"},l)))}))},148:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(21),n=a(22),i=a(28),l=a(2),r=a(19),o=a(101),c=a(92);function u(e,t,a,u,d,m,f,p,g=!0,b){b=b||{interval:"1m",to:m,from:m-12e5,lookbackSize:5};const{error:y,loading:x,response:h,makeRequest:O}=Object(o.a)("/api/metrics/snapshot","POST",JSON.stringify({metrics:t,groupBy:a,nodeType:u,timerange:b,filterQuery:e,sourceId:d,accountId:f,region:p,includeTimeseries:!0}),(e=>Object(i.pipe)(c.g.decode(e),Object(s.fold)(Object(r.c)(r.a),n.identity))));return Object(l.useEffect)((()=>{(async()=>{g&&await O()})()}),[O,g]),{error:y&&y.message||null,loading:x,nodes:h?h.nodes:[],interval:h?h.interval:"60s",reload:O}}},149:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(27),n=a(35),i=a(92),l=a(131),r=a(37);const o={count:{formatter:n.b.number,template:"{{value}}"},cpu:{formatter:n.b.percent,template:"{{value}}"},memory:{formatter:n.b.percent,template:"{{value}}"},rx:{formatter:n.b.bits,template:"{{value}}/s"},tx:{formatter:n.b.bits,template:"{{value}}/s"},logRate:{formatter:n.b.abbreviatedNumber,template:"{{value}}/s"},diskIOReadBytes:{formatter:n.b.bytes,template:"{{value}}/s"},diskIOWriteBytes:{formatter:n.b.bytes,template:"{{value}}/s"},s3BucketSize:{formatter:n.b.bytes,template:"{{value}}"},s3TotalRequests:{formatter:n.b.abbreviatedNumber,template:"{{value}}"},s3NumberOfObjects:{formatter:n.b.abbreviatedNumber,template:"{{value}}"},s3UploadBytes:{formatter:n.b.bytes,template:"{{value}}"},s3DownloadBytes:{formatter:n.b.bytes,template:"{{value}}"},sqsOldestMessage:{formatter:n.b.number,template:"{{value}} seconds"},rdsLatency:{formatter:n.b.number,template:"{{value}} ms"}},c=e=>t=>{if(i.d.is(e)){return Object(l.a)(e)(t)}const a=Object(s.get)(o,e.type,o.count);if(null==t)return"";return Object(r.b)(a.formatter,a.template)(t)}},150:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(1),n=a(27);const i={CPUUsage:s.i18n.translate("xpack.infra.waffle.metricOptions.cpuUsageText",{defaultMessage:"CPU usage"}),MemoryUsage:s.i18n.translate("xpack.infra.waffle.metricOptions.memoryUsageText",{defaultMessage:"memory usage"}),InboundTraffic:s.i18n.translate("xpack.infra.waffle.metricOptions.inboundTrafficText",{defaultMessage:"inbound traffic"}),OutboundTraffic:s.i18n.translate("xpack.infra.waffle.metricOptions.outboundTrafficText",{defaultMessage:"outbound traffic"}),LogRate:s.i18n.translate("xpack.infra.waffle.metricOptions.hostLogRateText",{defaultMessage:"log rate"}),Load:s.i18n.translate("xpack.infra.waffle.metricOptions.loadText",{defaultMessage:"load"}),Count:s.i18n.translate("xpack.infra.waffle.metricOptions.countText",{defaultMessage:"count"}),DiskIOReadBytes:s.i18n.translate("xpack.infra.waffle.metricOptions.diskIOReadBytes",{defaultMessage:"disk reads"}),DiskIOWriteBytes:s.i18n.translate("xpack.infra.waffle.metricOptions.diskIOWriteBytes",{defaultMessage:"disk writes"}),s3BucketSize:s.i18n.translate("xpack.infra.waffle.metricOptions.s3BucketSize",{defaultMessage:"bucket size"}),s3TotalRequests:s.i18n.translate("xpack.infra.waffle.metricOptions.s3TotalRequests",{defaultMessage:"total requests"}),s3NumberOfObjects:s.i18n.translate("xpack.infra.waffle.metricOptions.s3NumberOfObjects",{defaultMessage:"number of objects"}),s3DownloadBytes:s.i18n.translate("xpack.infra.waffle.metricOptions.s3DownloadBytes",{defaultMessage:"downloads (bytes)"}),s3UploadBytes:s.i18n.translate("xpack.infra.waffle.metricOptions.s3UploadBytes",{defaultMessage:"uploads (bytes)"}),rdsConnections:s.i18n.translate("xpack.infra.waffle.metricOptions.rdsConnections",{defaultMessage:"connections"}),rdsQueriesExecuted:s.i18n.translate("xpack.infra.waffle.metricOptions.rdsQueriesExecuted",{defaultMessage:"queries executed"}),rdsActiveTransactions:s.i18n.translate("xpack.infra.waffle.metricOptions.rdsActiveTransactions",{defaultMessage:"active transactions"}),rdsLatency:s.i18n.translate("xpack.infra.waffle.metricOptions.rdsLatency",{defaultMessage:"latency"}),sqsMessagesVisible:s.i18n.translate("xpack.infra.waffle.metricOptions.sqsMessagesVisible",{defaultMessage:"messages available"}),sqsMessagesDelayed:s.i18n.translate("xpack.infra.waffle.metricOptions.sqsMessagesDelayed",{defaultMessage:"messages delayed"}),sqsMessagesSent:s.i18n.translate("xpack.infra.waffle.metricOptions.sqsMessagesSent",{defaultMessage:"messages added"}),sqsMessagesEmpty:s.i18n.translate("xpack.infra.waffle.metricOptions.sqsMessagesEmpty",{defaultMessage:"messages returned empty"}),sqsOldestMessage:s.i18n.translate("xpack.infra.waffle.metricOptions.sqsOldestMessage",{defaultMessage:"oldest message"})},l=Object(n.mapValues)(i,(e=>`${e[0].toUpperCase()}${e.slice(1)}`)),r=e=>{switch(e){case"cpu":return{text:l.CPUUsage,textLC:i.CPUUsage,value:"cpu"};case"memory":return{text:l.MemoryUsage,textLC:i.MemoryUsage,value:"memory"};case"rx":return{text:l.InboundTraffic,textLC:i.InboundTraffic,value:"rx"};case"tx":return{text:l.OutboundTraffic,textLC:i.OutboundTraffic,value:"tx"};case"logRate":return{text:l.LogRate,textLC:i.LogRate,value:"logRate"};case"load":return{text:l.Load,textLC:i.Load,value:"load"};case"count":return{text:l.Count,textLC:i.Count,value:"count"};case"diskIOReadBytes":return{text:l.DiskIOReadBytes,textLC:i.DiskIOReadBytes,value:"diskIOReadBytes"};case"diskIOWriteBytes":return{text:l.DiskIOWriteBytes,textLC:i.DiskIOWriteBytes,value:"diskIOWriteBytes"};case"s3BucketSize":return{text:l.s3BucketSize,textLC:i.s3BucketSize,value:"s3BucketSize"};case"s3TotalRequests":return{text:l.s3TotalRequests,textLC:i.s3TotalRequests,value:"s3TotalRequests"};case"s3NumberOfObjects":return{text:l.s3NumberOfObjects,textLC:i.s3NumberOfObjects,value:"s3NumberOfObjects"};case"s3DownloadBytes":return{text:l.s3DownloadBytes,textLC:i.s3DownloadBytes,value:"s3DownloadBytes"};case"s3UploadBytes":return{text:l.s3UploadBytes,textLC:i.s3UploadBytes,value:"s3UploadBytes"};case"rdsConnections":return{text:l.rdsConnections,textLC:i.rdsConnections,value:"rdsConnections"};case"rdsQueriesExecuted":return{text:l.rdsQueriesExecuted,textLC:i.rdsQueriesExecuted,value:"rdsQueriesExecuted"};case"rdsActiveTransactions":return{text:l.rdsActiveTransactions,textLC:i.rdsActiveTransactions,value:"rdsActiveTransactions"};case"rdsLatency":return{text:l.rdsLatency,textLC:i.rdsLatency,value:"rdsLatency"};case"sqsMessagesVisible":return{text:l.sqsMessagesVisible,textLC:i.sqsMessagesVisible,value:"sqsMessagesVisible"};case"sqsMessagesDelayed":return{text:l.sqsMessagesDelayed,textLC:i.sqsMessagesDelayed,value:"sqsMessagesDelayed"};case"sqsMessagesSent":return{text:l.sqsMessagesSent,textLC:i.sqsMessagesSent,value:"sqsMessagesSent"};case"sqsMessagesEmpty":return{text:l.sqsMessagesEmpty,textLC:i.sqsMessagesEmpty,value:"sqsMessagesEmpty"};case"sqsOldestMessage":return{text:l.sqsOldestMessage,textLC:i.sqsOldestMessage,value:"sqsOldestMessage"}}}},156:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(2),n=a.n(s),i=a(13),l=a(1),r=a(120);const o=e=>{const{accountId:t,options:a}=e,[o,c]=Object(s.useState)(!1),u=Object(s.useCallback)((()=>{c(!0)}),[c]),d=Object(s.useCallback)((()=>{c(!1)}),[c]),m=a.find((e=>e.value===t)),f=Object(s.useCallback)((a=>{t===a?e.changeAccount(""):e.changeAccount(a),d()}),[t,d,e]),p=Object(s.useMemo)((()=>[{id:0,title:"",items:a.map((e=>{const a=e.value===t?"check":"empty";return{name:e.name,onClick:()=>f(e.value),icon:a}}))}]),[a,t,f]),g=n.a.createElement(r.a,{label:l.i18n.translate("xpack.infra.waffle.accountLabel",{defaultMessage:"Account"}),onClick:u},m?m.name:l.i18n.translate("xpack.infra.waffle.accountAllTitle",{defaultMessage:"All"}));return n.a.createElement(i.EuiPopover,{isOpen:o,id:"accontPopOver",button:g,anchorPosition:"downLeft",panelPaddingSize:"none",closePopover:d},n.a.createElement(i.EuiContextMenu,{initialPanelId:0,panels:p}))},c=e=>{const{region:t,options:a}=e,[o,c]=Object(s.useState)(!1),u=Object(s.useCallback)((()=>{c(!0)}),[c]),d=Object(s.useCallback)((()=>{c(!1)}),[c]),m=a.find((e=>t===e)),f=Object(s.useCallback)((a=>{t===a?e.changeRegion(""):e.changeRegion(a),d()}),[t,d,e]),p=Object(s.useMemo)((()=>[{id:0,title:"",items:a.map((e=>({name:e,onClick:()=>f(e),icon:e===t?"check":"empty"})))}]),[f,a,t]),g=n.a.createElement(r.a,{onClick:u,label:l.i18n.translate("xpack.infra.waffle.regionLabel",{defaultMessage:"Region"})},m||l.i18n.translate("xpack.infra.waffle.region",{defaultMessage:"All"}));return n.a.createElement(i.EuiPopover,{isOpen:o,id:"regionPanel",button:g,anchorPosition:"downLeft",panelPaddingSize:"none",closePopover:d},n.a.createElement(i.EuiContextMenu,{initialPanelId:0,panels:p}))},u=e=>n.a.createElement(n.a.Fragment,null,e.accounts.length>0&&n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(o,{changeAccount:e.changeAccount,accountId:e.accountId,options:e.accounts})),e.regions.length>0&&n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(c,{changeRegion:e.changeRegion,region:e.region,options:e.regions})))},215:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(1);const n=s.i18n.translate("xpack.infra.groupByDisplayNames.availabilityZone",{defaultMessage:"Availability zone"}),i=s.i18n.translate("xpack.infra.groupByDisplayNames.machineType",{defaultMessage:"Machine type"}),l=e=>({"kubernetes.namespace":s.i18n.translate("xpack.infra.groupByDisplayNames.kubernetesNamespace",{defaultMessage:"Namespace"}),"kubernetes.node.name":s.i18n.translate("xpack.infra.groupByDisplayNames.kubernetesNodeName",{defaultMessage:"Node"}),"host.name":s.i18n.translate("xpack.infra.groupByDisplayNames.hostName",{defaultMessage:"Host"}),"cloud.availability_zone":n,"cloud.machine.type":i,"cloud.project.id":s.i18n.translate("xpack.infra.groupByDisplayNames.projectID",{defaultMessage:"Project ID"}),"cloud.provider":s.i18n.translate("xpack.infra.groupByDisplayNames.provider",{defaultMessage:"Cloud provider"}),"service.type":s.i18n.translate("xpack.infra.groupByDisplayNames.serviceType",{defaultMessage:"Service type"}),"aws.cloud.availability_zone":n,"aws.cloud.machine.type":i,"aws.tags":s.i18n.translate("xpack.infra.groupByDisplayNames.tags",{defaultMessage:"Tags"}),"aws.ec2.instance.image.id":s.i18n.translate("xpack.infra.groupByDisplayNames.image",{defaultMessage:"Image"}),"aws.ec2.instance.state.name":s.i18n.translate("xpack.infra.groupByDisplayNames.state.name",{defaultMessage:"State"}),"cloud.region":s.i18n.translate("xpack.infra.groupByDisplayNames.cloud.region",{defaultMessage:"Region"}),"aws.rds.db_instance.class":s.i18n.translate("xpack.infra.groupByDisplayNames.rds.db_instance.class",{defaultMessage:"Instance Class"}),"aws.rds.db_instance.status":s.i18n.translate("xpack.infra.groupByDisplayNames.rds.db_instance.status",{defaultMessage:"Status"})}[e]||e)},216:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return u}));var s=a(33),n=a.n(s),i=a(2),l=a.n(i),r=a(113);const o=["cpu","memory","load","rx","tx","logRate"],c=["cloud.availability_zone","cloud.machine.type","cloud.project.id","cloud.provider","service.type"],u=e=>l.a.createElement(r.a,n()({},e,{metricTypes:o,groupByFields:c}))},217:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return u}));var s=a(33),n=a.n(s),i=a(2),l=a.n(i),r=a(113);const o=["cpu","memory","rx","tx"],c=["host.name","cloud.availability_zone","cloud.machine.type","cloud.project.id","cloud.provider","service.type"],u=e=>l.a.createElement(r.a,n()({},e,{metricTypes:o,groupByFields:c}))},218:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return u}));var s=a(33),n=a.n(s),i=a(2),l=a.n(i),r=a(113);const o=["cpu","memory","rx","tx"],c=["kubernetes.namespace","kubernetes.node.name","service.type"],u=e=>l.a.createElement(r.a,n()({},e,{metricTypes:o,groupByFields:c}))},219:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return d}));var s=a(33),n=a.n(s),i=a(2),l=a.n(i),r=a(113),o=a(156);const c=["cpu","rx","tx","diskIOReadBytes","diskIOWriteBytes"],u=["cloud.availability_zone","cloud.machine.type","aws.ec2.instance.image.id","aws.ec2.instance.state.name"],d=e=>l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,e),l.a.createElement(r.a,n()({},e,{metricTypes:c,groupByFields:u})))},220:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return d}));var s=a(33),n=a.n(s),i=a(2),l=a.n(i),r=a(113),o=a(156);const c=["s3BucketSize","s3NumberOfObjects","s3TotalRequests","s3DownloadBytes","s3UploadBytes"],u=["cloud.region"],d=e=>l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,e),l.a.createElement(r.a,n()({},e,{metricTypes:c,groupByFields:u})))},221:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return d}));var s=a(33),n=a.n(s),i=a(2),l=a.n(i),r=a(113),o=a(156);const c=["cpu","rdsConnections","rdsQueriesExecuted","rdsActiveTransactions","rdsLatency"],u=["cloud.availability_zone","aws.rds.db_instance.class","aws.rds.db_instance.status"],d=e=>l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,e),l.a.createElement(r.a,n()({},e,{metricTypes:c,groupByFields:u})))},222:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return d}));var s=a(33),n=a.n(s),i=a(2),l=a.n(i),r=a(113),o=a(156);const c=["sqsMessagesVisible","sqsMessagesDelayed","sqsMessagesSent","sqsMessagesEmpty","sqsOldestMessage"],u=["cloud.region"],d=e=>l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,e),l.a.createElement(r.a,n()({},e,{metricTypes:c,groupByFields:u})))},233:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return g}));var s=a(2),n=a.n(s),i=a(13),l=a(215),r=a(85),o=a(91),c=a(1),u=a(88),d=a(120);const m=e=>Object(u.b)(e).displayName,f=()=>{const{changeNodeType:e,changeGroupBy:t,changeMetric:a,changeAccount:l,changeRegion:r,changeCustomMetrics:f,nodeType:p}=Object(o.d)(),[g,b]=Object(s.useState)(!1),y=Object(s.useCallback)((()=>b(!1)),[]),x=Object(s.useCallback)((()=>b(!0)),[]),h=Object(s.useCallback)((s=>{y(),e(s),t([]),f([]),l(""),r("");const n=Object(u.b)(s);a({type:n.metrics.defaultSnapshot})}),[y,e,t,f,l,r,a]),O=Object(s.useCallback)((()=>h("host")),[h]),v=Object(s.useCallback)((()=>h("pod")),[h]),k=Object(s.useCallback)((()=>h("container")),[h]),C=Object(s.useCallback)((()=>h("awsEC2")),[h]),M=Object(s.useCallback)((()=>h("awsS3")),[h]),E=Object(s.useCallback)((()=>h("awsRDS")),[h]),w=Object(s.useCallback)((()=>h("awsSQS")),[h]),j=Object(s.useMemo)((()=>[{id:"firstPanel",items:[{"data-test-subj":"goToHost",name:m("host"),onClick:O},{"data-test-subj":"goToPods",name:m("pod"),onClick:v},{"data-test-subj":"goToDocker",name:m("container"),onClick:k},{name:"AWS",panel:"awsPanel"}]},{id:"awsPanel",title:"AWS",items:[{name:m("awsEC2"),onClick:C},{name:m("awsS3"),onClick:M},{name:m("awsRDS"),onClick:E},{name:m("awsSQS"),onClick:w}]}]),[C,E,M,w,k,O,v]),B=Object(s.useMemo)((()=>m(p)),[p]),S=n.a.createElement(d.a,{"data-test-subj":"openInventorySwitcher",onClick:x,label:c.i18n.translate("xpack.infra.waffle.showLabel",{defaultMessage:"Show"})},B);return n.a.createElement(i.EuiPopover,{id:"contextMenu",button:S,isOpen:g,closePopover:y,panelPaddingSize:"none",anchorPosition:"downLeft"},n.a.createElement(i.EuiContextMenu,{initialPanelId:"firstPanel",panels:j}))},p=e=>{const{changeMetric:t,changeGroupBy:a,changeCustomOptions:s,changeAccount:l,changeRegion:c,changeSort:u,customOptions:d,groupBy:m,metric:p,nodeType:g,accountId:b,view:y,region:x,legend:h,sort:O,customMetrics:v,changeCustomMetrics:k}=Object(o.d)(),{createDerivedIndexPattern:C}=Object(r.b)();return n.a.createElement(i.EuiFlexGroup,{responsive:!1,wrap:!0,gutterSize:"m"},n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(f,null)),e.children({createDerivedIndexPattern:C,changeMetric:t,changeGroupBy:a,changeAccount:l,changeRegion:c,changeCustomOptions:s,changeSort:u,customOptions:d,groupBy:m,sort:O,view:y,metric:p,nodeType:g,region:x,accountId:b,legend:h,customMetrics:v,changeCustomMetrics:k}))},g=e=>({text:Object(l.a)(e),field:e})},85:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));var s=a(83),n=a.n(s),i=a(2),l=a(84),r=a(4);const o=(e,t)=>e?"metrics"===t?e.configuration.metricAlias:`${e.configuration.metricAlias}`:"unknown-index",c="Failed to load source: No fetch client available.",u=n()((({sourceId:e})=>{var t;const a=null===(t=Object(r.useKibana)().services.http)||void 0===t?void 0:t.fetch,s=`/api/metrics/source/${e}`,[n,u]=Object(i.useState)(void 0),[d,m]=Object(l.c)({cancelPreviousOn:"resolution",createPromise:async()=>{if(!a)throw new Error(c);return await a(`${s}`,{method:"GET"})},onResolve:e=>{u(e.source)}},[a,e]),[f,p]=Object(l.c)({createPromise:async e=>{if(!a)throw new Error(c);return await a(s,{method:"PATCH",body:JSON.stringify(e)})},onResolve:e=>{e&&u(e.source)}},[a,e]),[g,b]=Object(l.c)({createPromise:async e=>{if(!a)throw new Error(c);return await a(s,{method:"PATCH",body:JSON.stringify(e)})},onResolve:e=>{e&&u(e.source)}},[a,e]),y=Object(i.useMemo)((()=>[d.state,f.state,g.state].some((e=>"pending"===e))),[d.state,f.state,g.state]),x=Object(i.useMemo)((()=>"uninitialized"===d.state),[d.state]),h=Object(i.useMemo)((()=>n?!!n.version:void 0),[n]),O=Object(i.useMemo)((()=>n&&n.status&&n.status.metricIndicesExist),[n]);return Object(i.useEffect)((()=>{m()}),[m,e]),{createSourceConfiguration:p,createDerivedIndexPattern:()=>({fields:null!=n&&n.status?n.status.indexFields:[],title:o(n,"metrics")}),isLoading:y,isLoadingSource:"pending"===d.state,isUninitialized:x,hasFailedLoadingSource:"rejected"===d.state,loadSource:m,loadSourceFailureMessage:"rejected"===d.state?`${d.value}`:void 0,metricIndicesExist:O,source:n,sourceExists:h,sourceId:e,updateSourceConfiguration:b,version:n&&n.version?n.version:void 0}})),[d,m]=u},91:function(e,t,a){"use strict";a.d(t,"a",(function(){return g})),a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return C})),a.d(t,"d",(function(){return M}));var s=a(2),n=a(0),i=a(28),l=a(21),r=a(22),o=a(83),c=a.n(o),u=a(122),d=a(35),m=a(92),f=a(99),p=a(89);const g={palette:"cool",steps:10,reverseColors:!1},b={metric:{type:"cpu"},groupBy:[],nodeType:"host",view:"map",customOptions:[],boundsOverride:{max:1,min:0},autoBounds:!0,accountId:"",region:"",customMetrics:[],legend:g,source:"default",sort:{by:"name",direction:"desc"},timelineOpen:!1},y=n.type({palette:d.d,steps:n.number,reverseColors:n.boolean}),x=n.type({by:n.keyof({name:null,value:null}),direction:n.keyof({asc:null,desc:null})}),h=n.intersection([n.type({metric:m.f,groupBy:m.e,nodeType:p.c,view:n.string,customOptions:n.array(n.type({text:n.string,field:n.string})),boundsOverride:n.type({min:n.number,max:n.number}),autoBounds:n.boolean,accountId:n.string,region:n.string,customMetrics:n.array(m.d),sort:x}),n.partial({source:n.string,legend:y,timelineOpen:n.boolean})]),O=e=>h.encode(e),v=e=>{const t=Object(i.pipe)(h.decode(e),Object(l.fold)(Object(r.constant)(void 0),r.identity));return t&&(t.source="url"),t},k=c()((()=>{const[e,t]=Object(f.b)({defaultState:b,decodeUrlState:v,encodeUrlState:O,urlStateKey:"waffleOptions"}),[a,n]=Object(s.useState)(e);Object(s.useEffect)((()=>t(a)),[t,a]);const i=Object(s.useCallback)((e=>n((t=>({...t,metric:e})))),[n]),l=Object(s.useCallback)((e=>n((t=>({...t,groupBy:e})))),[n]),r=Object(s.useCallback)((e=>n((t=>({...t,nodeType:e})))),[n]),o=Object(s.useCallback)((e=>n((t=>({...t,view:e})))),[n]),c=Object(s.useCallback)((e=>n((t=>({...t,customOptions:e})))),[n]),d=Object(s.useCallback)((e=>n((t=>({...t,autoBounds:e})))),[n]),m=Object(s.useCallback)((e=>n((t=>({...t,boundsOverride:e})))),[n]),p=Object(s.useCallback)((e=>n((t=>({...t,accountId:e})))),[n]),g=Object(s.useCallback)((e=>n((t=>({...t,region:e})))),[n]),y=Object(s.useCallback)((e=>{n((t=>({...t,customMetrics:e})))}),[n]),x=Object(s.useCallback)((e=>{n((t=>({...t,legend:e})))}),[n]),h=Object(s.useCallback)((e=>{n((t=>({...t,sort:e})))}),[n]),{inventoryPrefill:k}=Object(u.b)();Object(s.useEffect)((()=>{const{setNodeType:e,setMetric:t,setCustomMetrics:s}=k;e(a.nodeType),t(a.metric),s(a.customMetrics)}),[a,k]);const C=Object(s.useCallback)((e=>n((t=>({...t,timelineOpen:e})))),[n]);return{...b,...a,changeMetric:i,changeGroupBy:l,changeNodeType:r,changeView:o,changeCustomOptions:c,changeAutoBounds:d,changeBoundsOverride:m,changeAccount:p,changeRegion:g,changeCustomMetrics:y,changeLegend:x,changeSort:h,changeTimelineOpen:C,setWaffleOptionsState:n}})),[C,M]=k}}]);