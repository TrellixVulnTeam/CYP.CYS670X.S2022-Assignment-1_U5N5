/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.apm_bundle_jsonpfunction=window.apm_bundle_jsonpfunction||[]).push([[9,11],{1038:function(e,t,r){"use strict";r.r(t);var n=r(1),i=r.n(n),s=r(470);t.default=function({http:e,basePath:t,isCloudEnabled:r,kibanaVersion:n}){return i.a.createElement(s.default,{variantId:"js_script",http:e,basePath:t,isCloudEnabled:r,kibanaVersion:n})}},470:function(e,t,r){"use strict";r.r(t);var n=r(8),i=r(0),s=r(1),a=r.n(s),l=r(29),o=r.n(l),E=r(85),c=r(189);const p=i.i18n.translate("xpack.apm.tutorial.agent_config.defaultStandaloneConfig",{defaultMessage:"Default Standalone configuration"});var I=r(26);function h({options:e,selectedOption:t,onChange:r,fleetLink:s}){const{fleetAgents:l,standalone:o}=Object(I.groupBy)(e,"type"),E=(null==o?void 0:o.map((({key:e,label:t})=>({key:e,label:t}))))||[],c=null!=l&&l.length?[{key:"fleet_policies",label:i.i18n.translate("xpack.apm.tutorial.agent_config.fleetPoliciesLabel",{defaultMessage:"Fleet policies"}),options:l.map((({key:e,label:t})=>({key:e,label:t})))}]:[];return a.a.createElement(n.EuiFormRow,{label:i.i18n.translate("xpack.apm.tutorial.agent_config.choosePolicyLabel",{defaultMessage:"Choose policy"}),labelAppend:s&&a.a.createElement(n.EuiText,{size:"xs"},a.a.createElement(n.EuiLink,{href:s.href},s.label)),helpText:i.i18n.translate("xpack.apm.tutorial.agent_config.choosePolicy.helper",{defaultMessage:"Adds the selected policy configuration to the snippet below."})},a.a.createElement(n.EuiComboBox,{"data-test-subj":`policySelector_${null==t?void 0:t.key}`,isClearable:!1,singleSelection:{asPlainText:!0},options:[...E,...c],selectedOptions:t?[{key:t.key,label:t.label}]:[],onChange:t=>{const n=e.find((({key:e})=>e===t[0].key));r(n)}}))}const u=o.a.div.withConfig({displayName:"CentralizedContainer",componentId:"sc-e43dnk-0"})(["display:flex;justify-content:center;align-items:center;"]),N=i.i18n.translate("xpack.apm.tutorial.agent_config.manageFleetPolicies",{defaultMessage:"Manage fleet policies"}),d=i.i18n.translate("xpack.apm.tutorial.agent_config.getStartedWithFleet",{defaultMessage:"Get started with fleet"}),R={fleetAgents:[],cloudStandaloneSetup:void 0,isFleetEnabled:!1};function L({isFleetEnabled:e,hasFleetAgents:t,basePath:r,kibanaVersion:n}){if(e)return t?{label:N,href:`${r}/app/fleet#/policies`}:{label:d,href:Object(E.c)(n)?`${r}/app/integrations#/detail/apm/overview`:`${r}/app/integrations#/detail/apm-${E.b}/overview`}}t.default=function({variantId:e,http:t,basePath:r,isCloudEnabled:i,kibanaVersion:l}){const[o,I]=Object(s.useState)(R),[N,d]=Object(s.useState)(!0),[f,O]=Object(s.useState)();Object(s.useEffect)((()=>{!async function(){d(!0);try{const e=await t.get("/internal/apm/fleet/agents");e&&I(e)}catch(e){d(!1),console.error("Error while fetching fleet agents.",e)}}()}),[t]);const S=Object(s.useMemo)((()=>{const e=function({isCloudEnabled:e,data:t}){var r,n,i;const s=!(!e||null===(r=t.cloudStandaloneSetup)||void 0===r||!r.apmServerUrl),a=t.fleetAgents.map((e=>({key:e.id,type:"fleetAgents",label:e.name,apmServerUrl:e.apmServerUrl,secretToken:e.secretToken,isVisible:!0,isSelected:e.id===E.a}))),l=a.some((({isSelected:e})=>e));return[{key:"cloud",type:"standalone",label:p,apmServerUrl:null===(n=t.cloudStandaloneSetup)||void 0===n?void 0:n.apmServerUrl,secretToken:null===(i=t.cloudStandaloneSetup)||void 0===i?void 0:i.secretToken,isVisible:s&&!l,isSelected:!l},{key:"onPrem",type:"standalone",label:p,apmServerUrl:"http://localhost:8200",secretToken:"",isVisible:!s&&!l,isSelected:!l},...a].filter((({isVisible:e})=>e))}({isCloudEnabled:i,data:o}),t=e.find((({isSelected:e})=>e));return O(t),d(!1),e}),[o,i]);if(N)return a.a.createElement(u,{"data-test-subj":"loading"},a.a.createElement(n.EuiLoadingSpinner,null));const m=Object(c.a)({variantId:e,policyDetails:{apmServerUrl:null==f?void 0:f.apmServerUrl,secretToken:null==f?void 0:f.secretToken}}),A=!!o.fleetAgents.length;return a.a.createElement(a.a.Fragment,null,a.a.createElement(h,{options:S,selectedOption:f,onChange:e=>O(e),fleetLink:L({isFleetEnabled:o.isFleetEnabled,hasFleetAgents:A,basePath:r,kibanaVersion:l})}),a.a.createElement(n.EuiSpacer,null),a.a.createElement(n.EuiCodeBlock,{isCopyable:!0,language:"bash","data-test-subj":"commands"},m))}},68:function(e,t){const r=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:r,MAX_SAFE_COMPONENT_LENGTH:16}},74:function(e,t,r){e.exports=r(25)(954)},75:function(e,t,r){const{MAX_SAFE_COMPONENT_LENGTH:n}=r(68),i=r(76),s=(t=e.exports={}).re=[],a=t.src=[],l=t.t={};let o=0;const E=(e,t,r)=>{const n=o++;i(n,t),l[e]=n,a[n]=t,s[n]=new RegExp(t,r?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*"),E("NUMERICIDENTIFIERLOOSE","[0-9]+"),E("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),E("MAINVERSION",`(${a[l.NUMERICIDENTIFIER]})\\.(${a[l.NUMERICIDENTIFIER]})\\.(${a[l.NUMERICIDENTIFIER]})`),E("MAINVERSIONLOOSE",`(${a[l.NUMERICIDENTIFIERLOOSE]})\\.(${a[l.NUMERICIDENTIFIERLOOSE]})\\.(${a[l.NUMERICIDENTIFIERLOOSE]})`),E("PRERELEASEIDENTIFIER",`(?:${a[l.NUMERICIDENTIFIER]}|${a[l.NONNUMERICIDENTIFIER]})`),E("PRERELEASEIDENTIFIERLOOSE",`(?:${a[l.NUMERICIDENTIFIERLOOSE]}|${a[l.NONNUMERICIDENTIFIER]})`),E("PRERELEASE",`(?:-(${a[l.PRERELEASEIDENTIFIER]}(?:\\.${a[l.PRERELEASEIDENTIFIER]})*))`),E("PRERELEASELOOSE",`(?:-?(${a[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[l.PRERELEASEIDENTIFIERLOOSE]})*))`),E("BUILDIDENTIFIER","[0-9A-Za-z-]+"),E("BUILD",`(?:\\+(${a[l.BUILDIDENTIFIER]}(?:\\.${a[l.BUILDIDENTIFIER]})*))`),E("FULLPLAIN",`v?${a[l.MAINVERSION]}${a[l.PRERELEASE]}?${a[l.BUILD]}?`),E("FULL",`^${a[l.FULLPLAIN]}$`),E("LOOSEPLAIN",`[v=\\s]*${a[l.MAINVERSIONLOOSE]}${a[l.PRERELEASELOOSE]}?${a[l.BUILD]}?`),E("LOOSE",`^${a[l.LOOSEPLAIN]}$`),E("GTLT","((?:<|>)?=?)"),E("XRANGEIDENTIFIERLOOSE",`${a[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),E("XRANGEIDENTIFIER",`${a[l.NUMERICIDENTIFIER]}|x|X|\\*`),E("XRANGEPLAIN",`[v=\\s]*(${a[l.XRANGEIDENTIFIER]})(?:\\.(${a[l.XRANGEIDENTIFIER]})(?:\\.(${a[l.XRANGEIDENTIFIER]})(?:${a[l.PRERELEASE]})?${a[l.BUILD]}?)?)?`),E("XRANGEPLAINLOOSE",`[v=\\s]*(${a[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[l.XRANGEIDENTIFIERLOOSE]})(?:${a[l.PRERELEASELOOSE]})?${a[l.BUILD]}?)?)?`),E("XRANGE",`^${a[l.GTLT]}\\s*${a[l.XRANGEPLAIN]}$`),E("XRANGELOOSE",`^${a[l.GTLT]}\\s*${a[l.XRANGEPLAINLOOSE]}$`),E("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),E("COERCERTL",a[l.COERCE],!0),E("LONETILDE","(?:~>?)"),E("TILDETRIM",`(\\s*)${a[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",E("TILDE",`^${a[l.LONETILDE]}${a[l.XRANGEPLAIN]}$`),E("TILDELOOSE",`^${a[l.LONETILDE]}${a[l.XRANGEPLAINLOOSE]}$`),E("LONECARET","(?:\\^)"),E("CARETTRIM",`(\\s*)${a[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",E("CARET",`^${a[l.LONECARET]}${a[l.XRANGEPLAIN]}$`),E("CARETLOOSE",`^${a[l.LONECARET]}${a[l.XRANGEPLAINLOOSE]}$`),E("COMPARATORLOOSE",`^${a[l.GTLT]}\\s*(${a[l.LOOSEPLAIN]})$|^$`),E("COMPARATOR",`^${a[l.GTLT]}\\s*(${a[l.FULLPLAIN]})$|^$`),E("COMPARATORTRIM",`(\\s*)${a[l.GTLT]}\\s*(${a[l.LOOSEPLAIN]}|${a[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",E("HYPHENRANGE",`^\\s*(${a[l.XRANGEPLAIN]})\\s+-\\s+(${a[l.XRANGEPLAIN]})\\s*$`),E("HYPHENRANGELOOSE",`^\\s*(${a[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[l.XRANGEPLAINLOOSE]})\\s*$`),E("STAR","(<|>)?=?\\s*\\*"),E("GTE0","^\\s*>=\\s*0.0.0\\s*$"),E("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},76:function(e,t,r){(function(t){const r="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=r}).call(this,r(74))},85:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return l}));var n=r(89),i=r.n(n);const s="policy-elastic-agent-on-cloud",a="8.1.0";function l(e){var t,r,n;return null!==(t=null===(r=i()(e))||void 0===r||null===(n=r.prerelease)||void 0===n?void 0:n.length)&&void 0!==t&&t}},88:function(e,t,r){const n=r(76),{MAX_LENGTH:i,MAX_SAFE_INTEGER:s}=r(68),{re:a,t:l}=r(75),{compareIdentifiers:o}=r(90);class SemVer{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?a[l.LOOSE]:a[l.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<s)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),o(this.major,e.major)||o(this.minor,e.minor)||o(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return o(r,i)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return o(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=SemVer},89:function(e,t,r){const{MAX_LENGTH:n}=r(68),{re:i,t:s}=r(75),a=r(88);e.exports=(e,t)=>{if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof a)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?i[s.LOOSE]:i[s.FULL]).test(e))return null;try{return new a(e,t)}catch(e){return null}}},90:function(e,t){const r=/^[0-9]+$/,n=(e,t)=>{const n=r.test(e),i=r.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}}}]);