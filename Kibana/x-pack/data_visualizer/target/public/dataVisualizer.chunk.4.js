/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.dataVisualizer_bundle_jsonpfunction=window.dataVisualizer_bundle_jsonpfunction||[]).push([[4],{154:function(e,t,s){"use strict";s.r(t),s.d(t,"EmbeddableWrapper",(function(){return z})),s.d(t,"IndexDataVisualizerViewWrapper",(function(){return y})),s.d(t,"DataVisualizerGridEmbeddable",(function(){return grid_embeddable_DataVisualizerGridEmbeddable}));var i=s(2),n=s.n(i),a=s(24),r=s(47),d=s.n(r),u=s(0),o=s(81),l=s.n(o),c=s(21),b=s(22),j=s(34),p=s(27),x=s(11),h=s(5);const m=()=>Object(h.jsx)(c.EuiText,{textAlign:"center"},Object(h.jsx)(c.EuiSpacer,{size:"l"}),Object(h.jsx)(c.EuiLoadingSpinner,{size:"l"}),Object(h.jsx)(c.EuiSpacer,{size:"l"}));var g=s(72),O=s(62),f=s(92),v=s(90);const E=Object(O.b)(),z=({input:e,onOutputChange:t})=>{const[s,i]=Object(u.useState)(E),n=Object(u.useCallback)((e=>{i({...s,...e}),t&&t(e)}),[s,t]),{configs:a,searchQueryLanguage:r,searchString:d,extendedColumns:o,progress:l,setLastRefresh:j}=Object(v.a)(e,s);Object(u.useEffect)((()=>{j(Date.now())}),[null==e?void 0:e.lastReloadRequestTime,j]);const p=Object(u.useCallback)((function(t,s){return t.reduce(((t,i)=>{const n=s.find((e=>e.fieldName===i));return void 0!==n&&(t[i]=Object(h.jsx)(f.a,{item:n,indexPattern:e.indexPattern,combinedQuery:{searchQueryLanguage:r,searchString:d},onAddFilter:e.onAddFilter})),t}),{})}),[e,r,d]);return 100===l&&0===a.length?Object(h.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",flex:"1 0 100%",textAlign:"center"}},Object(h.jsx)(c.EuiText,{size:"xs",color:"subdued"},Object(h.jsx)(c.EuiIcon,{type:"visualizeApp",size:"m",color:"subdued"}),Object(h.jsx)(c.EuiSpacer,{size:"m"}),Object(h.jsx)(b.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableNoResultsMessage",defaultMessage:"No results found"}))):Object(h.jsx)(g.a,{items:a,pageState:s,updatePageState:n,getItemIdToExpandedRowMap:p,extendedColumns:o,showPreviewByDefault:null==e?void 0:e.showPreviewByDefault,onChange:t,loading:l<100})},y=e=>{const{embeddableInput:t,onOutputChange:s}=e,i=l()(t);return i&&i.indexPattern?Object(h.jsx)(z,{input:i,onOutputChange:s}):Object(h.jsx)(c.EuiEmptyPrompt,{iconType:"alert",iconColor:"danger",title:Object(h.jsx)("h2",null,Object(h.jsx)(b.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableErrorTitle",defaultMessage:"Error loading embeddable"})),body:Object(h.jsx)("p",null,Object(h.jsx)(b.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableErrorDescription",defaultMessage:"There was an error loading the embeddable. Please check if all the required input is valid."}))})};class grid_embeddable_DataVisualizerGridEmbeddable extends j.Embeddable{constructor(e,t,s){super(e,{},s),n()(this,"node",void 0),n()(this,"reload$",new a.Subject),n()(this,"type",x.a),this.services=t}render(e){super.render(e),this.node=e;const t=this.services[0].i18n.Context;d.a.render(Object(h.jsx)(t,null,Object(h.jsx)(p.KibanaThemeProvider,{theme$:this.services[0].theme.theme$},Object(h.jsx)(p.KibanaContextProvider,{services:{...this.services[0],...this.services[1]}},Object(h.jsx)(u.Suspense,{fallback:Object(h.jsx)(m,null)},Object(h.jsx)(y,{id:this.input.id,embeddableContext:this,embeddableInput:this.getInput$(),onOutputChange:e=>this.updateOutput(e)}))))),e)}destroy(){super.destroy(),this.node&&d.a.unmountComponentAtNode(this.node)}reload(){this.reload$.next()}supportedTriggers(){return[]}}}}]);