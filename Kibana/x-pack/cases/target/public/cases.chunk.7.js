/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[7],{182:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var n=a(2),l=a.n(n),c=a(11),r=a(3),i=a(13),o=a(48),s=a(90),u=a(85),d=a(64),m=a(60),b=a(65);const p=["category","subcategory","priority"],E={category:[],subcategory:[],priority:[]},g=({isEdit:e=!0,fields:t,connector:a,onChange:g})=>{const h=Object(n.useRef)(!0),{category:f=null,destIp:y=!0,malwareHash:x=!0,malwareUrl:v=!0,priority:j=null,sourceIp:I=!0,subcategory:C=null}=null!=t?t:{},{http:w,notifications:O}=Object(i.d)().services,[F,k]=Object(n.useState)(E),S=Object(n.useMemo)((()=>null!=Object(m.a)(a)),[a]),N=Object(n.useCallback)(((e,a)=>{g({...t,[e]:a})}),[t,g]),{isLoading:M}=Object(s.a)({http:w,toastNotifications:O.toasts,connector:a,fields:p,onSuccess:e=>{k(e.reduce(((e,t)=>({...e,[t.element]:[...null!=e[t.element]?e[t.element]:[],t]})),E))}}),R=Object(n.useMemo)((()=>Object(u.a)(F.category)),[F.category]),W=Object(n.useMemo)((()=>Object(u.a)(F.priority)),[F.priority]),G=Object(n.useMemo)((()=>Object(u.a)(F.subcategory.filter((e=>e.dependent_value===f)))),[F.subcategory,f]),L=Object(n.useMemo)((()=>{var e,t,a;return[...null!=y&&y?[{title:d.e,description:d.b}]:[],...null!=I&&I?[{title:d.k,description:d.b}]:[],...null!=v&&v?[{title:d.h,description:d.b}]:[],...null!=x&&x?[{title:d.g,description:d.b}]:[],...null!=j&&j.length>0?[{title:d.i,description:null===(e=W.find((e=>`${e.value}`===j)))||void 0===e?void 0:e.text}]:[],...null!=f&&f.length>0?[{title:d.c,description:null===(t=R.find((e=>`${e.value}`===f)))||void 0===t?void 0:t.text}]:[],...null!=C&&C.length>0?[{title:d.l,description:null===(a=G.find((e=>`${e.value}`===C)))||void 0===a?void 0:a.text}]:[]]}),[f,R,y,x,v,j,W,I,C,G]);return Object(n.useEffect)((()=>{h.current&&(h.current=!1,g({category:f,destIp:y,malwareHash:x,malwareUrl:v,priority:j,sourceIp:I,subcategory:C}))}),[f,y,x,v,g,j,I,C]),l.a.createElement(l.a.Fragment,null,S&&l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(b.a,null))),e?l.a.createElement("div",{"data-test-subj":"connector-fields-sn-sir"},l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFormRow,{fullWidth:!0,label:d.a},l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiCheckbox,{id:"destIpCheckbox","data-test-subj":"destIpCheckbox",label:d.e,checked:null!=y&&y,compressed:!0,onChange:e=>N("destIp",e.target.checked)})),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiCheckbox,{id:"sourceIpCheckbox","data-test-subj":"sourceIpCheckbox",label:d.k,checked:null!=I&&I,compressed:!0,onChange:e=>N("sourceIp",e.target.checked)}))),l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiCheckbox,{id:"malwareUrlCheckbox","data-test-subj":"malwareUrlCheckbox",label:d.h,checked:null!=v&&v,compressed:!0,onChange:e=>N("malwareUrl",e.target.checked)})),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiCheckbox,{id:"malwareHashCheckbox","data-test-subj":"malwareHashCheckbox",label:d.g,checked:null!=x&&x,compressed:!0,onChange:e=>N("malwareHash",e.target.checked)}))))))),l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFormRow,{fullWidth:!0,label:d.i},l.a.createElement(c.EuiSelect,{fullWidth:!0,"data-test-subj":"prioritySelect",hasNoInitialSelection:!0,isLoading:M,disabled:M,options:W,value:null!=j?j:void 0,onChange:e=>N("priority",e.target.value)})))),l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiFormRow,{fullWidth:!0,label:d.c},l.a.createElement(c.EuiSelect,{fullWidth:!0,"data-test-subj":"categorySelect",options:R,value:null!=f?f:void 0,isLoading:M,disabled:M,hasNoInitialSelection:!0,onChange:e=>g({...t,category:e.target.value,subcategory:null})}))),l.a.createElement(c.EuiFlexItem,null,(null==G?void 0:G.length)>0?l.a.createElement(c.EuiFormRow,{fullWidth:!0,label:d.l},l.a.createElement(c.EuiSelect,{fullWidth:!0,"data-test-subj":"subcategorySelect",options:G,value:null!=C?C:"",isLoading:M,disabled:M,hasNoInitialSelection:!0,onChange:e=>N("subcategory",e.target.value)})):null))):l.a.createElement(c.EuiFlexGroup,null,l.a.createElement(c.EuiFlexItem,null,l.a.createElement(o.a,{connectorType:r.n.serviceNowSIR,title:a.name,listItems:L,isLoading:!1}))))};g.displayName="ServiceNowSIRFieldsComponent"},48:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(2),l=a.n(n),c=a(11),r=a(34),i=a.n(r),o=a(13),s=a(47);const u=i.a.span.withConfig({displayName:"StyledText",componentId:"sc-10fyrf5-0"})(["span{display:block;}"]),d=({connectorType:e,title:t,listItems:a,isLoading:r})=>{const{triggersActionsUi:i}=Object(o.d)().services,d=Object(n.useMemo)((()=>l.a.createElement(u,null,a.length>0&&a.map(((e,t)=>l.a.createElement("span",{"data-test-subj":"card-list-item",key:`${e.title}-${t}`},l.a.createElement("strong",null,`${e.title}: `),e.description))))),[a]),m=Object(n.useMemo)((()=>l.a.createElement(c.EuiIcon,{size:"xl",type:Object(s.b)(i,e)})),[e]);return l.a.createElement(l.a.Fragment,null,r&&l.a.createElement(c.EuiLoadingSpinner,{"data-test-subj":"connector-card-loading"}),!r&&l.a.createElement(c.EuiFlexGroup,{direction:"row"},l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiCard,{"data-test-subj":"connector-card",description:d,display:"plain",layout:"horizontal",paddingSize:"none",title:t,titleSize:"xs"})),l.a.createElement(c.EuiFlexItem,{grow:!1},m)))};d.displayName="ConnectorCardDisplay";const m=Object(n.memo)(d)},56:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=({connector_id:e,service_message:t,...a})=>({...a,actionId:e,...t&&{serviceMessage:t}})},65:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(2),l=a.n(n),c=a(11),r=a(1);const i=r.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningTitle",{defaultMessage:"This connector type is deprecated"}),o=r.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningDesc",{defaultMessage:"Update this connector, or create a new one."}),s=({type:e="warning"})=>l.a.createElement(c.EuiCallOut,{title:i,color:e,iconType:"alert","data-test-subj":"deprecated-connector-warning-callout"},o);s.displayName="DeprecatedCallout";const u=l.a.memo(s)},85:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=e=>e.map((e=>({value:e.value,text:e.label})))},90:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(2),l=a(19),c=a(56);var r=a(64);const i=({http:e,connector:t,toastNotifications:a,fields:i,onSuccess:o})=>{const[s,u]=Object(n.useState)(!1),[d,m]=Object(n.useState)([]),b=Object(n.useRef)(!1),p=Object(n.useRef)(new AbortController);return Object(n.useEffect)((()=>(b.current=!1,p.current.abort(),(async()=>{if(t)try{p.current=new AbortController,u(!0);const E=await async function({http:e,signal:t,connectorId:a,fields:n}){const r=await e.post(Object(l.d)(a),{body:JSON.stringify({params:{subAction:"getChoices",subActionParams:{fields:n}}}),signal:t});return Object(c.a)(r)}({http:e,signal:p.current.signal,connectorId:t.id,fields:i});var n,s;if(!b.current)if(u(!1),m(null!==(n=E.data)&&void 0!==n?n:[]),E.status&&"error"===E.status)a.addDanger({title:r.d,text:`${null!==(s=E.serviceMessage)&&void 0!==s?s:E.message}`});else if(o){var d;o(null!==(d=E.data)&&void 0!==d?d:[])}}catch(e){b.current||(u(!1),"AbortError"!==e.name&&a.addDanger({title:r.d,text:e.message}))}else u(!1)})(),()=>{b.current=!0,p.current.abort()})),[e,t,a,i]),{choices:d,isLoading:s}}}}]);