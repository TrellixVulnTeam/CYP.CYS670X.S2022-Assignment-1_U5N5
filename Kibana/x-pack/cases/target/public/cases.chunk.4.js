/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[4],Array(51).concat([function(e,t,a){e.exports=a(26)(955)},,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(2),s=a.n(n),r=a(11),i=a(1);const o=i.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningTitle",{defaultMessage:"This connector type is deprecated"}),l=i.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningDesc",{defaultMessage:"Update this connector, or create a new one."}),c=({type:e="warning"})=>s.a.createElement(r.EuiCallOut,{title:o,color:e,iconType:"alert","data-test-subj":"deprecated-connector-warning-callout"},l);c.displayName="DeprecatedCallout";const u=s.a.memo(c)},,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(26)(368)},function(e,t,a){"use strict";var n=a(160);e.exports=function(e,t){if(t||0===e.length||s.test(e)||n(e,"(")!==n(e,")"))return"<"+e+">";return e};var s=/\s/},function(e,t,a){"use strict";e.exports=function(e){var t=-1===e.indexOf('"')?'"':"'";return t+e+t}},,,,,,,,,,,,,,function(e,t,a){"use strict";e.exports=function(e){return e}},function(e,t,a){"use strict";e.exports={gfm:!0,commonmark:!1,pedantic:!1,entities:"false",setext:!1,closeAtx:!1,tableCellPadding:!0,tablePipeAlign:!0,stringLength:function(e){return e.length},incrementListMarker:!0,tightDefinitions:!1,fences:!1,fence:"`",bullet:"-",listItemIndent:"tab",rule:"*",ruleSpaces:!0,ruleRepetition:3,strong:"*",emphasis:"_"}},function(e,t,a){e.exports=a(26)(433)},function(e,t,a){"use strict";var n=a(135);e.exports=function(e){var t;if("&"!==e.charAt(0))return 0;return(t=e.split("&",2).join("&")).length-n(t).length}},function(e,t,a){"use strict";var n=a(51);e.exports=function(e,t){var a=e.split("\n"),s=a.length,r=n(" ",4*t);for(;s--;)0!==a[s].length&&(a[s]=r+a[s]);return a.join("\n")}},function(e,t,a){"use strict";e.exports=function(e,t){var a,n,s=0,r=0;if("string"!=typeof t||1!==t.length)throw new Error("Expected character");e=String(e),n=e.indexOf(t),a=n;for(;-1!==n;)s++,n===a?s>r&&(r=s):s=1,a=n+1,n=e.indexOf(t,a);return r}},function(e,t,a){"use strict";e.exports=function(e){var t=e.referenceType;if("shortcut"===t)return"";return"["+("collapsed"===t?"":e.label||e.identifier)+"]"}},function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,s,r;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(s=n;0!=s--;)if(!e(t[s],a[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(r=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(a,r[s]))return!1;for(s=n;0!=s--;){var i=r[s];if(!e(t[i],a[i]))return!1}return!0}return t!=t&&a!=a}},,,,,function(e,t){var a={utf8:{stringToBytes:function(e){return a.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(a.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],a=0;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},bytesToString:function(e){for(var t=[],a=0;a<e.length;a++)t.push(String.fromCharCode(e[a]));return t.join("")}}};e.exports=a},,,,,,,function(e,t,a){"use strict";var n=a(117),s={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,r,i,o,l,c,u=!1;t||(t={}),a=t.debug||!1;try{if(i=n(),o=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=s[t.format]||s.default;window.clipboardData.setData(r,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(c),o.selectNodeContents(c),l.addRange(o),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(o):l.removeAllRanges()),c&&document.body.removeChild(c),i()}return u}},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,a){e.exports=a(26)(1667)},function(e,t,a){"use strict";var n=a(120),s=a(81),r=a(121);function i(e){var t=n(r);t.prototype.options=s(t.prototype.options,this.data("settings"),e),this.Compiler=t}e.exports=i,i.Compiler=r},function(e,t,a){e.exports=a(26)(3117)},function(e,t,a){"use strict";var n=a(81),s=a(122);function r(e,t){this.inLink=!1,this.inTable=!1,this.tree=e,this.file=t,this.options=n(this.options),this.setOptions({})}e.exports=r;var i=r.prototype;i.enterLink=s("inLink",!1),i.enterTable=s("inTable",!1),i.enterLinkReference=a(123),i.options=a(98),i.setOptions=a(124),i.compile=a(136),i.visit=a(139),i.all=a(140),i.block=a(141),i.visitOrderedItems=a(142),i.visitUnorderedItems=a(143),i.visitors={root:a(144),text:a(145),heading:a(146),paragraph:a(147),blockquote:a(148),list:a(149),listItem:a(150),inlineCode:a(151),code:a(152),html:a(153),thematicBreak:a(154),strong:a(155),emphasis:a(156),break:a(157),delete:a(158),link:a(159),linkReference:a(161),imageReference:a(163),definition:a(164),image:a(165),table:a(166),tableCell:a(168)}},function(e,t,a){e.exports=a(26)(3120)},function(e,t,a){"use strict";var n=a(97);e.exports=function(e,t){var a=e.encode,s=e.escape,r=e.enterLink();if("shortcut"!==t.referenceType&&"collapsed"!==t.referenceType)return r;return e.escape=n,e.encode=n,function(){e.encode=a,e.escape=s,r()}}},function(e,t,a){"use strict";var n=a(81),s=a(125),r=a(98),i=a(131),o=a(97);e.exports=function(e){var t,a,d=this,m=d.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=n(e)}for(a in r)c[typeof r[a]](e,a,m[a],l[a]);(t=e.ruleRepetition)&&t<3&&u(t,"options.ruleRepetition");return d.encode=function(e){var t={};if("false"===e)return o;"true"===e&&(t.useNamedReferences=!0);"escape"===e&&(t.escapeOnly=!0,t.useNamedReferences=!0);return function(e){return s(e,t)}}(String(e.entities)),d.escape=i(e),d.options=e,d};var l={entities:{true:!0,false:!0,numbers:!0,escape:!0},bullet:{"*":!0,"-":!0,"+":!0},rule:{"-":!0,_:!0,"*":!0},listItemIndent:{tab:!0,mixed:!0,1:!0},emphasis:{_:!0,"*":!0},strong:{_:!0,"*":!0},fence:{"`":!0,"~":!0}},c={boolean:function(e,t,a){var n=e[t];null==n&&(n=a);"boolean"!=typeof n&&u(n,"options."+t);e[t]=n},string:function(e,t,a,n){var s=e[t];null==s&&(s=a);(s=String(s))in n||u(s,"options."+t);e[t]=s},number:function(e,t,a){var n=e[t];null==n&&(n=a);isNaN(n)&&u(n,"options."+t);e[t]=n},function:function(e,t,a){var n=e[t];null==n&&(n=a);"function"!=typeof n&&u(n,"options."+t);e[t]=n}};function u(e,t){throw new Error("Invalid value `"+e+"` for setting `"+t+"`")}},function(e,t,a){"use strict";var n=a(126),s=a(127),r=a(128),i=a(99),o=a(129),l=a(130);e.exports=E,E.escape=function(e){return E(e,{escapeOnly:!0,useNamedReferences:!0})};var c={}.hasOwnProperty,u=function(){var e,t={};for(e in n)t[n[e]]=e;return t}(),d=f(['"',"'","<",">","&","`"]),m=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g;function E(e,t){var a=t||{},n=a.subset,r=n?f(n):d,i=a.escapeOnly,E=a.omitOptionalSemicolons;return e=e.replace(r,h),n||i?e:e.replace(m,(function(e,t,a){return g(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,a.charCodeAt(t+2),E)})).replace(p,h);function h(e,t,n){return function(e,t,a){var n,r,i,d,m=a.useShortestReferences,p=a.omitOptionalSemicolons;(m||a.useNamedReferences)&&c.call(u,e)&&(n=function(e,t,a,n){var r="&"+e;if(a&&c.call(s,e)&&-1===l.indexOf(e)&&(!n||t&&61!==t&&!o(t)))return r;return r+";"}(u[e],t,p,a.attribute));!m&&n||(i=g(r=e.charCodeAt(0),t,p),m&&(d=b(r,t,p)).length<i.length&&(i=d));if(n&&(!m||n.length<i.length))return n;return i}(e,n.charCodeAt(t+1),a)}}function g(e,t,a){var n="&#x"+e.toString(16).toUpperCase();return a&&t&&!r(t)?n:n+";"}function b(e,t,a){var n="&#"+String(e);return a&&t&&!i(t)?n:n+";"}function f(e){return new RegExp("["+e.join("")+"]","g")}},function(e){e.exports=JSON.parse('{"nbsp":" ","iexcl":"¡","cent":"¢","pound":"£","curren":"¤","yen":"¥","brvbar":"¦","sect":"§","uml":"¨","copy":"©","ordf":"ª","laquo":"«","not":"¬","shy":"­","reg":"®","macr":"¯","deg":"°","plusmn":"±","sup2":"²","sup3":"³","acute":"´","micro":"µ","para":"¶","middot":"·","cedil":"¸","sup1":"¹","ordm":"º","raquo":"»","frac14":"¼","frac12":"½","frac34":"¾","iquest":"¿","Agrave":"À","Aacute":"Á","Acirc":"Â","Atilde":"Ã","Auml":"Ä","Aring":"Å","AElig":"Æ","Ccedil":"Ç","Egrave":"È","Eacute":"É","Ecirc":"Ê","Euml":"Ë","Igrave":"Ì","Iacute":"Í","Icirc":"Î","Iuml":"Ï","ETH":"Ð","Ntilde":"Ñ","Ograve":"Ò","Oacute":"Ó","Ocirc":"Ô","Otilde":"Õ","Ouml":"Ö","times":"×","Oslash":"Ø","Ugrave":"Ù","Uacute":"Ú","Ucirc":"Û","Uuml":"Ü","Yacute":"Ý","THORN":"Þ","szlig":"ß","agrave":"à","aacute":"á","acirc":"â","atilde":"ã","auml":"ä","aring":"å","aelig":"æ","ccedil":"ç","egrave":"è","eacute":"é","ecirc":"ê","euml":"ë","igrave":"ì","iacute":"í","icirc":"î","iuml":"ï","eth":"ð","ntilde":"ñ","ograve":"ò","oacute":"ó","ocirc":"ô","otilde":"õ","ouml":"ö","divide":"÷","oslash":"ø","ugrave":"ù","uacute":"ú","ucirc":"û","uuml":"ü","yacute":"ý","thorn":"þ","yuml":"ÿ","fnof":"ƒ","Alpha":"Α","Beta":"Β","Gamma":"Γ","Delta":"Δ","Epsilon":"Ε","Zeta":"Ζ","Eta":"Η","Theta":"Θ","Iota":"Ι","Kappa":"Κ","Lambda":"Λ","Mu":"Μ","Nu":"Ν","Xi":"Ξ","Omicron":"Ο","Pi":"Π","Rho":"Ρ","Sigma":"Σ","Tau":"Τ","Upsilon":"Υ","Phi":"Φ","Chi":"Χ","Psi":"Ψ","Omega":"Ω","alpha":"α","beta":"β","gamma":"γ","delta":"δ","epsilon":"ε","zeta":"ζ","eta":"η","theta":"θ","iota":"ι","kappa":"κ","lambda":"λ","mu":"μ","nu":"ν","xi":"ξ","omicron":"ο","pi":"π","rho":"ρ","sigmaf":"ς","sigma":"σ","tau":"τ","upsilon":"υ","phi":"φ","chi":"χ","psi":"ψ","omega":"ω","thetasym":"ϑ","upsih":"ϒ","piv":"ϖ","bull":"•","hellip":"…","prime":"′","Prime":"″","oline":"‾","frasl":"⁄","weierp":"℘","image":"ℑ","real":"ℜ","trade":"™","alefsym":"ℵ","larr":"←","uarr":"↑","rarr":"→","darr":"↓","harr":"↔","crarr":"↵","lArr":"⇐","uArr":"⇑","rArr":"⇒","dArr":"⇓","hArr":"⇔","forall":"∀","part":"∂","exist":"∃","empty":"∅","nabla":"∇","isin":"∈","notin":"∉","ni":"∋","prod":"∏","sum":"∑","minus":"−","lowast":"∗","radic":"√","prop":"∝","infin":"∞","ang":"∠","and":"∧","or":"∨","cap":"∩","cup":"∪","int":"∫","there4":"∴","sim":"∼","cong":"≅","asymp":"≈","ne":"≠","equiv":"≡","le":"≤","ge":"≥","sub":"⊂","sup":"⊃","nsub":"⊄","sube":"⊆","supe":"⊇","oplus":"⊕","otimes":"⊗","perp":"⊥","sdot":"⋅","lceil":"⌈","rceil":"⌉","lfloor":"⌊","rfloor":"⌋","lang":"〈","rang":"〉","loz":"◊","spades":"♠","clubs":"♣","hearts":"♥","diams":"♦","quot":"\\"","amp":"&","lt":"<","gt":">","OElig":"Œ","oelig":"œ","Scaron":"Š","scaron":"š","Yuml":"Ÿ","circ":"ˆ","tilde":"˜","ensp":" ","emsp":" ","thinsp":" ","zwnj":"‌","zwj":"‍","lrm":"‎","rlm":"‏","ndash":"–","mdash":"—","lsquo":"‘","rsquo":"’","sbquo":"‚","ldquo":"“","rdquo":"”","bdquo":"„","dagger":"†","Dagger":"‡","permil":"‰","lsaquo":"‹","rsaquo":"›","euro":"€"}')},function(e,t,a){e.exports=a(26)(2739)},function(e,t,a){e.exports=a(26)(2741)},function(e,t,a){e.exports=a(26)(2742)},function(e){e.exports=JSON.parse('["cent","copy","divide","gt","lt","not","para","times"]')},function(e,t,a){"use strict";var n=a(99),s=a(132),r=a(133),i=a(134),o=a(100);e.exports=function(e){return function(t,a,I){var w,A,k,S,L,R,_=this,F=e.gfm,N=e.commonmark,D=e.pedantic,M=N?[E,")"]:[E],U=I&&I.children,P=U&&U.indexOf(a),B=U&&U[P-1],V=U&&U[P+1],z=t.length,$=i(e),G=-1,H=[],W=H;w=B?O(B)&&x.test(B.value):!I||"root"===I.type||"paragraph"===I.type;for(;++G<z;){if(R=!1,"\n"===(A=t.charAt(G)))w=!0;else if(A===b||"`"===A||A===p||"["===A||"<"===A||A===d&&o(t.slice(G))>0||"]"===A&&_.inLink||F&&A===h&&t.charAt(G+1)===h||F&&"|"===A&&(_.inTable||j(t,G))||A===f&&G>0&&G<z-1&&(D||!s(t.charAt(G-1))||!s(t.charAt(G+1)))||F&&!_.inLink&&A===g&&T(H.join("")))R=!0;else if(w)if(">"===A||"#"===A||A===p||"-"===A||"+"===A)R=!0;else if(n(A)){for(L=G+1;L<z&&n(t.charAt(L));)L++;-1!==M.indexOf(t.charAt(L))&&((V=t.charAt(L+1))&&V!==u&&V!==l&&V!==c||(H.push(t.slice(G,L)),G=L,A=t.charAt(G),R=!0))}w&&!r(A)&&(w=!1),H.push(R?q(A):A)}if(U&&O(a)){if(B&&B.referenceType===v){for(G=-1,z=W.length;++G<z;)if((A=W[G])!==u&&A!==l){A!==m&&A!==g||(W[G]=q(A));break}O(V)&&G===z&&V.value.charAt(0)===m&&W.push(b)}F&&!_.inLink&&O(B)&&t.charAt(0)===g&&T(B.value.slice(-6))&&(W[0]=q(g)),O(V)&&t.charAt(z-1)===d&&0!==o(d+V.value)&&(W[W.length-1]=q(d)),V&&"link"===V.type&&t.charAt(z-1)===C&&(W[W.length-1]=q(C)),F&&O(V)&&t.charAt(z-1)===h&&V.value.charAt(0)===h&&W.splice(-1,0,b),k=O(B)&&s(B.value.slice(-1)),S=O(V)&&s(V.value.charAt(0)),1===z?t!==f||!D&&k&&S||W.unshift(b):(t.charAt(0)!==f||!D&&k&&s(t.charAt(1))||W.unshift(b),t.charAt(z-1)!==f||!D&&S&&s(t.charAt(z-2))||W.splice(-1,0,b))}return W.join("");function q(e){return-1===$.indexOf(e)?y[e]:b+e}}};var l="\t",c="\n",u=" ",d="&",m="(",p="*",E=".",g=":",b="\\",f="_",h="~",C="!",y={"<":"&lt;",":":"&#x3A;","&":"&amp;","|":"&#x7C;","~":"&#x7E;"},v="shortcut",x=/\n\s*$/;function j(e,t){var a,n=e.lastIndexOf(c,t),s=e.indexOf(c,t);for(s=-1===s?e.length:s;++n<s;)if((a=e.charAt(n))!==g&&"-"!==a&&a!==u&&"|"!==a)return!1;return!0}function O(e){return e&&"text"===e.type}function T(e){var t=e.slice(-6).toLowerCase();return"mailto"===t||"https"===t.slice(-5)||"http"===t.slice(-4)}},function(e,t,a){"use strict";e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return!/[^0-9a-z\xDF-\xFF]/.test(e.toLowerCase())}},function(e,t,a){e.exports=a(26)(288)},function(e,t,a){e.exports=a(26)(3126)},function(e,t,a){e.exports=a(26)(545)},function(e,t,a){"use strict";var n=a(137);e.exports=function(){return this.visit(n(this.tree,this.options.commonmark))}},function(e,t,a){"use strict";var n=a(138);function s(e,t){var a,n;return"text"===e.type?!e.position||(a=e.position.start,n=e.position.end,a.line!==n.line||n.column-a.column===e.value.length):t&&"blockquote"===e.type}e.exports=function(e,t){return n(e,(function(e,a,n){var r=n?n.children:[],i=a&&r[a-1];if(i&&e.type===i.type&&s(i,t)&&s(e,t))return e.value&&(i.value+=e.value),e.children&&(i.children=i.children.concat(e.children)),r.splice(a,1),i.position&&e.position&&(i.position.end=e.position.end),a})),e}},function(e,t,a){e.exports=a(26)(291)},function(e,t,a){"use strict";e.exports=function(e,t){var a=this,n=a.visitors;"function"!=typeof n[e.type]&&a.file.fail(new Error("Missing compiler for node of type `"+e.type+"`: `"+e+"`"),e);return n[e.type].call(a,e,t)}},function(e,t,a){"use strict";e.exports=function(e){var t=e.children,a=t.length,n=[],s=-1;for(;++s<a;)n[s]=this.visit(t[s],e);return n}},function(e,t,a){"use strict";e.exports=function(e){var t,a,r=this.options,i=r.fences,o=r.commonmark?"\n\n\x3c!----\x3e\n\n":"\n\n\n",l=r.tightDefinitions?n:s,c=[],u=e.children,d=u.length,m=-1;for(;++m<d;)t=a,a=u[m],t&&("list"===t.type&&("list"===a.type&&t.ordered===a.ordered||"code"===a.type&&!a.lang&&!i)?c.push(o):"definition"===t.type&&"definition"===a.type?c.push(l):c.push(s)),c.push(this.visit(a,e));return c.join("")};var n="\n",s="\n\n"},function(e,t,a){"use strict";e.exports=function(e){var t,a=this,n=a.visitors.listItem,s=a.options.incrementListMarker,r=[],i=e.start,o=e.children,l=o.length,c=-1;i=null==i?1:i;for(;++c<l;)t=(s?i+c:i)+".",r[c]=n.call(a,o[c],e,c,t);return r.join(e.spread?"\n\n":"\n")}},function(e,t,a){"use strict";e.exports=function(e){var t=this,a=t.options.bullet,n=t.visitors.listItem,s=e.children,r=s.length,i=-1,o=[];for(;++i<r;)o[i]=n.call(t,s[i],e,i,a);return o.join(e.spread?"\n\n":"\n")}},function(e,t,a){"use strict";e.exports=function(e){var t=this.block(e);"\n"!==t.charAt(t.length-1)&&(t+="\n");return t}},function(e,t,a){"use strict";e.exports=function(e,t){return this.encode(this.escape(e.value,e,t),e)}},function(e,t,a){"use strict";var n=a(51);e.exports=function(e){var t,a=this,s=e.depth,r=a.options.setext,i=a.options.closeAtx,o=a.all(e).join("");if(r&&s<3)return o+"\n"+n(1===s?"=":"-",o.length);return(t=n("#",e.depth))+" "+o+(i?" "+t:"")}},function(e,t,a){"use strict";e.exports=function(e){return this.all(e).join("")}},function(e,t,a){"use strict";e.exports=function(e){var t,a=this.block(e).split("\n"),n=[],s=a.length,r=-1;for(;++r<s;)t=a[r],n[r]=(t?" ":"")+t;return">"+n.join("\n>")}},function(e,t,a){"use strict";e.exports=function(e){return(e.ordered?this.visitOrderedItems:this.visitUnorderedItems).call(this,e)}},function(e,t,a){"use strict";var n=a(51),s=a(101);e.exports=function(e,t,a,l){var c,u,d,m=this,p=m.options.listItemIndent,E=l||m.options.bullet,g=null==e.spread||e.spread,b=e.checked,f=e.children,h=f.length,C=[],y=-1;for(;++y<h;)C[y]=m.visit(f[y],e);c=C.join(g?"\n\n":r),"boolean"==typeof b&&(c="["+(b?"x":i)+"]"+i+c);"1"===p||"mixed"===p&&-1===c.indexOf(r)?(u=E.length+1,d=i):(u=4*o((E.length+1)/4),d=n(i,u-E.length));return c?E+d+s(c,u/4).slice(u):E};var r="\n",i=" ",o=Math.ceil},function(e,t,a){"use strict";var n=a(102),s=a(51);e.exports=function(e){var t,a,i=e.value,o=s("`",n(i,"`")+1),l=o,c=o,u=i.charCodeAt(0),d=i.charCodeAt(i.length-1),m=!1;if(96===u||96===d)m=!0;else if(i.length>2&&r(u)&&r(d))for(t=1,a=i.length-1;++t<a;)if(!r(i.charCodeAt(t))){m=!0;break}m&&(l+=" ",c=" "+c);return l+i+c};function r(e){return 10===e||32===e}},function(e,t,a){"use strict";var n=a(102),s=a(51),r=a(101);e.exports=function(e,t){var a,o=this,l=e.value,c=o.options,u=c.fence,d=e.lang||"";d&&e.meta&&(d+=" "+e.meta);if(!(d=o.encode(o.escape(d,e)))&&!c.fences&&l&&l.charAt(0)!==i&&l.charAt(l.length-1)!==i)return t&&"listItem"===t.type&&"tab"!==c.listItemIndent&&c.pedantic&&o.file.fail("Cannot indent code properly. See https://git.io/fxKR8",e.position),r(l,1);"`"===u&&-1!==d.indexOf("`")&&(u="~");return(a=s(u,Math.max(n(l,u)+1,3)))+d+i+l+i+a};var i="\n"},function(e,t,a){"use strict";e.exports=function(e){return e.value}},function(e,t,a){"use strict";var n=a(51);e.exports=function(){var e=this.options,t=n(e.rule,e.ruleRepetition);return e.ruleSpaces?t.split("").join(" "):t}},function(e,t,a){"use strict";var n=a(51);e.exports=function(e){var t=n(this.options.strong,2);return t+this.all(e).join("")+t}},function(e,t,a){"use strict";e.exports=function(e){var t=this.options.emphasis,a=this.all(e).join("");this.options.pedantic&&"_"===t&&-1!==a.indexOf(t)&&(t="*");return t+a+t}},function(e,t,a){"use strict";e.exports=function(){return this.options.commonmark?"\\\n":"  \n"}},function(e,t,a){"use strict";e.exports=function(e){return"~~"+this.all(e).join("")+"~~"}},function(e,t,a){"use strict";var n=a(82),s=a(83);e.exports=function(e){var t=this,a=t.encode(e.url||"",e),i=t.enterLink(),o=t.encode(t.escape(e.url||"",e)),l=t.all(e).join("");if(i(),null==e.title&&r.test(a)&&o===l)return n(t.encode(e.url),!0);a=n(a),e.title&&(a+=" "+s(t.encode(t.escape(e.title,e),e)));return"["+l+"]("+a+")"};var r=/^[a-z][a-z+.-]+:\/?/i},function(e,t,a){e.exports=a(26)(3150)},function(e,t,a){"use strict";var n=a(162),s=a(103);e.exports=function(e){var t=this,a=e.referenceType,r=t.enterLinkReference(t,e),i=t.all(e).join("");r(),("shortcut"===a||"collapsed"===a)&&(i=n(i,e.label||e.identifier));return"["+i+"]"+s(e)}},function(e,t,a){"use strict";var n=a(100);e.exports=function(e,t){var a,r=e.length,i=t.length,o=[],l=0,c=0;for(;c<r;){for(a=c;c<r&&!s.test(e.charAt(c));)c+=1;for(o.push(e.slice(a,c));l<i&&!s.test(t.charAt(l));)l+=1;for(a=l;l<i&&s.test(t.charAt(l));)"&"===t.charAt(l)&&(l+=n(t.slice(l))),l+=1;for(o.push(t.slice(a,l));c<r&&s.test(e.charAt(c));)c+=1}return o.join("")};var s=/[-!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~_]/},function(e,t,a){"use strict";var n=a(103);e.exports=function(e){return"!["+(this.encode(e.alt,e)||"")+"]"+n(e)}},function(e,t,a){"use strict";var n=a(82),s=a(83);e.exports=function(e){var t=n(e.url);e.title&&(t+=" "+s(e.title));return"["+(e.label||e.identifier)+"]: "+t}},function(e,t,a){"use strict";var n=a(82),s=a(83);e.exports=function(e){var t=this,a=n(t.encode(e.url||"",e)),r=t.enterLink(),i=t.encode(t.escape(e.alt||"",e));r(),e.title&&(a+=" "+s(t.encode(e.title,e)));return"!["+i+"]("+a+")"}},function(e,t,a){"use strict";var n=a(167);e.exports=function(e){var t=this,a=t.options,s=a.tableCellPadding,r=a.tablePipeAlign,i=a.stringLength,o=e.children,l=o.length,c=t.enterTable(),u=[];for(;l--;)u[l]=t.all(o[l]);return c(),n(u,{align:e.align,alignDelimiters:r,padding:s,stringLength:i})}},function(e,t,a){"use strict";var n=a(51);e.exports=function(e,t){var a,u,d,m,p,E,g,b,f,h,C,y=t||{},v=!1!==y.padding,x=!1!==y.delimiterStart,j=!1!==y.delimiterEnd,O=(y.align||[]).concat(),T=!1!==y.alignDelimiters,I=[],w=y.stringLength||l,A=-1,k=e.length,S=[],L=[],R=[],_=[],F=[],N=0;for(;++A<k;){for(a=e[A],u=-1,d=a.length,R=[],_=[],d>N&&(N=d);++u<d;)D=a[u],E=null==D?"":String(D),!0===T&&(p=w(E),_[u]=p,(void 0===(m=F[u])||p>m)&&(F[u]=p)),R.push(E);S[A]=R,L[A]=_}var D;if(u=-1,d=N,"object"==typeof O&&"length"in O)for(;++u<d;)I[u]=c(O[u]);else for(C=c(O);++u<d;)I[u]=C;u=-1,d=N,R=[],_=[];for(;++u<d;)C=I[u],f="",h="",108===C?f=i:C===o?h=i:99===C&&(f=i,h=i),p=T?Math.max(1,F[u]-f.length-h.length):1,E=f+n("-",p)+h,!0===T&&((p=f.length+p+h.length)>F[u]&&(F[u]=p),_[u]=p),R[u]=E;S.splice(1,0,R),L.splice(1,0,_),A=-1,k=S.length,g=[];for(;++A<k;){for(R=S[A],_=L[A],u=-1,d=N,b=[];++u<d;)E=R[u]||"",f="",h="",!0===T&&(p=F[u]-(_[u]||0),(C=I[u])===o?f=n(r,p):99===C?p%2==0?(f=n(r,p/2),h=f):(f=n(r,p/2+.5),h=n(r,p/2-.5)):h=n(r,p)),!0===x&&0===u&&b.push("|"),!0!==v||!1===T&&""===E||!0!==x&&0===u||b.push(r),!0===T&&b.push(f),b.push(E),!0===T&&b.push(h),!0===v&&b.push(r),!0!==j&&u===d-1||b.push("|");b=b.join(""),!1===j&&(b=b.replace(s,"")),g.push(b)}return g.join("\n")};var s=/ +$/,r=" ",i=":",o=114;function l(e){return e.length}function c(e){var t="string"==typeof e?e.charCodeAt(0):0;return 76===t||108===t?108:82===t||t===o?o:67===t||99===t?99:0}},function(e,t,a){"use strict";e.exports=function(e){return this.all(e).join("").replace(n," ")};var n=/\r?\n/g},function(e,t,a){e.exports=a(26)(819)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(171);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var s=a(172);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var r=a(173);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=a(174);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=t.TIMESTAMP=t.TAGS=t.SPACE_IDS=t.KIBANA_NAMESPACE=t.EVENT_MODULE=t.EVENT_KIND=t.EVENT_ACTION=t.ECS_VERSION=t.ALERT_WORKFLOW_USER=t.ALERT_WORKFLOW_STATUS=t.ALERT_WORKFLOW_REASON=t.ALERT_UUID=t.ALERT_SYSTEM_STATUS=t.ALERT_STATUS=t.ALERT_START=t.ALERT_SEVERITY=t.ALERT_RULE_VERSION=t.ALERT_RULE_UUID=t.ALERT_RULE_UPDATED_BY=t.ALERT_RULE_UPDATED_AT=t.ALERT_RULE_TYPE_ID=t.ALERT_RULE_TYPE=t.ALERT_RULE_TO=t.ALERT_RULE_TAGS=t.ALERT_RULE_RULE_NAME_OVERRIDE=t.ALERT_RULE_RULE_ID=t.ALERT_RULE_REFERENCES=t.ALERT_RULE_PRODUCER=t.ALERT_RULE_PARAMETERS=t.ALERT_RULE_NOTE=t.ALERT_RULE_NAMESPACE=t.ALERT_RULE_NAME=t.ALERT_RULE_LICENSE=t.ALERT_RULE_INTERVAL=t.ALERT_RULE_FROM=t.ALERT_RULE_EXECUTION_UUID=t.ALERT_RULE_ENABLED=t.ALERT_RULE_DESCRIPTION=t.ALERT_RULE_CREATED_BY=t.ALERT_RULE_CREATED_AT=t.ALERT_RULE_CONSUMER=t.ALERT_RULE_CATEGORY=t.ALERT_RULE_AUTHOR=t.ALERT_RISK_SCORE=t.ALERT_REASON=t.ALERT_NAMESPACE=t.ALERT_INSTANCE_ID=t.ALERT_EVALUATION_VALUE=t.ALERT_EVALUATION_THRESHOLD=t.ALERT_END=t.ALERT_DURATION=t.ALERT_BUILDING_BLOCK_TYPE=t.ALERT_ACTION_GROUP=void 0;const n="kibana";t.KIBANA_NAMESPACE=n;const s="kibana.alert";t.ALERT_NAMESPACE=s;const r="kibana.alert.rule";t.ALERT_RULE_NAMESPACE=r;const i="ecs.version";t.ECS_VERSION=i;const o="event.action";t.EVENT_ACTION=o;const l="event.kind";t.EVENT_KIND=l;const c="event.module";t.EVENT_MODULE=c;const u="kibana.space_ids";t.SPACE_IDS=u;const d="tags";t.TAGS=d;const m="@timestamp";t.TIMESTAMP=m;const p="kibana.version";t.VERSION=p;const E="kibana.alert.action_group";t.ALERT_ACTION_GROUP=E;const g="kibana.alert.building_block_type";t.ALERT_BUILDING_BLOCK_TYPE=g;const b="kibana.alert.duration.us";t.ALERT_DURATION=b;const f="kibana.alert.end";t.ALERT_END=f;const h="kibana.alert.evaluation.threshold";t.ALERT_EVALUATION_THRESHOLD=h;const C="kibana.alert.evaluation.value";t.ALERT_EVALUATION_VALUE=C;const y="kibana.alert.instance.id";t.ALERT_INSTANCE_ID=y;const v="kibana.alert.reason";t.ALERT_REASON=v;const x="kibana.alert.risk_score";t.ALERT_RISK_SCORE=x;const j="kibana.alert.severity";t.ALERT_SEVERITY=j;const O="kibana.alert.start";t.ALERT_START=O;const T="kibana.alert.status";t.ALERT_STATUS=T;const I="kibana.alert.system_status";t.ALERT_SYSTEM_STATUS=I;const w="kibana.alert.uuid";t.ALERT_UUID=w;const A="kibana.alert.workflow_reason";t.ALERT_WORKFLOW_REASON=A;const k="kibana.alert.workflow_status";t.ALERT_WORKFLOW_STATUS=k;const S="kibana.alert.workflow_user";t.ALERT_WORKFLOW_USER=S;const L="kibana.alert.rule.author";t.ALERT_RULE_AUTHOR=L;const R="kibana.alert.rule.created_at";t.ALERT_RULE_CREATED_AT=R;const _="kibana.alert.rule.created_by";t.ALERT_RULE_CREATED_BY=_;const F="kibana.alert.rule.description";t.ALERT_RULE_DESCRIPTION=F;const N="kibana.alert.rule.enabled";t.ALERT_RULE_ENABLED=N;const D="kibana.alert.rule.execution.uuid";t.ALERT_RULE_EXECUTION_UUID=D;const M="kibana.alert.rule.from";t.ALERT_RULE_FROM=M;const U="kibana.alert.rule.interval";t.ALERT_RULE_INTERVAL=U;const P="kibana.alert.rule.license";t.ALERT_RULE_LICENSE=P;const B="kibana.alert.rule.category";t.ALERT_RULE_CATEGORY=B;const V="kibana.alert.rule.name";t.ALERT_RULE_NAME=V;const z="kibana.alert.rule.note";t.ALERT_RULE_NOTE=z;const $="kibana.alert.rule.parameters";t.ALERT_RULE_PARAMETERS=$;const G="kibana.alert.rule.references";t.ALERT_RULE_REFERENCES=G;const H="kibana.alert.rule.rule_id";t.ALERT_RULE_RULE_ID=H;const W="kibana.alert.rule.rule_name_override";t.ALERT_RULE_RULE_NAME_OVERRIDE=W;const q="kibana.alert.rule.tags";t.ALERT_RULE_TAGS=q;const K="kibana.alert.rule.to";t.ALERT_RULE_TO=K;const Y="kibana.alert.rule.type";t.ALERT_RULE_TYPE=Y;const Q="kibana.alert.rule.rule_type_id";t.ALERT_RULE_TYPE_ID=Q;const X="kibana.alert.rule.updated_at";t.ALERT_RULE_UPDATED_AT=X;const Z="kibana.alert.rule.updated_by";t.ALERT_RULE_UPDATED_BY=Z;const J="kibana.alert.rule.version";t.ALERT_RULE_VERSION=J;const ee="kibana.alert.rule.consumer";t.ALERT_RULE_CONSUMER=ee;const te="kibana.alert.rule.producer";t.ALERT_RULE_PRODUCER=te;const ae="kibana.alert.rule.uuid";t.ALERT_RULE_UUID=ae},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validFeatureIds=t.isValidFeatureId=t.getSafeSortIds=t.getEsQueryConfig=t.AlertConsumers=void 0;const n={APM:"apm",LOGS:"logs",INFRASTRUCTURE:"infrastructure",OBSERVABILITY:"observability",SIEM:"siem",UPTIME:"uptime"};t.AlertConsumers=n;const s=Object.values(n).map((e=>e));t.validFeatureIds=s;t.isValidFeatureId=e=>"string"==typeof e&&s.includes(e);t.getSafeSortIds=e=>null==e?e:e.map((e=>null==e||""===e||e>=Number.MAX_SAFE_INTEGER?"9223372036854775807":e));t.getEsQueryConfig=e=>{const t={allowLeadingWildcards:!0,queryStringOptions:{analyze_wildcard:!0},ignoreFilterIfFieldNotInIndex:!1,dateFormatTZ:"Zulu"};if(null==e)return t;return Object.keys(e).reduce(((a,n)=>{const s=n;return null!=e[s]?{[n]:e[s],...a}:{[n]:t[s],...a}}),{})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ALERT_SEVERITY_WARNING=t.ALERT_SEVERITY_CRITICAL=void 0;t.ALERT_SEVERITY_WARNING="warning";t.ALERT_SEVERITY_CRITICAL="critical"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ALERT_STATUS_RECOVERED=t.ALERT_STATUS_ACTIVE=void 0;t.ALERT_STATUS_ACTIVE="active";t.ALERT_STATUS_RECOVERED="recovered"},function(e,t,a){var n,s,r,i,o;n=a(176),s=a(109).utf8,r=a(177),i=a(109).bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?i.stringToBytes(e):s.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var a=n.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,d=-1732584194,m=271733878,p=0;p<a.length;p++)a[p]=16711935&(a[p]<<8|a[p]>>>24)|4278255360&(a[p]<<24|a[p]>>>8);a[l>>>5]|=128<<l%32,a[14+(l+64>>>9<<4)]=l;var E=o._ff,g=o._gg,b=o._hh,f=o._ii;for(p=0;p<a.length;p+=16){var h=c,C=u,y=d,v=m;c=E(c,u,d,m,a[p+0],7,-680876936),m=E(m,c,u,d,a[p+1],12,-389564586),d=E(d,m,c,u,a[p+2],17,606105819),u=E(u,d,m,c,a[p+3],22,-1044525330),c=E(c,u,d,m,a[p+4],7,-176418897),m=E(m,c,u,d,a[p+5],12,1200080426),d=E(d,m,c,u,a[p+6],17,-1473231341),u=E(u,d,m,c,a[p+7],22,-45705983),c=E(c,u,d,m,a[p+8],7,1770035416),m=E(m,c,u,d,a[p+9],12,-1958414417),d=E(d,m,c,u,a[p+10],17,-42063),u=E(u,d,m,c,a[p+11],22,-1990404162),c=E(c,u,d,m,a[p+12],7,1804603682),m=E(m,c,u,d,a[p+13],12,-40341101),d=E(d,m,c,u,a[p+14],17,-1502002290),c=g(c,u=E(u,d,m,c,a[p+15],22,1236535329),d,m,a[p+1],5,-165796510),m=g(m,c,u,d,a[p+6],9,-1069501632),d=g(d,m,c,u,a[p+11],14,643717713),u=g(u,d,m,c,a[p+0],20,-373897302),c=g(c,u,d,m,a[p+5],5,-701558691),m=g(m,c,u,d,a[p+10],9,38016083),d=g(d,m,c,u,a[p+15],14,-660478335),u=g(u,d,m,c,a[p+4],20,-405537848),c=g(c,u,d,m,a[p+9],5,568446438),m=g(m,c,u,d,a[p+14],9,-1019803690),d=g(d,m,c,u,a[p+3],14,-187363961),u=g(u,d,m,c,a[p+8],20,1163531501),c=g(c,u,d,m,a[p+13],5,-1444681467),m=g(m,c,u,d,a[p+2],9,-51403784),d=g(d,m,c,u,a[p+7],14,1735328473),c=b(c,u=g(u,d,m,c,a[p+12],20,-1926607734),d,m,a[p+5],4,-378558),m=b(m,c,u,d,a[p+8],11,-2022574463),d=b(d,m,c,u,a[p+11],16,1839030562),u=b(u,d,m,c,a[p+14],23,-35309556),c=b(c,u,d,m,a[p+1],4,-1530992060),m=b(m,c,u,d,a[p+4],11,1272893353),d=b(d,m,c,u,a[p+7],16,-155497632),u=b(u,d,m,c,a[p+10],23,-1094730640),c=b(c,u,d,m,a[p+13],4,681279174),m=b(m,c,u,d,a[p+0],11,-358537222),d=b(d,m,c,u,a[p+3],16,-722521979),u=b(u,d,m,c,a[p+6],23,76029189),c=b(c,u,d,m,a[p+9],4,-640364487),m=b(m,c,u,d,a[p+12],11,-421815835),d=b(d,m,c,u,a[p+15],16,530742520),c=f(c,u=b(u,d,m,c,a[p+2],23,-995338651),d,m,a[p+0],6,-198630844),m=f(m,c,u,d,a[p+7],10,1126891415),d=f(d,m,c,u,a[p+14],15,-1416354905),u=f(u,d,m,c,a[p+5],21,-57434055),c=f(c,u,d,m,a[p+12],6,1700485571),m=f(m,c,u,d,a[p+3],10,-1894986606),d=f(d,m,c,u,a[p+10],15,-1051523),u=f(u,d,m,c,a[p+1],21,-2054922799),c=f(c,u,d,m,a[p+8],6,1873313359),m=f(m,c,u,d,a[p+15],10,-30611744),d=f(d,m,c,u,a[p+6],15,-1560198380),u=f(u,d,m,c,a[p+13],21,1309151649),c=f(c,u,d,m,a[p+4],6,-145523070),m=f(m,c,u,d,a[p+11],10,-1120210379),d=f(d,m,c,u,a[p+2],15,718787259),u=f(u,d,m,c,a[p+9],21,-343485551),c=c+h>>>0,u=u+C>>>0,d=d+y>>>0,m=m+v>>>0}return n.endian([c,u,d,m])})._ff=function(e,t,a,n,s,r,i){var o=e+(t&a|~t&n)+(s>>>0)+i;return(o<<r|o>>>32-r)+t},o._gg=function(e,t,a,n,s,r,i){var o=e+(t&n|a&~n)+(s>>>0)+i;return(o<<r|o>>>32-r)+t},o._hh=function(e,t,a,n,s,r,i){var o=e+(t^a^n)+(s>>>0)+i;return(o<<r|o>>>32-r)+t},o._ii=function(e,t,a,n,s,r,i){var o=e+(a^(t|~n))+(s>>>0)+i;return(o<<r|o>>>32-r)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var a=n.wordsToBytes(o(e,t));return t&&t.asBytes?a:t&&t.asString?i.bytesToString(a):n.bytesToHex(a)}},function(e,t){var a,n;a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],a=0,n=0;a<e.length;a++,n+=8)t[n>>>5]|=e[a]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],a=0;a<32*e.length;a+=8)t.push(e[a>>>5]>>>24-a%32&255);return t},bytesToHex:function(e){for(var t=[],a=0;a<e.length;a++)t.push((e[a]>>>4).toString(16)),t.push((15&e[a]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var s=e[n]<<16|e[n+1]<<8|e[n+2],r=0;r<4;r++)8*n+6*r<=8*e.length?t.push(a.charAt(s>>>6*(3-r)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,s=0;n<e.length;s=++n%4)0!=s&&t.push((a.indexOf(e.charAt(n-1))&Math.pow(2,-2*s+8)-1)<<2*s|a.indexOf(e.charAt(n))>>>6-2*s);return t}},e.exports=n},function(e,t){function a(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(a(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&a(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,a){"use strict";const n=a(179);e.exports=(e,t={})=>{if(!Number.isFinite(e))throw new TypeError("Expected a finite number");t.colonNotation&&(t.compact=!1,t.formatSubMilliseconds=!1,t.separateMilliseconds=!1,t.verbose=!1),t.compact&&(t.secondsDecimalDigits=0,t.millisecondsDecimalDigits=0);const a=[],s=(e,n,s,r)=>{if(!(0!==a.length&&t.colonNotation||0!==e||t.colonNotation&&"m"===s))return;let i,o;if(r=(r||e||"0").toString(),t.colonNotation){i=a.length>0?":":"",o="";const e=r.includes(".")?r.split(".")[0].length:r.length,t=a.length>0?2:1;r="0".repeat(Math.max(0,t-e))+r}else i="",o=t.verbose?" "+(l=n,1===e?l:`${l}s`):s;var l;a.push(i+r+o)};if(("number"==typeof t.secondsDecimalDigits?t.secondsDecimalDigits:1)<1){const t=1e3-e%1e3;t<500&&(e+=t)}if(e>=59950&&!t.separateMilliseconds&&!t.formatSubMilliseconds){const t=60-e%60;t<=50&&(e+=t)}const r=n(e);if(s(Math.trunc(r.days/365),"year","y"),s(r.days%365,"day","d"),s(r.hours,"hour","h"),s(r.minutes,"minute","m"),t.separateMilliseconds||t.formatSubMilliseconds||e<1e3)if(s(r.seconds,"second","s"),t.formatSubMilliseconds)s(r.milliseconds,"millisecond","ms"),s(r.microseconds,"microsecond","µs"),s(r.nanoseconds,"nanosecond","ns");else{const e=r.milliseconds+r.microseconds/1e3+r.nanoseconds/1e6,a="number"==typeof t.millisecondsDecimalDigits?t.millisecondsDecimalDigits:0,n=e>=1?Math.round(e):Math.ceil(e),i=a?e.toFixed(a):n;s(parseFloat(i,10),"millisecond","ms",i)}else{const a=e/1e3%60,n="number"==typeof t.secondsDecimalDigits?t.secondsDecimalDigits:1,r=a.toFixed(n),i=t.keepDecimalsOnWholeSeconds?r:r.replace(/\.0+$/,"");s(parseFloat(i,10),"second","s",i)}return 0===a.length?"0"+(t.verbose?" milliseconds":"ms"):t.compact?a[0]:"number"==typeof t.unitCount?a.slice(0,Math.max(t.unitCount,1)).join(" "):t.colonNotation?a.join(""):a.join(" ")}},function(e,t,a){"use strict";e.exports=e=>{if("number"!=typeof e)throw new TypeError("Expected a number");const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}}},,,,function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Js}));var n=a(2),s=a.n(n),r=a(15),i=a(10),o=a(13),l=a(46),c=a(16),u=a(3);const d={actionLicense:null,isLoading:!0,isError:!1},m=u.n.jira,p=()=>{const[e,t]=Object(n.useState)(d),a=Object(o.g)(),s=Object(n.useRef)(!1),r=Object(n.useRef)(new AbortController),i=Object(n.useCallback)((async()=>{try{s.current=!1,r.current.abort(),r.current=new AbortController,t({...d,isLoading:!0});const a=await Object(l.b)(r.current.signal);var e;if(!s.current)t({actionLicense:null!==(e=a.find((e=>e.id===m)))&&void 0!==e?e:null,isLoading:!1,isError:!1})}catch(e){s.current||("AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.d}),t({actionLicense:null,isLoading:!1,isError:!0}))}}),[e]);return Object(n.useEffect)((()=>(i(),()=>{s.current=!0,r.current.abort()})),[]),{...e}};var E=a(18),g=a(1);const b={[i.a.cases]:g.i18n.translate("xpack.cases.breadcrumbs.all_cases",{defaultMessage:"Cases"}),[i.a.casesCreate]:g.i18n.translate("xpack.cases.breadcrumbs.create_case",{defaultMessage:"Create"}),[i.a.casesConfigure]:g.i18n.translate("xpack.cases.breadcrumbs.configure_cases",{defaultMessage:"Configure"})};const f=()=>{const{chrome:{docTitle:e,setBreadcrumbs:t},application:{navigateToUrl:a}}=Object(o.d)().services;return Object(n.useCallback)((n=>{e.change(function(e){return e.map((({text:e})=>{var t;return null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:""})).reverse()}(n)),t(n.map((e=>{const{href:t,onClick:n}=e;return{...e,...t&&!n?{onClick:e=>{e&&e.preventDefault(),a(t)}}:{}}})))}),[e,t,a])},h=e=>{const{appId:t,appTitle:a}=Object(E.a)(),{getAppUrl:s}=Object(o.e)(t),r=f();Object(n.useEffect)((()=>{r([{text:a,href:s()},{text:b[i.a.cases],...e!==i.a.cases?{href:s({deepLinkId:i.a.cases})}:{}},...e!==i.a.cases?[{text:b[e]}]:[]])}),[e,a,s,r])};var C=a(11),y=a(36),v=a(21);const x=g.i18n.translate("xpack.cases.caseView.lockedIncidentDesc",{defaultMessage:"No update is required"}),j=g.i18n.translate("xpack.cases.caseView.pushToService.configureConnector",{defaultMessage:"To create and update a case in an external system, select a connector."}),O=g.i18n.translate("xpack.cases.caseView.pushToServiceDisableByConfigTitle",{defaultMessage:"Enable external service in Kibana configuration file"}),T=g.i18n.translate("xpack.cases.caseView.pushToServiceDisableByLicenseTitle",{defaultMessage:"Upgrade to an appropriate license"}),I=g.i18n.translate("xpack.cases.caseView.cloudDeploymentLink",{defaultMessage:"cloud deployment"}),w="closed-case-push-error",A=()=>({id:"license-error",title:"",description:s.a.createElement(y.FormattedMessage,{defaultMessage:"Opening cases in external systems is available when you have the {appropriateLicense}, are using a {cloud}, or are testing out a Free Trial.",id:"xpack.cases.caseView.pushToServiceDisableByLicenseDescription",values:{appropriateLicense:s.a.createElement(C.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},v.w),cloud:s.a.createElement(C.EuiLink,{href:"https://www.elastic.co/cloud/elasticsearch-service/signup",target:"_blank"},I)}})}),k=()=>({id:"kibana-config-error",title:O,description:s.a.createElement(y.FormattedMessage,{defaultMessage:"The kibana.yml file is configured to only allow specific connectors. To enable opening a case in external systems, add .[actionTypeId] (ex: .servicenow | .jira)  to the xpack.actions.enabledActiontypes setting. For more information, see {link}.",id:"xpack.cases.caseView.pushToServiceDisableByConfigDescription",values:{link:s.a.createElement(C.EuiLink,{href:"#",target:"_blank"},"coming soon...")}})});var S=a(111),L=a(34),R=a.n(L),_=a(58),F=a.n(_),N=a(95);const D=R.a.div.withConfig({displayName:"Wrapper",componentId:"sc-1pq4ix7-0"})(["",""],(({theme:e})=>Object(L.css)(["margin-top:",";.casesSubtitle__item{color:",";font-size:",";line-height:",";@media only screen and (min-width:","){display:inline-block;margin-right:",";&:last-child{margin-right:0;}}}"],e.eui.euiSizeS,e.eui.euiTextSubduedColor,e.eui.euiFontSizeXS,e.eui.euiLineHeight,e.eui.euiBreakpoints.s,e.eui.euiSize)));D.displayName="Wrapper";const M=s.a.memo((({children:e,dataTestSubj:t="header-panel-subtitle"})=>"string"==typeof e?s.a.createElement("p",{className:"casesSubtitle__item casesSubtitle__item--text","data-test-subj":t},e):s.a.createElement("div",{className:"casesSubtitle__item casesSubtitle__item--node","data-test-subj":t},e)));M.displayName="SubtitleItem";const U=s.a.memo((({items:e})=>s.a.createElement(D,{className:"casesSubtitle"},Array.isArray(e)?e.map(((e,t)=>s.a.createElement(M,{key:t},e))):s.a.createElement(M,null,e))));U.displayName="Subtitle";var P=a(7),B=a(69);const V=R()(C.EuiBetaBadge).withConfig({displayName:"StyledEuiBetaBadge",componentId:"sc-t8nomf-0"})(["vertical-align:middle;"]);V.displayName="StyledEuiBetaBadge";const z=R()(C.EuiBadge).withConfig({displayName:"Badge",componentId:"sc-t8nomf-1"})(["letter-spacing:0;"]);z.displayName="Badge";const $=({title:e,badgeOptions:t})=>s.a.createElement(C.EuiTitle,{size:"l"},s.a.createElement("h1",{"data-test-subj":"header-page-title"},Object(P.isString)(e)?s.a.createElement(B.a,{text:e}):e,t&&s.a.createElement(s.a.Fragment,null," ",t.beta?s.a.createElement(V,{label:t.text,tooltipContent:t.tooltip,tooltipPosition:"bottom"}):s.a.createElement(z,{color:"hollow",title:""},t.text))));$.displayName="Title";const G=s.a.memo($),H=g.i18n.translate("xpack.cases.header.editableTitle.save",{defaultMessage:"Save"}),W=g.i18n.translate("xpack.cases.header.editableTitle.cancel",{defaultMessage:"Cancel"}),q=e=>g.i18n.translate("xpack.cases.header.editableTitle.editButtonAria",{values:{title:e},defaultMessage:"You can edit {title} by clicking"}),K=R.a.header.attrs({className:"casesHeaderPage"}).withConfig({displayName:"Header",componentId:"sc-1hwri6s-0"})(["",""],(({border:e,theme:t})=>Object(L.css)(["margin-bottom:",";",""],t.eui.euiSizeL,e&&Object(L.css)(["border-bottom:",";padding-bottom:",";.euiProgress{top:",";}"],t.eui.euiBorderThin,t.eui.paddingSizes.l,t.eui.paddingSizes.l))));K.displayName="Header";const Y=R()(C.EuiFlexItem).withConfig({displayName:"FlexItem",componentId:"sc-1hwri6s-1"})(["display:block;"]);Y.displayName="FlexItem";const Q=R.a.div.attrs({className:"casesHeaderPage__linkBack"}).withConfig({displayName:"LinkBack",componentId:"sc-1hwri6s-2"})(["",""],(({theme:e})=>Object(L.css)(["font-size:",";line-height:",";margin-bottom:",";"],e.eui.euiFontSizeXS,e.eui.euiLineHeight,e.eui.euiSizeS)));Q.displayName="LinkBack";R()(C.EuiBadge).withConfig({displayName:"Badge",componentId:"sc-1hwri6s-3"})(["letter-spacing:0;"]).displayName="Badge";const X=({showBackButton:e=!1,badgeOptions:t,border:a,children:r,isLoading:o,subtitle:l,subtitle2:c,title:u,titleNode:d,...m})=>{const{getAllCasesUrl:p,navigateToAllCases:E}=Object(i.i)(),g=Object(n.useCallback)((e=>{e&&e.preventDefault(),E()}),[E]);return s.a.createElement(K,F()({border:a},m),s.a.createElement(C.EuiFlexGroup,{alignItems:"center"},s.a.createElement(Y,null,e&&s.a.createElement(Q,null,s.a.createElement(N.a,{dataTestSubj:"backToCases",onClick:g,href:p(),iconType:"arrowLeft"},v.f)),d||s.a.createElement(G,{title:u,badgeOptions:t}),l&&s.a.createElement(U,{"data-test-subj":"header-page-subtitle",items:l}),c&&s.a.createElement(U,{"data-test-subj":"header-page-subtitle-2",items:c}),a&&o&&s.a.createElement(C.EuiProgress,{size:"xs",color:"accent"})),r&&s.a.createElement(Y,{"data-test-subj":"header-page-supplements",grow:!1},r)))};X.displayName="HeaderPage";const Z=s.a.memo(X);var J=a(50),ee=a(57);const te={countClosedCases:null,countInProgressCases:null,countOpenCases:null,isLoading:!0,isError:!1},ae=({refresh:e})=>{const{countOpenCases:t,countInProgressCases:a,countClosedCases:r,isLoading:i,fetchCasesStatus:d}=(()=>{const{owner:e}=Object(E.a)(),[t,a]=Object(n.useState)(te),s=Object(o.g)(),r=Object(n.useRef)(!1),i=Object(n.useRef)(new AbortController),u=Object(n.useCallback)((async()=>{try{r.current=!1,i.current.abort(),i.current=new AbortController,a({...te,isLoading:!0});const t=await Object(l.f)(i.current.signal,e);r.current||a({...t,isLoading:!1,isError:!1})}catch(e){r.current||("AbortError"!==e.name&&s.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.d}),a({countClosedCases:0,countInProgressCases:0,countOpenCases:0,isLoading:!1,isError:!0}))}}),[]);return Object(n.useEffect)((()=>(u(),()=>{r.current=!0,i.current.abort()})),[]),{...t,fetchCasesStatus:u}})();return Object(n.useEffect)((()=>{null!=e&&d()}),[d,e]),s.a.createElement(C.EuiFlexGroup,{responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(ee.a,{dataTestSubj:"openStatsHeader",caseCount:t,caseStatus:u.h.open,isLoading:i})),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(ee.a,{dataTestSubj:"inProgressStatsHeader",caseCount:a,caseStatus:u.h["in-progress"],isLoading:i})),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(ee.a,{dataTestSubj:"closedStatsHeader",caseCount:r,caseStatus:u.h.closed,isLoading:i})))};ae.displayName="Count";var ne=a(22),se=a(49);const re=R()(C.EuiFlexGroup).withConfig({displayName:"ButtonFlexGroup",componentId:"sc-1l550c5-0"})(["",""],(({theme:e})=>Object(L.css)(["&{@media only screen and (max-width:","){flex-direction:column;}}"],e.eui.euiBreakpoints.s))),ie=({actionsErrors:e})=>{const{getCreateCaseUrl:t,navigateToCreateCase:a}=Object(i.m)(),r=Object(n.useCallback)((e=>{e.preventDefault(),a()}),[a]);return s.a.createElement(re,{responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(se.b,{label:J.g,isDisabled:!Object(ne.isEmpty)(e),showToolTip:!Object(ne.isEmpty)(e),msgTooltip:Object(ne.isEmpty)(e)?s.a.createElement(s.a.Fragment,null):s.a.createElement(s.a.Fragment,null,e[0].description),titleTooltip:Object(ne.isEmpty)(e)?"":e[0].title})),s.a.createElement(C.EuiFlexItem,null,s.a.createElement(se.d,{fill:!0,onClick:r,href:t(),iconType:"plusInCircle","data-test-subj":"createNewCaseBtn"},J.i)))};ie.displayName="NavButtons";const oe=R()(C.EuiFlexItem).withConfig({displayName:"FlexItemDivider",componentId:"sc-mzjkog-0"})(["",""],(({theme:e})=>Object(L.css)([".euiFlexGroup--gutterMedium > &.euiFlexItem{border-right:",";padding-right:",";margin-right:",";@media only screen and (max-width:","){padding-right:0;border-right:0;margin-right:0;}}"],e.eui.euiBorderThin,e.eui.euiSize,e.eui.euiSize,e.eui.euiBreakpoints.l))),le=({actionsErrors:e,refresh:t,userCanCrud:a})=>s.a.createElement(Z,{title:J.s,border:!0},s.a.createElement(C.EuiFlexGroup,{alignItems:"center",gutterSize:"m",wrap:!0,"data-test-subj":"all-cases-header"},a?s.a.createElement(s.a.Fragment,null,s.a.createElement(oe,null,s.a.createElement(ae,{refresh:t})),s.a.createElement(C.EuiFlexItem,null,s.a.createElement(ie,{actionsErrors:e}))):s.a.createElement(C.EuiFlexItem,null,s.a.createElement(ae,{refresh:t}))));le.displayName="CasesTableHeader";const ce=()=>{const{userCanCrud:e}=Object(E.a)(),[t,a]=Object(n.useState)(0);h(i.a.cases);const r=Object(n.useCallback)((()=>{a((e=>e+1))}),[a]),{actionLicense:o}=p(),l=Object(n.useMemo)((()=>(e=>{let t=[];return null==e||e.enabledInLicense||(t=[...t,A()]),null==e||e.enabledInConfig||(t=[...t,k()]),t})(o)),[o]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(le,{actionsErrors:l,refresh:t,userCanCrud:e}),s.a.createElement(S.a,{doRefresh:r}))};ce.displayName="AllCases";const ue=(e,t)=>{var a;switch(t.type){case"FETCH_INIT":return{...e,isLoading:!(null!==(a=t.payload)&&void 0!==a&&a.silent),isError:!1};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,data:t.payload.case,resolveOutcome:t.payload.outcome,resolveAliasId:t.payload.aliasTargetId};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};case"UPDATE_CASE":return{...e,data:t.payload};default:return e}},de=g.i18n.translate("xpack.cases.caseView.actionLabel.addedField",{defaultMessage:"added"}),me=g.i18n.translate("xpack.cases.caseView.actionLabel.changededField",{defaultMessage:"changed"}),pe=g.i18n.translate("xpack.cases.caseView.actionLabel.enabledSetting",{defaultMessage:"enabled"}),Ee=g.i18n.translate("xpack.cases.caseView.actionLabel.disableSetting",{defaultMessage:"disabled"}),ge=g.i18n.translate("xpack.cases.caseView.actionLabel.removedThirdParty",{defaultMessage:"removed external incident management system"}),be=g.i18n.translate("xpack.cases.caseView.actionLabel.editedField",{defaultMessage:"edited"}),fe=g.i18n.translate("xpack.cases.caseView.actionLabel.removedField",{defaultMessage:"removed"}),he=g.i18n.translate("xpack.cases.caseView.actionLabel.pushedNewIncident",{defaultMessage:"pushed as new incident"}),Ce=g.i18n.translate("xpack.cases.caseView.actionLabel.updateIncident",{defaultMessage:"updated incident"}),ye=g.i18n.translate("xpack.cases.caseView.actionLabel.addDescription",{defaultMessage:"added description"}),ve=g.i18n.translate("xpack.cases.caseView.edit.description",{defaultMessage:"Edit description"}),xe=g.i18n.translate("xpack.cases.caseView.edit.quote",{defaultMessage:"Quote"}),je=g.i18n.translate("xpack.cases.caseView.edit.comment",{defaultMessage:"Edit comment"}),Oe=(g.i18n.translate("xpack.cases.caseView.actionLabel.on",{defaultMessage:"on"}),g.i18n.translate("xpack.cases.caseView.statusLabel",{defaultMessage:"Status"})),Te=g.i18n.translate("xpack.cases.caseView.case",{defaultMessage:"case"}),Ie=g.i18n.translate("xpack.cases.caseView.comment",{defaultMessage:"comment"}),we=g.i18n.translate("xpack.cases.caseView.caseRefresh",{defaultMessage:"Refresh case"}),Ae=(g.i18n.translate("xpack.cases.caseView.activity",{defaultMessage:"Activity"}),g.i18n.translate("xpack.cases.caseView.fieldChanged",{defaultMessage:"changed connector field"}),g.i18n.translate("xpack.cases.caseView.syncAlertsLabel",{defaultMessage:"Sync alerts"})),ke=g.i18n.translate("xpack.cases.caseView.syncAlertsLowercaseLabel",{defaultMessage:"sync alerts"}),Se=g.i18n.translate("xpack.cases.caseView.doesNotExist.title",{defaultMessage:"This case does not exist"}),Le=e=>g.i18n.translate("xpack.cases.caseView.doesNotExist.description",{values:{caseId:e},defaultMessage:"A case with id {caseId} could not be found. This likely means the case has been deleted, or the id is incorrect."}),Re=g.i18n.translate("xpack.cases.caseView.doesNotExist.button",{defaultMessage:"Back to Cases"});var _e=a(78);const Fe=s.a.memo((({caseId:e})=>{const{navigateToAllCases:t}=Object(i.i)();return s.a.createElement(C.EuiEmptyPrompt,{iconColor:"default",iconType:"addDataApp",title:s.a.createElement("h2",null,Se),titleSize:"xs",body:s.a.createElement("p",null,Le(e)),actions:s.a.createElement(C.EuiButton,{onClick:t,size:"s",color:"primary",fill:!0},Re)})}));Fe.displayName="DoesNotExist";var Ne=a(4);const De=R()(C.EuiButtonIcon).withConfig({displayName:"MyEuiButtonIcon",componentId:"sc-4bg36g-0"})(["",""],(({theme:e})=>Object(L.css)(["margin-left:",";"],e.eui.euiSize))),Me=R()(C.EuiLoadingSpinner).withConfig({displayName:"MySpinner",componentId:"sc-4bg36g-1"})(["",""],(({theme:e})=>Object(L.css)(["margin-left:",";"],e.eui.euiSize))),Ue=({userCanCrud:e=!1,onSubmit:t,isLoading:a,title:r})=>{const[i,o]=Object(n.useState)(!1),[l,c]=Object(n.useState)([]),[u,d]=Object(n.useState)(r),m=Object(n.useCallback)((()=>{o(!1),c([]),d(r)}),[r]),p=Object(n.useCallback)((()=>o(!0)),[]),E=Object(n.useCallback)((()=>{u.length>Ne.u?c([v.z("title",Ne.u)]):(u!==r&&t(u),o(!1))}),[u,t,r]),g=Object(n.useCallback)((e=>d(e.target.value)),[]),b=l.length>0;return i?s.a.createElement(C.EuiFormRow,{isInvalid:b,error:l,fullWidth:!0},s.a.createElement(C.EuiFlexGroup,{alignItems:"center",gutterSize:"m",justifyContent:"spaceBetween"},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiFieldText,{onChange:g,value:`${u}`,"data-test-subj":"editable-title-input-field"})),s.a.createElement(C.EuiFlexGroup,{gutterSize:"none",responsive:!1,wrap:!0},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiButton,{color:"success","data-test-subj":"editable-title-submit-btn",fill:!0,iconType:"save",onClick:E,size:"s"},H)),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiButtonEmpty,{"data-test-subj":"editable-title-cancel-btn",iconType:"cross",onClick:m,size:"s"},W))),s.a.createElement(C.EuiFlexItem,null))):s.a.createElement(C.EuiFlexGroup,{alignItems:"center",gutterSize:"none",responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(G,{title:r})),s.a.createElement(C.EuiFlexItem,{grow:!1},a&&s.a.createElement(Me,{"data-test-subj":"editable-title-loading"}),!a&&e&&s.a.createElement(De,{"aria-label":q(r),iconType:"pencil",onClick:p,"data-test-subj":"editable-title-edit-icon"})))};Ue.displayName="EditableTitle";const Pe=s.a.memo(Ue),Be=g.i18n.translate("xpack.cases.caseView.editTagsLinkAria",{defaultMessage:"click to edit tags"});var Ve=a(45);const ze={tags:a(86).b};var $e=a(71);const Ge=R()(C.EuiBadge).withConfig({displayName:"MyEuiBadge",componentId:"sc-1rutbhv-0"})(["max-width:200px;"]),He=({tags:e,color:t="default",gutterSize:a})=>s.a.createElement(s.a.Fragment,null,e.length>0&&s.a.createElement(C.EuiBadgeGroup,{gutterSize:a},e.map((e=>s.a.createElement(Ge,{"data-test-subj":`tag-${e}`,color:t,key:e},e)))));He.displayName="Tags";const We=Object(n.memo)(He),qe=Object(Ve.i)({component:Ve.b}),Ke=R()(C.EuiFlexGroup).withConfig({displayName:"MyFlexGroup",componentId:"sc-7s25zb-0"})(["",""],(({theme:e})=>Object(L.css)(["width:100%;margin-top:",";p{font-size:",";}"],e.eui.euiSizeM,e.eui.euiSizeM))),Ye=R()(C.EuiFlexGroup).withConfig({displayName:"ColumnFlexGroup",componentId:"sc-7s25zb-1"})(["",""],(({theme:e})=>Object(L.css)(["&{max-width:100%;@media only screen and (max-width:","){flex-direction:row;}}"],e.eui.euiBreakpoints.m))),Qe=s.a.memo((({userCanCrud:e=!0,isLoading:t,onSubmit:a,tags:r})=>{const i={tags:r},{form:o}=Object(Ve.j)({defaultValue:i,options:{stripEmptyFields:!1},schema:ze}),{submit:l}=o,[c,u]=Object(n.useState)(!1),d=Object(n.useCallback)((async()=>{const{isValid:e,data:t}=await l();e&&t.tags&&(a(t.tags),u(!1))}),[a,l]),{tags:m}=Object($e.a)(),[p,E]=Object(n.useState)(m.map((e=>({label:e}))));return Object(n.useEffect)((()=>E(m.map((e=>({label:e}))))),[m]),s.a.createElement(C.EuiText,null,s.a.createElement(C.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement("h4",null,v.U)),t&&s.a.createElement(C.EuiLoadingSpinner,{"data-test-subj":"tag-list-loading"}),!t&&e&&s.a.createElement(C.EuiFlexItem,{"data-test-subj":"tag-list-edit",grow:!1},s.a.createElement(C.EuiButtonIcon,{"data-test-subj":"tag-list-edit-button","aria-label":Be,iconType:"pencil",onClick:u.bind(null,!0)}))),s.a.createElement(C.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(Ke,{gutterSize:"none","data-test-subj":"case-tags"},0===r.length&&!c&&s.a.createElement("p",{"data-test-subj":"no-tags"},v.D),!c&&s.a.createElement(C.EuiFlexItem,null,s.a.createElement(We,{tags:r,color:"hollow"})),c&&s.a.createElement(Ye,{"data-test-subj":"edit-tags",direction:"column"},s.a.createElement(C.EuiFlexItem,null,s.a.createElement(Ve.c,{form:o},s.a.createElement(qe,{path:"tags",componentProps:{idAria:"caseTags","data-test-subj":"caseTags",euiFieldProps:{fullWidth:!0,placeholder:"",options:p,noSuggestions:!1}}}),s.a.createElement(Ve.d,{pathsToWatch:"tags"},(({tags:e})=>{const t=p.map((e=>e.label)),a=e.reduce(((e,t)=>e.includes(t)?e:[...e,t]),t);return Object(ne.isEqual)(t,a)||E(a.map((e=>({label:e})))),null})))),s.a.createElement(C.EuiFlexItem,null,s.a.createElement(C.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiButton,{color:"success","data-test-subj":"edit-tags-submit",fill:!0,iconType:"save",onClick:d,size:"s"},v.N)),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiButtonEmpty,{"data-test-subj":"edit-tags-cancel",iconType:"cross",onClick:u.bind(null,!1),size:"s"},v.g)))))))}));Qe.displayName="TagList";var Xe=a(68),Ze=a(66);const{emptyField:Je}=Ve.g,et={comment:{type:Ve.a.TEXTAREA,validations:[{validator:Je(v.m)}]}};var tt=a(96);const at=R()(C.EuiLoadingSpinner).withConfig({displayName:"MySpinner",componentId:"sc-1b6ejct-0"})(["position:absolute;top:50%;left:50%;"]),nt={comment:""},st=s.a.memo(Object(n.forwardRef)((({id:e,caseId:t,userCanCrud:a,onCommentPosted:r,onCommentSaving:i,showLoading:o=!0,statusActionButton:l},c)=>{const d=Object(n.useRef)(null),[m,p]=Object(n.useState)(!1),{owner:g}=Object(E.a)(),{isLoading:b,postComment:f}=Object(Xe.a)(),{form:h}=Object(Ve.j)({defaultValue:nt,options:{stripEmptyFields:!1},schema:et}),y="comment",{setFieldValue:x,reset:j,submit:O}=h,[{comment:T}]=Object(Ve.l)({form:h,watch:[y]}),I=Object(n.useCallback)((e=>{const t=`> ${e.replace(new RegExp("\r?\n","g"),"\n> ")} \n\n`;x(y,`${T}${T.length>0?"\n\n":""}${t}`),p(!0)}),[T,x]),w=Object(n.useCallback)((e=>{x(y,e)}),[x]);Object(n.useImperativeHandle)(c,(()=>({addQuote:I,setComment:w,editor:d.current})));const A=Object(n.useCallback)((async()=>{const{isValid:e,data:a}=await O();e&&(null!=i&&i(),f({caseId:t,data:{...a,type:u.m.user,owner:g[0]},updateCase:r}),j())}),[O,i,f,t,g,r,j]);return Object(n.useEffect)((()=>{var e,t;Object(P.isEmpty)(T)||(null===(e=d.current)||void 0===e||null===(t=e.textarea)||void 0===t||t.focus());m&&p(!1)}),[m]),s.a.createElement("span",{id:"add-comment-permLink"},b&&o&&s.a.createElement(at,{"data-test-subj":"loading-spinner",size:"xl"}),a&&s.a.createElement(Ve.c,{form:h},s.a.createElement(Ve.e,{path:y,component:Ze.a,componentProps:{ref:d,id:e,idAria:"caseComment",isDisabled:b,dataTestSubj:"add-comment",placeholder:v.c,bottomRightContent:s.a.createElement(C.EuiFlexGroup,{gutterSize:"s",alignItems:"flexEnd",responsive:!1,wrap:!0},l&&s.a.createElement(C.EuiFlexItem,{grow:!1},l),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiButton,{"data-test-subj":"submit-comment",fill:!0,iconType:"plusInCircle",isDisabled:b,isLoading:b,onClick:A},v.b)))}}),s.a.createElement(tt.a,{fieldName:"comment"})))})));st.displayName="AddComment";const rt=e=>g.i18n.translate("xpack.cases.caseView.requiredUpdateToExternalService",{values:{externalService:e},defaultMessage:"Requires update to { externalService } incident"}),it=g.i18n.translate("xpack.cases.caseView.copyCommentLinkAria",{defaultMessage:"Copy reference link"}),ot=g.i18n.translate("xpack.cases.caseView.moveToCommentAria",{defaultMessage:"Highlight the referenced comment"}),lt=g.i18n.translate("xpack.cases.caseView.alertCommentLabelTitle",{defaultMessage:"added an alert from"}),ct=(g.i18n.translate("xpack.cases.caseView.generatedAlertCommentLabelTitle",{defaultMessage:"were added from"}),g.i18n.translate("xpack.cases.caseView.showAlertTooltip",{defaultMessage:"Show alert details"})),ut=g.i18n.translate("xpack.cases.caseView.unknownRule.label",{defaultMessage:"Unknown rule"}),dt=g.i18n.translate("xpack.cases.caseView.isolatedHost",{defaultMessage:"submitted isolate request on host"}),mt=g.i18n.translate("xpack.cases.caseView.releasedHost",{defaultMessage:"submitted release request on host"}),pt=({username:e,fullName:t,size:a="m"})=>{const n=t&&t.length>0?t:null!=e?e:v.Z;return s.a.createElement(C.EuiAvatar,{name:n,"data-test-subj":"user-action-avatar",size:a})};pt.displayName="UserActionAvatar";const Et=Object(n.memo)(pt),gt=({username:e,fullName:t})=>{var a;const n=null!==(a=Object(ne.isEmpty)(t)?e:t)&&void 0!==a?a:v.Z;return s.a.createElement(C.EuiToolTip,{position:"top",content:s.a.createElement("p",null,n),"data-test-subj":"user-action-username-tooltip"},s.a.createElement("strong",null,null!=e?e:v.Z.toLowerCase()))};gt.displayName="UserActionUsername";const bt=Object(n.memo)(gt);var ft=a(91);const ht=({createdAt:e,updatedAt:t})=>s.a.createElement(s.a.Fragment,null,s.a.createElement(ft.a,{date:new Date(e)},s.a.createElement(y.FormattedRelative,{"data-test-subj":"user-action-title-creation-relative-time",value:e})),t&&s.a.createElement(C.EuiTextColor,{color:"subdued"}," (",be," ",s.a.createElement(ft.a,{date:new Date(t)},s.a.createElement(y.FormattedRelative,{"data-test-subj":"user-action-title-edited-relative-time",value:t})),")"));ht.displayName="UserActionTimestamp";const Ct=Object(n.memo)(ht),yt=({username:e,fullName:t})=>s.a.createElement(C.EuiFlexGroup,{responsive:!1,alignItems:"center",gutterSize:"s","data-test-subj":"user-action-username-with-avatar"},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(Et,{username:e,fullName:t,size:"s"})),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(bt,{username:e,fullName:t})));yt.displayName="UserActionUsernameWithAvatar";const vt=Object(n.memo)(yt);var xt=a(116),jt=a.n(xt);const Ot=({id:e})=>{const{getCaseViewUrl:t}=Object(i.j)(),{detailName:a}=Object(i.k)(),r=Object(n.useCallback)((()=>{jt()(t({detailName:a,commentId:e},!0))}),[a,e,t]);return s.a.createElement(C.EuiToolTip,{position:"top",content:s.a.createElement("p",null,it)},s.a.createElement(C.EuiButtonIcon,{"aria-label":it,"data-test-subj":`copy-link-${e}`,onClick:r,iconType:"link",id:`${e}-permLink`}))};Ot.displayName="UserActionCopyLink";const Tt=Object(n.memo)(Ot),It=({id:e,outlineComment:t})=>{const a=Object(n.useCallback)((()=>{t(e)}),[e,t]);return s.a.createElement(C.EuiToolTip,{position:"top",content:s.a.createElement("p",null,ot)},s.a.createElement(C.EuiButtonIcon,{"aria-label":ot,"data-test-subj":`move-to-link-${e}`,onClick:a,iconType:"arrowUp"}))};It.displayName="UserActionMoveToReference";const wt=Object(n.memo)(It),At=(e,t)=>e===u.b.update&&null!=t;s.a.memo((({userAction:e,handleOutlineComment:t})=>s.a.createElement(C.EuiFlexGroup,{responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(Tt,{id:e.actionId})),At(e.action,e.commentId)&&s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(wt,{id:e.commentId,outlineComment:t}))))).displayName="CommentListActions";const kt=({userAction:e,label:t,icon:a,handleOutlineComment:n})=>({build:()=>[{username:s.a.createElement(vt,{username:e.createdBy.username,fullName:e.createdBy.fullName}),type:"update",event:t,"data-test-subj":`${e.type}-${e.action}-action-${e.actionId}`,timestamp:s.a.createElement(Ct,{createdAt:e.createdAt}),timelineIcon:a,actions:s.a.createElement(C.EuiFlexGroup,{responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(Tt,{id:e.actionId})),At(e.action,e.commentId)&&s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(wt,{id:e.commentId,outlineComment:n})))}]});var St=a(38),Lt=a.n(St);const{emptyField:Rt}=Ve.g,_t={content:{type:Ve.a.TEXTAREA,validations:[{validator:Rt(v.M)}]}},Ft=R.a.div.withConfig({displayName:"ContentWrapper",componentId:"sc-bgw87j-0"})(["padding:",";"],(({theme:e})=>`${e.eui.euiSizeM} ${e.eui.euiSizeL}`)),Nt=Object(n.forwardRef)((({id:e,content:t,isEditable:a,onChangeEditable:r,onSaveContent:i},o)=>{const l=Object(n.useRef)(),c={content:t},{form:u}=Object(Ve.j)({defaultValue:c,options:{stripEmptyFields:!1},schema:_t}),d="content",{setFieldValue:m,submit:p}=u,E=Object(n.useCallback)((()=>{r(e)}),[e,r]),g=Object(n.useCallback)((async()=>{const{isValid:a,data:n}=await p();a&&n.content!==t&&i(n.content),r(e)}),[t,e,r,i,p]),b=Object(n.useCallback)((e=>{m(d,e)}),[m]),f=Object(n.useMemo)((()=>s.a.createElement(C.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiButtonEmpty,{"data-test-subj":"user-action-cancel-markdown",size:"s",onClick:E,iconType:"cross"},v.g)),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiButton,{"data-test-subj":"user-action-save-markdown",color:"success",fill:!0,iconType:"save",onClick:g,size:"s"},v.N)))),[E,g]);return Object(n.useImperativeHandle)(o,(()=>({setComment:b,editor:l.current}))),a?s.a.createElement(Ve.c,{form:u,"data-test-subj":"user-action-markdown-form"},s.a.createElement(Ve.e,{path:d,component:Ze.a,componentProps:{ref:l,"aria-label":"Cases markdown editor",value:t,id:e,bottomRightContent:f}})):s.a.createElement(Ft,{className:"eui-xScroll","data-test-subj":"user-action-markdown"},s.a.createElement(Ze.b,null,t))}));Nt.displayName="UserActionMarkdownComponent";const Dt=s.a.memo(Nt),Mt=g.i18n.translate("xpack.cases.caseView.editActionsLinkAria",{defaultMessage:"click to see all actions"}),Ut="property-actions",Pt=s.a.memo((({disabled:e=!1,onClick:t,iconType:a,label:n})=>s.a.createElement(C.EuiButtonEmpty,{"aria-label":n,color:"text","data-test-subj":`${Ut}-${a}`,iconSide:"left",iconType:a,isDisabled:e,onClick:t},n)));Pt.displayName="PropertyActionButton";const Bt=s.a.memo((({propertyActions:e})=>{const[t,a]=Object(n.useState)(!1),r=Object(n.useCallback)((()=>{a(!t)}),[t]),i=Object(n.useCallback)((e=>{a(!1),null!=e&&e()}),[]);return s.a.createElement(C.EuiPopover,{anchorPosition:"downRight","data-test-subj":Ut,ownFocus:!0,button:s.a.createElement(C.EuiButtonIcon,{"data-test-subj":`${Ut}-ellipses`,"aria-label":Mt,iconType:"boxesHorizontal",onClick:r}),id:"settingsPopover",isOpen:t,closePopover:i,repositionOnScroll:!0},s.a.createElement(C.EuiFlexGroup,{alignItems:"flexStart","data-test-subj":`${Ut}-group`,direction:"column",gutterSize:"none"},e.map(((e,t)=>s.a.createElement(C.EuiFlexItem,{grow:!1,key:`${e.label}${t}`},s.a.createElement("span",null,s.a.createElement(Pt,{disabled:e.disabled,iconType:e.iconType,label:e.label,onClick:()=>i(e.onClick)})))))))}));Bt.displayName="PropertyActions";var Vt=a(118),zt=a.n(Vt),$t=(a(119),a(169)),Gt=a.n($t);const Ht="lens",Wt=function(){const e=this.Parser,t=e.prototype.blockTokenizers,a=e.prototype.blockMethods;t.lens=function(e,t,a){if(!1===t.startsWith("!{lens"))return!0;const n=t[6];if("{"!==n&&"}"!==n)return!1;if(a)return!0;let s="!{lens",r={};if("{"===n){let a="",n=0;for(let e=6;e<t.length;e++){const s=t[e];if("{"===s)n++,a+=s;else if("}"===s){if(n--,-1===n)break;a+=s}else a+=s}s+=a;try{r=JSON.parse(a)}catch(t){const a=e.now();this.file.fail(`Unable to parse lens JSON configuration: ${t}`,{line:a.line,column:a.column+6})}}return s+="}",e(s)({type:Ht,...r})},a.splice(a.indexOf("text"),0,Ht)},qt=g.i18n.translate("xpack.cases.markdownEditor.plugins.timeline.noParenthesesErrorMsg",{defaultMessage:"Expected left parentheses"}),Kt="timeline",Yt="[",Qt=function(){const e=this.Parser,t=e.prototype.blockTokenizers,a=e.prototype.blockMethods,n=function(e,t,a){if(!1===t.startsWith(Yt)||!0===t.startsWith(Yt)&&!t.includes("timelines?timeline=(id"))return!1;let n=0;if(t[n]!==Yt)return!1;if(a)return!0;function s(e,a){if(t[n]!==e)throw new Error(qt);n++;let s="",r=0;for(;n<t.length;n++){const i=t[n];if(i===a&&0===r)return n++,s;i===a?r--:i===e&&r++,s+=i}return""}const r=`[${s(Yt,"]")}](${s("(",")")})`;return e(r)({type:Kt,match:r})};n.locator=(e,t)=>e.indexOf(Yt,t),t.timeline=n,a.splice(a.indexOf("url"),0,Kt)},Xt=({comment:e})=>{var t;const a=(e=>Gt()().use([[zt.a,{}],Wt,Qt]).parse(e))(e),s=(e=>null!=e&&e.length?Object(P.filter)(e,{type:Ht}):[])(null!==(t=null==a?void 0:a.children)&&void 0!==t?t:[]),{lens:{navigateToPrefilledEditor:r,canUseEditor:i}}=Object(o.d)().services,l=Object(n.useCallback)((()=>{r({id:"",timeRange:s[0].timeRange,attributes:s[0].attributes},{openInNewTab:!0})}),[s,r]);return{canUseEditor:i(),actionConfig:s.length?{iconType:"lensApp",label:g.i18n.translate("xpack.cases.markdownEditor.plugins.lens.openVisualizationButtonLabel",{defaultMessage:"Open visualization"}),onClick:l}:null}},Zt=({id:e,editLabel:t,quoteLabel:a,isLoading:r,onEdit:i,onQuote:o,userCanCrud:l,commentMarkdown:c})=>{const{canUseEditor:u,actionConfig:d}=Xt({comment:c}),m=Object(n.useCallback)((()=>i(e)),[e,i]),p=Object(n.useCallback)((()=>o(e)),[e,o]),E=Object(n.useMemo)((()=>[l?[{iconType:"pencil",label:t,onClick:m},{iconType:"quote",label:a,onClick:p}]:[],u&&d?[d]:[]].flat()),[l,t,m,a,p,u,d]);return E.length?s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(C.EuiLoadingSpinner,{"data-test-subj":"user-action-title-loading"}),!r&&s.a.createElement(Bt,{propertyActions:E})):null};Zt.displayName="UserActionPropertyActions";const Jt=Object(n.memo)(Zt),ea=({commentMarkdown:e,id:t,editLabel:a,quoteLabel:n,isLoading:r,onEdit:i,onQuote:o,userCanCrud:l})=>s.a.createElement(C.EuiFlexGroup,{responsive:!1,alignItems:"center"},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(Tt,{id:t})),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(Jt,{id:t,editLabel:a,quoteLabel:n,isLoading:r,onEdit:i,onQuote:o,userCanCrud:l,commentMarkdown:e})));ea.displayName="UserActionContentToolbar";const ta=Object(n.memo)(ea);var aa=a(170);const na=({alertId:e,getRuleDetailsHref:t,loadingAlertData:a=!1,onRuleDetailsClick:r,ruleId:i,ruleName:o,alertsCount:l,commentType:c})=>{const u=Object(n.useCallback)((e=>{e.preventDefault(),r&&r(i,e)}),[i,r]),d=null==t?void 0:t(i),m=null!=o?o:ut;return s.a.createElement(s.a.Fragment,null,`${lt} `,a&&s.a.createElement(C.EuiLoadingSpinner,{size:"m"}),!a&&!Object(P.isEmpty)(i)&&null!=d&&s.a.createElement(se.c,{onClick:u,href:d,"data-test-subj":`alert-rule-link-${null!=e?e:"deleted"}`},m),!a&&!Object(P.isEmpty)(i)&&null==d&&m,!a&&Object(P.isEmpty)(i)&&m)};na.displayName="AlertCommentEvent";const sa=Object(n.memo)(na),ra=({id:e,alertId:t,index:a,onShowAlertDetails:r})=>{const i=Object(n.useCallback)((()=>r(t,a)),[t,a,r]);return s.a.createElement(C.EuiToolTip,{position:"top",content:s.a.createElement("p",null,ct)},s.a.createElement(C.EuiButtonIcon,{"aria-label":ct,"data-test-subj":`comment-action-show-alert-${e}`,onClick:i,iconType:"arrowRight",id:`${e}-show-alert`}))};ra.displayName="UserActionShowAlert";const ia=Object(n.memo)(ra),oa=(e,t)=>{var a;return ca({commentRuleField:null==e||null===(a=e.rule)||void 0===a?void 0:a.id,alertData:t,signalRuleFieldPath:"signal.rule.id",kibanaAlertFieldPath:aa.ALERT_RULE_UUID})},la=(e,t)=>{var a;return ca({commentRuleField:null==e||null===(a=e.rule)||void 0===a?void 0:a.name,alertData:t,signalRuleFieldPath:"signal.rule.name",kibanaAlertFieldPath:aa.ALERT_RULE_NAME})},ca=({commentRuleField:e,alertData:t,signalRuleFieldPath:a,kibanaAlertFieldPath:n})=>{var s,r;return null!==(s=null!==(r=ua(e))&&void 0!==r?r:ua(Object(P.get)(t,a)))&&void 0!==s?s:ua(Object(P.get)(t,n))};function ua(e){const t=(a=e,Array.isArray(a)?a[0]:null!=a?a:null);var a;return null==t||Object(P.isEmpty)(t)?null:t}const da=({type:e,endpoints:t,href:a,onClick:r})=>{const i=a?a(t[0].endpointId):"",o=Object(n.useCallback)((e=>{e.preventDefault(),r&&r(t[0].endpointId,e)}),[r,t]);return s.a.createElement(s.a.Fragment,null,"isolate"===e?`${dt} `:`${mt} `,s.a.createElement(se.c,{onClick:o,href:i,"data-test-subj":`actions-link-${t[0].endpointId}`},t[0].hostname),t.length>1&&(e=>g.i18n.translate("xpack.cases.caseView.otherEndpoints",{values:{endpoints:e},defaultMessage:" and {endpoints} {endpoints, plural, =1 {other} other {others}}"}))(t.length-1))};da.displayName="HostIsolationCommentEvent";const ma=Object(n.memo)(da),pa=s.a.memo((({actionType:e})=>{const t=Object(n.useContext)(L.ThemeContext);return s.a.createElement(C.EuiToken,{style:{marginTop:"8px"},iconType:"isolate"===e?"lock":"lockOpen",size:"m",shape:"circle",color:t.eui.euiColorLightestShade,"data-test-subj":"endpoint-action-icon"})}));pa.displayName="ActionIcon";const Ea=({userAction:e,handleOutlineComment:t})=>{const a=`${fe} ${Ie.toLowerCase()}`;return kt({userAction:e,handleOutlineComment:t,label:a,icon:"cross"}).build()},ga=({userAction:e,comment:t,userCanCrud:a,commentRefs:n,manageMarkdownEditIds:r,selectedOutlineCommentId:i,loadingCommentIds:o,handleManageMarkdownEditId:l,handleSaveComment:c,handleManageQuote:d,getRuleDetailsHref:m,loadingAlertData:p,onRuleDetailsClick:E,alertData:g,onShowAlertDetails:b,actionsNavigation:f})=>{switch(t.type){case u.m.user:return(({comment:e,userCanCrud:t,outlined:a,isEdit:n,isLoading:r,commentRefs:i,handleManageMarkdownEditId:o,handleSaveComment:l,handleManageQuote:c})=>({build:()=>[{username:s.a.createElement(bt,{username:e.createdBy.username,fullName:e.createdBy.fullName}),"data-test-subj":`comment-create-action-${e.id}`,timestamp:s.a.createElement(Ct,{createdAt:e.createdAt,updatedAt:e.updatedAt}),className:Lt()("userAction__comment",{outlined:a,isEdit:n}),children:s.a.createElement(Dt,{ref:t=>i.current[e.id]=t,id:e.id,content:e.comment,isEditable:n,onChangeEditable:o,onSaveContent:l.bind(null,{id:e.id,version:e.version})}),timelineIcon:s.a.createElement(Et,{username:e.createdBy.username,fullName:e.createdBy.fullName}),actions:s.a.createElement(ta,{id:e.id,commentMarkdown:e.comment,editLabel:je,quoteLabel:xe,isLoading:r,onEdit:o.bind(null,e.id),onQuote:c.bind(null,e.comment),userCanCrud:t})}]}))({comment:t,userCanCrud:a,outlined:t.id===i,isEdit:r.includes(t.id),commentRefs:n,isLoading:o.includes(t.id),handleManageMarkdownEditId:l,handleSaveComment:c,handleManageQuote:d}).build();case u.m.alert:return(({userAction:e,comment:t,alertData:a,getRuleDetailsHref:n,loadingAlertData:r,onRuleDetailsClick:i,onShowAlertDetails:o})=>({build:()=>{const l=ua(t.alertId),c=ua(t.index);if(!l||!c)return[];const d=a[l],m=oa(t,d),p=la(t,d);return[{username:s.a.createElement(vt,{username:e.createdBy.username,fullName:e.createdBy.fullName}),className:"comment-alert",type:"update",event:s.a.createElement(sa,{alertId:l,getRuleDetailsHref:n,loadingAlertData:r,onRuleDetailsClick:i,ruleId:m,ruleName:p,commentType:u.m.alert}),"data-test-subj":`user-action-alert-${e.type}-${e.action}-action-${e.actionId}`,timestamp:s.a.createElement(Ct,{createdAt:e.createdAt}),timelineIcon:"bell",actions:s.a.createElement(C.EuiFlexGroup,{responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(Tt,{id:e.actionId})),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(ia,{id:e.actionId,alertId:l,index:c,onShowAlertDetails:o})))}]}}))({alertData:g,comment:t,userAction:e,getRuleDetailsHref:m,loadingAlertData:p,onRuleDetailsClick:E,onShowAlertDetails:b}).build();case u.m.actions:return(({userAction:e,comment:t,actionsNavigation:a})=>({build:()=>[{username:s.a.createElement(vt,{username:t.createdBy.username,fullName:t.createdBy.fullName}),className:Lt()("comment-action",{"empty-comment":0===t.comment.trim().length}),event:s.a.createElement(ma,{type:t.actions.type,endpoints:t.actions.targets,href:null==a?void 0:a.href,onClick:null==a?void 0:a.onClick}),"data-test-subj":"endpoint-action",timestamp:s.a.createElement(Ct,{createdAt:e.createdAt}),timelineIcon:s.a.createElement(pa,{actionType:t.actions.type}),actions:s.a.createElement(Tt,{id:t.id}),children:t.comment.trim().length>0&&s.a.createElement(Ft,{"data-test-subj":"user-action-markdown"},s.a.createElement(Ze.b,null,t.comment))}]}))({userAction:e,comment:t,actionsNavigation:f}).build();default:return[]}},ba=e=>{const t=e.payload.connector;return null==t?"":t.id===u.o?ge:(a=t.name,g.i18n.translate("xpack.cases.caseView.actionLabel.selectedThirdParty",{values:{thirdParty:a},defaultMessage:"selected { thirdParty } as incident management system"}));var a},fa="description";function ha(e){return e.payload.settings.syncAlerts?`${pe} ${ke}`:`${Ee} ${ke}`}const Ca=e=>{var t;const a=null!==(t=e.payload.status)&&void 0!==t?t:"";return(e=>Object.prototype.hasOwnProperty.call(ee.c,e))(a)?s.a.createElement(C.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":`${e.actionId}-user-action-status-title`,responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},v.x),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(ee.b,{type:a}))):s.a.createElement(s.a.Fragment,null)},ya={connector:({userAction:e,handleOutlineComment:t})=>({build:()=>{const a=ba(e);return kt({userAction:e,handleOutlineComment:t,label:a,icon:"dot"}).build()}}),tags:({userAction:e,handleOutlineComment:t})=>({build:()=>{const a=(e=>{var t;const a=null!==(t=e.payload.tags)&&void 0!==t?t:[];return s.a.createElement(C.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs",component:"span",responsive:!1},s.a.createElement(C.EuiFlexItem,{"data-test-subj":"ua-tags-label",grow:!1},e.action===u.b.add&&de,e.action===u.b.delete&&fe," ",v.U.toLowerCase()),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(We,{tags:a,gutterSize:"xs"})))})(e);return kt({userAction:e,handleOutlineComment:t,label:a,icon:"tag"}).build()}}),title:({userAction:e,handleOutlineComment:t})=>({build:()=>{const a=(e=>`${me.toLowerCase()} ${v.h.toLowerCase()} ${v.Y} "${e.payload.title}"`)(e);return kt({userAction:e,handleOutlineComment:t,label:a,icon:"dot"}).build()}}),status:({userAction:e,handleOutlineComment:t})=>({build:()=>{const a=Ca(e);return kt({userAction:e,handleOutlineComment:t,label:a,icon:"folderClosed"}).build()}}),pushed:({userAction:e,caseServices:t,index:a,handleOutlineComment:n})=>({build:()=>{const r=e,{firstPush:i,parsedConnectorId:o,parsedConnectorName:l}=((e,t,a)=>{var n;return null!=t&&t.connectorId!==u.o?{firstPush:(null===(n=e[t.connectorId])||void 0===n?void 0:n.firstPushIndex)===a,parsedConnectorId:t.connectorId,parsedConnectorName:t.connectorName}:{firstPush:!1,parsedConnectorId:u.o,parsedConnectorName:u.o}})(t,r.payload.externalService,a);if(o===u.o)return[];const c=(({userAction:e,caseServices:t,connectorId:a,connectorName:n,index:s})=>{var r,i;const o=e.action===u.b.push_to_service&&s===(null===(r=t[a])||void 0===r?void 0:r.lastPushIndex),l=e.action===u.b.push_to_service&&s===(null===(i=t[a])||void 0===i?void 0:i.lastPushIndex)&&t[a].hasDataToPush;let c=[];var d;return o&&(c=[...c,{username:"",type:"update",event:(d=`${n}`,g.i18n.translate("xpack.cases.caseView.alreadyPushedToExternalService",{values:{externalService:d},defaultMessage:"Already pushed to { externalService } incident"})),timelineIcon:"sortUp","data-test-subj":"top-footer"}]),l&&(c=[...c,{username:"",type:"update",event:rt(`${n}`),timelineIcon:"sortDown","data-test-subj":"bottom-footer"}]),c})({userAction:r,caseServices:t,connectorId:o,connectorName:l,index:a}),d=((e,t)=>{const a=e.payload.externalService;return s.a.createElement(C.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs","data-test-subj":"pushed-service-label-title",responsive:!1},s.a.createElement(C.EuiFlexItem,{"data-test-subj":"pushed-label"},`${t?he:Ce} ${null==a?void 0:a.connectorName}`),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiLink,{"data-test-subj":"pushed-value",href:null==a?void 0:a.externalUrl,target:"_blank"},null==a?void 0:a.externalTitle)))})(r,i);return[...kt({userAction:e,handleOutlineComment:n,label:d,icon:"dot"}).build(),...c]}}),comment:({caseData:e,userAction:t,userCanCrud:a,commentRefs:n,manageMarkdownEditIds:s,selectedOutlineCommentId:r,loadingCommentIds:i,loadingAlertData:o,alertData:l,getRuleDetailsHref:c,onRuleDetailsClick:d,onShowAlertDetails:m,handleManageMarkdownEditId:p,handleSaveComment:E,handleManageQuote:g,handleOutlineComment:b})=>({build:()=>{const f=t;if(f.action===u.b.delete)return Ea({userAction:f,handleOutlineComment:b});const h=e.comments.find((e=>e.id===f.commentId));if(null==h)return[];if(f.action===u.b.create){return ga({userAction:f,comment:h,userCanCrud:a,commentRefs:n,manageMarkdownEditIds:s,selectedOutlineCommentId:r,loadingCommentIds:i,loadingAlertData:o,alertData:l,getRuleDetailsHref:c,onRuleDetailsClick:d,onShowAlertDetails:m,handleManageMarkdownEditId:p,handleSaveComment:E,handleManageQuote:g})}const C=`${be} ${Ie.toLowerCase()}`;return kt({userAction:t,handleOutlineComment:b,label:C,icon:"dot"}).build()}}),description:({userAction:e,handleOutlineComment:t})=>({build:()=>{const a=`${be} ${v.t.toLowerCase()}`;return kt({userAction:e,handleOutlineComment:t,label:a,icon:"dot"}).build()}}),settings:({userAction:e,handleOutlineComment:t})=>({build:()=>{var a,n;const s=e;if(void 0!==(null==s||null===(a=s.payload)||void 0===a||null===(n=a.settings)||void 0===n?void 0:n.syncAlerts)){return kt({userAction:e,handleOutlineComment:t,label:ha(s),icon:"gear"}).build()}return[]}})},va=Object.keys(Object(P.omit)(u.a,["create_case","delete_case"])),xa="newComment";var ja=a(80);const Oa=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoadingIds:[...e.isLoadingIds,t.payload],isError:!1};case"FETCH_SUCCESS":return{...e,isLoadingIds:e.isLoadingIds.filter((e=>t.payload.commentId!==e)),isError:!1};case"FETCH_FAILURE":return{...e,isLoadingIds:e.isLoadingIds.filter((e=>t.payload!==e)),isError:!0};default:return e}},Ta=e=>{const t=e;return null!=(null==t?void 0:t.addQuote)},Ia=({fetchUserActions:e,updateCase:t})=>{const{detailName:a}=Object(i.k)(),{clearDraftComment:s,draftComment:r,hasIncomingLensState:u,openLensModal:d}=Object(ja.a)(),m=Object(n.useRef)(0),{isLoadingIds:p,patchComment:g}=(()=>{const[e,t]=Object(n.useReducer)(Oa,{isLoadingIds:[],isError:!1}),a=Object(o.g)(),s=Object(n.useRef)(!1),r=Object(n.useRef)(new AbortController),i=Object(E.a)().owner[0],u=Object(n.useCallback)((async({caseId:e,commentId:n,commentUpdate:o,fetchUserActions:u,updateCase:d,version:m})=>{try{s.current=!1,r.current.abort(),r.current=new AbortController,t({type:"FETCH_INIT",payload:n});const a=await Object(l.k)({caseId:e,commentId:n,commentUpdate:o,version:m,signal:r.current.signal,owner:i});s.current||(d(a),u(),t({type:"FETCH_SUCCESS",payload:{commentId:n}}))}catch(e){s.current||("AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.d}),t({type:"FETCH_FAILURE",payload:n}))}}),[]);return Object(n.useEffect)((()=>()=>{s.current=!0,r.current.abort()}),[]),{...e,patchComment:u}})(),[b,f]=Object(n.useState)(""),[h,C]=Object(n.useState)([]),y=Object(n.useRef)({}),v=Object(n.useCallback)((e=>{s(),C((t=>t.includes(e)?t.filter((t=>e!==t)):t.concat(e)))}),[s]),x=Object(n.useCallback)((({id:n,version:s},r)=>{g({caseId:a,commentId:n,commentUpdate:r,fetchUserActions:e,version:s,updateCase:t})}),[a,e,g,t]),j=Object(n.useCallback)((e=>{const t=document.getElementById(`${e}-permLink`);if(null!=t){const a=-120,n=t.getBoundingClientRect().top+window.pageYOffset+a;window.scrollTo({top:n,behavior:"smooth"}),"add-comment"===e&&t.getElementsByTagName("textarea")[0].focus()}window.clearTimeout(m.current),f(e),m.current=window.setTimeout((()=>{f(""),window.clearTimeout(m.current)}),2400)}),[m]),O=Object(n.useCallback)((e=>{const t=null==y?void 0:y.current.newComment;Ta(t)&&t.addQuote(e),j("add-comment")}),[j]),T=Object(n.useCallback)((a=>{t(a),e()}),[e,t]);return Object(n.useEffect)((()=>{if(null!=r&&r.commentId){var e,t;C((e=>xa===(null==r?void 0:r.commentId)||e.includes(null==r?void 0:r.commentId)?e:[null==r?void 0:r.commentId]));const a=null==y||null===(e=y.current)||void 0===e?void 0:e[r.commentId];Ta(a)&&null!==(t=a.editor)&&void 0!==t&&t.textarea&&(a.setComment(r.comment),u?d({editorRef:a.editor}):s())}}),[s,r,u,d]),{loadingCommentIds:p,selectedOutlineCommentId:b,manageMarkdownEditIds:h,commentRefs:y,handleManageMarkdownEditId:v,handleOutlineComment:j,handleSaveComment:x,handleManageQuote:O,handleUpdate:T}},wa=R()(C.EuiFlexGroup).withConfig({displayName:"MyEuiFlexGroup",componentId:"sc-15a8kb6-0"})(["margin-bottom:8px;"]),Aa=R()(C.EuiCommentList).withConfig({displayName:"MyEuiCommentList",componentId:"sc-15a8kb6-1"})(["",""],(({theme:e})=>`\n    & .userAction__comment.outlined .euiCommentEvent {\n      outline: solid 5px ${e.eui.euiColorVis1_behindText};\n      margin: 0.5em;\n      transition: 0.8s;\n    }\n\n    & .euiComment.isEdit {\n      & .euiCommentEvent {\n        border: none;\n        box-shadow: none;\n      }\n\n      & .euiCommentEvent__body {\n        padding: 0;\n      }\n\n      & .euiCommentEvent__header {\n        display: none;\n      }\n    }\n\n    & .comment-alert .euiCommentEvent {\n      background-color: ${e.eui.euiColorLightestShade};\n      border: ${e.eui.euiFlyoutBorder};\n      padding: ${e.eui.paddingSizes.s};\n      border-radius: ${e.eui.paddingSizes.xs};\n    }\n\n    & .comment-alert .euiCommentEvent__headerData {\n      flex-grow: 1;\n    }\n\n    & .comment-action.empty-comment .euiCommentEvent--regular {\n      box-shadow: none;\n      .euiCommentEvent__header {\n        padding: ${e.eui.euiSizeM} ${e.eui.paddingSizes.s};\n        border-bottom: 0;\n      }\n    }\n  `)),ka=s.a.memo((({caseServices:e,caseUserActions:t,data:a,fetchUserActions:r,getRuleDetailsHref:l,actionsNavigation:c,isLoadingDescription:d,isLoadingUserActions:m,onRuleDetailsClick:p,onShowAlertDetails:E,onUpdateField:g,statusActionButton:b,updateCase:f,useFetchAlertData:h,userCanCrud:y})=>{const{detailName:v,commentId:x}=Object(i.k)(),[j,O]=Object(n.useState)(!0),T=Object(o.b)(),I=Object(n.useMemo)((()=>(e=>[...e.reduce(((e,t)=>t.type===u.m.alert&&Object(P.isEmpty)(t.rule.id)?((Array.isArray(t.alertId)?t.alertId:[t.alertId]).forEach((t=>e.add(t))),e):e),new Set)])(a.comments)),[a.comments]),[w,A]=h(I),{loadingCommentIds:k,commentRefs:S,selectedOutlineCommentId:L,manageMarkdownEditIds:R,handleManageMarkdownEditId:_,handleOutlineComment:F,handleSaveComment:N,handleManageQuote:D,handleUpdate:M}=Ia({fetchUserActions:r,updateCase:f}),U=Object(n.useMemo)((()=>s.a.createElement(st,{id:xa,caseId:v,userCanCrud:y,ref:e=>S.current.newComment=e,onCommentPosted:M,onCommentSaving:_.bind(null,xa),showLoading:!1,statusActionButton:b})),[v,y,M,_,b,S]);Object(n.useEffect)((()=>{j&&!m&&0===k.length&&(O(!1),null!=x&&F(x))}),[x,j,m,k,F]);const B=Object(n.useMemo)((()=>(({caseData:e,commentRefs:t,manageMarkdownEditIds:a,isLoadingDescription:n,userCanCrud:r,onUpdateField:i,handleManageMarkdownEditId:o,handleManageQuote:l})=>({username:s.a.createElement(bt,{username:e.createdBy.username,fullName:e.createdBy.fullName}),event:ye,"data-test-subj":"description-action",timestamp:s.a.createElement(Ct,{createdAt:e.createdAt}),children:s.a.createElement(Dt,{ref:e=>t.current.description=e,id:fa,content:e.description,isEditable:a.includes(fa),onSaveContent:e=>{i({key:fa,value:e})},onChangeEditable:o}),timelineIcon:s.a.createElement(Et,{username:e.createdBy.username,fullName:e.createdBy.fullName}),className:Lt()({isEdit:a.includes(fa)}),actions:s.a.createElement(ta,{commentMarkdown:e.description,id:fa,editLabel:ve,quoteLabel:xe,isLoading:n,onEdit:o.bind(null,fa),onQuote:l.bind(null,e.description),userCanCrud:r})}))({caseData:a,commentRefs:S,manageMarkdownEditIds:R,isLoadingDescription:d,userCanCrud:y,onUpdateField:g,handleManageMarkdownEditId:_,handleManageQuote:D})),[a,S,R,d,y,g,_,D]),V=[...Object(n.useMemo)((()=>t.reduce(((t,n,s)=>{if(r=n.type,!va.includes(r))return t;var r;const i=ya[n.type];if(null==i)return t;const o=i({caseData:a,userAction:n,caseServices:e,comments:a.comments,index:s,userCanCrud:y,commentRefs:S,manageMarkdownEditIds:R,selectedOutlineCommentId:L,loadingCommentIds:k,loadingAlertData:w,alertData:A,handleOutlineComment:F,handleManageMarkdownEditId:_,handleSaveComment:N,handleManageQuote:D,onShowAlertDetails:E,actionsNavigation:c,getRuleDetailsHref:l,onRuleDetailsClick:p});return[...t,...o.build()]}),[B])),[t,B,a,e,y,S,R,L,k,w,A,F,_,N,D,E,c,l,p]),...y?[{username:s.a.createElement(bt,{username:null==T?void 0:T.username,fullName:null==T?void 0:T.fullName}),"data-test-subj":"add-comment",timelineIcon:s.a.createElement(Et,{username:null==T?void 0:T.username,fullName:null==T?void 0:T.fullName}),className:"isEdit",children:U}]:[]];return s.a.createElement(s.a.Fragment,null,s.a.createElement(Aa,{comments:V,"data-test-subj":"user-actions"}),(m||k.includes(xa))&&s.a.createElement(wa,{justifyContent:"center",alignItems:"center"},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiLoadingSpinner,{"data-test-subj":"user-actions-loading",size:"l"}))))}));ka.displayName="UserActions";const Sa=R()(C.EuiAvatar).withConfig({displayName:"MyAvatar",componentId:"sc-2lwk7k-0"})(["top:-4px;"]),La=R()(C.EuiFlexGroup).withConfig({displayName:"MyFlexGroup",componentId:"sc-2lwk7k-1"})(["",""],(({theme:e})=>Object(L.css)(["margin-top:",";"],e.eui.euiSizeM))),Ra=s.a.memo((({email:e,headline:t,loading:a,users:r})=>{const i=Object(n.useCallback)((t=>{t&&null!=t&&window.open(`mailto:${t}?subject=${e.subject}&body=${e.body}`,"_blank")}),[e.subject]);return r.filter((({username:e})=>null!=e&&""!==e)).length>0?s.a.createElement(C.EuiText,null,s.a.createElement("h4",null,t),s.a.createElement(C.EuiHorizontalRule,{margin:"xs"}),a&&s.a.createElement(C.EuiFlexGroup,null,s.a.createElement(C.EuiFlexItem,null,s.a.createElement(C.EuiLoadingSpinner,null))),((e,t)=>e.map((({fullName:e,username:a,email:n},r)=>{return s.a.createElement(La,{key:r,justifyContent:"spaceBetween",responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiFlexGroup,{gutterSize:"xs",responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(Sa,{name:e||(null!=a?a:"")})),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiToolTip,{position:"top",content:s.a.createElement("p",null,e||(null!=a?a:""))},s.a.createElement("p",null,s.a.createElement("strong",null,s.a.createElement("small",{"data-test-subj":"case-view-username"},a))))))),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiButtonIcon,{"data-test-subj":"user-list-email-button",onClick:t.bind(null,n),iconType:"email","aria-label":(i=e||(null!=a?a:""),g.i18n.translate("xpack.cases.caseView.sendEmalLinkAria",{values:{user:i},defaultMessage:"click to send an email to {user}"})),isDisabled:Object(ne.isEmpty)(n)})));var i})))(r.filter((({username:e})=>null!=e&&""!==e)),i)):null}));Ra.displayName="UserList";var _a=a(24);const Fa=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoading:!0,isError:!1,updateKey:t.payload};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,updateKey:null};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0,updateKey:null};default:return e}},Na=R.a.div.withConfig({displayName:"WhitePageWrapper",componentId:"sc-1jiyl3r-0"})(["background-color:",";border-top:",";flex:1 1 auto;"],(({theme:e})=>e.eui.euiColorEmptyShade),(({theme:e})=>e.eui.euiBorderThin)),Da=R.a.div.withConfig({displayName:"SectionWrapper",componentId:"sc-1jiyl3r-1"})(["box-sizing:content-box;margin:0 auto;max-width:1175px;width:100%;"]),Ma=R.a.div.withConfig({displayName:"ContentWrapper",componentId:"sc-1jiyl3r-2"})(["",";"],(({theme:e})=>`\n      padding: ${e.eui.paddingSizes.l} 0 70px 0;\n    `));var Ua=a(77),Pa=a(89);const Ba=({caseData:e,currentExternalIncident:t})=>{const{handleToggleModal:a,handleOnDeleteConfirm:r,isDeleted:o,isDisplayConfirmDeleteModal:l}=Object(Ua.a)(),{navigateToAllCases:c}=Object(i.i)(),u=Object(n.useMemo)((()=>{var e,n;return[{iconType:"trash",label:v.s(),onClick:a},...null==t||Object(ne.isEmpty)(null==t?void 0:t.externalUrl)?[]:[{iconType:"popout",label:(n=null!==(e=null==t?void 0:t.externalTitle)&&void 0!==e?e:"",g.i18n.translate("xpack.cases.caseView.actionLabel.viewIncident",{defaultMessage:"View {incidentNumber}",values:{incidentNumber:n}})),onClick:()=>window.open(null==t?void 0:t.externalUrl,"_blank")}]]}),[a,t]);return o?(c(),null):s.a.createElement(s.a.Fragment,null,s.a.createElement(Bt,{propertyActions:u}),s.a.createElement(Pa.a,{caseTitle:e.title,isModalVisible:l,onCancel:a,onConfirm:r.bind(null,[{id:e.id,title:e.title}])}))};Ba.displayName="Actions";const Va=s.a.memo(Ba);var za=a(93);const $a=({disabled:e,isSynced:t=!0,showLabel:a=!1,onSwitchChange:r})=>{const[i,o]=Object(n.useState)(t),l=Object(n.useCallback)((()=>{r&&r(!i),o(!i)}),[i,r]);return s.a.createElement(C.EuiSwitch,{label:i?v.T:v.S,showLabel:a,checked:i,onChange:l,disabled:e,"data-test-subj":"sync-alerts-switch"})};$a.displayName="SyncAlertsSwitchComponent";const Ga=Object(n.memo)($a);var Ha=a(73),Wa=a(76);const qa=R()(C.EuiDescriptionList).withConfig({displayName:"MyDescriptionList",componentId:"sc-ns1eu-0"})(["",""],(({theme:e})=>Object(L.css)(["&{padding-right:",";border-right:",";@media only screen and (max-width:","){padding-right:0;border-right:0;}}"],e.eui.euiSizeL,e.eui.euiBorderThin,e.eui.euiBreakpoints.m))),Ka=({caseData:e,currentExternalIncident:t,userCanCrud:a,isLoading:r,onRefresh:i,onUpdateField:o})=>{const{isSyncAlertsEnabled:l,metricsFeatures:c}=Object(Ha.a)(),d=Object(n.useMemo)((()=>{return(t=e).status===u.h.open?t.createdAt:t.status===u.h["in-progress"]?t.updatedAt:t.status===u.h.closed?t.closedAt:null;var t}),[e]),m=Object(n.useMemo)((()=>{return t=e.status,ee.c[t].actionBar.title;var t}),[e.status]),p=Object(n.useCallback)((e=>o({key:"status",value:e})),[o]),E=Object(n.useCallback)((t=>o({key:"settings",value:{...e.settings,syncAlerts:t}})),[e.settings,o]);return s.a.createElement(C.EuiFlexGroup,{gutterSize:"l",justifyContent:"flexEnd","data-test-subj":"case-action-bar-wrapper"},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(qa,{compressed:!0},s.a.createElement(C.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween"},s.a.createElement(C.EuiFlexItem,{grow:!1,"data-test-subj":"case-view-status"},s.a.createElement(C.EuiDescriptionListTitle,null,Oe),s.a.createElement(C.EuiDescriptionListDescription,null,s.a.createElement(za.a,{currentStatus:e.status,disabled:!a||r,onStatusChanged:p}))),c.includes("lifespan")?null:s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiDescriptionListTitle,null,m),s.a.createElement(C.EuiDescriptionListDescription,null,s.a.createElement(Wa.a,{"data-test-subj":"case-action-bar-status-date",value:d})))))),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiDescriptionList,{compressed:!0},s.a.createElement(C.EuiFlexGroup,{gutterSize:"l",alignItems:"center",responsive:!1,justifyContent:"spaceBetween"},a&&l&&s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiDescriptionListTitle,null,s.a.createElement(C.EuiFlexGroup,{component:"span",alignItems:"center",gutterSize:"xs",responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement("span",null,Ae)),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiIconTip,{content:v.R})))),s.a.createElement(C.EuiDescriptionListDescription,null,s.a.createElement(Ga,{disabled:r,isSynced:e.settings.syncAlerts,onSwitchChange:E}))),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement("span",null,s.a.createElement(C.EuiButtonEmpty,{"data-test-subj":"case-refresh",flush:"left",iconType:"refresh",onClick:i},we))),a&&s.a.createElement(C.EuiFlexItem,{grow:!1,"data-test-subj":"case-view-actions"},s.a.createElement(Va,{caseData:e,currentExternalIncident:t}))))))};Ka.displayName="CaseActionBar";const Ya=s.a.memo(Ka);var Qa=a(104),Xa=a.n(Qa);const Za=e=>{var t;return(null==e?void 0:e.type)===u.a.connector&&null!=(null==e||null===(t=e.payload)||void 0===t?void 0:t.connector)},Ja=e=>{var t;return(null==e?void 0:e.type)===u.a.pushed&&null!=(null==e||null===(t=e.payload)||void 0===t?void 0:t.externalService)},en=e=>{var t;return(null==e?void 0:e.type)===u.a.create_case&&null!=(null==e||null===(t=e.payload)||void 0===t?void 0:t.connector)},tn={caseServices:{},caseUserActions:[],hasDataToPush:!1,isError:!1,isLoading:!0,participants:[]},an=e=>e.reduce(((e,t)=>{var a,n;if((Za(t)||en(t))&&(null===(a=t.payload)||void 0===a||null===(n=a.connector)||void 0===n?void 0:n.id)!==u.o){const a=t.payload.connector;return{...e,[a.id]:[...e[a.id]||[],a.fields]}}return e}),{}),nn=(e,t)=>{const a=t=>{const a=[...e].reverse(),n=a.findIndex((e=>Ja(e)&&e.payload.externalService.connectorId===t));if(-1===n)return!0;const s=a.length-n-1,r=e.slice(0,s),i=e.slice(s+1,a.length),o=(({connectorFieldsBeforePush:e,connectorFieldsAfterPush:t,connectorId:a})=>{if(null==t||null==t[a])return!1;const n=t[a];if(null!=e&&null!=e[a]){const t=e[a];return!Xa()(t[t.length-1],n[n.length-1])}return n.length>=2&&!Xa()(n[n.length-2],n[n.length-1])})({connectorFieldsBeforePush:an(r),connectorFieldsAfterPush:an(i),connectorId:t});return i.some((e=>e.type!==u.a.connector&&e.type!==u.a.pushed))||o},n=e.reduce(((e,t,a)=>t.type===u.a.comment&&null!=t.commentId?[...e,{commentId:t.commentId,commentIndex:a}]:e),[]);let s=e.reduce(((e,t,n)=>{if(!Ja(t))return e;const s=t.payload.externalService;return null===s?e:{...e,...null!=e[s.connectorId]?{[s.connectorId]:{...e[s.connectorId],...s,lastPushIndex:n,commentsToUpdate:[]}}:{[s.connectorId]:{...s,firstPushIndex:n,lastPushIndex:n,hasDataToPush:a(s.connectorId),commentsToUpdate:[]}}}}),{});s=Object.keys(s).reduce(((e,t)=>({...e,[t]:{...s[t],commentsToUpdate:n.reduce(((e,a)=>a.commentIndex>s[t].lastPushIndex?e.indexOf(a.commentId)>-1?[...e.filter((e=>e!==a.commentId)),a.commentId]:[...e,a.commentId]:e),[])}})),{});return{hasDataToPush:null==s[t]||s[t].hasDataToPush,caseServices:s}};var sn=a(105),rn=a(113);const on={connectorId:{type:Ve.a.SUPER_SELECT}},ln=(e,t)=>{for(const a of[...t].reverse())if(Za(a)||en(a)){const t=a.payload.connector;if(t&&e===t.id)return t.fields}return null},cn=g.i18n.translate("xpack.cases.editConnector.editConnectorLinkAria",{defaultMessage:"click to edit connector"});var un=a(47),dn=a(108);const mn=g.i18n.translate("xpack.cases.addConnector.title",{defaultMessage:"Add connector"}),pn=g.i18n.translate("xpack.cases.caseView.pushToServiceDisableBecauseCaseClosedTitle",{defaultMessage:"Reopen the case"}),En=g.i18n.translate("xpack.cases.caseView.errorsPushServiceCallOutTitle",{defaultMessage:"Select an external connector"}),gn=({handleButtonClick:e,id:t,messages:a,type:r,hasLicenseError:i})=>{const o=Object(n.useCallback)((a=>e(a,t,r)),[e,t,r]),l=Object(n.useMemo)((()=>a.map((e=>e.id)).includes(w)),[a]);return Object(ne.isEmpty)(a)?null:s.a.createElement(C.EuiCallOut,{title:l?pn:i?T:En,color:r,iconType:"gear","data-test-subj":`case-callout-${t}`,size:"s"},s.a.createElement(C.EuiDescriptionList,{"data-test-subj":`callout-messages-${t}`,listItems:a}),!l&&!i&&s.a.createElement(C.EuiButton,{"data-test-subj":`callout-onclick-${t}`,color:"success"===r?"success":r,onClick:o},mn))};gn.displayName="CallOut";const bn=Object(n.memo)(gn);var fn=a(175),hn=a.n(fn);const Cn=({hasConnectors:e,hasLicenseError:t,onEditClick:a,messages:r=[]})=>{const{navigateToConfigureCases:o}=Object(i.l)(),l=Object(n.useCallback)((t=>{t.preventDefault(),e?a():o()}),[e,a,o]),c=Object(n.useMemo)((()=>r.reduce(((e,t)=>{var a,n,s,r;const i=null==t.errorType?"primary":t.errorType;return{...e,[i]:{messagesId:[...null!==(a=null===(n=e[i])||void 0===n?void 0:n.messagesId)&&void 0!==a?a:[],t.id],messages:[...null!==(s=null===(r=e[i])||void 0===r?void 0:r.messages)&&void 0!==s?s:[],t]}}}),{})),[r]);return s.a.createElement(s.a.Fragment,null,Object.keys(c).map((e=>{const a=((e,t="|")=>hn()(e.join(t)))(c[e].messagesId);return s.a.createElement(s.a.Fragment,{key:a},s.a.createElement(bn,{handleButtonClick:l,id:a,messages:c[e].messages,type:e,hasLicenseError:t}),s.a.createElement(C.EuiSpacer,null))})))};Cn.displayName="CaseCallOut";const yn=Object(n.memo)(Cn),vn=({caseId:e,caseServices:t,caseStatus:a,connector:r,connectors:i,hasDataToPush:o,isValidConnector:l,onEditClick:c,updateCase:d,userCanCrud:m})=>{const{isLoading:E,pushCaseToExternalService:b}=Object(dn.a)(),{isLoading:f,actionLicense:h}=p(),O=null!=h&&!h.enabledInLicense,T=Object(n.useCallback)((async()=>{if(null!=r.id&&"none"!==r.id){const t=await b({caseId:e,connector:r});null!=t&&d(t)}}),[e,r,b,d]),I=Object(n.useMemo)((()=>{const e=[];return m?O?[A()]:null==h||h.enabledInConfig?"none"!==r.id||f||O?l||f||O?a===u.h.closed?[{id:w,title:"",description:s.a.createElement(y.FormattedMessage,{defaultMessage:"Closed cases cannot be sent to external systems. Reopen the case if you want to open or update it in an external system.",id:"xpack.cases.caseView.pushToServiceDisableBecauseCaseClosedDescription"})}]:e:[{id:"connector-deleted-error",title:"",description:s.a.createElement(y.FormattedMessage,{defaultMessage:"The connector used to send updates to the external service has been deleted or you do not have the {appropriateLicense} to use it. To update cases in external systems, select a different connector or create a new one.",id:"xpack.cases.configureCases.warningMessage",values:{appropriateLicense:s.a.createElement(C.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},v.w)}}),errorType:"danger"}]:[{id:"connector-missing-error",title:"",description:j}]:[k()]:e}),[h,a,i.length,r,f,m]),S=Object(n.useMemo)((()=>{return s.a.createElement(C.EuiButtonEmpty,{"data-test-subj":"push-to-external-service",iconType:"importAction",onClick:T,disabled:E||f||I.length>0||!m||!l||!o,isLoading:E},t[r.id]?"none"===(e=r.name)?g.i18n.translate("xpack.cases.caseView.updateThirdPartyIncident",{defaultMessage:"Update external incident"}):g.i18n.translate("xpack.cases.caseView.updateNamedIncident",{values:{thirdParty:e},defaultMessage:"Update { thirdParty } incident"}):(e=>"none"===e?g.i18n.translate("xpack.cases.caseView.pushThirdPartyIncident",{defaultMessage:"Push as external incident"}):g.i18n.translate("xpack.cases.caseView.pushNamedIncident",{values:{thirdParty:e},defaultMessage:"Push as { thirdParty } incident"}))(r.name));var e}),[r,i,I,T,o,E,f,m,l]);return Object(n.useMemo)((()=>{return{pushButton:I.length>0||!o?s.a.createElement(C.EuiToolTip,{position:"top",title:I.length>0?I[0].title:(e=r.name,"none"===e?g.i18n.translate("xpack.cases.caseView.lockedIncidentTitleNone",{defaultMessage:"External incident is up to date"}):g.i18n.translate("xpack.cases.caseView.lockedIncidentTitle",{values:{thirdParty:e},defaultMessage:"{ thirdParty } incident is up to date"})),content:s.a.createElement("p",null,I.length>0?I[0].description:x)},S):s.a.createElement(s.a.Fragment,null,S),pushCallouts:I.length>0?s.a.createElement(yn,{hasConnectors:i.length>0,hasLicenseError:O,messages:I,onEditClick:c}):null};var e}),[r.name,i.length,I,o,O,c,S])},xn=R()(C.EuiFlexGroup).withConfig({displayName:"MyFlexGroup",componentId:"sc-cj1kee-0"})(["",""],(({theme:e})=>`\n    margin-top: ${e.eui.euiSizeM};\n    p {\n      font-size: ${e.eui.euiSizeM};\n    }\n  `)),jn=R()(C.EuiFlexItem).withConfig({displayName:"DisappearingFlexItem",componentId:"sc-cj1kee-1"})(["",""],(({$isHidden:e})=>e&&"\n      margin: 0 !important;\n      & .euiFlexItem {\n        margin: 0 !important;\n      }\n    ")),On=(e,t)=>{switch(t.type){case"SET_CURRENT_CONNECTOR":return{...e,currentConnector:t.payload};case"SET_FIELDS":return{...e,fields:t.payload};case"SET_EDIT_CONNECTOR":return{...e,editConnector:t.payload};default:return e}},Tn={currentConnector:null,fields:null,editConnector:!1},In=s.a.memo((({caseData:e,caseServices:t,connectorName:a,connectors:r,hasDataToPush:i,isLoading:o,isValidConnector:l,onSubmit:c,permissionsError:d,updateCase:m,userActions:p,userCanCrud:E=!0})=>{const g=e.connector.fields,b=e.connector.id,{form:f}=Object(Ve.j)({defaultValue:{connectorId:b},options:{stripEmptyFields:!1},schema:on}),[h,y]=Object(n.useState)(!1),{setFieldValue:x,submit:j}=f,[{currentConnector:O,fields:T,editConnector:I},w]=Object(n.useReducer)(On,{...Tn,fields:g});Object(n.useEffect)((()=>{const e=!(null===O&&b===u.o)&&(null==O?void 0:O.id)!==b||!Xa()(T,g);y(e)}),[g,O,T,b]),Object(n.useEffect)((()=>{o||(w({type:"SET_CURRENT_CONNECTOR",payload:Object(un.a)(e.connector.id,r)}),w({type:"SET_FIELDS",payload:g}))}),[e.connector.id,r,o,g]);const A=Object(n.useCallback)((e=>{(null==O?void 0:O.id)!==e&&(w({type:"SET_CURRENT_CONNECTOR",payload:Object(un.a)(e,r)}),w({type:"SET_FIELDS",payload:ln(e,null!=p?p:[])}))}),[O,p,r]),k=Object(n.useCallback)((e=>{Xa()(e,T)||w({type:"SET_FIELDS",payload:e})}),[T,w]),S=Object(n.useCallback)((()=>{x("connectorId",b),w({type:"SET_EDIT_CONNECTOR",payload:!1})}),[w,x,b]),L=Object(n.useCallback)((()=>{x("connectorId",b),w({type:"SET_FIELDS",payload:g}),w({type:"SET_EDIT_CONNECTOR",payload:!1})}),[w,b,x,g]),R=Object(n.useCallback)((async()=>{const{isValid:e,data:t}=await j();e&&t.connectorId&&(c(t.connectorId,T,S,ne.noop),w({type:"SET_EDIT_CONNECTOR",payload:!1}))}),[w,j,T,c,S]),_=Object(n.useCallback)((()=>{w({type:"SET_EDIT_CONNECTOR",payload:!0})}),[w]),F=Object(un.c)({config:on.connectorId,connectors:r}),{pushButton:N,pushCallouts:D}=vn({connector:{...e.connector,name:Object(ne.isEmpty)(a)?e.connector.name:a},caseServices:t,caseId:e.id,caseStatus:e.status,connectors:r,hasDataToPush:i,onEditClick:_,updateCase:m,userCanCrud:E,isValidConnector:l});return s.a.createElement(C.EuiText,null,s.a.createElement(xn,{alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement("h4",null,v.o)),o&&s.a.createElement(C.EuiLoadingSpinner,{"data-test-subj":"connector-loading"}),!o&&!I&&E&&s.a.createElement(C.EuiFlexItem,{"data-test-subj":"connector-edit",grow:!1},s.a.createElement(C.EuiButtonIcon,{"data-test-subj":"connector-edit-button","aria-label":cn,iconType:"pencil",onClick:_}))),s.a.createElement(C.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(xn,{"data-test-subj":"edit-connectors",direction:"column"},!o&&!I&&D&&null==d&&s.a.createElement(C.EuiFlexItem,{"data-test-subj":"push-callouts"},D),s.a.createElement(jn,{$isHidden:!I},s.a.createElement(Ve.c,{form:f},s.a.createElement(C.EuiFlexGroup,{gutterSize:"none",direction:"row"},s.a.createElement(C.EuiFlexItem,null,s.a.createElement(Ve.e,{path:"connectorId",config:F,component:sn.a,componentProps:{connectors:r,dataTestSubj:"caseConnectors",defaultValue:b,disabled:!E,idAria:"caseConnectors",isEdit:I,isLoading:o},onChange:A}))))),s.a.createElement(C.EuiFlexItem,{"data-test-subj":"edit-connector-fields-form-flex-item"},!I&&d&&s.a.createElement(C.EuiText,{"data-test-subj":"edit-connector-permissions-error-msg",size:"s"},s.a.createElement("span",null,d)),s.a.createElement(rn.a,{connector:O,fields:T,isEdit:I,onChange:k})),I&&s.a.createElement(C.EuiFlexItem,null,s.a.createElement(C.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiButton,{disabled:!h,color:"success","data-test-subj":"edit-connectors-submit",fill:!0,iconType:"save",onClick:R,size:"s"},v.N)),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiButtonEmpty,{"data-test-subj":"edit-connectors-cancel",iconType:"cross",onClick:L,size:"s"},v.g)))),null==D&&!o&&!I&&E&&!d&&s.a.createElement(C.EuiFlexItem,{"data-test-subj":"has-data-to-push-button",grow:!1},s.a.createElement("span",null,N))))}));In.displayName="EditConnector";var wn=a(61),An=a(84),kn=a(59);const Sn=({status:e,onStatusChanged:t,isLoading:a})=>{const r=Object(n.useMemo)((()=>u.q.findIndex((t=>t===e))),[e]),i=Object(n.useMemo)((()=>(r+1)%u.q.length),[r]),o=Object(n.useCallback)((()=>{t(u.q[i])}),[i,t]);return s.a.createElement(C.EuiButton,{"data-test-subj":"case-view-status-action-button",iconType:kn.b[u.q[i]].icon,isLoading:a,onClick:o},kn.b[u.q[i]].button.label)};Sn.displayName="StatusActionButton";const Ln=Object(n.memo)(Sn);var Rn=a(79);const _n=(e,t)=>{var a;switch(t.type){case"FETCH_INIT":return{...e,isLoading:!(null!==(a=t.payload)&&void 0!==a&&a.silent),isError:!1};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,metrics:t.payload};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};default:return e}},Fn=g.i18n.translate("xpack.cases.caseView.metrics.totalAlerts",{defaultMessage:"Total alerts"}),Nn=g.i18n.translate("xpack.cases.caseView.metrics.associatedUsers",{defaultMessage:"Associated users"}),Dn=g.i18n.translate("xpack.cases.caseView.metrics.associatedHosts",{defaultMessage:"Associated hosts"}),Mn=g.i18n.translate("xpack.cases.caseView.metrics.isolatedHosts",{defaultMessage:"Isolated hosts"}),Un=g.i18n.translate("xpack.cases.caseView.metrics.totalConnectors",{defaultMessage:"Total connectors"}),Pn=g.i18n.translate("xpack.cases.caseView.metrics.lifespan.caseCreated",{defaultMessage:"Case created"}),Bn=g.i18n.translate("xpack.cases.caseView.metrics.lifespan.inProgressDuration",{defaultMessage:"In progress duration"}),Vn=g.i18n.translate("xpack.cases.caseView.metrics.lifespan.openDuration",{defaultMessage:"Open duration"}),zn=g.i18n.translate("xpack.cases.caseView.metrics.lifespan.openToCloseDuration",{defaultMessage:"Duration from creation to close"}),$n=g.i18n.translate("xpack.cases.caseView.metrics.lifespan.reopened",{defaultMessage:"(reopened)"}),Gn=g.i18n.translate("xpack.cases.caseView.metrics.lifespan.reopenedOn",{defaultMessage:"Reopened "});var Hn=a(37);const Wn=s.a.memo((({metrics:e,features:t})=>{const a=Kn(e,t);return s.a.createElement(s.a.Fragment,null,a.map((({title:e,value:t})=>s.a.createElement(C.EuiFlexItem,{key:e},s.a.createElement(C.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},s.a.createElement(C.EuiFlexItem,null,e),s.a.createElement(qn,null,t))))))}));Wn.displayName="CaseViewMetricItems";const qn=Object(Hn.euiStyled)(C.EuiFlexItem)`
  font-size: ${({theme:e})=>e.eui.euiSizeL};
  font-weight: bold;
`,Kn=(e,t)=>{var a,s,r,i,o,l;const{alerts:c,actions:u,connectors:d}=null!=e?e:{},m=null!==(a=null==d?void 0:d.total)&&void 0!==a?a:0,p=null!==(s=null==c?void 0:c.count)&&void 0!==s?s:0,E=null!==(r=null==c||null===(i=c.users)||void 0===i?void 0:i.total)&&void 0!==r?r:0,g=null!==(o=null==c||null===(l=c.hosts)||void 0===l?void 0:l.total)&&void 0!==o?o:0,b=Yn(u);return Object(n.useMemo)((()=>[["alerts.count",{title:Fn,value:p}],["alerts.users",{title:Nn,value:E}],["alerts.hosts",{title:Dn,value:g}],["actions.isolateHost",{title:Mn,value:b}],["connectors",{title:Un,value:m}]].reduce(((e,[a,n])=>[...e,...t.includes(a)?[n]:[]]),[])),[t,p,E,g,b,m])},Yn=e=>null!=e&&e.isolateHost?Math.max(e.isolateHost.isolate.total-e.isolateHost.unisolate.total,0):0;var Qn=a(178),Xn=a.n(Qn),Zn=a(92),Jn=a(88);const es=s.a.memo((({metrics:e,features:t})=>{const a=ts(e,t);if(!a)return null;const n=[{key:"case-created",component:s.a.createElement(os,{title:Pn,value:s.a.createElement(as,{date:a.creationDate})}),dataTestSubject:"case-metrics-lifespan-item-creation-date"},{key:"in-progress-duration",component:s.a.createElement(os,{title:Bn,value:ns(a.statusInfo.inProgressDuration)}),dataTestSubject:"case-metrics-lifespan-item-inProgress-duration"},{key:"open-duration",component:s.a.createElement(os,{title:Vn,value:ss(a.statusInfo.openDuration)}),dataTestSubject:"case-metrics-lifespan-item-open-duration"},{key:"duration-from-creation-to-close",component:s.a.createElement(ls,{title:zn,value:rs(a.creationDate,a.closeDate),reopens:a.statusInfo.reopenDates}),dataTestSubject:"case-metrics-lifespan-item-open-to-close-duration"}];return s.a.createElement(C.EuiFlexItem,{grow:3},s.a.createElement(C.EuiFlexGrid,{columns:2,gutterSize:"s",responsive:!1},n.map((({component:e,dataTestSubject:t,key:a})=>s.a.createElement(C.EuiFlexItem,{"data-test-subj":t,key:a},e)))))}));es.displayName="CaseStatusMetrics";const ts=(e,t)=>Object(n.useMemo)((()=>{var a;const n=null!==(a=null==e?void 0:e.lifespan)&&void 0!==a?a:{closeDate:"",creationDate:"",statusInfo:{inProgressDuration:0,reopenDates:[],openDuration:0}};if(t.includes("lifespan"))return n}),[t,e]),as=s.a.memo((({date:e})=>Object(Zn.a)(e).isValid()?s.a.createElement(Wa.a,{"data-test-subj":"case-metrics-lifespan-creation-date",value:e,stripMs:!0}):Object(Jn.a)()));as.displayName="CreationDate";const ns=e=>e<=0?Object(Jn.a)():ss(e),ss=e=>Xn()(e,{compact:!0,verbose:!0}),rs=(e,t)=>{if(null==t)return;const a=Object(Zn.a)(e),n=Object(Zn.a)(t);return a.isValid()&&n.isValid()?ss(n.diff(a)):void 0},is=Object(Hn.euiStyled)(C.EuiFlexItem)`
  font-size: ${({theme:e})=>e.eui.euiSizeM};
  font-weight: bold;
`,os=s.a.memo((({title:e,value:t})=>s.a.createElement(C.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},s.a.createElement(is,null,e),s.a.createElement(C.EuiFlexItem,null,t))));os.displayName="CaseStatusMetricsItem";const ls=s.a.memo((({title:e,value:t,reopens:a})=>{const n=cs(t,a);return s.a.createElement(C.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},s.a.createElement(is,null,e),null!=t&&us(a)?s.a.createElement(ds,{value:n,explanationValues:a}):s.a.createElement(C.EuiFlexItem,null,n))}));ls.displayName="OpenCloseDuration";const cs=(e,t)=>null==e?Object(Jn.a)():t.length>0?`${e} ${$n}`:e,us=e=>e.length>0,ds=s.a.memo((({value:e,explanationValues:t})=>{const a=s.a.createElement(s.a.Fragment,null,Gn,t.map(((e,a)=>s.a.createElement(s.a.Fragment,{key:`explanation-value-${a}`},s.a.createElement(Wa.a,{"data-test-subj":`case-metrics-lifespan-reopen-${a}`,value:e,stripMs:!0}),ms(a,t.length)?s.a.createElement(C.EuiSpacer,{size:"xs"}):null))));return s.a.createElement(C.EuiFlexItem,{"data-test-subj":"case-metrics-lifespan-reopen-icon"},s.a.createElement(C.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},s.a.createElement(C.EuiFlexItem,{grow:!1},e),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiIconTip,{content:a,position:"right"}))))}));ds.displayName="ValueWithExplanationIcon";const ms=(e,t)=>e+1<t,ps=s.a.memo((({metrics:e,features:t,isLoading:a})=>s.a.createElement(C.EuiPanel,{"data-test-subj":"case-view-metrics-panel",hasShadow:!1,hasBorder:!0},s.a.createElement(C.EuiFlexGroup,{gutterSize:"xl",wrap:!0,responsive:!1,alignItems:"center"},a?s.a.createElement(C.EuiFlexItem,null,s.a.createElement(C.EuiLoadingSpinner,{"data-test-subj":"case-view-metrics-spinner",size:"l"})):s.a.createElement(s.a.Fragment,null,s.a.createElement(Wn,{metrics:e,features:t}),s.a.createElement(es,{metrics:e,features:t}))))));ps.displayName="CaseViewMetrics";const Es=({caseData:e,caseId:t,handleUpdateField:a})=>{const{isLoading:s,updateKey:r,updateCaseProperty:i}=(({caseId:e})=>{const[t,a]=Object(n.useReducer)(Fa,{isLoading:!1,isError:!1,updateKey:null}),s=Object(o.g)(),r=Object(n.useRef)(!1),i=Object(n.useRef)(new AbortController),u=Object(n.useCallback)((async({fetchCaseUserActions:t,updateKey:n,updateValue:o,updateCase:u,caseData:d,onSuccess:m,onError:p})=>{try{r.current=!1,i.current.abort(),i.current=new AbortController,a({type:"FETCH_INIT",payload:n});const c=await Object(l.i)(e,{[n]:o},d.version,i.current.signal);r.current||(null!=t&&t(e,c[0].connector.id),null!=u&&u(c[0]),a({type:"FETCH_SUCCESS"}),s.addSuccess(Object(_a.d)(d,c[0],n,o)),m&&m())}catch(e){r.current||("AbortError"!==e.name&&s.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.d}),a({type:"FETCH_FAILURE"}),p&&p())}}),[e]);return Object(n.useEffect)((()=>()=>{r.current=!0,i.current.abort()}),[]),{...t,updateCaseProperty:u}})({caseId:t});return{onUpdateField:Object(n.useCallback)((({key:t,value:n,onSuccess:s,onError:r})=>{const o=(t,n)=>i({updateKey:t,updateValue:n,updateCase:e=>a(e,t),caseData:e,onSuccess:s,onError:r});switch(t){case"title":const t=Object(_a.n)(n);t.length>0&&o("title",t);break;case"connector":const a=Object(_a.n)(n);null!=a&&o("connector",a);break;case"description":const s=Object(_a.n)(n);s.length>0&&o("description",s);break;case"tags":o("tags",Object(_a.n)(n));break;case"status":const r=Object(_a.n)(n);e.status!==n&&o("status",r);break;case"settings":const i=Object(_a.n)(n);e.settings!==n&&o("settings",i);break;default:return null}}),[i,a,e]),isLoading:s,loadingKey:r}},gs=s.a.memo((({caseData:e,caseId:t,fetchCase:a,onComponentInitialized:r,actionsNavigation:u,ruleDetailsNavigation:d,showAlertDetails:m,updateCase:p,useFetchAlertData:h,refreshRef:y})=>{var x;const{userCanCrud:j}=Object(E.a)(),{metricsFeatures:O}=Object(Ha.a)(),{getCaseViewUrl:T}=Object(i.j)();(e=>{const{appId:t,appTitle:a}=Object(E.a)(),{getAppUrl:s}=Object(o.e)(t),r=f();Object(n.useEffect)((()=>{const t=[{text:a,href:s()},{text:b[i.a.cases],href:s({deepLinkId:i.a.cases})},{text:e}];r(t)}),[e,a,s,r])})(e.title);const[I,w]=Object(n.useState)(!0),A=Object(n.useRef)(!0),k=null===(x=Object(Rn.a)())||void 0===x?void 0:x.ui,{caseUserActions:S,fetchCaseUserActions:L,caseServices:R,hasDataToPush:_,isLoading:F,participants:N}=((e,t)=>{const[a,s]=Object(n.useState)(tn),r=Object(n.useRef)(new AbortController),i=Object(n.useRef)(!1),u=Object(o.g)(),d=Object(n.useCallback)((async(e,t)=>{try{i.current=!1,r.current.abort(),r.current=new AbortController,s({...a,isLoading:!0});const n=await Object(l.d)(e,r.current.signal);if(!i.current){const e=Object(ne.isEmpty)(n)?[]:Object(ne.uniqBy)("createdBy.username",n).map((e=>e.createdBy)),a=Object(ne.isEmpty)(n)?[]:n;s({caseUserActions:a,...nn(a,t),isLoading:!1,isError:!1,participants:e})}}catch(e){i.current||("AbortError"!==e.name&&u.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.d}),s({caseServices:{},caseUserActions:[],hasDataToPush:!1,isError:!0,isLoading:!1,participants:[]}))}}),[a]);return Object(n.useEffect)((()=>(Object(ne.isEmpty)(e)||d(e,t),()=>{i.current=!0,r.current.abort()})),[e]),{...a,fetchCaseUserActions:d}})(t,e.connector.id),D=Object(n.useCallback)((()=>{L(t,e.connector.id)}),[t,L,e]),{metrics:M,isLoading:U,fetchCaseMetrics:P}=((e,t)=>{const[a,s]=Object(n.useReducer)(_n,{metrics:null,isLoading:!1,isError:!1}),r=Object(o.g)(),i=Object(n.useRef)(!1),u=Object(n.useRef)(new AbortController),d=Object(n.useCallback)((async(a=!1)=>{if(0!==t.length)try{i.current=!1,u.current.abort(),u.current=new AbortController,s({type:"FETCH_INIT",payload:{silent:a}});const n=await Object(l.c)(e,t,u.current.signal);i.current||s({type:"FETCH_SUCCESS",payload:n})}catch(e){i.current||("AbortError"!==e.name&&r.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.d}),s({type:"FETCH_FAILURE"}))}}),[e,t,r]);return Object(n.useEffect)((()=>(d(),()=>{i.current=!0,u.current.abort()})),[d]),{...a,fetchCaseMetrics:d}})(t,O),B=Object(n.useCallback)((()=>{a(),P(),D()}),[a,D,P]),V=Object(n.useCallback)((e=>{p(e),L(t,e.connector.id),P()}),[p,L,t,P]),z=Object(n.useCallback)(((a,n)=>{p({...a,comments:e.comments}),L(t,a.connector.id),P()}),[p,e,L,t,P]),{onUpdateField:$,isLoading:G,loadingKey:H}=Es({caseId:t,caseData:e,handleUpdateField:z});Object(n.useEffect)((()=>{let e=!1;if(y)return y.current={refreshCase:async()=>{e||G||U||F||await Promise.all([a(!0),P(!0),D()])}},()=>{e=!0,y.current=null}}),[a,P,D,F,U,G,y,p]);const{loading:W,connectors:q,permissionsError:K}=Object(wn.a)({toastPermissionsErrors:!1}),[Y,Q]=Object(n.useMemo)((()=>{var t;const a=q.find((t=>t.id===e.connector.id));return[null!==(t=null==a?void 0:a.name)&&void 0!==t?t:"",!!a]}),[q,e.connector]),X=Object(n.useMemo)((()=>null!=R&&null!=R[e.connector.id]?R[e.connector.id]:null),[R,e.connector]),J=Object(n.useCallback)(((e,t,a,n)=>{const s=Object(un.a)(e,q),r=s?Object(An.b)(s):Object(An.a)();$({key:"connector",value:{...r,fields:t},onSuccess:n,onError:a})}),[$,q]),ee=Object(n.useCallback)((e=>$({key:"tags",value:e})),[$]),te=Object(n.useCallback)((e=>$({key:"title",value:e})),[$]),ae=Object(n.useCallback)((e=>$({key:"status",value:e})),[$]),se=Object(n.useMemo)((()=>{return{subject:(n=e.title,g.i18n.translate("xpack.cases.caseView.emailSubject",{values:{caseTitle:n},defaultMessage:"Security Case - {caseTitle}"})),body:(a=T({detailName:t}),g.i18n.translate("xpack.cases.caseView.emailBody",{values:{caseUrl:a},defaultMessage:"Case reference: {caseUrl}"}))};var a,n}),[e.title,T,t]);Object(n.useEffect)((()=>{I&&!F&&w(!1)}),[I,F]);const re=Object(n.useCallback)(((e,t)=>{m&&m(e,t)}),[m]);return Object(n.useEffect)((()=>{A.current&&(A.current=!1,r&&r())}),[r]),s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,{showBackButton:!0,"data-test-subj":"case-view-title",titleNode:s.a.createElement(Pe,{userCanCrud:j,isLoading:G&&"title"===H,title:e.title,onSubmit:te}),title:e.title},s.a.createElement(Ya,{caseData:e,currentExternalIncident:X,userCanCrud:j,isLoading:G&&("status"===H||"settings"===H),onRefresh:B,onUpdateField:$})),s.a.createElement(Na,null,s.a.createElement(Ma,null,s.a.createElement(C.EuiFlexGroup,null,s.a.createElement(C.EuiFlexItem,null,!I&&O.length>0?s.a.createElement(ps,{"data-test-subj":"case-view-metrics",isLoading:U,metrics:M,features:O}):null)),s.a.createElement(C.EuiSpacer,{size:"m"}),s.a.createElement(C.EuiFlexGroup,null,s.a.createElement(C.EuiFlexItem,{grow:6},I&&s.a.createElement(C.EuiLoadingContent,{lines:8,"data-test-subj":"case-view-loading-content"}),!I&&s.a.createElement(C.EuiFlexGroup,{direction:"column",responsive:!1},s.a.createElement(C.EuiFlexItem,null,s.a.createElement(ka,{getRuleDetailsHref:null==d?void 0:d.href,onRuleDetailsClick:null==d?void 0:d.onClick,caseServices:R,caseUserActions:S,data:e,actionsNavigation:u,fetchUserActions:D,isLoadingDescription:G&&"description"===H,isLoadingUserActions:F,onShowAlertDetails:re,onUpdateField:$,statusActionButton:j?s.a.createElement(Ln,{status:e.status,onStatusChanged:ae,isLoading:G&&"status"===H}):null,updateCase:p,useFetchAlertData:h,userCanCrud:j})))),s.a.createElement(C.EuiFlexItem,{grow:2},s.a.createElement(Ra,{"data-test-subj":"case-view-user-list-reporter",email:se,headline:v.L,users:[e.createdBy]}),s.a.createElement(Ra,{"data-test-subj":"case-view-user-list-participants",email:se,headline:v.J,loading:F,users:N}),s.a.createElement(Qe,{"data-test-subj":"case-view-tag-list",userCanCrud:j,tags:e.tags,onSubmit:ee,isLoading:G&&"tags"===H}),s.a.createElement(In,{caseData:e,caseServices:R,connectorName:Y,connectors:q,hasDataToPush:_&&j,isLoading:W||G&&"connector"===H,isValidConnector:!!W||Q,onSubmit:J,permissionsError:K,updateCase:V,userActions:S,userCanCrud:j}))))),null!=k&&k.renderTimelineDetailsPanel?k.renderTimelineDetailsPanel():null)}));gs.displayName="CaseViewPage";const bs=R()(C.EuiFlexGroup).withConfig({displayName:"MyEuiFlexGroup",componentId:"sc-bqd51x-0"})(["height:100%;"]),fs=()=>s.a.createElement(bs,{gutterSize:"none",justifyContent:"center",alignItems:"center"},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiLoadingSpinner,{"data-test-subj":"case-view-loading",size:"xl"}))),hs=s.a.memo((({onComponentInitialized:e,actionsNavigation:t,ruleDetailsNavigation:a,showAlertDetails:r,timelineIntegration:u,useFetchAlertData:d,refreshRef:m})=>{const{spaces:p}=Object(o.d)().services,{detailName:g}=Object(i.k)(),{basePath:b}=Object(E.a)(),{data:f,resolveOutcome:h,resolveAliasId:C,isLoading:y,isError:v,fetchCase:x,updateCase:j}=(e=>{const[t,a]=Object(n.useReducer)(ue,{isLoading:!1,isError:!1,data:null,resolveOutcome:null}),s=Object(o.g)(),r=Object(n.useRef)(!1),i=Object(n.useRef)(new AbortController),u=Object(n.useCallback)((e=>{a({type:"UPDATE_CASE",payload:e})}),[]),d=Object(n.useCallback)((async(t=!1)=>{try{r.current=!1,i.current.abort(),i.current=new AbortController,a({type:"FETCH_INIT",payload:{silent:t}});const n=await Object(l.o)(e,!0,i.current.signal);r.current||a({type:"FETCH_SUCCESS",payload:n})}catch(e){r.current||("AbortError"!==e.name&&s.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.d}),a({type:"FETCH_FAILURE"}))}}),[e,s]);return Object(n.useEffect)((()=>(d(),()=>{r.current=!0,i.current.abort()})),[e]),{...t,fetchCase:d,updateCase:u}})(g);Object(n.useEffect)((()=>{if(p&&"aliasMatch"===h&&null!=C){const e=`${b}${Object(i.c)({detailName:C})}${window.location.search}${window.location.hash}`;p.ui.redirectLegacyUrl(e,Te)}}),[h,C,b,p]);const O=Object(n.useCallback)((()=>{if(f&&p&&"conflict"===h&&null!=C){const e=`${b}${Object(i.c)({detailName:C})}${window.location.search}${window.location.hash}`;return p.ui.components.getLegacyUrlConflict({objectNoun:Te,currentObjectId:f.id,otherObjectId:C,otherObjectPath:e})}return null}),[f,C,h,b,p]);return v?s.a.createElement(Fe,{caseId:g}):y?s.a.createElement(fs,null):f&&s.a.createElement(_e.b,{timelineIntegration:u},O(),s.a.createElement(gs,{caseData:f,caseId:g,fetchCase:x,onComponentInitialized:e,actionsNavigation:t,ruleDetailsNavigation:a,showAlertDetails:r,updateCase:j,useFetchAlertData:d,refreshRef:m}))}));fs.displayName="CaseViewLoading",hs.displayName="CaseView";var Cs=a(52),ys=a(112);Object(Ve.i)({component:Ve.b});const vs=s.a.memo((({afterCaseCreated:e,onCancel:t,onSuccess:a,timelineIntegration:n,withSteps:r})=>(h(i.a.casesCreate),s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,{showBackButton:!0,"data-test-subj":"case-create-title",title:Cs.e}),s.a.createElement(ys.a,{afterCaseCreated:e,onCancel:t,onSuccess:a,timelineIntegration:n,withSteps:r})))));vs.displayName="CreateCase";var xs=a(62);var js=a(110),Os=a(106),Ts=a(54);const Is=({isLoading:e,casesField:t,selectedActionType:a,selectedThirdParty:r})=>{const i=Object(n.useMemo)((()=>Object(ne.capitalize)(a)),[a]);return s.a.createElement(C.EuiFlexGroup,{"data-test-subj":"static-mappings",alignItems:"center",responsive:!1},s.a.createElement(C.EuiFlexItem,null,s.a.createElement(C.EuiFlexGroup,{component:"span",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(C.EuiFlexItem,{component:"span",grow:!1},s.a.createElement(C.EuiCode,{"data-test-subj":"field-mapping-source"},t)),s.a.createElement(C.EuiFlexItem,{component:"span",grow:!1},s.a.createElement(C.EuiIcon,{type:"sortRight"})))),s.a.createElement(C.EuiFlexItem,null,s.a.createElement(C.EuiFlexGroup,{component:"span",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(C.EuiFlexItem,{component:"span",grow:!1},e?s.a.createElement(C.EuiLoadingSpinner,{size:"m"}):s.a.createElement(C.EuiCode,{"data-test-subj":"field-mapping-target"},r)))),s.a.createElement(C.EuiFlexItem,null,e?s.a.createElement(C.EuiLoadingSpinner,{size:"m"}):i))};Is.displayName="FieldMappingRow";const ws=s.a.memo(Is),As=R.a.div.withConfig({displayName:"FieldRowWrapper",componentId:"sc-lo3da2-0"})(["margin:10px 0;font-size:14px;"]),ks=({actionTypeName:e,isLoading:t,mappings:a})=>a.length?s.a.createElement(C.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.a.createElement(C.EuiFlexItem,null," ",s.a.createElement(C.EuiFlexGroup,{responsive:!1},s.a.createElement(C.EuiFlexItem,null,s.a.createElement("span",{className:"euiFormLabel"},Ts.l)),s.a.createElement(C.EuiFlexItem,{"data-test-subj":"case-configure-field-mappings-second-col-label"},s.a.createElement("span",{className:"euiFormLabel"},Ts.m(e))),s.a.createElement(C.EuiFlexItem,null,s.a.createElement("span",{className:"euiFormLabel"},Ts.n)))),s.a.createElement(C.EuiFlexItem,null,s.a.createElement(As,{"data-test-subj":"case-configure-field-mappings-row-wrapper"},a.map((e=>{var a;return s.a.createElement(ws,{key:`${e.source}`,casesField:e.source,isLoading:t,selectedActionType:e.actionType,selectedThirdParty:null!==(a=e.target)&&void 0!==a?a:"not_mapped"})}))))):null;ks.displayName="FieldMapping";const Ss=s.a.memo(ks),Ls=({actionTypeName:e,isLoading:t,mappings:a})=>{const r=Object(n.useMemo)((()=>a.length>0||t?{desc:Ts.j(e),color:"subdued"}:{desc:Ts.k(e),color:"danger"}),[t,a.length,e]);return s.a.createElement(C.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(C.EuiText,{size:"xs","data-test-subj":"field-mapping-text"},s.a.createElement("h4",null,Ts.o(e)),s.a.createElement(C.EuiTextColor,{"data-test-subj":"field-mapping-desc",color:r.color},r.desc))),s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(Ss,{actionTypeName:e,"data-test-subj":"case-mappings-field",isLoading:t,mappings:a})))};Ls.displayName="Mapping";const Rs=s.a.memo(Ls);var _s=a(65);const Fs=R()(C.EuiFormRow).withConfig({displayName:"EuiFormRowExtended",componentId:"sc-h7jvjf-0"})([".euiFormRow__labelWrapper{.euiFormRow__label{width:100%;}}"]),Ns=({actionTypes:e,connectors:t,disabled:a,handleShowEditFlyout:r,isLoading:i,mappings:o,onChangeConnector:l,selectedConnector:c,updateConnectorDisabled:d})=>{var m;const p=Object(n.useMemo)((()=>t.find((e=>e.id===c.id))),[t,c.id]),E=null!==(m=null==p?void 0:p.name)&&void 0!==m?m:"none",g=Object(n.useMemo)((()=>{var t,a;return null!==(t=null===(a=e.find((e=>e.id===c.type)))||void 0===a?void 0:a.name)&&void 0!==t?t:"Unknown"}),[e,c.type]),b=Object(n.useMemo)((()=>s.a.createElement(C.EuiFlexGroup,{justifyContent:"spaceBetween"},s.a.createElement(C.EuiFlexItem,{grow:!1},Ts.q),s.a.createElement(C.EuiFlexItem,{grow:!1},"none"!==E&&s.a.createElement(C.EuiLink,{disabled:d,onClick:r,"data-test-subj":"case-configure-update-selected-connector-button"},Ts.u(E))))),[E,r,d]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(C.EuiDescribedFormGroup,{fullWidth:!0,title:s.a.createElement("h3",null,Ts.r),description:Ts.p,"data-test-subj":"case-connectors-form-group"},s.a.createElement(Fs,{fullWidth:!0,label:b,"data-test-subj":"case-connectors-form-row"},s.a.createElement(C.EuiFlexGroup,{direction:"column"},s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(Os.a,{connectors:t,disabled:a,selectedConnector:c.id,isLoading:i,onChange:l,"data-test-subj":"case-connectors-dropdown",appendAddConnectorButton:!0})),c.type!==u.n.none&&Object(un.d)(p)&&s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(_s.a,null)),c.type!==u.n.none?s.a.createElement(C.EuiFlexItem,{grow:!1},s.a.createElement(Rs,{actionTypeName:g,isLoading:i,mappings:o})):null))))};Ns.displayName="Connectors";const Ds=s.a.memo(Ns),Ms=[{id:"close-by-user",label:Ts.d},{id:"close-by-pushing",label:Ts.e}],Us=({closureTypeSelected:e,disabled:t,onChangeClosureType:a})=>{const r=Object(n.useCallback)((e=>{a(e)}),[a]);return s.a.createElement(C.EuiRadioGroup,{disabled:t,options:Ms,idSelected:e,onChange:r,name:"closure_options","data-test-subj":"closure-options-radio-group"})};Us.displayName="ClosureOptionsRadio";const Ps=s.a.memo(Us),Bs=({closureTypeSelected:e,disabled:t,onChangeClosureType:a})=>s.a.createElement(C.EuiDescribedFormGroup,{fullWidth:!0,title:s.a.createElement("h3",null,Ts.f),description:s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,Ts.b)),"data-test-subj":"case-closure-options-form-group"},s.a.createElement(C.EuiFormRow,{fullWidth:!0,label:Ts.c,"data-test-subj":"case-closure-options-form-row"},s.a.createElement(Ps,{closureTypeSelected:e,disabled:t,onChangeClosureType:a,"data-test-subj":"case-closure-options-radio"})));Bs.displayName="ClosureOptions";const Vs=s.a.memo(Bs),zs=R.a.div.withConfig({displayName:"FormWrapper",componentId:"sc-1kx5o74-0"})(["",""],(({theme:e})=>Object(L.css)(["& > *{margin-top 40px;}& >:first-child{margin-top:0;}padding-top:",";padding-bottom:",";.euiFlyout{z-index:",";}"],e.eui.paddingSizes.xl,e.eui.paddingSizes.xl,e.eui.euiZNavigation+1))),$s=s.a.memo((()=>{const{userCanCrud:e}=Object(E.a)(),{triggersActionsUi:t}=Object(o.d)().services;h(i.a.casesConfigure);const[a,r]=Object(n.useState)(!0),[l,u]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!1),[p,g]=Object(n.useState)(null),{connector:b,closureType:f,loading:v,mappings:x,persistLoading:j,persistCaseConfigure:O,refetchCaseConfigure:T,setConnector:I,setClosureType:w}=Object(js.a)(),{loading:A,connectors:k,refetchConnectors:S}=Object(wn.a)(),{loading:L,actionTypes:R,refetchActionTypes:_}=(()=>{const e=Object(o.g)(),[t,a]=Object(n.useState)(!0),[s,r]=Object(n.useState)([]),i=Object(n.useRef)(!1),l=Object(n.useRef)(new AbortController),u=Object(n.useRef)(!0),d=Object(n.useCallback)((async()=>{try{a(!0),i.current=!1,l.current.abort(),l.current=new AbortController;const e=await Object(xs.a)({signal:l.current.signal});i.current||(a(!1),r(e))}catch(t){i.current||(a(!1),r([]),e.addError(t.body&&t.body.message?new Error(t.body.message):t,{title:c.d}))}}),[e]);return Object(n.useEffect)((()=>(u.current&&(d(),u.current=!1),()=>{i.current=!0,l.current.abort(),u.current=!0})),[d]),{loading:t,actionTypes:s,refetchActionTypes:d}})(),F=Object(n.useMemo)((()=>R.filter((e=>Ne.y.includes(e.id)))),[R]),N=Object(n.useCallback)((async()=>{S(),_(),T()}),[_,T,S]),D=A||j||v||L,M=D||!a||"none"===b.id,U=Object(n.useCallback)((()=>{m(!0)}),[]),P=Object(n.useCallback)((()=>u(!1)),[u]),B=Object(n.useCallback)((()=>m(!1)),[]),V=Object(n.useCallback)((e=>{if("add-connector"===e)return void u(!0);const t=Object(un.a)(e,k),a=null!=t?Object(An.b)(t):Object(An.a)();I(a),O({connector:a,closureType:f})}),[k,f,O,I]),z=Object(n.useCallback)((e=>{w(e),O({connector:b,closureType:e})}),[b,O,w]);Object(n.useEffect)((()=>{A||"none"===b.id||k.some((e=>e.id===b.id))?A||"none"!==b.id&&!k.some((e=>e.id===b.id))||r(!0):r(!1)}),[k,b,A]),Object(n.useEffect)((()=>{A||"none"===b.id||g(Object(An.c)(k,b))}),[k,b,A]);const $=Object(n.useMemo)((()=>l?t.getAddConnectorFlyout({consumer:"case",onClose:P,actionTypes:F,reloadConnectors:N}):null),[l,F]),G=Object(n.useMemo)((()=>p&&d?t.getEditConnectorFlyout({initialConnector:p,consumer:"case",onClose:B,reloadConnectors:N}):null),[b.id,d]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,{showBackButton:!0,"data-test-subj":"case-configure-title",title:Ts.g}),s.a.createElement(Na,null,s.a.createElement(Ma,null,s.a.createElement(zs,null,!a&&s.a.createElement(Da,{style:{marginTop:0}},s.a.createElement(C.EuiCallOut,{title:Ts.v,color:"warning",iconType:"help","data-test-subj":"configure-cases-warning-callout"},s.a.createElement(y.FormattedMessage,{defaultMessage:"The selected connector has been deleted or you do not have the {appropriateLicense} to use it. Either select a different connector or create a new one.",id:"xpack.cases.configure.connectorDeletedOrLicenseWarning",values:{appropriateLicense:s.a.createElement(C.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Ts.s)}}))),s.a.createElement(Da,null,s.a.createElement(Vs,{closureTypeSelected:f,disabled:j||A||!e,onChangeClosureType:z})),s.a.createElement(Da,null,s.a.createElement(Ds,{actionTypes:R,connectors:null!=k?k:[],disabled:j||A||!e,handleShowEditFlyout:U,isLoading:D,mappings:x,onChangeConnector:V,selectedConnector:b,updateConnectorDisabled:M||!e})),$,G))))}));$s.displayName="ConfigureCases";const Gs=e=>g.i18n.translate("xpack.cases.noPrivileges.message",{values:{pageName:e},defaultMessage:"To view {pageName} page, you must update privileges. For more information, contact your Kibana administrator."}),Hs=g.i18n.translate("xpack.cases.noPrivileges.title",{defaultMessage:"Privileges required"}),Ws=g.i18n.translate("xpack.cases.noPrivileges.button",{defaultMessage:"Back to Cases"}),qs=s.a.memo((({pageName:e})=>{const{navigateToAllCases:t}=Object(i.i)();return s.a.createElement(C.EuiEmptyPrompt,{iconColor:"default",iconType:"addDataApp",title:s.a.createElement("h2",null,Hs),titleSize:"xs",body:s.a.createElement("p",null,Gs(e)),actions:s.a.createElement(C.EuiButton,{onClick:t,size:"s",color:"primary",fill:!0},Ws)})}));qs.displayName="NoPrivilegesPage";g.i18n.translate("xpack.cases.noPrivileges.title",{defaultMessage:"Privileges required"}),g.i18n.translate("xpack.cases.noPrivileges.button",{defaultMessage:"Back to Cases"});const Ks=g.i18n.translate("xpack.cases.createCase",{defaultMessage:"Create Case"}),Ys=g.i18n.translate("xpack.cases.configureCases",{defaultMessage:"Configure Cases"}),Qs=g.i18n.translate("xpack.cases.badge.readOnly.text",{defaultMessage:"Read only"}),Xs=g.i18n.translate("xpack.cases.badge.readOnly.tooltip",{defaultMessage:"Unable to create or edit cases"});const Zs=({onComponentInitialized:e,actionsNavigation:t,ruleDetailsNavigation:a,showAlertDetails:l,useFetchAlertData:c,refreshRef:u,timelineIntegration:d})=>{const{basePath:m,userCanCrud:p}=Object(E.a)(),{navigateToAllCases:g}=Object(i.i)(),{navigateToCaseView:b}=Object(i.j)();!function(){const{userCanCrud:e}=Object(E.a)(),t=Object(o.d)().services.chrome,a=Object(n.useCallback)((()=>{e||t.setBadge({text:Qs,tooltip:Xs,iconType:"glasses"})}),[t,e]);Object(n.useEffect)((()=>(a(),()=>{t.setBadge()})),[a,t])}();const f=Object(n.useCallback)((async({id:e})=>b({detailName:e})),[b]);return s.a.createElement(r.Switch,null,s.a.createElement(r.Route,{strict:!0,exact:!0,path:m},s.a.createElement(ce,null)),s.a.createElement(r.Route,{path:Object(i.h)(m)},p?s.a.createElement(vs,{onSuccess:f,onCancel:g,timelineIntegration:d}):s.a.createElement(qs,{pageName:Ks})),s.a.createElement(r.Route,{path:Object(i.f)(m)},p?s.a.createElement($s,null):s.a.createElement(qs,{pageName:Ys})),s.a.createElement(r.Route,{exact:!0,path:[Object(i.e)(m),Object(i.d)(m)]},s.a.createElement(hs,{onComponentInitialized:e,actionsNavigation:t,ruleDetailsNavigation:a,showAlertDetails:l,useFetchAlertData:c,refreshRef:u,timelineIntegration:d})),s.a.createElement(r.Route,{path:m},s.a.createElement(r.Redirect,{to:m})))};Zs.displayName="CasesRoutes";const Js=s.a.memo(Zs)}])]);