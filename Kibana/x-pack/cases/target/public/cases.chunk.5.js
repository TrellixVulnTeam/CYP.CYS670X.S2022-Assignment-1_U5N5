/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[5],{188:function(e,t,n){"use strict";n.r(t),n.d(t,"CreateCaseFlyout",(function(){return g})),n.d(t,"default",(function(){return g}));var r=n(2),o=n.n(r),a=n(34),c=n.n(a),s=n(11),i=n(52),u=n(112);const l=c()(s.EuiFlyout).withConfig({displayName:"StyledFlyout",componentId:"sc-kvniza-0"})(["",""],(({theme:e})=>`\n      z-index: ${e.eui.euiZModal};\n    `)),d="create-case-flyout-mask-overlay",f=Object(a.createGlobalStyle)([".","{","}"],d,(({theme:e})=>`\n    z-index: ${e.eui.euiZLevel5};\n  `)),b=c()(s.EuiFlyoutBody).withConfig({displayName:"StyledEuiFlyoutBody",componentId:"sc-kvniza-1"})(["",""],(({theme:e})=>`\n      && .euiFlyoutBody__overflow {\n        overflow-y: auto;\n        overflow-x: hidden;\n      }\n\n      && .euiFlyoutBody__overflowContent {\n        display: block;\n        padding: ${e.eui.paddingSizes.l} ${e.eui.paddingSizes.l} 70px;\n        height: auto;\n      }\n    `)),y=c.a.div.withConfig({displayName:"FormWrapper",componentId:"sc-kvniza-2"})(["width:100%;"]),g=o.a.memo((({afterCaseCreated:e,onClose:t,onSuccess:n})=>o.a.createElement(o.a.Fragment,null,o.a.createElement(f,null),o.a.createElement(l,{onClose:t,"data-test-subj":"create-case-flyout",maskProps:{className:d}},o.a.createElement(s.EuiFlyoutHeader,{hasBorder:!0},o.a.createElement(s.EuiTitle,{size:"m"},o.a.createElement("h2",null,i.e))),o.a.createElement(b,null,o.a.createElement(y,null,o.a.createElement(u.a,{afterCaseCreated:e,onCancel:t,onSuccess:n,withSteps:!1})))))));g.displayName="CreateCaseFlyout"},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n(3),o=n(70),a=n(60);const c=(e,t)=>{var n;return null!==(n=t.find((t=>t.id===e)))&&void 0!==n?n:null},s={[r.n.swimlane]:o.a,[r.n.serviceNowITSM]:a.a,[r.n.serviceNowSIR]:a.a},i=({connectors:e=[],config:t={}})=>({...t,validations:[{validator:({value:t})=>{const n=c(t,e);var r;if(null!=n)return null===(r=s[n.actionTypeId])||void 0===r?void 0:r.call(s,n)}}]}),u=(e,t)=>{if(null==t)return"";try{if(e.actionTypeRegistry.has(t))return e.actionTypeRegistry.get(t).iconClass}catch{return""}return""},l=e=>null!=e&&((".servicenow"===e.actionTypeId||".servicenow-sir"===e.actionTypeId)&&!!e.config.usesTableApi)},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>{const{config:{usesTableApi:t}}=e;if(t)return{message:"Deprecated connector"}}},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),o=n(62),a=n(13),c=n(72);const s=({toastPermissionsErrors:e=!0}={})=>{const t=Object(a.g)(),[n,s]=Object(r.useState)({loading:!0,connectors:[]}),i=Object(r.useRef)(!1),u=Object(r.useRef)(new AbortController),l=Object(r.useCallback)((async()=>{try{i.current=!1,u.current.abort(),u.current=new AbortController,s({...n,loading:!0});const e=await Object(o.b)({signal:u.current.signal});i.current||s({loading:!1,connectors:e})}catch(n){if(!i.current){let o;var r,a;if("AbortError"!==n.name)403!==(null===(r=n.body)||void 0===r?void 0:r.statusCode)&&401!==(null===(a=n.body)||void 0===a?void 0:a.statusCode)||(o=c.b),(void 0===o||e)&&t.addError(n.body&&n.body.message?new Error(n.body.message):n,{title:c.a});s({loading:!1,connectors:[],permissionsError:o})}}}),[]);return Object(r.useEffect)((()=>(l(),()=>{i.current=!0,u.current.abort()})),[]),{loading:n.loading,connectors:n.connectors,refetchConnectors:l,permissionsError:n.permissionsError}}},62:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return b}));var r=n(22),o=n(19),a=n(3),c=n(4),s=n(13),i=n(24);const u=async({signal:e})=>await s.a.get().http.fetch(`${c.g}/_find`,{method:"GET",signal:e}),l=async({signal:e,owner:t})=>{const n=await s.a.get().http.fetch(c.i,{method:"GET",signal:e,query:{...t.length>0?{owner:t}:{}}});if(!Object(r.isEmpty)(n)){const e=Object(i.e)(n);if(Array.isArray(e)&&e.length>0)return Object(i.c)(e[0])}return null},d=async(e,t)=>{const n=await s.a.get().http.fetch(c.i,{method:"POST",body:JSON.stringify(e),signal:t});return Object(i.c)(Object(i.f)(n))},f=async(e,t,n)=>{const r=await s.a.get().http.fetch(Object(a.s)(e),{method:"PATCH",body:JSON.stringify(t),signal:n});return Object(i.c)(Object(i.f)(r))},b=async({signal:e})=>{const t=await s.a.get().http.fetch(Object(o.a)(),{method:"GET",signal:e});return Object(i.b)(t)}},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),o=n(46),a=n(16),c=n(13);const s=(e,t)=>{switch(t.type){case"FETCH_INIT":return{isLoading:!0,isError:!1};case"FETCH_SUCCESS":return{isLoading:!1,isError:!1};case"FETCH_FAILURE":return{isLoading:!1,isError:!0};default:return e}},i=()=>{const[e,t]=Object(r.useReducer)(s,{isLoading:!1,isError:!1}),n=Object(c.g)(),i=Object(r.useRef)(!1),u=Object(r.useRef)(new AbortController),l=Object(r.useCallback)((async({caseId:e,data:r,updateCase:c})=>{try{i.current=!1,u.current.abort(),u.current=new AbortController,t({type:"FETCH_INIT"});const n=await Object(o.m)(r,e,u.current.signal);i.current||(t({type:"FETCH_SUCCESS"}),c&&c(n))}catch(e){i.current||("AbortError"!==e.name&&n.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:a.d}),t({type:"FETCH_FAILURE"}))}}),[n]);return Object(r.useEffect)((()=>()=>{i.current=!0,u.current.abort()}),[]),{...e,postComment:l}}},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3);const o=["caseIdConfig","caseNameConfig","descriptionConfig","commentsConfig"],a=e=>{const{config:{mappings:t,connectorType:n}}=e;if(n===r.p.Alerts||(a=t,o.some((e=>null==(null==a?void 0:a[e])))))return{message:"Invalid connector"};var a}},71:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),o=n(13),a=n(18),c=n(46),s=n(16);const i=(e,t)=>{switch(t.type){case"FETCH_INIT":return{...e,isLoading:!0,isError:!1};case"FETCH_SUCCESS":return{...e,isLoading:!1,isError:!1,tags:t.payload};case"FETCH_FAILURE":return{...e,isLoading:!1,isError:!0};default:return e}},u=[],l=()=>{const{owner:e}=Object(a.a)(),[t,n]=Object(r.useReducer)(i,{isLoading:!0,isError:!1,tags:u}),l=Object(o.g)(),d=Object(r.useRef)(!1),f=Object(r.useRef)(new AbortController),b=Object(r.useCallback)((async()=>{try{d.current=!1,f.current.abort(),f.current=new AbortController,n({type:"FETCH_INIT"});const t=await Object(c.h)(f.current.signal,e);d.current||n({type:"FETCH_SUCCESS",payload:t})}catch(e){d.current||("AbortError"!==e.name&&l.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:s.d}),n({type:"FETCH_FAILURE"}))}}),[]);return Object(r.useEffect)((()=>(b(),()=>{d.current=!0,f.current.abort()})),[]),{...t,fetchTags:b}}},72:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(1),o=n(16);n.d(t,"a",(function(){return o.d}));const a=r.i18n.translate("xpack.cases.configure.successSaveToast",{defaultMessage:"Saved external connection settings"}),c=r.i18n.translate("xpack.cases.configure.readPermissionsErrorDescription",{defaultMessage:"You do not have permissions to view connectors. If you would like to view the connectors associated with this case, contact your Kibana administrator."})},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(13);const o=(e="crud")=>{const{capabilities:t}=Object(r.d)().services.application,n=`${e}_cases`;return Object.entries(t).reduce(((e,[t,r])=>(t.endsWith("Cases")&&r[n]&&e.push(t.replace("Cases","")),e)),[])}}}]);