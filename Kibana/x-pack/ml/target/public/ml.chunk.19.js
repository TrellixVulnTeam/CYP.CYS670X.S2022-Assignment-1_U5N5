/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[19],{160:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s(16);var n=s(44),i=s(12);const a=()=>Object(i.jsx)(n.EuiText,{textAlign:"center"},Object(i.jsx)(n.EuiSpacer,{size:"l"}),Object(i.jsx)(n.EuiLoadingSpinner,{size:"l"}),Object(i.jsx)(n.EuiSpacer,{size:"l"}))},279:function(e,t,s){"use strict";s.r(t),s.d(t,"getDefaultExplorerChartsPanelTitle",(function(){return f})),s.d(t,"AnomalyChartsEmbeddable",(function(){return anomaly_charts_embeddable_AnomalyChartsEmbeddable}));var n=s(5),i=s.n(n),a=s(16),r=s.n(a),o=s(52),d=s.n(o),l=s(2),u=s(25),c=s(46),b=s(50);const h=r.a.lazy((()=>Promise.all([s.e(2),s.e(16)]).then(s.bind(null,767))));var p=s(109),m=s(160),j=s(12);const f=e=>l.i18n.translate("xpack.ml.anomalyChartsEmbeddable.title",{defaultMessage:"ML anomaly charts for {jobIds}",values:{jobIds:e.join(", ")}});class anomaly_charts_embeddable_AnomalyChartsEmbeddable extends b.Embeddable{constructor(e,t,s){super(e,{defaultTitle:e.title},s),i()(this,"node",void 0),i()(this,"reload$",new u.Subject),i()(this,"type",p.a),this.services=t,this.initializeOutput(e)}async initializeOutput(e){const{anomalyExplorerService:t}=this.services[2],{jobIds:s}=e;try{const e=await t.getCombinedJobs(s),n=this.services[1].data.dataViews,i=new Set(e.map((e=>e.datafeed_config.indices)).flat()),a={};for(const e of i){const t=(await n.find(`"${e}"`)).find((t=>t.title.toLowerCase()===e.toLowerCase()));void 0!==t&&(a[t.id]=t)}this.updateOutput({...this.getOutput(),indexPatterns:Object.values(a)})}catch(e){console.error(`Unable to load data views for ${s}`,e)}}render(e){super.render(e),this.node=e;const t=this.services[0].i18n.Context,s=this.services[0].theme.theme$;d.a.render(Object(j.jsx)(t,null,Object(j.jsx)(c.KibanaThemeProvider,{theme$:s},Object(j.jsx)(c.KibanaContextProvider,{services:{...this.services[0]}},Object(j.jsx)(a.Suspense,{fallback:Object(j.jsx)(m.a,null)},Object(j.jsx)(h,{id:this.input.id,embeddableContext:this,embeddableInput:this.getInput$(),services:this.services,refresh:this.reload$.asObservable(),onInputChange:this.updateInput.bind(this),onOutputChange:this.updateOutput.bind(this)}))))),e)}destroy(){super.destroy(),this.node&&d.a.unmountComponentAtNode(this.node)}reload(){this.reload$.next()}supportedTriggers(){return[]}}}}]);