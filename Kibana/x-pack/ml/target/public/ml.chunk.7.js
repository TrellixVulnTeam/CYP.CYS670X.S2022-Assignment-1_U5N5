/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[7,9],{213:function(e,t,o){"use strict";o.r(t),o.d(t,"AnomalyDetectorService",(function(){return AnomalyDetectorService}));var n=o(5),s=o.n(n),r=o(28),a=o(73);class AnomalyDetectorService{constructor(e){s()(this,"apiBasePath",Object(a.basePath)()+"/anomaly_detectors"),this.httpService=e}getJobById$(e){return this.httpService.http$({path:`${this.apiBasePath}/${e}`}).pipe(Object(r.map)((e=>e.jobs[0])))}getJobs$(e){return this.httpService.http$({path:`${this.apiBasePath}/${e.join(",")}`}).pipe(Object(r.map)((e=>e.jobs)))}extractInfluencers(e){Array.isArray(e)||(e=[e]);const t=new Set;for(const o of e)for(const e of o.analysis_config.influencers||[])t.add(e);return Array.from(t)}}},267:function(e,t,o){"use strict";o.d(t,"a",(function(){return h}));var n=o(24),s=o.n(n),r=o(28),a=o(25),c=(o(16),o(180)),i=o(46),l=o(276),u=o(62),b=o(256),p=o(12);async function h(e,t){const{http:o,uiSettings:n,theme:h,application:{currentAppId$:j}}=e;return new Promise((async(d,m)=>{try{const y={groupsMap:Object(c.b)([]),jobsMap:{}},f=n.get("dateFormat:tz"),v="Browser"!==f?f:s.a.tz.guess(),S=()=>{w.close(),m()},O=async({jobIds:e,groups:t})=>{await w.close(),d({jobIds:e,groups:t})},w=e.overlays.openFlyout(Object(i.toMountPoint)(Object(i.wrapWithTheme)(Object(p.jsx)(i.KibanaContextProvider,{services:{...e,mlServices:Object(l.getMlGlobalServices)(o)}},Object(p.jsx)(b.a,{selectedIds:t,withTimeRangeSelector:!1,dateFormatTz:v,singleSelection:!1,timeseriesOnly:!0,onFlyoutClose:S,onSelectionConfirmed:O,maps:y})),h.theme$)),{"data-test-subj":"mlFlyoutJobSelector",ownFocus:!0,closeButtonAriaLabel:"jobSelectorFlyout"});j.pipe(Object(r.takeUntil)(Object(a.from)(w.onClose))).subscribe((e=>{e!==u.DashboardConstants.DASHBOARDS_ID&&w.close()}))}catch(e){m(e)}}))}},761:function(e,t,o){"use strict";o.r(t),o.d(t,"resolveEmbeddableAnomalyChartsUserInput",(function(){return b}));o(16);var n=o(85),s=o(46),r=o(213),a=o(279),c=o(105),i=o(267),l=o(372),u=o(12);async function b(e,t){const{http:o,overlays:b}=e,p=new r.AnomalyDetectorService(new c.a(o));return new Promise((async(o,r)=>{try{var c;const{jobIds:h}=await Object(i.a)(e,null==t?void 0:t.jobIds),j=null!==(c=null==t?void 0:t.title)&&void 0!==c?c:Object(a.getDefaultExplorerChartsPanelTitle)(h),d=await p.getJobs$(h).toPromise();p.extractInfluencers(d).push(n.j);const{theme$:m}=e.theme,y=b.openModal(Object(s.toMountPoint)(Object(s.wrapWithTheme)(Object(u.jsx)(l.a,{defaultTitle:j,initialInput:t,onCreate:({panelTitle:e,maxSeriesToPlot:t})=>{y.close(),o({jobIds:h,title:e,maxSeriesToPlot:t})},onCancel:()=>{y.close(),r()}}),m)))}catch(e){r(e)}}))}}}]);