/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.fleet_bundle_jsonpfunction=window.fleet_bundle_jsonpfunction||[]).push([[3],{292:function(e,t,a){"use strict";a.r(t),a.d(t,"ProtectedRoute",(function(){return xe})),a.d(t,"renderApp",(function(){return Ce})),a.d(t,"teardownIntegrations",(function(){return Me}));var n=a(0),r=a.n(n),i=a(65),l=a.n(i),o=a(12),c=a(10),s=a(6),u=a(140),m=a.n(u),d=a(21),p=a(66),g=a(71),E=a(78),h=a(85),f=a(146),b=a(18),y=a.n(b),k=a(4),v=a(63),x=a(2),P=a(87),C=a(64),M=a.n(C),w=a(69),O=a(108),S=a(130);const j=M()(s.EuiCard).withConfig({displayName:"Card",componentId:"sc-1xgrkpq-0"})(["min-height:127px;"]);function I({description:e,name:t,title:a,version:n,icons:i,integration:l,url:o,release:c,id:u}){let m=null;c&&"ga"!==c&&(m=r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiSpacer,{size:"xs"}),r.a.createElement("span",null,r.a.createElement(s.EuiToolTip,{display:"inlineBlock",content:S.a[c]},r.a.createElement(s.EuiBadge,{color:"hollow"},S.b[c])))));const d=`integration-card:${u}`;return r.a.createElement(w.TrackApplicationView,{viewId:d},r.a.createElement(j,{"data-test-subj":d,layout:"horizontal",title:a||"",titleSize:"xs",description:e,hasBorder:!0,icon:r.a.createElement(O.a,{icons:i,packageName:t,integrationName:l,version:n,size:"xl"}),href:o,target:o.startsWith("http")||o.startsWith("https")?"_blank":void 0},m))}const L=({isLoading:e,controls:t,title:a,list:i,initialSearch:l,onSearchChange:o,setSelectedCategory:c,showMissingIntegrationMessage:u=!1,featuredList:m=null,callout:d})=>{const[p,g]=Object(n.useState)(l||""),h=Object(E.B)(i),f=Object(n.useRef)(null),[b,y]=Object(n.useState)(!1),[v]=Object(n.useState)(window.scrollY);Object(n.useEffect)((()=>{const e=f.current,t=()=>{e&&y((null==e?void 0:e.getBoundingClientRect().top)<110)};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)}),[v,b]);const x=r.a.createElement(T,{title:a,controls:t,sticky:b});let C;if(e||!h.current)C=r.a.createElement(P.g,null);else{const e=p?i.filter((e=>h.current.search(p).map((e=>e[E.f])).includes(e[E.f]))):i;C=r.a.createElement(_,{list:e,showMissingIntegrationMessage:u})}return r.a.createElement(r.a.Fragment,null,m,r.a.createElement("div",{ref:f},r.a.createElement(s.EuiFlexGroup,{alignItems:"flexStart",gutterSize:"xl"},r.a.createElement(s.EuiFlexItem,{grow:1,className:b?"kbnStickyMenu":""},x),r.a.createElement(s.EuiFlexItem,{grow:5},r.a.createElement(s.EuiSearchBar,{query:p||void 0,box:{placeholder:k.i18n.translate("xpack.fleet.epmList.searchPackagesPlaceholder",{defaultMessage:"Search for integrations"}),incremental:!0},onChange:({queryText:e,error:t})=>{t||(o(e),g(e))}}),d?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,null),d):null,r.a.createElement(s.EuiSpacer,null),C,u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,null),r.a.createElement(F,{resetQuery:()=>{g("")},setSelectedCategory:c}))))))};function T({controls:e,title:t,sticky:a}){let n;return t&&(n=r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiTitle,{size:"s"},r.a.createElement("h2",null,t)),r.a.createElement(s.EuiSpacer,{size:"l"}))),r.a.createElement(s.EuiFlexGroup,{direction:"column",className:a?"kbnStickyMenu":"",gutterSize:"none"},n,e)}function _({list:e,showMissingIntegrationMessage:t=!1}){return r.a.createElement(s.EuiFlexGrid,{gutterSize:"l",columns:3},e.length?e.map((e=>r.a.createElement(s.EuiFlexItem,{key:e.id},r.a.createElement(I,e)))):r.a.createElement(s.EuiFlexItem,{grow:3},r.a.createElement(s.EuiText,null,r.a.createElement("p",null,t?r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.epmList.missingIntegrationPlaceholder",defaultMessage:"We didn't find any integrations matching your search term. Please try another keyword or browse using the categories on the left."}):r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.epmList.noPackagesFoundPlaceholder",defaultMessage:"No integrations found"})))))}function F({resetQuery:e,setSelectedCategory:t}){const a=Object(n.useCallback)((()=>{e(),t("custom")}),[e,t]);return r.a.createElement(s.EuiText,{size:"s",color:"subdued"},r.a.createElement("p",null,r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.missing",defaultMessage:"Don't see an integration? Collect any logs or metrics using our {customInputsLink}. Request new integrations in our {forumLink}.",values:{customInputsLink:r.a.createElement(s.EuiLink,{onClick:a},r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.customInputsLink",defaultMessage:"custom inputs"})),forumLink:r.a.createElement(s.EuiLink,{href:"https://discuss.elastic.co/tag/integrations",external:!0,target:"_blank"},r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.discussForumLink",defaultMessage:"forum"}))}})))}const A={id:"",title:k.i18n.translate("xpack.fleet.epmList.allPackagesFilterLinkText",{defaultMessage:"All categories"})},R={id:"",title:k.i18n.translate("xpack.fleet.epmList.allPackagesInstalledFilterLinkText",{defaultMessage:"All installed"})};function z({isLoading:e,categories:t,selectedCategory:a,onCategoryChange:n}){return r.a.createElement(s.EuiFacetGroup,null,e?r.a.createElement(P.g,null):t.map((e=>r.a.createElement(s.EuiFacetButton,{isSelected:e.id===a,key:e.id,id:e.id,quantity:e.count,onClick:()=>n(e)},e.title))))}const N=()=>{const{docLinks:e}=Object(E.G)();return r.a.createElement(s.EuiLink,{href:e.links.fleet.learnMoreBlog,target:"_blank"},k.i18n.translate("xpack.fleet.epmList.availableCalloutBlogText",{defaultMessage:"announcement blog post"}))},G=()=>r.a.createElement(s.EuiCallOut,{title:k.i18n.translate("xpack.fleet.epmList.availableCalloutTitle",{defaultMessage:"Only installed Elastic Agent Integrations are displayed."}),iconType:"iInCircle"},r.a.createElement("p",null,r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.epmList.availableCalloutIntroText",defaultMessage:"To learn more about integrations and the Elastic Agent, read our {link}",values:{link:r.a.createElement(N,null)}}))),B=Object(n.memo)((()=>{Object(E.n)("integrations_installed");const{data:e,isLoading:t}=Object(E.w)({experimental:!0}),{getHref:a,getAbsolutePath:i}=Object(E.z)(),{selectedCategory:l,searchParam:c}=ae(Object(o.useParams)(),Object(o.useLocation)().search),s=Object(o.useHistory)();function u(e){const t=h.j.integrations_installed({category:e,searchTerm:c})[1];s.push(t)}const m=Object(n.useMemo)((()=>((null==e?void 0:e.response)||[]).filter((e=>e.status===x.Ab.Installed))),[null==e?void 0:e.response]),d=Object(n.useMemo)((()=>m.filter((e=>"savedObject"in e&&y()(e.savedObject.attributes.version,e.version)))),[m]),p=Object(n.useMemo)((()=>[{...R,count:m.length},{id:"updates_available",count:d.length,title:k.i18n.translate("xpack.fleet.epmList.updatesAvailableFilterLinkText",{defaultMessage:"Updates available"})}]),[m.length,d.length]);if(!ne(l,p))return s.replace(h.j.integrations_installed({category:"",searchTerm:c})[1]),null;const g=r.a.createElement(z,{categories:p,selectedCategory:l,onCategoryChange:({id:e})=>u(e)}),f=("updates_available"===l?d:m).map((e=>re(i,a,e))),b="updates_available"===l?null:r.a.createElement(G,null);return r.a.createElement(L,{isLoading:t,controls:g,setSelectedCategory:u,callout:b,onSearchChange:function(e){s.replace(h.j.integrations_installed({category:l,searchTerm:e})[1])},initialSearch:c,list:f})}));var $=a(8),H=a.n($),U=a(103),D=a(70);function V(e,t){const a=[],n=t,r=e.filter((e=>e.name!==x.J));r.forEach((e=>{const t=function(e,t,a){return"ga"===a?[]:Object(D.filterCustomIntegrations)(e,{eprPackageName:t})}(n,e.name,e.release);t.length?t.forEach((e=>{a.find((({id:t})=>t===e.id))||a.push(e)})):a.push(e)}));const i=n.filter((e=>!r.find((t=>t.name===e.eprOverlap))));return a.push(...i),a}const W=r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.recommendedTooltip",defaultMessage:"We recommend Elastic Agent integrations when they are generally available."}),q=M()(s.EuiFlexItem).withConfig({displayName:"Item",componentId:"sc-3a25e0-0"})(["padding-left:",";"],(e=>e.theme.eui.euiSizeXS)),K=[{type:"recommended",label:r.a.createElement(s.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},r.a.createElement(s.EuiFlexItem,{grow:!1},k.i18n.translate("xpack.fleet.epm.integrationPreference.recommendedLabel",{defaultMessage:"Recommended"})),r.a.createElement(q,null,r.a.createElement(s.EuiIconTip,{content:W})))},{type:"agent",label:k.i18n.translate("xpack.fleet.epm.integrationPreference.elasticAgentLabel",{defaultMessage:"Elastic Agent only"})},{type:"beats",label:k.i18n.translate("xpack.fleet.epm.integrationPreference.beatsLabel",{defaultMessage:"Beats only"})}],Y=({initialType:e,onChange:t})=>{const[a,n]=r.a.useState(e),{docLinks:i}=Object(E.G)(),l=r.a.createElement(s.EuiLink,{href:i.links.fleet.beatsAgentComparison},r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.titleLink",defaultMessage:"Elastic Agent and Beats"})),o=r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.title",defaultMessage:"If an integration is available for {link}, show:",values:{link:l}}),c=K.map((e=>({id:e.type,value:e.type,label:e.label})));return r.a.createElement(s.EuiPanel,{hasShadow:!1,paddingSize:"none"},r.a.createElement(s.EuiText,{size:"s"},o),r.a.createElement(s.EuiSpacer,{size:"m"}),r.a.createElement(s.EuiForm,null,r.a.createElement(s.EuiRadioGroup,{options:c,idSelected:a,onChange:(e,a)=>{n(e),t(a)},name:"preference"})),r.a.createElement(s.EuiSpacer,{size:"m"}))};var Q=a(73);const J=({statusCode:e})=>{let t,a;return 502===e?(t=k.i18n.translate("xpack.fleet.epmList.eprUnavailableBadGatewayCalloutTitle",{defaultMessage:"Kibana cannot reach the Elastic Package Registry, which provides Elastic Agent integrations\n"}),a=r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.epmList.eprUnavailableCallouBdGatewaytTitleMessage",defaultMessage:"To view these integrations, configure a  {registryproxy} or host {onpremregistry}.",values:{registryproxy:r.a.createElement(X,null),onpremregistry:r.a.createElement(Z,null)}})):(t=k.i18n.translate("xpack.fleet.epmList.eprUnavailable400500CalloutTitle",{defaultMessage:"Kibana cannot connect to the Elastic Package Registry, which provides Elastic Agent integrations\n"}),a=r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.epmList.eprUnavailableCallout400500TitleMessage",defaultMessage:"Ensure the {registryproxy} or {onpremregistry} is configured correctly, or try again later.",values:{registryproxy:r.a.createElement(X,null),onpremregistry:r.a.createElement(Z,null)}})),r.a.createElement(s.EuiCallOut,{title:t,iconType:"iInCircle",color:"warning"},r.a.createElement("p",null,a))};function X(){const{docLinks:e}=Object(E.G)();return r.a.createElement(s.EuiLink,{href:e.links.fleet.settingsFleetServerProxySettings,target:"_blank"},k.i18n.translate("xpack.fleet.epmList.proxyLinkSnippedText",{defaultMessage:"proxy server"}))}function Z(){const{docLinks:e}=Object(E.G)();return r.a.createElement(s.EuiLink,{href:e.links.fleet.onPremRegistry,target:"_blank"},k.i18n.translate("xpack.fleet.epmList.onPremLinkSnippetText",{defaultMessage:"your own registry"}))}function ee(e){var t;if(!Object(U.b)(e))return e.categories;const a=null===(t=e.policy_templates)||void 0===t?void 0:t.reduce(((e,t)=>[...e,...t.categories||[]]),e.categories||[]);return H.a.uniq(a)}const te=Object(n.memo)((()=>{const[e,t]=Object(n.useState)("recommended");Object(E.n)("integrations_all");const{http:a}=Object(E.G)(),i=a.basePath.prepend,{selectedCategory:l,searchParam:c}=ae(Object(o.useParams)(),Object(o.useLocation)().search),u=Object(o.useHistory)(),{getHref:m,getAbsolutePath:d}=Object(E.z)();function p(e){const t=h.j.integrations_all({category:e,searchTerm:c})[1];u.push(t)}const{data:g,isLoading:f,error:b}=Object(E.w)({category:""}),y=Object(n.useMemo)((()=>((null==g?void 0:g.items)||[]).reduce(((e,t)=>{const{policy_templates:a=[],categories:n=[],...r}=t;return[...e,{...r,categories:ee(t)},...Object(U.b)(t)?a.map((e=>{const{name:t,title:a,description:i,icons:l,categories:o=[]}=e,c=[...n,...o];return{...r,id:`${r.id}-${t}`,integration:t,title:a,description:i,icons:l||r.icons,categories:H.a.uniq(c)}})):[]]}),[])),[g]),{value:v}=Object(E.x)(),x=V("beats"===e?[]:y,"agent"===e?[]:v||[]),{loading:P,value:C}=Object(E.p)(),M=[...x,...C||[]].map((e=>re(d,m,e)));M.sort(((e,t)=>e.title.localeCompare(t.title)));const{data:O,isLoading:S,error:j}=Object(E.q)({include_policy_templates:!0}),I=Object(n.useMemo)((()=>{const e=S?[]:function(e,t){const a=[],n=(e,t,n)=>{const r=a.find((t=>t.id===e));r?r.count+=t:a.push({id:e,count:t,title:n})};e.forEach((e=>{n(e.id,0,e.title)})),t.forEach((e=>{e.categories.forEach((e=>{const t=Q.INTEGRATION_CATEGORY_DISPLAY[e]?Q.INTEGRATION_CATEGORY_DISPLAY[e]:e;n(e,1,t)}))}));const r=a.filter((e=>e.count>0));return r.sort(((e,t)=>e.id.localeCompare(t.id))),r}(O?O.items:[],M);return[{...A,count:M.length},...e||[]]}),[M,O,S]);if(!S&&!ne(l,I))return u.replace(h.j.integrations_all({category:"",searchTerm:c})[1]),null;let T=[r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiHorizontalRule,{margin:"m"}),r.a.createElement(Y,{initialType:e,onChange:t}))];I&&(T=[r.a.createElement(s.EuiFlexItem,{className:"eui-yScrollWithShadows"},r.a.createElement(z,{isLoading:S||f||P,categories:I,selectedCategory:l,onCategoryChange:({id:e})=>{p(e)}})),...T]);const _=M.filter((e=>""===l||e.categories.includes(l))),F=r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiFlexGrid,{columns:3},r.a.createElement(s.EuiFlexItem,null,r.a.createElement(w.TrackApplicationView,{viewId:"integration-card:epr:app_search_web_crawler:featured"},r.a.createElement(s.EuiCard,{"data-test-subj":"integration-card:epr:app_search_web_crawler:featured",icon:r.a.createElement(s.EuiIcon,{type:"logoAppSearch",size:"xxl"}),href:i("/app/enterprise_search/app_search/engines/new?method=crawler"),title:k.i18n.translate("xpack.fleet.featuredSearchTitle",{defaultMessage:"Web site crawler"}),description:k.i18n.translate("xpack.fleet.featuredSearchDesc",{defaultMessage:"Add search to your website with the App Search web crawler."})}))),r.a.createElement(s.EuiFlexItem,null,r.a.createElement(w.TrackApplicationView,{viewId:"integration-card:epr:apm:featured"},r.a.createElement(s.EuiCard,{"data-test-subj":"integration-card:epr:apm:featured",title:k.i18n.translate("xpack.fleet.featuredObsTitle",{defaultMessage:"Elastic APM"}),description:k.i18n.translate("xpack.fleet.featuredObsDesc",{defaultMessage:"Monitor, detect and diagnose complex performance issues from your application."}),href:i("/app/home#/tutorial/apm"),icon:r.a.createElement(s.EuiIcon,{type:"logoObservability",size:"xxl"})}))),r.a.createElement(s.EuiFlexItem,null,r.a.createElement(w.TrackApplicationView,{viewId:"integration-card:epr:endpoint:featured"},r.a.createElement(s.EuiCard,{"data-test-subj":"integration-card:epr:endpoint:featured",icon:r.a.createElement(s.EuiIcon,{type:"logoSecurity",size:"xxl"}),href:i("/app/integrations/detail/endpoint/"),title:k.i18n.translate("xpack.fleet.featuredSecurityTitle",{defaultMessage:"Endpoint Security"}),description:k.i18n.translate("xpack.fleet.featuredSecurityDesc",{defaultMessage:"Protect your hosts with threat prevention, detection, and deep security data visibility."})})))),r.a.createElement(s.EuiSpacer,{size:"xl"}));let R;if(b||j){const e=b||j;R=r.a.createElement(J,{statusCode:null==e?void 0:e.statusCode})}return r.a.createElement(L,{featuredList:F,isLoading:f,controls:T,initialSearch:c,list:_,setSelectedCategory:p,onSearchChange:function(e){u.replace(h.j.integrations_all({searchTerm:e})[1])},showMissingIntegrationMessage:!0,callout:R})})),ae=(e,t)=>{const{category:a}=e;return{selectedCategory:a||"",searchParam:new URLSearchParams(t).get(h.f)||""}},ne=(e,t)=>t.some((t=>t.id===e)),re=(e,t,a)=>{let n,r;if("ui_link"===a.type)n=e(a.uiInternalPath);else{let e=a.version;"savedObject"in a&&(e=a.savedObject.attributes.version||a.version);n=t("integration_details_overview",{pkgkey:`${a.name}-${e}`,...a.integration?{integration:a.integration}:{}})}return"release"in a?r=a.release:!0===a.isBeta&&(r="beta"),{id:`${"ui_link"===a.type?"ui_link":"epr"}:${a.id}`,description:a.description,icons:a.icons&&a.icons.length?a.icons:[],title:a.title,url:n,integration:"integration"in a&&a.integration||"",name:"name"in a&&a.name||"",version:"version"in a&&a.version||"",release:r,categories:(a.categories||[]).filter((e=>!!e))}},ie=Object(n.memo)((()=>r.a.createElement(o.Switch,null,r.a.createElement(o.Route,{path:h.e.integrations_installed},r.a.createElement(f.a,{section:"manage"},r.a.createElement(B,null))),r.a.createElement(o.Route,{path:h.e.integrations_all},r.a.createElement(f.a,{section:"browse"},r.a.createElement(te,null))))));var le=a(144),oe=a(120);const ce=Object(n.memo)((()=>{var e,t,a,n;const{params:{packagePolicyId:i}}=Object(o.useRouteMatch)(),l=Object(E.r)(i),c=Object(E.H)(null!==(e=null===(t=l.data)||void 0===t||null===(a=t.item)||void 0===a||null===(n=a.package)||void 0===n?void 0:n.name)&&void 0!==e?e:"","package-policy-edit");return r.a.createElement(oe.a,{packagePolicyId:i,from:"package-edit",forceUpgrade:null==c?void 0:c.useLatestPackageVersion})})),se=()=>(Object(E.n)("integrations"),r.a.createElement(o.Switch,null,r.a.createElement(o.Route,{path:h.e.integration_policy_edit},r.a.createElement(ce,null)),r.a.createElement(o.Route,{path:h.e.integration_details},r.a.createElement(le.a,null)),r.a.createElement(o.Route,{path:h.e.integrations},r.a.createElement(ie,null))));var ue,me=(ue=function(e,t){return(ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}ue(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),de=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return me(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,r=t.node;return i.createPortal(n.Children.map(a,(function(t){return n.isValidElement(t)?n.cloneElement(t,e.state.nodeProps):t})),r)},t}(n.PureComponent),pe=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=n.createRef(),a.passPropsThroughPortal(),a}return me(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node,t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node,t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return n.createElement("div",{ref:this.placeholderNode})},t}(n.PureComponent);const ge=({children:e,setHeaderActionMenu:t,theme$:a})=>{const i=Object(n.useMemo)((()=>function(){var e,t,a={},n=Object.assign(document.createElement("div"),{setPortalProps:function(e){a=e},getInitialPortalProps:function(){return a},mount:function(a,r){r!==t&&(n.unmount(),a.replaceChild(n,r),e=a,t=r)},unmount:function(a){a&&a!==t||e&&t&&(e.replaceChild(t,n),e=void 0,t=void 0)}});return n}()),[]);return Object(n.useEffect)((()=>(t((e=>Object(d.toMountPoint)(r.a.createElement(pe,{node:i}),{theme$:a})(e))),()=>{i.unmount(),t(void 0)})),[i,t,a]),r.a.createElement(de,{node:i},e)},Ee=M()(s.EuiText).withConfig({displayName:"Description",componentId:"sc-kml9g-0"})(["margin-bottom:",";"],(({theme:e})=>e.eui.euiSizeL)),he=({cloudId:e,learnMoreUrl:t,managementUrl:a})=>{const[n,i]=r.a.useState(!1),l=r.a.createElement(s.EuiHeaderLink,{onClick:()=>i(!n),iconType:"iInCircle",iconSide:"left",isActive:!0},k.i18n.translate("xpack.fleet.integrations.deploymentButton",{defaultMessage:"View deployment details"})),o=a?r.a.createElement(s.EuiFormRow,{label:"API keys",fullWidth:!0},r.a.createElement(s.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiButton,{href:a},"Create and manage API keys")),r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiLink,{external:!0,href:t,target:"_blank"},"Learn more")))):null;return r.a.createElement(s.EuiPopover,{isOpen:n,closePopover:()=>i(!1),button:l,anchorPosition:"downCenter"},r.a.createElement("div",{style:{width:450}},r.a.createElement(Ee,null,"Send data to Elastic from your applications by referencing your deployment and Elasticsearch information."),r.a.createElement(s.EuiForm,{component:"div"},r.a.createElement(s.EuiFormRow,{label:"Cloud ID",fullWidth:!0},r.a.createElement(s.EuiFlexGroup,{gutterSize:"s"},r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiFieldText,{value:e,fullWidth:!0,disabled:!0})),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiCopy,{textToCopy:e},(e=>r.a.createElement(s.EuiButtonIcon,{onClick:e,iconType:"copyClipboard",display:"base",size:"m"})))))),o)))},fe=()=>{var e;const{share:t,cloud:a,docLinks:n}=Object(E.G)();if(!a)return null;const{isCloudEnabled:i,cloudId:l}=a;if(!i||!l)return null;const o=null===(e=t.url.locators.get("MANAGEMENT_APP_LOCATOR"))||void 0===e?void 0:e.useUrl({sectionId:"security",appId:"api_keys"}),c=n.links.fleet.apiKeysLearnMore;return r.a.createElement(he,{cloudId:l,managementUrl:o,learnMoreUrl:c})},be=({setHeaderActionMenu:e,theme$:t})=>r.a.createElement(ge,{setHeaderActionMenu:e,theme$:t},r.a.createElement(s.EuiHeaderSection,{grow:!1},r.a.createElement(s.EuiHeaderSectionItem,null,r.a.createElement(s.EuiHeaderLinks,null,r.a.createElement(fe,null))))),ye=()=>r.a.createElement(r.a.Fragment,null),ke=Object(n.memo)((({children:e,startServices:t,config:a,history:n,kibanaVersion:i,extensions:l,setHeaderActionMenu:u,theme$:h})=>{var f;const b=m()(t.uiSettings.get$("theme:darkMode")),y=(null===(f=t.cloud)||void 0===f?void 0:f.CloudContextProvider)||ye;return r.a.createElement(d.RedirectAppLinks,{application:t.application},r.a.createElement(t.i18n.Context,null,r.a.createElement(d.KibanaContextProvider,{services:{...t}},r.a.createElement(s.EuiErrorBoundary,null,r.a.createElement(c.b.Provider,{value:a},r.a.createElement(c.d.Provider,{value:i},r.a.createElement(d.KibanaThemeProvider,{theme$:h},r.a.createElement(p.EuiThemeProvider,{darkMode:b},r.a.createElement(E.d.Provider,{value:l},r.a.createElement(c.c,null,r.a.createElement(t.customIntegrations.ContextProvider,null,r.a.createElement(y,null,r.a.createElement(o.Router,{history:n},r.a.createElement(E.a,null,r.a.createElement(E.c,{notifications:t.notifications,theme$:h},r.a.createElement(be,{setHeaderActionMenu:u,theme$:h}),e,r.a.createElement(g.Chat,null))))))))))))))))})),ve=Object(n.memo)((()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(o.Switch,null,r.a.createElement(o.Route,{path:h.e.integrations},r.a.createElement(se,null)),r.a.createElement(o.Route,{render:({location:e})=>{if(!(""===e.pathname&&e.hash.length>0))return r.a.createElement(o.Redirect,{to:h.j.integrations_all({})[1]});const t=e.hash.replace(/^#/,"");return r.a.createElement(o.Redirect,{to:{...e,pathname:t,hash:void 0}})}}))))),xe=({isAllowed:e=!1,restrictedPath:t="/",...a})=>e?r.a.createElement(o.Route,a):r.a.createElement(o.Redirect,{to:{pathname:t}}),Pe=({basepath:e,startServices:t,config:a,history:n,kibanaVersion:i,extensions:l,setHeaderActionMenu:o,theme$:c})=>r.a.createElement(ke,{basepath:e,startServices:t,config:a,history:n,kibanaVersion:i,extensions:l,setHeaderActionMenu:o,theme$:c},r.a.createElement(ve,null));function Ce(e,{element:t,appBasePath:a,history:n,setHeaderActionMenu:i,theme$:o},c,s,u,m){return l.a.render(r.a.createElement(m,null,r.a.createElement(Pe,{basepath:a,startServices:e,config:c,history:n,kibanaVersion:s,extensions:u,setHeaderActionMenu:i,theme$:o})),t),()=>{l.a.unmountComponentAtNode(t)}}const Me=e=>{e.chrome.docTitle.reset(),e.chrome.setBreadcrumbs([]),c.h.stop()}}}]);