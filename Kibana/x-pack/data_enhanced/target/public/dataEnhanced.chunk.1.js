/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.dataEnhanced_bundle_jsonpfunction=window.dataEnhanced_bundle_jsonpfunction||[]).push([[1],{24:function(e,t,s){"use strict";s.r(t),s.d(t,"SearchSessionsMgmtApp",(function(){return application_SearchSessionsMgmtApp})),s.d(t,"renderApp",(function(){return J}));var a=s(15),n=s(5),o=s(12),i=s.n(o),r=s(4),c=s(3),l=s(10),u=s(9),d=s(0),m=s.n(d),p=s(22),h=s(6),f=s(2);const g=e=>{const{searchSession:t,api:s,onActionDismiss:a}=e,{name:o,id:i}=t,[r,c]=Object(d.useState)(!1),l=n.i18n.translate("xpack.data.mgmt.searchSessions.cancelModal.title",{defaultMessage:"Delete search session"}),m=n.i18n.translate("xpack.data.mgmt.searchSessions.cancelModal.deleteButton",{defaultMessage:"Delete"}),p=n.i18n.translate("xpack.data.mgmt.searchSessions.cancelModal.cancelButton",{defaultMessage:"Cancel"}),h=n.i18n.translate("xpack.data.mgmt.searchSessions.cancelModal.message",{defaultMessage:"Deleting the search session '{name}' deletes all cached results.",values:{name:o}});return Object(f.jsx)(u.EuiConfirmModal,{title:l,onCancel:a,onConfirm:async()=>{c(!0),await s.sendCancel(i),a()},confirmButtonText:m,confirmButtonDisabled:r,cancelButtonText:p,defaultFocusedButton:"confirm",buttonColor:"danger"},h)};var x=s(27),S=s.n(x);const j=({...e})=>{const{searchSession:t,api:s,onActionDismiss:a}=e,{id:o,name:r,expires:c}=t,[l,m]=Object(d.useState)(!1),p=i.a.duration(s.getExtendByDuration()),h=i()(c).add(p),g=n.i18n.translate("xpack.data.mgmt.searchSessions.extendModal.title",{defaultMessage:"Extend search session expiration"}),x=n.i18n.translate("xpack.data.mgmt.searchSessions.extendModal.extendButton",{defaultMessage:"Extend expiration"}),S=n.i18n.translate("xpack.data.mgmt.searchSessions.extendModal.dontExtendButton",{defaultMessage:"Cancel"}),j=n.i18n.translate("xpack.data.mgmt.searchSessions.extendModal.extendMessage",{defaultMessage:"The search session '{name}' expiration would be extended until {newExpires}.",values:{name:r,newExpires:h.toLocaleString()}});return Object(f.jsx)(u.EuiConfirmModal,{title:g,onCancel:a,onConfirm:async()=>{m(!0),await s.sendExtend(o,`${h.toISOString()}`),m(!1),a()},confirmButtonText:x,confirmButtonDisabled:l,cancelButtonText:S,defaultFocusedButton:"confirm",buttonColor:"primary"},j)};s(28);const b=({uiSettings:e,searchSession:t})=>{const{Provider:s}=Object(h.createKibanaReactContext)({uiSettings:e});return Object(f.jsx)(s,null,Object(f.jsx)(u.EuiFlyoutHeader,{hasBorder:!0},Object(f.jsx)(u.EuiTitle,{size:"m"},Object(f.jsx)("h2",{id:"flyoutTitle"},Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.sessions.management.flyoutTitle",defaultMessage:"Inspect search session"})))),Object(f.jsx)(u.EuiFlyoutBody,{className:"searchSessionsFlyout","data-test-subj":"searchSessionsFlyout"},Object(f.jsx)(u.EuiText,null,Object(f.jsx)(u.EuiText,{size:"xs"},Object(f.jsx)("p",null,Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.sessions.management.flyoutText",defaultMessage:"Configuration for this search session"}))),Object(f.jsx)(u.EuiSpacer,null),Object(f.jsx)(d.Fragment,null,Object(f.jsx)(h.CodeEditor,{languageId:"json",value:JSON.stringify(t.initialState,null,2),options:{readOnly:!0,lineNumbers:"off",fontSize:12,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0}})))))};let M;!function(e){e.INSPECT="inspect",e.EXTEND="extend",e.DELETE="delete",e.RENAME="rename"}(M||(M={}));const E=({onActionDismiss:e,...t})=>{const{api:s,searchSession:a}=t,{id:o,name:i}=a,[r,c]=Object(d.useState)(!1),[l,m]=Object(d.useState)(i),p=n.i18n.translate("xpack.data.mgmt.searchSessions.renameModal.title",{defaultMessage:"Edit search session name"}),h=n.i18n.translate("xpack.data.mgmt.searchSessions.renameModal.renameButton",{defaultMessage:"Save"}),g=n.i18n.translate("xpack.data.mgmt.searchSessions.renameModal.cancelButton",{defaultMessage:"Cancel"}),x=n.i18n.translate("xpack.data.mgmt.searchSessions.renameModal.searchSessionNameInputLabel",{defaultMessage:"Search session name"}),S=l&&i!==l;return Object(f.jsx)(u.EuiModal,{onClose:e,initialFocus:"[name=newName]"},Object(f.jsx)(u.EuiModalHeader,null,Object(f.jsx)(u.EuiModalHeaderTitle,null,p)),Object(f.jsx)(u.EuiModalBody,null,Object(f.jsx)(u.EuiForm,null,Object(f.jsx)(u.EuiFormRow,{label:x},Object(f.jsx)(u.EuiFieldText,{name:"newName",placeholder:i,value:l,onChange:e=>m(e.target.value)})))),Object(f.jsx)(u.EuiModalFooter,null,Object(f.jsx)(u.EuiButtonEmpty,{onClick:e},g),Object(f.jsx)(u.EuiButton,{disabled:!S,onClick:async()=>{S&&(c(!0),await s.sendRename(o,l),c(!1),e())},fill:!0,isLoading:r},h)))},O=(e,t,s,a)=>{switch(t){case M.INSPECT:return((e,t,s)=>({iconType:"document",label:Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.mgmt.searchSessions.flyoutTitle","aria-label":"Inspect",defaultMessage:"Inspect"}),onClick:async()=>{const e=Object(f.jsx)(b,{uiSettings:s.uiSettings,searchSession:t}),a=s.overlays.openFlyout(Object(h.toMountPoint)(e,{theme$:s.theme.theme$}));await a.onClose}}))(0,s,a);case M.DELETE:return((e,t,s)=>({iconType:"crossInACircleFilled",label:Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.mgmt.searchSessions.actionDelete",defaultMessage:"Delete"}),onClick:async()=>{const a=s.overlays.openModal(Object(h.toMountPoint)(Object(f.jsx)(g,{onActionDismiss:()=>null==a?void 0:a.close(),searchSession:t,api:e}),{theme$:s.theme.theme$}));await a.onClose}}))(e,s,a);case M.EXTEND:return((e,t,s)=>({iconType:S.a,label:Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.mgmt.searchSessions.actionExtend",defaultMessage:"Extend"}),onClick:async()=>{const a=s.overlays.openModal(Object(h.toMountPoint)(Object(f.jsx)(j,{onActionDismiss:()=>null==a?void 0:a.close(),searchSession:t,api:e}),{theme$:s.theme.theme$}));await a.onClose}}))(e,s,a);case M.RENAME:return((e,t,s)=>({iconType:"pencil",label:Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.mgmt.searchSessions.actionRename",defaultMessage:"Edit name"}),onClick:async()=>{const a=s.overlays.openModal(Object(h.toMountPoint)(Object(f.jsx)(E,{onActionDismiss:()=>null==a?void 0:a.close(),api:e,searchSession:t}),{theme$:s.theme.theme$}));await a.onClose}}))(e,s,a);default:console.error(`Unknown action: ${t}`)}return null},v=({api:e,onActionComplete:t,session:s,core:a})=>{const[o,i]=Object(d.useState)(!1),r=()=>{i(!o)},c=()=>{i(!1)},l=s.actions||[],m=[{id:0,items:l.reduce(((n,o)=>{const i=O(e,o,s,a);if(i){const{label:e,iconType:s,onClick:a}=i;return l.length>1&&o===M.DELETE&&n.push({isSeparator:!0,key:"separadorable"}),[...n,{key:`action-${o}`,name:e,icon:s,"data-test-subj":`sessionManagementPopoverAction-${o}`,onClick:async()=>{c(),await a(),t()}}]}return n}),[])}];return l.length?Object(f.jsx)(u.EuiPopover,{id:`popover-${s.id}`,button:Object(f.jsx)(u.EuiToolTip,{content:n.i18n.translate("xpack.data.mgmt.searchSessions.actions.tooltip.moreActions",{defaultMessage:"More actions"})},Object(f.jsx)(u.EuiButtonIcon,{"aria-label":n.i18n.translate("xpack.data.mgmt.searchSessions.ariaLabel.moreActions",{defaultMessage:"More actions"}),color:"text",iconType:"boxesHorizontal",onClick:r})),isOpen:o,closePopover:c,anchorPosition:"downLeft",panelPaddingSize:"s"},Object(f.jsx)(u.EuiContextMenu,{initialPanelId:0,panels:m})):null};function y(e){switch(e.status){case l.SearchSessionStatus.COMPLETE:case l.SearchSessionStatus.IN_PROGRESS:return i()().diff(i()(e.expires),"ms")>0?l.SearchSessionStatus.EXPIRED:e.status}return e.status}function C(e,t,s){try{const a=e.get(t);return null==a?void 0:a.getRedirectUrl(s)}catch(e){console.error("Could not create URL from restoreState"),console.error(e)}}const k=(e,t)=>async t=>{const{name:s,appId:a,created:n,expires:o,locatorId:i,initialState:r,restoreState:c,idMapping:u,version:d}=t.attributes,m=y(t.attributes),p=function(e){const t=[];return t.push(M.INSPECT),t.push(M.RENAME),e!==l.SearchSessionStatus.IN_PROGRESS&&e!==l.SearchSessionStatus.COMPLETE||(t.push(M.EXTEND),t.push(M.DELETE)),e===l.SearchSessionStatus.EXPIRED&&t.push(M.DELETE),t}(m);r&&delete r.searchSessionId;const h=await C(e,i,r),f=await C(e,i,c);return{id:t.id,name:s,appId:a,created:n,expires:o,status:m,actions:p,restoreUrl:f,reloadUrl:h,initialState:r,restoreState:c,numSearches:Object.keys(u).length,version:d}};class api_SearchSessionsMgmtAPI{constructor(e,t,s){this.sessionsClient=e,this.config=t,this.deps=s}async fetchTableData(){const e=this.config.management,t=i.a.duration(e.refreshTimeout),s=Object(r.from)(this.sessionsClient.find({page:1,perPage:e.maxSessions,sortField:"created",sortOrder:"asc",searchFields:["persisted"],search:"true"})),a=Object(r.timer)(t.asMilliseconds()).pipe(Object(c.tap)((()=>{this.deps.notifications.toasts.addDanger(n.i18n.translate("xpack.data.mgmt.searchSessions.api.fetchTimeout",{defaultMessage:"Fetching the Search Session info timed out after {timeout} seconds",values:{timeout:t.asSeconds()}}))})),Object(c.mapTo)(null));try{const e=await Object(r.race)(s,a).toPromise();if(e&&e.saved_objects){const t=e.saved_objects;return await Promise.all(t.map(k(this.deps.locators,this.config)))}}catch(e){console.error(e),this.deps.notifications.toasts.addError(e,{title:n.i18n.translate("xpack.data.mgmt.searchSessions.api.fetchError",{defaultMessage:"Failed to refresh the page!"})})}return[]}reloadSearchSession(e){var t;null===(t=this.deps.usageCollector)||void 0===t||t.trackSessionReloaded(),this.deps.application.navigateToUrl(e)}getExtendByDuration(){return this.config.defaultExpiration}async sendCancel(e){var t;null===(t=this.deps.usageCollector)||void 0===t||t.trackSessionDeleted();try{await this.sessionsClient.delete(e),this.deps.notifications.toasts.addSuccess({title:n.i18n.translate("xpack.data.mgmt.searchSessions.api.deleted",{defaultMessage:"The search session was deleted."})})}catch(e){this.deps.notifications.toasts.addError(e,{title:n.i18n.translate("xpack.data.mgmt.searchSessions.api.deletedError",{defaultMessage:"Failed to delete the search session!"})})}}async sendExtend(e,t){var s;null===(s=this.deps.usageCollector)||void 0===s||s.trackSessionExtended();try{await this.sessionsClient.extend(e,t),this.deps.notifications.toasts.addSuccess({title:n.i18n.translate("xpack.data.mgmt.searchSessions.api.extended",{defaultMessage:"The search session was extended."})})}catch(e){this.deps.notifications.toasts.addError(e,{title:n.i18n.translate("xpack.data.mgmt.searchSessions.api.extendError",{defaultMessage:"Failed to extend the search session!"})})}}async sendRename(e,t){try{await this.sessionsClient.rename(e,t),this.deps.notifications.toasts.addSuccess({title:n.i18n.translate("xpack.data.mgmt.searchSessions.api.rename",{defaultMessage:"The search session was renamed"})})}catch(e){this.deps.notifications.toasts.addError(e,{title:n.i18n.translate("xpack.data.mgmt.searchSessions.api.renameError",{defaultMessage:"Failed to rename the search session"})})}}}var T=s(7),w=s.n(T);class documentation_AsyncSearchIntroDocumentation{constructor(e){w()(this,"docUrl","");const{links:t}=e;this.docUrl=t.search.sessions}getElasticsearchDocLink(){return`${this.docUrl}`}}var I=s(13),D=s.n(I),L=s(23),A=s(33),R=s.n(A),N=s(35),F=s.n(N);const _=({children:e,...t})=>Object(f.jsx)(u.EuiText,D()({size:"m"},t),e);var P=s(11);const B="D MMM, YYYY, HH:mm:ss",z=(e,t)=>{if(null==e)throw new Error("Invalid date string!");let s;return s="Browser"===t?i.a.utc(e).tz(i.a.tz.guess()).format(B):i()(e).tz(t).format(B),s},U=e=>{switch(e){case l.SearchSessionStatus.IN_PROGRESS:return n.i18n.translate("xpack.data.mgmt.searchSessions.status.label.inProgress",{defaultMessage:"In progress"});case l.SearchSessionStatus.EXPIRED:return n.i18n.translate("xpack.data.mgmt.searchSessions.status.label.expired",{defaultMessage:"Expired"});case l.SearchSessionStatus.CANCELLED:return n.i18n.translate("xpack.data.mgmt.searchSessions.status.label.cancelled",{defaultMessage:"Cancelled"});case l.SearchSessionStatus.COMPLETE:return n.i18n.translate("xpack.data.mgmt.searchSessions.status.label.complete",{defaultMessage:"Complete"});case l.SearchSessionStatus.ERROR:return n.i18n.translate("xpack.data.mgmt.searchSessions.status.label.error",{defaultMessage:"Error"});default:return console.error(`Unknown status ${e}`),e}},H=e=>{try{const t=(({now:e,session:t,timezone:s})=>{let a;switch(a=t.expires?z(t.expires,s):n.i18n.translate("xpack.data.mgmt.searchSessions.status.expireDateUnknown",{defaultMessage:"unknown"}),t.status){case l.SearchSessionStatus.IN_PROGRESS:try{return{textColor:"default",icon:Object(f.jsx)(u.EuiLoadingSpinner,null),label:Object(f.jsx)(_,null,U(t.status)),toolTipContent:n.i18n.translate("xpack.data.mgmt.searchSessions.status.message.createdOn",{defaultMessage:"Expires on {expireDate}",values:{expireDate:a}})}}catch(e){throw console.error(e),new Error(`Could not instantiate a createdDate object from: ${t.created}`)}case l.SearchSessionStatus.EXPIRED:try{const e=n.i18n.translate("xpack.data.mgmt.searchSessions.status.message.expiredOn",{defaultMessage:"Expired on {expireDate}",values:{expireDate:a}});return{icon:Object(f.jsx)(u.EuiIcon,{color:"#9AA",type:"clock"}),label:Object(f.jsx)(_,null,U(t.status)),toolTipContent:e}}catch(e){throw console.error(e),new Error(`Could not instantiate an expiration Date object from: ${t.expires}`)}case l.SearchSessionStatus.CANCELLED:return{icon:Object(f.jsx)(u.EuiIcon,{color:"#9AA",type:"crossInACircleFilled"}),label:Object(f.jsx)(_,null,U(t.status)),toolTipContent:n.i18n.translate("xpack.data.mgmt.searchSessions.status.message.cancelled",{defaultMessage:"Cancelled by user"})};case l.SearchSessionStatus.ERROR:return{textColor:"danger",icon:Object(f.jsx)(u.EuiIcon,{color:"danger",type:"crossInACircleFilled"}),label:Object(f.jsx)(_,null,U(t.status)),toolTipContent:n.i18n.translate("xpack.data.mgmt.searchSessions.status.message.error",{defaultMessage:"Error: {error}",values:{error:t.error||"unknown"}})};case l.SearchSessionStatus.COMPLETE:try{const e=n.i18n.translate("xpack.data.mgmt.searchSessions.status.expiresOn",{defaultMessage:"Expires on {expireDate}",values:{expireDate:a}});return{textColor:"success",icon:Object(f.jsx)(u.EuiIcon,{color:"success",type:"checkInCircleFilled"}),label:Object(f.jsx)(_,null,U(t.status)),toolTipContent:e}}catch(e){throw console.error(e),new Error(`Could not instantiate an expiration Date object for completed session from: ${t.expires}`)}return null;default:throw new Error(`Unknown status: ${t.status}`)}})(e),{session:s}=e;if(t){const{toolTipContent:e}=t;let a=t.icon,n=t.label;return a&&e&&(a=Object(f.jsx)(u.EuiToolTip,{content:e},a)),e&&(n=Object(f.jsx)(u.EuiToolTip,{content:e},Object(f.jsx)(_,{"data-test-subj":"sessionManagementStatusTooltip"},t.label))),Object(f.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(f.jsx)(u.EuiFlexItem,{grow:!1},a),Object(f.jsx)(u.EuiFlexItem,{grow:!1},Object(f.jsx)(_,{color:t.textColor,"data-test-subj":"sessionManagementStatusLabel","data-test-status":s.status},n)))}}catch(e){console.error(e)}return Object(f.jsx)(_,null,e.session.status)},$=e=>{if("ml"===e)return n.i18n.translate("xpack.data.mgmt.searchSessions.table.mlAppName",{defaultMessage:"Machine Learning"})};const Y=(e,t,s,a,o,r,c)=>[{field:"appId",name:n.i18n.translate("xpack.data.mgmt.searchSessions.table.headerType",{defaultMessage:"App"}),sortable:!0,render:(e,{id:t})=>{var s;const a=`${(e=>"dashboards"===e?"dashboard":"ml"===e?"machineLearning":e)(e)}`;return Object(f.jsx)(u.EuiToolTip,{content:null!==(s=$(e))&&void 0!==s?s:Object(P.capitalize)(a)},Object(f.jsx)(u.EuiIcon,{"data-test-subj":"sessionManagementAppIcon","data-test-app-id":a,type:`${a}App`}))}},{field:"name",name:n.i18n.translate("xpack.data.mgmt.searchSessions.table.headerName",{defaultMessage:"Name"}),sortable:!0,width:"20%",render:(s,{restoreUrl:a,reloadUrl:n,status:o,version:i})=>{var r,d;const g=function(e){return e===l.SearchSessionStatus.IN_PROGRESS||e===l.SearchSessionStatus.COMPLETE}(o),x=g?a:n,S=g?null===(r=t.data.search.usageCollector)||void 0===r?void 0:r.trackSessionViewRestored:null===(d=t.data.search.usageCollector)||void 0===d?void 0:d.trackSessionReloaded,j=g?null:Object(f.jsx)(m.a.Fragment,null," ",Object(f.jsx)(u.EuiIconTip,{type:"alert",content:Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.mgmt.searchSessions.table.notRestorableWarning",defaultMessage:"The search session will be executed again. You can then save it for future use."})})),b=g&&i!==c?Object(f.jsx)(m.a.Fragment,null," ",Object(f.jsx)(u.EuiIconTip,{type:"alert",iconProps:{"data-test-subj":"versionIncompatibleWarningTestSubj"},content:Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.mgmt.searchSessions.table.versionIncompatibleWarning",defaultMessage:"This search session was created in a Kibana instance running a different version. It may not restore correctly."})})):null;return Object(f.jsx)(h.RedirectAppLinks,{application:e.application},Object(f.jsx)(u.EuiLink,{href:x,onClick:()=>null==S?void 0:S(),"data-test-subj":"sessionManagementNameCol"},Object(f.jsx)(_,null,s,j,b)))}},{field:"numSearches",name:n.i18n.translate("xpack.data.mgmt.searchSessions.table.numSearches",{defaultMessage:"# Searches"}),sortable:!0,render:(e,t)=>Object(f.jsx)(_,{color:"subdued","data-test-subj":"sessionManagementNumSearchesCol"},e)},{field:"status",name:n.i18n.translate("xpack.data.mgmt.searchSessions.table.headerStatus",{defaultMessage:"Status"}),sortable:!0,render:(e,t)=>Object(f.jsx)(H,{session:t,timezone:o})},{field:"created",name:n.i18n.translate("xpack.data.mgmt.searchSessions.table.headerStarted",{defaultMessage:"Created"}),sortable:!0,render:(e,{id:t})=>{try{const t=z(e,o);return Object(f.jsx)(_,{color:"subdued","data-test-subj":"sessionManagementCreatedCol"},t)}catch(t){return console.error(t),Object(f.jsx)(_,null,e)}}},{field:"expires",name:n.i18n.translate("xpack.data.mgmt.searchSessions.table.headerExpiration",{defaultMessage:"Expiration"}),sortable:!0,render:(e,{id:t,status:s})=>{if(e&&s!==l.SearchSessionStatus.EXPIRED&&s!==l.SearchSessionStatus.CANCELLED&&s!==l.SearchSessionStatus.ERROR)try{const t=z(e,o);return Object(f.jsx)(_,{color:"subdued","data-test-subj":"sessionManagementExpiresCol"},t)}catch(t){return console.error(t),Object(f.jsx)(_,null,e)}return Object(f.jsx)(_,{color:"subdued","data-test-subj":"sessionManagementExpiresCol"},"--")}},{field:"status",name:"",sortable:!1,render:(e,{expires:t})=>{const s=((e,t)=>{const s=i.a.utc().valueOf(),a=i.a.utc(t).valueOf(),o=i.a.duration(a-s),r=Math.floor(o.asDays()),c=Math.ceil(i.a.duration(e.management.expiresSoonWarning).asDays());let l=n.i18n.translate("xpack.data.mgmt.searchSessions.status.expiresSoonInDays",{defaultMessage:"Expires in {numDays} days",values:{numDays:r}}),u=n.i18n.translate("xpack.data.mgmt.searchSessions.status.expiresSoonInDaysTooltip",{defaultMessage:"{numDays} days",values:{numDays:r}});if(0===r){const e=Math.floor(o.asHours());l=n.i18n.translate("xpack.data.mgmt.searchSessions.status.expiresSoonInHours",{defaultMessage:"This session expires in {numHours} hours",values:{numHours:e}}),u=n.i18n.translate("xpack.data.mgmt.searchSessions.status.expiresSoonInHoursTooltip",{defaultMessage:"{numHours} hours",values:{numHours:e}})}if(o.valueOf()>0&&r<=c)return{toolTipContent:l,statusContent:u}})(a,t);if(s){const{toolTipContent:e,statusContent:t}=s;return Object(f.jsx)(u.EuiToolTip,{content:e},Object(f.jsx)(u.EuiBadge,{color:"warning","data-test-subj":"sessionManagementStatusCol"},t))}return Object(f.jsx)(_,null)}},{field:"actions",name:"",sortable:!1,render:(t,a)=>{if(t&&t.length)return Object(f.jsx)(u.EuiFlexGroup,{gutterSize:"l",justifyContent:"flexEnd",alignItems:"flexEnd"},Object(f.jsx)(u.EuiFlexItem,{grow:!1,"data-test-subj":"sessionManagementActionsCol"},Object(f.jsx)(v,{api:s,key:`popkey-${a.id}`,session:a,core:e,onActionComplete:r})))}}],W=e=>({type:"field_value_selection",name:n.i18n.translate("xpack.data.mgmt.searchSessions.search.filterApp",{defaultMessage:"App"}),field:"appId",multiSelect:"or",options:e.reduce(((e,{appId:t})=>e.find((e=>e.value===t))?e:[...e,{value:t,view:Object(P.capitalize)(t)}]),[])}),X=e=>({type:"field_value_selection",name:n.i18n.translate("xpack.data.mgmt.searchSessions.search.filterStatus",{defaultMessage:"Status"}),field:"status",multiSelect:"or",options:e.reduce(((e,t)=>{const{status:s}=t;if(!e.find((e=>e.value===s))){const a=Object(f.jsx)(_,null,U(t.status));return[...e,{value:s,view:a}]}return e}),[])});function G({core:e,api:t,timezone:s,config:a,plugins:n,kibanaVersion:o,...r}){const[c,m]=Object(d.useState)([]),[h,g]=Object(d.useState)(!1),[x,S]=Object(d.useState)(!1),[j,b]=Object(d.useState)({pageIndex:0}),M=Object(d.useRef)(),E=Object(d.useMemo)((()=>i.a.duration(a.management.refreshInterval).asMilliseconds()),[a.management.refreshInterval]);R()((()=>{S(h)}),250,[h]);const O=Object(d.useCallback)((async()=>{g(!0);const e=e=>{m(e)};M.current=e;let s=[];try{s=await t.fetchTableData()}catch(e){}M.current===e&&(e(s),g(!1))}),[t]);Object(d.useEffect)((()=>{var e;O(),null===(e=n.data.search.usageCollector)||void 0===e||e.trackSessionsListLoaded()}),[O,n]),F()(O,E);const v={box:{incremental:!0},filters:[X(c),W(c)],toolsRight:Object(f.jsx)(_,null,Object(f.jsx)(u.EuiButton,{fill:!0,iconType:"refresh",onClick:O,disabled:x,isLoading:x,"data-test-subj":"sessionManagementRefreshBtn"},Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.mgmt.searchSessions.search.tools.refresh",defaultMessage:"Refresh"})))};return Object(f.jsx)(u.EuiInMemoryTable,D()({},r,{id:l.SEARCH_SESSIONS_TABLE_ID,"data-test-subj":l.SEARCH_SESSIONS_TABLE_ID,rowProps:e=>({"data-test-subj":"searchSessionsRow","data-test-search-session-id":`id-${e.id}`}),columns:Y(e,n,t,a,s,(()=>{O()}),o),items:c,pagination:j,search:v,sorting:{sort:{field:"created",direction:"desc"}},onTableChange:({page:{index:e}})=>{b({pageIndex:e})},tableLayout:"auto"}))}function V({documentation:e,...t}){return Object(f.jsx)(m.a.Fragment,null,Object(f.jsx)(u.EuiPageHeader,{pageTitle:Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.mgmt.searchSessions.main.sectionTitle",defaultMessage:"Search Sessions"}),description:Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.mgmt.searchSessions.main.sectionDescription",defaultMessage:"Manage your saved search sessions."}),bottomBorder:!0,rightSideItems:[Object(f.jsx)(u.EuiButtonEmpty,{href:e.getElasticsearchDocLink(),target:"_blank",iconType:"help"},Object(f.jsx)(p.FormattedMessage,{id:"xpack.data.mgmt.searchSessions.main.backgroundSessionsDocsLinkText",defaultMessage:"Documentation"}))]}),Object(f.jsx)(u.EuiSpacer,{size:"l"}),Object(f.jsx)(G,D()({"data-test-subj":"search-sessions-mgmt-table"},t)))}const J=(e,{i18n:t,uiSettings:s,...a})=>{if(!e)return()=>{};const{Context:n}=t,{Provider:o}=Object(h.createKibanaReactContext)({uiSettings:s});return Object(L.render)(Object(f.jsx)(n,null,Object(f.jsx)(o,null,Object(f.jsx)(V,D()({},a,{timezone:s.get("dateFormat:tz")})))),e),()=>{Object(L.unmountComponentAtNode)(e)}};class application_SearchSessionsMgmtApp{constructor(e,t,s,a,n){this.coreSetup=e,this.config=t,this.kibanaVersion=s,this.params=a,this.pluginsSetup=n}async mountManagementSection(){const{coreSetup:e,params:t,pluginsSetup:s}=this,[n,o]=await e.getStartServices(),{chrome:{docTitle:i},http:r,docLinks:c,i18n:l,notifications:u,uiSettings:d,application:m}=n,{data:p,share:h}=o,f=a.a.getI18nName();i.change(f),t.setBreadcrumbs([{text:f}]);const{sessionsClient:g}=p.search,x=new api_SearchSessionsMgmtAPI(g,this.config,{notifications:u,locators:h.url.locators,application:m,usageCollector:s.data.search.usageCollector}),S=new documentation_AsyncSearchIntroDocumentation(c),j={plugins:s,config:this.config,documentation:S,core:n,api:x,http:r,i18n:l,uiSettings:d,share:h,kibanaVersion:this.kibanaVersion},{element:b}=t,M=J(b,j);return()=>{i.reset(),M()}}}},25:function(e,t,s){"use strict";var a,n=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},o=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),i=[];function r(e){for(var t=-1,s=0;s<i.length;s++)if(i[s].identifier===e){t=s;break}return t}function c(e,t){for(var s={},a=[],n=0;n<e.length;n++){var o=e[n],c=t.base?o[0]+t.base:o[0],l=s[c]||0,u="".concat(c," ").concat(l);s[c]=l+1;var d=r(u),m={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(i[d].references++,i[d].updater(m)):i.push({identifier:u,updater:g(m,t),references:1}),a.push(u)}return a}function l(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var n=s.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function m(e,t,s,a){var n=s?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var o=document.createTextNode(n),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function p(e,t,s){var a=s.css,n=s.media,o=s.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var h=null,f=0;function g(e,t){var s,a,n;if(t.singleton){var o=f++;s=h||(h=l(t)),a=m.bind(null,s,o,!1),n=m.bind(null,s,o,!0)}else s=l(t),a=p.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var s=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<s.length;a++){var n=r(s[a]);i[n].references--}for(var o=c(e,t),l=0;l<s.length;l++){var u=r(s[l]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}s=o}}}},26:function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s=e[1]||"",a=e[3];if(!a)return s;if(t&&"function"==typeof btoa){var n=(i=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(c," */")),o=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[s].concat(o).concat([n]).join("\n")}var i,r,c;return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,a){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(a)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(n[i]=!0)}for(var r=0;r<e.length;r++){var c=[].concat(e[r]);a&&n[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),t.push(c))}},t}},27:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAxNiAxNiI+CiAgPHBhdGggZmlsbD0iIzM0Mzc0MSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQgNWwtMy0ydjEuMzMzMzNINHYxLjMzMzM0aDdWN2wzLTJ6TTAgMTEuNWMwLS44Mjg0LjY3MTU3My0xLjUgMS41LTEuNWgxMy4wMDAyYy44Mjg1IDAgMS41LjY3MTYgMS41IDEuNXMtLjY3MTUgMS41LTEuNSAxLjVIMS41Qy42NzE1NzMgMTMgMCAxMi4zMjg0IDAgMTEuNXptMTQuNTAwMi0uNUgxMXYxaDMuNTAwMmMuMjc2MiAwIC41LS4yMjM5LjUtLjVzLS4yMjM4LS41LS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+Cjwvc3ZnPgo="},28:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(29);case"v8light":return s(31)}},29:function(e,t,s){var a=s(25),n=s(30);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};a(n,o);e.exports=n.locals||{}},30:function(e,t,s){(t=s(26)(!1)).push([e.i,".searchSessionsFlyout .euiFlyoutBody__overflowContent{height:100%}.searchSessionsFlyout .euiFlyoutBody__overflowContent>div{height:100%}\n",""]),e.exports=t},31:function(e,t,s){var a=s(25),n=s(32);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};a(n,o);e.exports=n.locals||{}},32:function(e,t,s){(t=s(26)(!1)).push([e.i,".searchSessionsFlyout .euiFlyoutBody__overflowContent{height:100%}.searchSessionsFlyout .euiFlyoutBody__overflowContent>div{height:100%}\n",""]),e.exports=t},33:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(17),n=s(0),o=a.__importDefault(s(34));t.default=function(e,t,s){void 0===t&&(t=0),void 0===s&&(s=[]);var a=o.default(e,t),i=a[0],r=a[1],c=a[2];return n.useEffect(c,s),[i,r]}},34:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(0);t.default=function(e,t){void 0===t&&(t=0);var s=a.useRef(!1),n=a.useRef(),o=a.useRef(e),i=a.useCallback((function(){return s.current}),[]),r=a.useCallback((function(){s.current=!1,n.current&&clearTimeout(n.current),n.current=setTimeout((function(){s.current=!0,o.current()}),t)}),[t]),c=a.useCallback((function(){s.current=null,n.current&&clearTimeout(n.current)}),[]);return a.useEffect((function(){o.current=e}),[e]),a.useEffect((function(){return r(),c}),[t]),[i,c,r]}},35:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(0);t.default=function(e,t){var s=a.useRef((function(){}));a.useEffect((function(){s.current=e})),a.useEffect((function(){if(null!==t){var e=setInterval((function(){return s.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}}}]);